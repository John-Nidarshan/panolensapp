(self.webpackChunkpanolens_angular_app=self.webpackChunkpanolens_angular_app||[]).push([[179],{343:(cu,pn,wr)=>{"use strict";function Te(e){return"function"==typeof e}function te(e){const r=e(i=>{Error.call(i),i.stack=(new Error).stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}const ji=te(e=>function(r){e(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((i,a)=>`${a+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r});function Di(e,n){if(e){const r=e.indexOf(n);0<=r&&e.splice(r,1)}}class nn{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const u of r)u.remove(this);else r.remove(this);const{initialTeardown:i}=this;if(Te(i))try{i()}catch(u){n=u instanceof ji?u.errors:[u]}const{_finalizers:a}=this;if(a){this._finalizers=null;for(const u of a)try{Cn(u)}catch(h){n=n??[],h instanceof ji?n=[...n,...h.errors]:n.push(h)}}if(n)throw new ji(n)}}add(n){var r;if(n&&n!==this)if(this.closed)Cn(n);else{if(n instanceof nn){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(n)}}_hasParent(n){const{_parentage:r}=this;return r===n||Array.isArray(r)&&r.includes(n)}_addParent(n){const{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(n),r):r?[r,n]:n}_removeParent(n){const{_parentage:r}=this;r===n?this._parentage=null:Array.isArray(r)&&Di(r,n)}remove(n){const{_finalizers:r}=this;r&&Di(r,n),n instanceof nn&&n._removeParent(this)}}nn.EMPTY=(()=>{const e=new nn;return e.closed=!0,e})();const ur=nn.EMPTY;function $t(e){return e instanceof nn||e&&"closed"in e&&Te(e.remove)&&Te(e.add)&&Te(e.unsubscribe)}function Cn(e){Te(e)?e():e.unsubscribe()}const Sr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ti={setTimeout(e,n,...r){const{delegate:i}=Ti;return i?.setTimeout?i.setTimeout(e,n,...r):setTimeout(e,n,...r)},clearTimeout(e){const{delegate:n}=Ti;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Wi(e){Ti.setTimeout(()=>{const{onUnhandledError:n}=Sr;if(!n)throw e;n(e)})}function Dr(){}const Jn=Tr("C",void 0,void 0);function Tr(e,n,r){return{kind:e,value:n,error:r}}let Ii=null;function bo(e){if(Sr.useDeprecatedSynchronousErrorHandling){const n=!Ii;if(n&&(Ii={errorThrown:!1,error:null}),e(),n){const{errorThrown:r,error:i}=Ii;if(Ii=null,r)throw i}}else e()}class $i extends nn{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,$t(n)&&n.add(this)):this.destination=uu}static create(n,r,i){return new rn(n,r,i)}next(n){this.isStopped?jr(function xn(e){return Tr("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?jr(function bt(e){return Tr("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?jr(Jn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _o=Function.prototype.bind;function qi(e,n){return _o.call(e,n)}class Zi{constructor(n){this.partialObserver=n}next(n){const{partialObserver:r}=this;if(r.next)try{r.next(n)}catch(i){mn(i)}}error(n){const{partialObserver:r}=this;if(r.error)try{r.error(n)}catch(i){mn(i)}else mn(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(r){mn(r)}}}class rn extends $i{constructor(n,r,i){let a;if(super(),Te(n)||!n)a={next:n??void 0,error:r??void 0,complete:i??void 0};else{let u;this&&Sr.useDeprecatedNextContext?(u=Object.create(n),u.unsubscribe=()=>this.unsubscribe(),a={next:n.next&&qi(n.next,u),error:n.error&&qi(n.error,u),complete:n.complete&&qi(n.complete,u)}):a=n}this.destination=new Zi(a)}}function mn(e){Sr.useDeprecatedSynchronousErrorHandling?function ra(e){Sr.useDeprecatedSynchronousErrorHandling&&Ii&&(Ii.errorThrown=!0,Ii.error=e)}(e):Wi(e)}function jr(e,n){const{onStoppedNotification:r}=Sr;r&&Ti.setTimeout(()=>r(e,n))}const uu={closed:!0,next:Dr,error:function ia(e){throw e},complete:Dr},Jt="function"==typeof Symbol&&Symbol.observable||"@@observable";function ai(e){return e}function v(e){return 0===e.length?ai:1===e.length?e[0]:function(r){return e.reduce((i,a)=>a(i),r)}}let C=(()=>{class e{constructor(r){r&&(this._subscribe=r)}lift(r){const i=new e;return i.source=this,i.operator=r,i}subscribe(r,i,a){const u=function z(e){return e&&e instanceof $i||function A(e){return e&&Te(e.next)&&Te(e.error)&&Te(e.complete)}(e)&&$t(e)}(r)?r:new rn(r,i,a);return bo(()=>{const{operator:h,source:m}=this;u.add(h?h.call(u,m):m?this._subscribe(u):this._trySubscribe(u))}),u}_trySubscribe(r){try{return this._subscribe(r)}catch(i){r.error(i)}}forEach(r,i){return new(i=R(i))((a,u)=>{const h=new rn({next:m=>{try{r(m)}catch(g){u(g),h.unsubscribe()}},error:u,complete:a});this.subscribe(h)})}_subscribe(r){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(r)}[Jt](){return this}pipe(...r){return v(r)(this)}toPromise(r){return new(r=R(r))((i,a)=>{let u;this.subscribe(h=>u=h,h=>a(h),()=>i(u))})}}return e.create=n=>new e(n),e})();function R(e){var n;return null!==(n=e??Sr.Promise)&&void 0!==n?n:Promise}const Y=te(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ce=(()=>{class e extends C{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const i=new de(this,this);return i.operator=r,i}_throwIfClosed(){if(this.closed)throw new Y}next(r){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(r)}})}error(r){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:i}=this;for(;i.length;)i.shift().error(r)}})}complete(){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:i,isStopped:a,observers:u}=this;return i||a?ur:(this.currentObservers=null,u.push(r),new nn(()=>{this.currentObservers=null,Di(u,r)}))}_checkFinalizedStatuses(r){const{hasError:i,thrownError:a,isStopped:u}=this;i?r.error(a):u&&r.complete()}asObservable(){const r=new C;return r.source=this,r}}return e.create=(n,r)=>new de(n,r),e})();class de extends ce{constructor(n,r){super(),this.destination=n,this.source=r}next(n){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===i||i.call(r,n)}error(n){var r,i;null===(i=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===i||i.call(r,n)}complete(){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===r||r.call(n)}_subscribe(n){var r,i;return null!==(i=null===(r=this.source)||void 0===r?void 0:r.subscribe(n))&&void 0!==i?i:ur}}function ye(e){return Te(e?.lift)}function Be(e){return n=>{if(ye(n))return n.lift(function(r){try{return e(r,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(e,n,r,i,a){return new J(e,n,r,i,a)}class J extends $i{constructor(n,r,i,a,u,h){super(n),this.onFinalize=u,this.shouldUnsubscribe=h,this._next=r?function(m){try{r(m)}catch(g){n.error(g)}}:super._next,this._error=a?function(m){try{a(m)}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(m){n.error(m)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:r}=this;super.unsubscribe(),!r&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function be(e,n){return Be((r,i)=>{let a=0;r.subscribe(Ne(i,u=>{i.next(e.call(n,u,a++))}))})}function Vn(e){return this instanceof Vn?(this.v=e,this):new Vn(e)}function Br(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function Xi(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(u){r[u]=e[u]&&function(h){return new Promise(function(m,g){!function a(u,h,m,g){Promise.resolve(g).then(function(x){u({value:x,done:m})},h)}(m,g,(h=e[u](h)).done,h.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const br=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ca(e){return Te(e?.then)}function gl(e){return Te(e[Jt])}function ua(e){return Symbol.asyncIterator&&Te(e?.[Symbol.asyncIterator])}function lu(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Zd=function rp(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Yd(e){return Te(e?.[Zd])}function nc(e){return function li(e,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,i=r.apply(e,n||[]),u=[];return a={},m("next"),m("throw"),m("return",function h(W){return function(ee){return Promise.resolve(ee).then(W,L)}}),a[Symbol.asyncIterator]=function(){return this},a;function m(W,ee){i[W]&&(a[W]=function(ie){return new Promise(function(fe,we){u.push([W,ie,fe,we])>1||g(W,ie)})},ee&&(a[W]=ee(a[W])))}function g(W,ee){try{!function x(W){W.value instanceof Vn?Promise.resolve(W.value.v).then(D,L):H(u[0][2],W)}(i[W](ee))}catch(ie){H(u[0][3],ie)}}function D(W){g("next",W)}function L(W){g("throw",W)}function H(W,ee){W(ee),u.shift(),u.length&&g(u[0][0],u[0][1])}}(this,arguments,function*(){const r=e.getReader();try{for(;;){const{value:i,done:a}=yield Vn(r.read());if(a)return yield Vn(void 0);yield yield Vn(i)}}finally{r.releaseLock()}})}function Xd(e){return Te(e?.getReader)}function rr(e){if(e instanceof C)return e;if(null!=e){if(gl(e))return function Mo(e){return new C(n=>{const r=e[Jt]();if(Te(r.subscribe))return r.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(br(e))return function ip(e){return new C(n=>{for(let r=0;r<e.length&&!n.closed;r++)n.next(e[r]);n.complete()})}(e);if(ca(e))return function op(e){return new C(n=>{e.then(r=>{n.closed||(n.next(r),n.complete())},r=>n.error(r)).then(null,Wi)})}(e);if(ua(e))return Ms(e);if(Yd(e))return function qg(e){return new C(n=>{for(const r of e)if(n.next(r),n.closed)return;n.complete()})}(e);if(Xd(e))return function rc(e){return Ms(nc(e))}(e)}throw lu(e)}function Ms(e){return new C(n=>{(function sp(e,n){var r,i,a,u;return function On(e,n,r,i){return new(r||(r=Promise))(function(u,h){function m(D){try{x(i.next(D))}catch(L){h(L)}}function g(D){try{x(i.throw(D))}catch(L){h(L)}}function x(D){D.done?u(D.value):function a(u){return u instanceof r?u:new r(function(h){h(u)})}(D.value).then(m,g)}x((i=i.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(r=Br(e);!(i=yield r.next()).done;)if(n.next(i.value),n.closed)return}catch(h){a={error:h}}finally{try{i&&!i.done&&(u=r.return)&&(yield u.call(r))}finally{if(a)throw a.error}}n.complete()})})(e,n).catch(r=>n.error(r))})}function Qi(e,n,r,i=0,a=!1){const u=n.schedule(function(){r(),a?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(u),!a)return u}function ir(e,n,r=1/0){return Te(n)?ir((i,a)=>be((u,h)=>n(i,u,a,h))(rr(e(i,a))),r):("number"==typeof n&&(r=n),Be((i,a)=>function Qd(e,n,r,i,a,u,h,m){const g=[];let x=0,D=0,L=!1;const H=()=>{L&&!g.length&&!x&&n.complete()},W=ie=>x<i?ee(ie):g.push(ie),ee=ie=>{u&&n.next(ie),x++;let fe=!1;rr(r(ie,D++)).subscribe(Ne(n,we=>{a?.(we),u?W(we):n.next(we)},()=>{fe=!0},void 0,()=>{if(fe)try{for(x--;g.length&&x<i;){const we=g.shift();h?Qi(n,h,()=>ee(we)):ee(we)}H()}catch(we){n.error(we)}}))};return e.subscribe(Ne(n,W,()=>{L=!0,H()})),()=>{m?.()}}(i,a,e,r)))}function As(e=1/0){return ir(ai,e)}const Pi=new C(e=>e.complete());function vl(e){return e[e.length-1]}function ic(e){return function Kd(e){return e&&Te(e.schedule)}(vl(e))?e.pop():void 0}function eh(e,n=0){return Be((r,i)=>{r.subscribe(Ne(i,a=>Qi(i,e,()=>i.next(a),n),()=>Qi(i,e,()=>i.complete(),n),a=>Qi(i,e,()=>i.error(a),n)))})}function th(e,n=0){return Be((r,i)=>{i.add(e.schedule(()=>r.subscribe(i),n))})}function nh(e,n){if(!e)throw new Error("Iterable cannot be null");return new C(r=>{Qi(r,n,()=>{const i=e[Symbol.asyncIterator]();Qi(r,n,()=>{i.next().then(a=>{a.done?r.complete():r.next(a.value)})},0,!0)})})}function dr(e,n){return n?function mp(e,n){if(null!=e){if(gl(e))return function lp(e,n){return rr(e).pipe(th(n),eh(n))}(e,n);if(br(e))return function hp(e,n){return new C(r=>{let i=0;return n.schedule(function(){i===e.length?r.complete():(r.next(e[i++]),r.closed||this.schedule())})})}(e,n);if(ca(e))return function dp(e,n){return rr(e).pipe(th(n),eh(n))}(e,n);if(ua(e))return nh(e,n);if(Yd(e))return function fp(e,n){return new C(r=>{let i;return Qi(r,n,()=>{i=e[Zd](),Qi(r,n,()=>{let a,u;try{({value:a,done:u}=i.next())}catch(h){return void r.error(h)}u?r.complete():r.next(a)},0,!0)}),()=>Te(i?.return)&&i.return()})}(e,n);if(Xd(e))return function pp(e,n){return nh(nc(e),n)}(e,n)}throw lu(e)}(e,n):rr(e)}class di extends ce{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return!r.closed&&n.next(this._value),r}getValue(){const{hasError:n,thrownError:r,_value:i}=this;if(n)throw r;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function ft(...e){return dr(e,ic(e))}function rh(e={}){const{connector:n=(()=>new ce),resetOnError:r=!0,resetOnComplete:i=!0,resetOnRefCountZero:a=!0}=e;return u=>{let h,m,g,x=0,D=!1,L=!1;const H=()=>{m?.unsubscribe(),m=void 0},W=()=>{H(),h=g=void 0,D=L=!1},ee=()=>{const ie=h;W(),ie?.unsubscribe()};return Be((ie,fe)=>{x++,!L&&!D&&H();const we=g=g??n();fe.add(()=>{x--,0===x&&!L&&!D&&(m=la(ee,a))}),we.subscribe(fe),!h&&x>0&&(h=new rn({next:oe=>we.next(oe),error:oe=>{L=!0,H(),m=la(W,r,oe),we.error(oe)},complete:()=>{D=!0,H(),m=la(W,i),we.complete()}}),rr(ie).subscribe(h))})(u)}}function la(e,n,...r){if(!0===n)return void e();if(!1===n)return;const i=new rn({next:()=>{i.unsubscribe(),e()}});return rr(n(...r)).subscribe(i)}function $r(e,n){return Be((r,i)=>{let a=null,u=0,h=!1;const m=()=>h&&!a&&i.complete();r.subscribe(Ne(i,g=>{a?.unsubscribe();let x=0;const D=u++;rr(e(g,D)).subscribe(a=Ne(i,L=>i.next(n?n(g,L,D,x++):L),()=>{a=null,m()}))},()=>{h=!0,m()}))})}function da(e,n){return e===n}function Ut(e){for(let n in e)if(e[n]===Ut)return n;throw Error("Could not find renamed property on target object.")}function Nn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Nn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const r=n.indexOf("\n");return-1===r?n:n.substring(0,r)}function wl(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const vp=Ut({__forward_ref__:Ut});function ha(e){return e.__forward_ref__=ha,e.toString=function(){return Nn(this())},e}function dt(e){return du(e)?e():e}function du(e){return"function"==typeof e&&e.hasOwnProperty(vp)&&e.__forward_ref__===ha}function bl(e){return e&&!!e.\u0275providers}class Me extends Error{constructor(n,r){super(function hu(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,r)),this.code=n}}function Kt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function gt(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function pe(e,n){throw new Me(-201,!1)}function Hn(e,n){null==e&&function Qe(e,n,r,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${r} ${i} ${n} <=Actual]`))}(n,e,null,"!=")}function at(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ss(e){return{providers:e.providers||[],imports:e.imports||[]}}function _l(e){return yp(e,El)||yp(e,wp)}function yp(e,n){return e.hasOwnProperty(n)?e[n]:null}function xl(e){return e&&(e.hasOwnProperty(ah)||e.hasOwnProperty(Qg))?e[ah]:null}const El=Ut({\u0275prov:Ut}),ah=Ut({\u0275inj:Ut}),wp=Ut({ngInjectableDef:Ut}),Qg=Ut({ngInjectorDef:Ut});var Ot=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Ot||{});let ch;function Zr(e){const n=ch;return ch=e,n}function _p(e,n,r){const i=_l(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:r&Ot.Optional?null:void 0!==n?n:void pe(Nn(e))}const wn=globalThis;class Je{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=at({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const mu={},fh="__NG_DI_FLAG__",Ml="ngTempTokenPath",ev=/\n/gm,Ep="__source";let sc;function Ds(e){const n=sc;return sc=e,n}function rv(e,n=Ot.Default){if(void 0===sc)throw new Me(-203,!1);return null===sc?_p(e,void 0,n):sc.get(e,n&Ot.Optional?null:void 0,n)}function ot(e,n=Ot.Default){return(function bp(){return ch}()||rv)(dt(e),n)}function Ge(e,n=Ot.Default){return ot(e,Al(n))}function Al(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ph(e){const n=[];for(let r=0;r<e.length;r++){const i=dt(e[r]);if(Array.isArray(i)){if(0===i.length)throw new Me(900,!1);let a,u=Ot.Default;for(let h=0;h<i.length;h++){const m=i[h],g=iv(m);"number"==typeof g?-1===g?a=m.token:u|=g:a=m}n.push(ot(a,u))}else n.push(ot(i))}return n}function gu(e,n){return e[fh]=n,e.prototype[fh]=n,e}function iv(e){return e[fh]}function Qo(e){return{toString:e}.toString()}var Cl=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Cl||{}),Ji=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ji||{});const Co={},Zt=[],Sl=Ut({\u0275cmp:Ut}),mh=Ut({\u0275dir:Ut}),gh=Ut({\u0275pipe:Ut}),Ap=Ut({\u0275mod:Ut}),Jo=Ut({\u0275fac:Ut}),vu=Ut({__NG_ELEMENT_ID__:Ut}),Cp=Ut({__NG_ENV_ID__:Ut});function Sp(e,n,r){let i=e.length;for(;;){const a=e.indexOf(n,r);if(-1===a)return a;if(0===a||e.charCodeAt(a-1)<=32){const u=n.length;if(a+u===i||e.charCodeAt(a+u)<=32)return a}r=a+1}}function vh(e,n,r){let i=0;for(;i<r.length;){const a=r[i];if("number"==typeof a){if(0!==a)break;i++;const u=r[i++],h=r[i++],m=r[i++];e.setAttribute(n,h,m,u)}else{const u=a,h=r[++i];Tp(u)?e.setProperty(n,u,h):e.setAttribute(n,u,h),i++}}return i}function Dp(e){return 3===e||4===e||6===e}function Tp(e){return 64===e.charCodeAt(0)}function yu(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let r=-1;for(let i=0;i<n.length;i++){const a=n[i];"number"==typeof a?r=a:0===r||Ip(e,r,a,null,-1===r||2===r?n[++i]:null)}}return e}function Ip(e,n,r,i,a){let u=0,h=e.length;if(-1===n)h=-1;else for(;u<e.length;){const m=e[u++];if("number"==typeof m){if(m===n){h=-1;break}if(m>n){h=u-1;break}}}for(;u<e.length;){const m=e[u];if("number"==typeof m)break;if(m===r){if(null===i)return void(null!==a&&(e[u+1]=a));if(i===e[u+1])return void(e[u+2]=a)}u++,null!==i&&u++,null!==a&&u++}-1!==h&&(e.splice(h,0,n),u=h+1),e.splice(u++,0,r),null!==i&&e.splice(u++,0,i),null!==a&&e.splice(u++,0,a)}const Rp="ng-template";function av(e,n,r){let i=0,a=!0;for(;i<e.length;){let u=e[i++];if("string"==typeof u&&a){const h=e[i++];if(r&&"class"===u&&-1!==Sp(h.toLowerCase(),n,0))return!0}else{if(1===u){for(;i<e.length&&"string"==typeof(u=e[i++]);)if(u.toLowerCase()===n)return!0;return!1}"number"==typeof u&&(a=!1)}}return!1}function Lp(e){return 4===e.type&&e.value!==Rp}function cv(e,n,r){return n===(4!==e.type||r?e.value:Rp)}function uv(e,n,r){let i=4;const a=e.attrs||[],u=function hv(e){for(let n=0;n<e.length;n++)if(Dp(e[n]))return n;return e.length}(a);let h=!1;for(let m=0;m<n.length;m++){const g=n[m];if("number"!=typeof g){if(!h)if(4&i){if(i=2|1&i,""!==g&&!cv(e,g,r)||""===g&&1===n.length){if(Ki(i))return!1;h=!0}}else{const x=8&i?g:n[++m];if(8&i&&null!==e.attrs){if(!av(e.attrs,x,r)){if(Ki(i))return!1;h=!0}continue}const L=lv(8&i?"class":g,a,Lp(e),r);if(-1===L){if(Ki(i))return!1;h=!0;continue}if(""!==x){let H;H=L>u?"":a[L+1].toLowerCase();const W=8&i?H:null;if(W&&-1!==Sp(W,x,0)||2&i&&x!==H){if(Ki(i))return!1;h=!0}}}}else{if(!h&&!Ki(i)&&!Ki(g))return!1;if(h&&Ki(g))continue;h=!1,i=g|1&i}}return Ki(i)||h}function Ki(e){return 0==(1&e)}function lv(e,n,r,i){if(null===n)return-1;let a=0;if(i||!r){let u=!1;for(;a<n.length;){const h=n[a];if(h===e)return a;if(3===h||6===h)u=!0;else{if(1===h||2===h){let m=n[++a];for(;"string"==typeof m;)m=n[++a];continue}if(4===h)break;if(0===h){a+=4;continue}}a+=u?1:2}return-1}return function fv(e,n){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){const i=e[r];if("number"==typeof i)return-1;if(i===n)return r;r++}return-1}(n,e)}function Pp(e,n,r=!1){for(let i=0;i<n.length;i++)if(uv(e,n[i],r))return!0;return!1}function Op(e,n){return e?":not("+n.trim()+")":n}function mv(e){let n=e[0],r=1,i=2,a="",u=!1;for(;r<e.length;){let h=e[r];if("string"==typeof h)if(2&i){const m=e[++r];a+="["+h+(m.length>0?'="'+m+'"':"")+"]"}else 8&i?a+="."+h:4&i&&(a+=" "+h);else""!==a&&!Ki(h)&&(n+=Op(u,a),a=""),i=h,u=u||!Ki(i);r++}return""!==a&&(n+=Op(u,a)),n}function Dl(e){return Qo(()=>{const n=Fp(e),r={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Cl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ji.Emulated,styles:e.styles||Zt,_:null,schemas:e.schemas||null,tView:null,id:""};kp(r);const i=e.dependencies;return r.directiveDefs=Tl(i,!1),r.pipeDefs=Tl(i,!0),r.id=function Ev(e){let n=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const a of r)n=Math.imul(31,n)+a.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(r),r})}function wv(e){return Ht(e)||_r(e)}function bv(e){return null!==e}function pa(e){return Qo(()=>({type:e.type,bootstrap:e.bootstrap||Zt,declarations:e.declarations||Zt,imports:e.imports||Zt,exports:e.exports||Zt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Np(e,n){if(null==e)return Co;const r={};for(const i in e)if(e.hasOwnProperty(i)){let a=e[i],u=a;Array.isArray(a)&&(u=a[1],a=a[0]),r[a]=i,n&&(n[a]=u)}return r}function Ur(e){return Qo(()=>{const n=Fp(e);return kp(n),n})}function Ht(e){return e[Sl]||null}function _r(e){return e[mh]||null}function Vr(e){return e[gh]||null}function hi(e,n){const r=e[Ap]||null;if(!r&&!0===n)throw new Error(`Type ${Nn(e)} does not have '\u0275mod' property.`);return r}function Fp(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Co,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Zt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Np(e.inputs,n),outputs:Np(e.outputs)}}function kp(e){e.features?.forEach(n=>n(e))}function Tl(e,n){if(!e)return null;const r=n?Vr:wv;return()=>("function"==typeof e?e():e).map(i=>r(i)).filter(bv)}const Fn=0,Ie=1,xt=2,Sn=3,eo=4,wu=5,Rr=6,cc=7,zn=8,Ts=9,uc=10,wt=11,It=12,ma=13,or=14,Gn=15,bu=16,je=17,Re=18,Xr=19,Il=20,Is=21,Qr=22,to=23,ga=24,Nt=25,yh=1,st=2,rt=7,So=9,jn=11;function fr(e){return Array.isArray(e)&&"object"==typeof e[yh]}function Wn(e){return Array.isArray(e)&&!0===e[yh]}function Ce(e){return 0!=(4&e.flags)}function no(e){return e.componentOffset>-1}function _u(e){return 1==(1&e.flags)}function Oi(e){return!!e.template}function wh(e){return 0!=(512&e[xt])}function ya(e,n){return e.hasOwnProperty(Jo)?e[Jo]:null}let kn=null,es=!1;function pi(e){const n=kn;return kn=e,n}const Vp={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function bh(e){if(!Mu(e)||e.dirty){if(!e.producerMustRecompute(e)&&!wa(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function xh(e){e.dirty=!0,function _h(e){if(void 0===e.liveConsumerNode)return;const n=es;es=!0;try{for(const r of e.liveConsumerNode)r.dirty||xh(r)}finally{es=n}}(e),e.consumerMarkedDirty?.(e)}function Ll(e){return e&&(e.nextProducerIndex=0),pi(e)}function Pl(e,n){if(pi(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Mu(e))for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)Eu(e.producerNode[r],e.producerIndexOfThis[r]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function wa(e){pc(e);for(let n=0;n<e.producerNode.length;n++){const r=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==r.version||(bh(r),i!==r.version))return!0}return!1}function mi(e){if(pc(e),Mu(e))for(let n=0;n<e.producerNode.length;n++)Eu(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Eu(e,n){if(function zp(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),pc(e),1===e.liveConsumerNode.length)for(let i=0;i<e.producerNode.length;i++)Eu(e.producerNode[i],e.producerIndexOfThis[i]);const r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const i=e.liveConsumerIndexOfThis[n],a=e.liveConsumerNode[n];pc(a),a.producerIndexOfThis[i]=n}}function Mu(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function pc(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let Gp=null;const qp=()=>{},Lv=(()=>({...Vp,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:qp}))();class Pv{constructor(n,r,i){this.previousValue=n,this.currentValue=r,this.firstChange=i}isFirstChange(){return this.firstChange}}function ba(){return Zp}function Zp(e){return e.type.prototype.ngOnChanges&&(e.setInput=Nv),Ov}function Ov(){const e=Ch(this),n=e?.current;if(n){const r=e.previous;if(r===Co)e.previous=n;else for(let i in n)r[i]=n[i];e.current=null,this.ngOnChanges(n)}}function Nv(e,n,r,i){const a=this.declaredInputs[r],u=Ch(e)||function Sh(e,n){return e[Ah]=n}(e,{previous:Co,current:null}),h=u.current||(u.current={}),m=u.previous,g=m[a];h[a]=new Pv(g&&g.currentValue,n,m===Co),e[i]=n}ba.ngInherit=!0;const Ah="__ngSimpleChanges__";function Ch(e){return e[Ah]||null}const xr=function(e,n,r){};function bn(e){for(;Array.isArray(e);)e=e[Fn];return e}function Kr(e,n){return bn(n[e.index])}function gi(e,n){const r=n[e];return fr(r)?r:r[Fn]}function Do(e,n){return null==n?null:e[n]}function Th(e){e[je]=0}function Bv(e){1024&e[xt]||(e[xt]|=1024,em(e,1))}function Kp(e){1024&e[xt]&&(e[xt]&=-1025,em(e,-1))}function em(e,n){let r=e[Sn];if(null===r)return;r[wu]+=n;let i=r;for(r=r[Sn];null!==r&&(1===n&&1===i[wu]||-1===n&&0===i[wu]);)r[wu]+=n,i=r,r=r[Sn]}const ct={lFrame:wc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function im(){return ct.bindingsEnabled}function le(){return ct.lFrame.lView}function Et(){return ct.lFrame.tView}function pr(){let e=Ih();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ih(){return ct.lFrame.currentTNode}function ro(e,n){const r=ct.lFrame;r.currentTNode=e,r.isParent=n}function Rh(){return ct.lFrame.isParent}function kl(e,n){const r=ct.lFrame;r.bindingIndex=r.bindingRootIndex=e,tn(n)}function tn(e){ct.lFrame.currentDirectiveIndex=e}function ln(){return ct.lFrame.currentQueryIndex}function yc(e){ct.lFrame.currentQueryIndex=e}function oo(e){const n=e[Ie];return 2===n.type?n.declTNode:1===n.type?e[Rr]:null}function xa(e,n,r){if(r&Ot.SkipSelf){let a=n,u=e;for(;!(a=a.parent,null!==a||r&Ot.Host||(a=oo(u),null===a||(u=u[or],10&a.type))););if(null===a)return!1;n=a,e=u}const i=ct.lFrame=Ea();return i.currentTNode=n,i.lView=e,!0}function Iu(e){const n=Ea(),r=e[Ie];ct.lFrame=n,n.currentTNode=r.firstChild,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function Ea(){const e=ct.lFrame,n=null===e?null:e.child;return null===n?wc(e):n}function wc(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function bc(){const e=ct.lFrame;return ct.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Ma=bc;function Aa(){const e=bc();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function so(e){ct.lFrame.selectedIndex=e}let Sa=!0;function Ns(){return Sa}function ei(e){Sa=e}function ns(e,n){for(let r=n.directiveStart,i=n.directiveEnd;r<i;r++){const u=e.data[r].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:m,ngAfterViewInit:g,ngAfterViewChecked:x,ngOnDestroy:D}=u;h&&(e.contentHooks??=[]).push(-r,h),m&&((e.contentHooks??=[]).push(r,m),(e.contentCheckHooks??=[]).push(r,m)),g&&(e.viewHooks??=[]).push(-r,g),x&&((e.viewHooks??=[]).push(r,x),(e.viewCheckHooks??=[]).push(r,x)),null!=D&&(e.destroyHooks??=[]).push(r,D)}}function Fs(e,n,r){Nh(e,n,3,r)}function rs(e,n,r,i){(3&e[xt])===r&&Nh(e,n,r,i)}function Oh(e,n){let r=e[xt];(3&r)===n&&(r&=8191,r+=1,e[xt]=r)}function Nh(e,n,r,i){const u=i??-1,h=n.length-1;let m=0;for(let g=void 0!==i?65535&e[je]:0;g<h;g++)if("number"==typeof n[g+1]){if(m=n[g],null!=i&&m>=i)break}else n[g]<0&&(e[je]+=65536),(m<u||-1==u)&&(Nu(e,r,n,g),e[je]=(4294901760&e[je])+g+2),g++}function Mc(e,n){xr(4,e,n);const r=pi(null);try{n.call(e)}finally{pi(r),xr(5,e,n)}}function Nu(e,n,r,i){const a=r[i]<0,u=r[i+1],m=e[a?-r[i]:r[i]];a?e[xt]>>13<e[je]>>16&&(3&e[xt])===n&&(e[xt]+=8192,Mc(m,u)):Mc(m,u)}const Ac=-1;class Fu{constructor(n,r,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=i}}function ku(e){return e!==Ac}function Bu(e){return 32767&e}function Uu(e,n){let r=function Bl(e){return e>>16}(e),i=n;for(;r>0;)i=i[or],r--;return i}let Er=!0;function To(e){const n=Er;return Er=e,n}const am=255,Cc=5;let Zv=0;const ao={};function ks(e,n){const r=um(e,n);if(-1!==r)return r;const i=n[Ie];i.firstCreatePass&&(e.injectorIndex=n.length,Vu(i.data,e),Vu(n,null),Vu(i.blueprint,null));const a=Fi(e,n),u=e.injectorIndex;if(ku(a)){const h=Bu(a),m=Uu(a,n),g=m[Ie].data;for(let x=0;x<8;x++)n[u+x]=m[h+x]|g[h+x]}return n[u+8]=a,u}function Vu(e,n){e.push(0,0,0,0,0,0,0,0,n)}function um(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Fi(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let r=0,i=null,a=n;for(;null!==a;){if(i=Io(a),null===i)return Ac;if(r++,a=a[or],-1!==i.injectorIndex)return i.injectorIndex|r<<16}return Ac}function Ul(e,n,r){!function cm(e,n,r){let i;"string"==typeof r?i=r.charCodeAt(0)||0:r.hasOwnProperty(vu)&&(i=r[vu]),null==i&&(i=r[vu]=Zv++);const a=i&am;n.data[e+(a>>Cc)]|=1<<a}(e,n,r)}function Bs(e,n,r){if(r&Ot.Optional||void 0!==e)return e;pe()}function co(e,n,r,i){if(r&Ot.Optional&&void 0===i&&(i=null),!(r&(Ot.Self|Ot.Host))){const a=e[Ts],u=Zr(void 0);try{return a?a.get(n,i,r&Ot.Optional):_p(n,i,r&Ot.Optional)}finally{Zr(u)}}return Bs(i,0,r)}function dm(e,n,r,i=Ot.Default,a){if(null!==e){if(2048&n[xt]&&!(i&Ot.Self)){const h=function Ia(e,n,r,i,a){let u=e,h=n;for(;null!==u&&null!==h&&2048&h[xt]&&!(512&h[xt]);){const m=kh(u,h,r,i|Ot.Self,ao);if(m!==ao)return m;let g=u.parent;if(!g){const x=h[Il];if(x){const D=x.get(r,ao,i);if(D!==ao)return D}g=Io(h),h=h[or]}u=g}return a}(e,n,r,i,ao);if(h!==ao)return h}const u=kh(e,n,r,i,ao);if(u!==ao)return u}return co(n,r,i,a)}function kh(e,n,r,i,a){const u=function Us(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(vu)?e[vu]:void 0;return"number"==typeof n?n>=0?n&am:Ta:n}(r);if("function"==typeof u){if(!xa(n,e,i))return i&Ot.Host?Bs(a,0,i):co(n,r,i,a);try{let h;if(h=u(i),null!=h||i&Ot.Optional)return h;pe()}finally{Ma()}}else if("number"==typeof u){let h=null,m=um(e,n),g=Ac,x=i&Ot.Host?n[Gn][Rr]:null;for((-1===m||i&Ot.SkipSelf)&&(g=-1===m?Fi(e,n):n[m+8],g!==Ac&&Da(i,!1)?(h=n[Ie],m=Bu(g),n=Uu(g,n)):m=-1);-1!==m;){const D=n[Ie];if(Sc(u,m,D.data)){const L=Hu(m,n,r,h,i,x);if(L!==ao)return L}g=n[m+8],g!==Ac&&Da(i,n[Ie].data[m+8]===x)&&Sc(u,m,n)?(h=D,m=Bu(g),n=Uu(g,n)):m=-1}}return a}function Hu(e,n,r,i,a,u){const h=n[Ie],m=h.data[e+8],D=is(m,h,r,null==i?no(m)&&Er:i!=h&&0!=(3&m.type),a&Ot.Host&&u===m);return null!==D?uo(n,h,D,m):ao}function is(e,n,r,i,a){const u=e.providerIndexes,h=n.data,m=1048575&u,g=e.directiveStart,D=u>>20,H=a?m+D:e.directiveEnd;for(let W=i?m:m+D;W<H;W++){const ee=h[W];if(W<g&&r===ee||W>=g&&ee.type===r)return W}if(a){const W=h[g];if(W&&Oi(W)&&W.type===r)return g}return null}function uo(e,n,r,i){let a=e[r];const u=n.data;if(function jv(e){return e instanceof Fu}(a)){const h=a;h.resolving&&function fu(e,n){const r=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Me(-200,`Circular dependency in DI detected for ${e}${r}`)}(Kt(u[r]));const m=To(h.canSeeViewProviders);h.resolving=!0;const x=h.injectImpl?Zr(h.injectImpl):null;xa(e,i,Ot.Default);try{a=e[r]=h.factory(void 0,u,e,i),n.firstCreatePass&&r>=i.directiveStart&&function Ou(e,n,r){const{ngOnChanges:i,ngOnInit:a,ngDoCheck:u}=n.type.prototype;if(i){const h=Zp(n);(r.preOrderHooks??=[]).push(e,h),(r.preOrderCheckHooks??=[]).push(e,h)}a&&(r.preOrderHooks??=[]).push(0-e,a),u&&((r.preOrderHooks??=[]).push(e,u),(r.preOrderCheckHooks??=[]).push(e,u))}(r,u[r],n)}finally{null!==x&&Zr(x),To(m),h.resolving=!1,Ma()}}return a}function Sc(e,n,r){return!!(r[n+(e>>Cc)]&1<<e)}function Da(e,n){return!(e&Ot.Self||e&Ot.Host&&n)}class Zn{constructor(n,r){this._tNode=n,this._lView=r}get(n,r,i){return dm(this._tNode,this._lView,n,Al(i),r)}}function Ta(){return new Zn(pr(),le())}function Vs(e){return du(e)?()=>{const n=Vs(dt(e));return n&&n()}:ya(e)}function Io(e){const n=e[Ie],r=n.type;return 2===r?n.declTNode:1===r?e[Rr]:null}const Lo="__parameters__";function ho(e,n,r){return Qo(()=>{const i=function ss(e){return function(...r){if(e){const i=e(...r);for(const a in i)this[a]=i[a]}}}(n);function a(...u){if(this instanceof a)return i.apply(this,u),this;const h=new a(...u);return m.annotation=h,m;function m(g,x,D){const L=g.hasOwnProperty(Lo)?g[Lo]:Object.defineProperty(g,Lo,{value:[]})[Lo];for(;L.length<=D;)L.push(null);return(L[D]=L[D]||[]).push(h),g}}return r&&(a.prototype=Object.create(r.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a})}function cs(e,n){e.forEach(r=>Array.isArray(r)?cs(r,n):n(r))}function La(e,n,r){n>=e.length?e.push(r):e.splice(n,0,r)}function Pa(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}const ds=gu(ho("Optional"),8),Oa=gu(ho("SkipSelf"),4);function Zu(e){return 128==(128&e.flags)}var Bo=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Bo||{});const ql=new Map;let Xu=0;const $s="__ngContext__";function Yn(e,n){fr(n)?(e[$s]=n[Xr],function Qh(e){ql.set(e[Xr],e)}(n)):e[$s]=n}let td;function Ju(e,n){return td(e,n)}function Fa(e){const n=e[Sn];return Wn(n)?n[Sn]:n}function rd(e){return rf(e[It])}function nf(e){return rf(e[eo])}function rf(e){for(;null!==e&&!Wn(e);)e=e[eo];return e}function qs(e,n,r,i,a){if(null!=i){let u,h=!1;Wn(i)?u=i:fr(i)&&(h=!0,i=i[Fn]);const m=bn(i);0===e&&null!==r?null==a?tl(n,r,m):vo(n,r,m,a||null,!0):1===e&&null!==r?vo(n,r,m,a||null,!0):2===e?function cd(e,n,r){const i=sd(e,n);i&&function ms(e,n,r,i){e.removeChild(n,r,i)}(e,i,n,r)}(n,m,h):3===e&&n.destroyNode(m),null!=u&&function ny(e,n,r,i,a){const u=r[rt];u!==bn(r)&&qs(n,e,i,u,a);for(let m=jn;m<r.length;m++){const g=r[m];rl(g[Ie],g,e,n,i,u)}}(n,e,u,r,a)}}function ps(e,n,r){return e.createElement(n,r)}function Ku(e,n){const r=e[So],i=r.indexOf(n);Kp(n),r.splice(i,1)}function Ba(e,n){if(e.length<=jn)return;const r=jn+n,i=e[r];if(i){const a=i[bu];null!==a&&a!==e&&Ku(a,i),n>0&&(e[r-1][eo]=i[eo]);const u=Pa(e,jn+n);!function _m(e,n){rl(e,n,n[wt],2,null,null),n[Fn]=null,n[Rr]=null}(i[Ie],i);const h=u[Re];null!==h&&h.detachView(u[Ie]),i[Sn]=null,i[eo]=null,i[xt]&=-129}return i}function Zs(e,n){if(!(256&n[xt])){const r=n[wt];n[to]&&mi(n[to]),n[ga]&&mi(n[ga]),r.destroyNode&&rl(e,n,r,3,null,null),function $c(e){let n=e[It];if(!n)return Ua(e[Ie],e);for(;n;){let r=null;if(fr(n))r=n[It];else{const i=n[jn];i&&(r=i)}if(!r){for(;n&&!n[eo]&&n!==e;)fr(n)&&Ua(n[Ie],n),n=n[Sn];null===n&&(n=e),fr(n)&&Ua(n[Ie],n),r=n&&n[eo]}n=r}}(n)}}function Ua(e,n){if(!(256&n[xt])){n[xt]&=-129,n[xt]|=256,function el(e,n){let r;if(null!=e&&null!=(r=e.destroyHooks))for(let i=0;i<r.length;i+=2){const a=n[r[i]];if(!(a instanceof Fu)){const u=r[i+1];if(Array.isArray(u))for(let h=0;h<u.length;h+=2){const m=a[u[h]],g=u[h+1];xr(4,m,g);try{g.call(m)}finally{xr(5,m,g)}}else{xr(4,a,u);try{u.call(a)}finally{xr(5,a,u)}}}}}(e,n),function Yc(e,n){const r=e.cleanup,i=n[cc];if(null!==r)for(let u=0;u<r.length-1;u+=2)if("string"==typeof r[u]){const h=r[u+3];h>=0?i[h]():i[-h].unsubscribe(),u+=2}else r[u].call(i[r[u+1]]);null!==i&&(n[cc]=null);const a=n[Is];if(null!==a){n[Is]=null;for(let u=0;u<a.length;u++)(0,a[u])()}}(e,n),1===n[Ie].type&&n[wt].destroy();const r=n[bu];if(null!==r&&Wn(n[Sn])){r!==n[Sn]&&Ku(r,n);const i=n[Re];null!==i&&i.detachView(e)}!function Xl(e){ql.delete(e[Xr])}(n)}}function go(e,n,r){return function Xc(e,n,r){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return r[Fn];{const{componentOffset:a}=i;if(a>-1){const{encapsulation:u}=e.data[i.directiveStart+a];if(u===Ji.None||u===Ji.Emulated)return null}return Kr(i,r)}}(e,n.parent,r)}function vo(e,n,r,i,a){e.insertBefore(n,r,i,a)}function tl(e,n,r){e.appendChild(n,r)}function id(e,n,r,i,a){null!==i?vo(e,n,r,i,a):tl(e,n,r)}function sd(e,n){return e.parentNode(n)}let sf,uf,Mm=function Em(e,n,r){return 40&e.type?Kr(e,r):null};function ad(e,n,r,i){const a=go(e,i,n),u=n[wt],m=function xm(e,n,r){return Mm(e,n,r)}(i.parent||n[Rr],i,n);if(null!=a)if(Array.isArray(r))for(let g=0;g<r.length;g++)id(u,a,r[g],m,!1);else id(u,a,r,m,!1);void 0!==sf&&sf(u,i,n,r,a)}function nl(e,n){if(null!==n){const r=n.type;if(3&r)return Kr(n,e);if(4&r)return af(-1,e[n.index]);if(8&r){const i=n.child;if(null!==i)return nl(e,i);{const a=e[n.index];return Wn(a)?af(-1,a):bn(a)}}if(32&r)return Ju(n,e)()||bn(e[n.index]);{const i=Cm(e,n);return null!==i?Array.isArray(i)?i[0]:nl(Fa(e[Gn]),i):nl(e,n.next)}}return null}function Cm(e,n){return null!==n?e[Gn][Rr].projection[n.projection]:null}function af(e,n){const r=jn+e+1;if(r<n.length){const i=n[r],a=i[Ie].firstChild;if(null!==a)return nl(i,a)}return n[rt]}function cf(e,n,r,i,a,u,h){for(;null!=r;){const m=i[r.index],g=r.type;if(h&&0===n&&(m&&Yn(bn(m),i),r.flags|=2),32!=(32&r.flags))if(8&g)cf(e,n,r.child,i,a,u,!1),qs(n,e,a,m,u);else if(32&g){const x=Ju(r,i);let D;for(;D=x();)qs(n,e,a,D,u);qs(n,e,a,m,u)}else 16&g?Dm(e,n,i,r,a,u):qs(n,e,a,m,u);r=h?r.projectionNext:r.next}}function rl(e,n,r,i,a,u){cf(r,i,e.firstChild,n,a,u,!1)}function Dm(e,n,r,i,a,u){const h=r[Gn],g=h[Rr].projection[i.projection];if(Array.isArray(g))for(let x=0;x<g.length;x++)qs(n,e,a,g[x],u);else{let x=g;const D=h[Sn];Zu(i)&&(x.flags|=128),cf(e,n,x,D,a,u,!0)}}function Tm(e,n,r){""===r?e.removeAttribute(n,"class"):e.setAttribute(n,"class",r)}function Im(e,n,r){const{mergedAttrs:i,classes:a,styles:u}=r;null!==i&&vh(e,n,i),null!==a&&Tm(e,n,a),null!==u&&function iy(e,n,r){e.setAttribute(n,"style",r)}(e,n,u)}const Yt=new Je("ENVIRONMENT_INITIALIZER"),Mn=new Je("INJECTOR",-1),mt=new Je("INJECTOR_DEF_TYPES");class Xn{get(n,r=mu){if(r===mu){const i=new Error(`NullInjectorError: No provider for ${Nn(n)}!`);throw i.name="NullInjectorError",i}return r}}function kr(...e){return{\u0275providers:zr(0,e),\u0275fromNgModule:!0}}function zr(e,...n){const r=[],i=new Set;let a;const u=h=>{r.push(h)};return cs(n,h=>{const m=h;K(m,u,[],i)&&(a||=[],a.push(m))}),void 0!==a&&Ft(a,u),r}function Ft(e,n){for(let r=0;r<e.length;r++){const{ngModule:i,providers:a}=e[r];qe(a,u=>{n(u,i)})}}function K(e,n,r,i){if(!(e=dt(e)))return!1;let a=null,u=xl(e);const h=!u&&Ht(e);if(u||h){if(h&&!h.standalone)return!1;a=e}else{const g=e.ngModule;if(u=xl(g),!u)return!1;a=g}const m=i.has(a);if(h){if(m)return!1;if(i.add(a),h.dependencies){const g="function"==typeof h.dependencies?h.dependencies():h.dependencies;for(const x of g)K(x,n,r,i)}}else{if(!u)return!1;{if(null!=u.imports&&!m){let x;i.add(a);try{cs(u.imports,D=>{K(D,n,r,i)&&(x||=[],x.push(D))})}finally{}void 0!==x&&Ft(x,n)}if(!m){const x=ya(a)||(()=>new a);n({provide:a,useFactory:x,deps:Zt},a),n({provide:mt,useValue:a,multi:!0},a),n({provide:Yt,useValue:()=>ot(a),multi:!0},a)}const g=u.providers;if(null!=g&&!m){const x=e;qe(g,D=>{n(D,x)})}}}return a!==e&&void 0!==e.providers}function qe(e,n){for(let r of e)bl(r)&&(r=r.\u0275providers),Array.isArray(r)?qe(r,n):n(r)}const At=Ut({provide:String,useValue:Ut});function Ze(e){return null!==e&&"object"==typeof e&&At in e}function Vt(e){return"function"==typeof e}const Xt=new Je("Set Injector scope."),Ar={},ri={};let Va;function ii(){return void 0===Va&&(Va=new Xn),Va}class Gr{}class Xs extends Gr{get destroyed(){return this._destroyed}constructor(n,r,i,a){super(),this.parent=r,this.source=i,this.scopes=a,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,df(n,h=>this.processProvider(h)),this.records.set(Mn,za(void 0,this)),a.has("environment")&&this.records.set(Gr,za(void 0,this));const u=this.records.get(Xt);null!=u&&"string"==typeof u.value&&this.scopes.add(u.value),this.injectorDefTypes=new Set(this.get(mt.multi,Zt,Ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const r=Ds(this),i=Zr(void 0);try{return n()}finally{Ds(r),Zr(i)}}get(n,r=mu,i=Ot.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Cp))return n[Cp](this);i=Al(i);const u=Ds(this),h=Zr(void 0);try{if(!(i&Ot.SkipSelf)){let g=this.records.get(n);if(void 0===g){const x=function ly(e){return"function"==typeof e||"object"==typeof e&&e instanceof Je}(n)&&_l(n);g=x&&this.injectableDefInScope(x)?za(ol(n),Ar):null,this.records.set(n,g)}if(null!=g)return this.hydrate(n,g)}return(i&Ot.Self?ii():this.parent).get(n,r=i&Ot.Optional&&r===mu?null:r)}catch(m){if("NullInjectorError"===m.name){if((m[Ml]=m[Ml]||[]).unshift(Nn(n)),u)throw m;return function ov(e,n,r,i){const a=e[Ml];throw n[Ep]&&a.unshift(n[Ep]),e.message=function sv(e,n,r,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let a=Nn(n);if(Array.isArray(n))a=n.map(Nn).join(" -> ");else if("object"==typeof n){let u=[];for(let h in n)if(n.hasOwnProperty(h)){let m=n[h];u.push(h+":"+("string"==typeof m?JSON.stringify(m):Nn(m)))}a=`{${u.join(", ")}}`}return`${r}${i?"("+i+")":""}[${a}]: ${e.replace(ev,"\n  ")}`}("\n"+e.message,a,r,i),e.ngTokenPath=a,e[Ml]=null,e}(m,n,"R3InjectorError",this.source)}throw m}finally{Zr(h),Ds(u)}}resolveInjectorInitializers(){const n=Ds(this),r=Zr(void 0);try{const a=this.get(Yt.multi,Zt,Ot.Self);for(const u of a)u()}finally{Ds(n),Zr(r)}}toString(){const n=[],r=this.records;for(const i of r.keys())n.push(Nn(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(n){let r=Vt(n=dt(n))?n:dt(n&&n.provide);const i=function hd(e){return Ze(e)?za(void 0,e.useValue):za(function Ha(e,n,r){let i;if(Vt(e)){const a=dt(e);return ya(a)||ol(a)}if(Ze(e))i=()=>dt(e.useValue);else if(function sn(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...ph(e.deps||[]));else if(function kt(e){return!(!e||!e.useExisting)}(e))i=()=>ot(dt(e.useExisting));else{const a=dt(e&&(e.useClass||e.provide));if(!function uy(e){return!!e.deps}(e))return ya(a)||ol(a);i=()=>new a(...ph(e.deps))}return i}(e),Ar)}(n);if(Vt(n)||!0!==n.multi)this.records.get(r);else{let a=this.records.get(r);a||(a=za(void 0,Ar,!0),a.factory=()=>ph(a.multi),this.records.set(r,a)),r=n,a.multi.push(n)}this.records.set(r,i)}hydrate(n,r){return r.value===Ar&&(r.value=ri,r.value=r.factory()),"object"==typeof r.value&&r.value&&function Pm(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}injectableDefInScope(n){if(!n.providedIn)return!1;const r=dt(n.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(n){const r=this._onDestroyHooks.indexOf(n);-1!==r&&this._onDestroyHooks.splice(r,1)}}function ol(e){const n=_l(e),r=null!==n?n.factory:ya(e);if(null!==r)return r;if(e instanceof Je)throw new Me(204,!1);if(e instanceof Function)return function dd(e){const n=e.length;if(n>0)throw function us(e,n){const r=[];for(let i=0;i<e;i++)r.push(n);return r}(n,"?"),new Me(204,!1);const r=function Xg(e){return e&&(e[El]||e[wp])||null}(e);return null!==r?()=>r.factory(e):()=>new e}(e);throw new Me(204,!1)}function za(e,n,r=!1){return{factory:e,value:n,multi:r?[]:void 0}}function df(e,n){for(const r of e)Array.isArray(r)?df(r,n):r&&bl(r)?df(r.\u0275providers,n):n(r)}const fd=new Je("AppId",{providedIn:"root",factory:()=>dy}),dy="ng",Om=new Je("Platform Initializer"),Jc=new Je("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),X=new Je("CSP nonce",{providedIn:"root",factory:()=>function Qc(){if(void 0!==uf)return uf;if(typeof document<"u")return document;throw new Me(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let xb=(e,n,r)=>null;function hy(e,n,r=!1){return xb(e,n,r)}class jC{}class Ab{}class $C{resolveComponentFactory(n){throw function WC(e){const n=Error(`No component factory found for ${Nn(e)}.`);return n.ngComponent=e,n}(n)}}let km=(()=>{class e{static#e=this.NULL=new $C}return e})();function qC(){return pd(pr(),le())}function pd(e,n){return new tu(Kr(e,n))}let tu=(()=>{class e{constructor(r){this.nativeElement=r}static#e=this.__NG_ELEMENT_ID__=qC}return e})();function ZC(e){return e instanceof tu?e.nativeElement:e}class Sb{}let ff=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function YC(){const e=le(),r=gi(pr().index,e);return(fr(r)?r:e)[wt]}()}return e})(),XC=(()=>{class e{static#e=this.\u0275prov=at({token:e,providedIn:"root",factory:()=>null})}return e})();class Bm{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const QC=new Bm("16.2.12"),my={};function Rb(e,n=null,r=null,i){const a=Lb(e,n,r,i);return a.resolveInjectorInitializers(),a}function Lb(e,n=null,r=null,i,a=new Set){const u=[r||Zt,kr(e)];return i=i||("object"==typeof e?void 0:Nn(e)),new Xs(u,n||ii(),i||null,a)}let Vo=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=mu;static#t=this.NULL=new Xn;static create(r,i){if(Array.isArray(r))return Rb({name:""},i,r,"");{const a=r.name??"";return Rb({name:a},r.parent,r.providers,a)}}static#n=this.\u0275prov=at({token:e,providedIn:"any",factory:()=>ot(Mn)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function vy(e){return e.ngOriginalError}class ja{constructor(){this._console=console}handleError(n){const r=this._findOriginalError(n);this._console.error("ERROR",n),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(n){let r=n&&vy(n);for(;r&&vy(r);)r=vy(r);return r||null}}function wy(e){return n=>{setTimeout(e,void 0,n)}}const Mi=class iS extends ce{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,r,i){let a=n,u=r||(()=>null),h=i;if(n&&"object"==typeof n){const g=n;a=g.next?.bind(g),u=g.error?.bind(g),h=g.complete?.bind(g)}this.__isAsync&&(u=wy(u),a&&(a=wy(a)),h&&(h=wy(h)));const m=super.subscribe({next:a,error:u,complete:h});return n instanceof nn&&n.add(m),m}};function Ob(...e){}class Dn{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mi(!1),this.onMicrotaskEmpty=new Mi(!1),this.onStable=new Mi(!1),this.onError=new Mi(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function oS(){const e="function"==typeof wn.requestAnimationFrame;let n=wn[e?"requestAnimationFrame":"setTimeout"],r=wn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&r){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function cS(e){const n=()=>{!function aS(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(wn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,_y(e),e.isCheckStableRunning=!0,by(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),_y(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,i,a,u,h,m)=>{if(function lS(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(m))return r.invokeTask(a,u,h,m);try{return Nb(e),r.invokeTask(a,u,h,m)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===u.type||e.shouldCoalesceRunChangeDetection)&&n(),Fb(e)}},onInvoke:(r,i,a,u,h,m,g)=>{try{return Nb(e),r.invoke(a,u,h,m,g)}finally{e.shouldCoalesceRunChangeDetection&&n(),Fb(e)}},onHasTask:(r,i,a,u)=>{r.hasTask(a,u),i===a&&("microTask"==u.change?(e._hasPendingMicrotasks=u.microTask,_y(e),by(e)):"macroTask"==u.change&&(e.hasPendingMacrotasks=u.macroTask))},onHandleError:(r,i,a,u)=>(r.handleError(a,u),e.runOutsideAngular(()=>e.onError.emit(u)),!1)})}(a)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dn.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(Dn.isInAngularZone())throw new Me(909,!1)}run(n,r,i){return this._inner.run(n,r,i)}runTask(n,r,i,a){const u=this._inner,h=u.scheduleEventTask("NgZoneEvent: "+a,n,sS,Ob,Ob);try{return u.runTask(h,r,i)}finally{u.cancelTask(h)}}runGuarded(n,r,i){return this._inner.runGuarded(n,r,i)}runOutsideAngular(n){return this._outer.run(n)}}const sS={};function by(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _y(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Nb(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Fb(e){e._nesting--,by(e)}class uS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mi,this.onMicrotaskEmpty=new Mi,this.onStable=new Mi,this.onError=new Mi}run(n,r,i){return n.apply(r,i)}runGuarded(n,r,i){return n.apply(r,i)}runOutsideAngular(n){return n()}runTask(n,r,i,a){return n.apply(r,i)}}const kb=new Je("",{providedIn:"root",factory:Bb});function Bb(){const e=Ge(Dn);let n=!0;return function gp(...e){const n=ic(e),r=function up(e,n){return"number"==typeof vl(e)?e.pop():n}(e,1/0),i=e;return i.length?1===i.length?rr(i[0]):As(r)(dr(i,n)):Pi}(new C(a=>{n=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{a.next(n),a.complete()})}),new C(a=>{let u;e.runOutsideAngular(()=>{u=e.onStable.subscribe(()=>{Dn.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(n=!0,a.next(!0))})})});const h=e.onUnstable.subscribe(()=>{Dn.assertInAngularZone(),n&&(n=!1,e.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),h.unsubscribe()}}).pipe(rh()))}function Wa(e){return e instanceof Function?e():e}let xy=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=at({token:e,providedIn:"root",factory:()=>new e})}return e})();function pf(e){for(;e;){e[xt]|=64;const n=Fa(e);if(wh(e)&&!n)return e;e=n}return null}const Gb=new Je("",{providedIn:"root",factory:()=>!1});let Vm=null;function qb(e,n){return e[n]??Xb()}function Zb(e,n){const r=Xb();r.producerNode?.length&&(e[n]=Vm,r.lView=e,Vm=Yb())}const bS={...Vp,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{pf(e.lView)},lView:null};function Yb(){return Object.create(bS)}function Xb(){return Vm??=Yb(),Vm}const Ct={};function ht(e,n=Ot.Default){const r=le();return null===r?ot(e,n):dm(pr(),r,dt(e),n)}function Hm(e,n,r,i,a,u,h,m,g,x,D){const L=n.blueprint.slice();return L[Fn]=a,L[xt]=140|i,(null!==x||e&&2048&e[xt])&&(L[xt]|=2048),Th(L),L[Sn]=L[or]=e,L[zn]=r,L[uc]=h||e&&e[uc],L[wt]=m||e&&e[wt],L[Ts]=g||e&&e[Ts]||null,L[Rr]=u,L[Xr]=function Zl(){return Xu++}(),L[Qr]=D,L[Il]=x,L[Gn]=2==n.type?e[Gn]:L,L}function vd(e,n,r,i,a){let u=e.data[n];if(null===u)u=function Ey(e,n,r,i,a){const u=Ih(),h=Rh(),g=e.data[n]=function TS(e,n,r,i,a,u){let h=n?n.injectorIndex:-1,m=0;return function vi(){return null!==ct.skipHydrationRootTNode}()&&(m|=128),{type:r,index:i,insertBeforeIndex:null,injectorIndex:h,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:m,providerIndexes:0,value:a,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,h?u:u&&u.parent,r,n,i,a);return null===e.firstChild&&(e.firstChild=g),null!==u&&(h?null==u.child&&null!==g.parent&&(u.child=g):null===u.next&&(u.next=g,g.prev=u)),g}(e,n,r,i,a),function Tu(){return ct.lFrame.inI18n}()&&(u.flags|=32);else if(64&u.type){u.type=r,u.value=i,u.attrs=a;const h=function gc(){const e=ct.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();u.injectorIndex=null===h?-1:h.injectorIndex}return ro(u,!0),u}function mf(e,n,r,i){if(0===r)return-1;const a=n.length;for(let u=0;u<r;u++)n.push(i),e.blueprint.push(i),e.data.push(null);return a}function Kb(e,n,r,i,a){const u=qb(n,to),h=function dn(){return ct.lFrame.selectedIndex}(),m=2&i;try{so(-1),m&&n.length>Nt&&function Qb(e,n,r,i){if(!i)if(3==(3&n[xt])){const u=e.preOrderCheckHooks;null!==u&&Fs(n,u,r)}else{const u=e.preOrderHooks;null!==u&&rs(n,u,0,r)}so(r)}(e,n,Nt,!1),xr(m?2:0,a);const x=m?u:null,D=Ll(x);try{null!==x&&(x.dirty=!1),r(i,a)}finally{Pl(x,D)}}finally{m&&null===n[to]&&Zb(n,to),so(h),xr(m?3:1,a)}}function My(e,n,r){if(Ce(n)){const i=pi(null);try{const u=n.directiveEnd;for(let h=n.directiveStart;h<u;h++){const m=e.data[h];m.contentQueries&&m.contentQueries(1,r[h],h)}}finally{pi(i)}}}function e_(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Sy(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function Sy(e,n,r,i,a,u,h,m,g,x,D){const L=Nt+i,H=L+a,W=function ES(e,n){const r=[];for(let i=0;i<n;i++)r.push(i<e?null:Ct);return r}(L,H),ee="function"==typeof x?x():x;return W[Ie]={type:e,blueprint:W,template:r,queries:null,viewQuery:m,declTNode:n,data:W.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof h?h():h,firstChild:null,schemas:g,consts:ee,incompleteFirstPass:!1,ssrId:D}}let t_=e=>null;function n_(e,n,r,i){for(let a in e)if(e.hasOwnProperty(a)){r=null===r?{}:r;const u=e[a];null===i?r_(r,n,a,u):i.hasOwnProperty(a)&&r_(r,n,i[a],u)}return r}function r_(e,n,r,i){e.hasOwnProperty(r)?e[r].push(n,i):e[r]=[n,i]}function i_(e,n,r,i,a,u){for(let x=0;x<i.length;x++)Ul(ks(r,n),e,i[x].type);!function HS(e,n,r){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+r,e.providerIndexes=n}(r,e.data.length,i.length);for(let x=0;x<i.length;x++){const D=i[x];D.providersResolver&&D.providersResolver(D)}let h=!1,m=!1,g=mf(e,n,i.length,null);for(let x=0;x<i.length;x++){const D=i[x];r.mergedAttrs=yu(r.mergedAttrs,D.hostAttrs),zS(e,r,n,g,D),VS(g,D,a),null!==D.contentQueries&&(r.flags|=4),(null!==D.hostBindings||null!==D.hostAttrs||0!==D.hostVars)&&(r.flags|=64);const L=D.type.prototype;!h&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((e.preOrderHooks??=[]).push(r.index),h=!0),!m&&(L.ngOnChanges||L.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(r.index),m=!0),g++}!function IS(e,n,r){const a=n.directiveEnd,u=e.data,h=n.attrs,m=[];let g=null,x=null;for(let D=n.directiveStart;D<a;D++){const L=u[D],H=r?r.get(L):null,ee=H?H.outputs:null;g=n_(L.inputs,D,g,H?H.inputs:null),x=n_(L.outputs,D,x,ee);const ie=null===g||null===h||Lp(n)?null:WS(g,D,h);m.push(ie)}null!==g&&(g.hasOwnProperty("class")&&(n.flags|=8),g.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=m,n.inputs=g,n.outputs=x}(e,r,u)}function o_(e,n,r){const i=r.directiveStart,a=r.directiveEnd,u=r.index,h=function Ph(){return ct.lFrame.currentDirectiveIndex}();try{so(u);for(let m=i;m<a;m++){const g=e.data[m],x=n[m];tn(m),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&kS(g,x)}}finally{so(-1),tn(h)}}function kS(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Ty(e,n,r){n.componentOffset=r,(e.components??=[]).push(n.index)}function VS(e,n,r){if(r){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)r[n.exportAs[i]]=e;Oi(n)&&(r[""]=e)}}function zS(e,n,r,i,a){e.data[i]=a;const u=a.factory||(a.factory=ya(a.type)),h=new Fu(u,Oi(a),ht);e.blueprint[i]=h,r[i]=h,function OS(e,n,r,i,a){const u=a.hostBindings;if(u){let h=e.hostBindingOpCodes;null===h&&(h=e.hostBindingOpCodes=[]);const m=~n.index;(function NS(e){let n=e.length;for(;n>0;){const r=e[--n];if("number"==typeof r&&r<0)return r}return 0})(h)!=m&&h.push(m),h.push(r,i,u)}}(e,n,i,mf(e,r,a.hostVars,Ct),a)}function jS(e,n,r,i,a,u){const h=u[n];if(null!==h)for(let m=0;m<h.length;)s_(i,r,h[m++],h[m++],h[m++])}function s_(e,n,r,i,a){const u=pi(null);try{const h=e.inputTransforms;null!==h&&h.hasOwnProperty(i)&&(a=h[i].call(n,a)),null!==e.setInput?e.setInput(n,a,r,i):n[i]=a}finally{pi(u)}}function WS(e,n,r){let i=null,a=0;for(;a<r.length;){const u=r[a];if(0!==u)if(5!==u){if("number"==typeof u)break;if(e.hasOwnProperty(u)){null===i&&(i=[]);const h=e[u];for(let m=0;m<h.length;m+=2)if(h[m]===n){i.push(u,h[m+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}return i}function c_(e,n){const r=e.contentQueries;if(null!==r)for(let i=0;i<r.length;i+=2){const u=r[i+1];if(-1!==u){const h=e.data[u];yc(r[i]),h.contentQueries(2,n[u],u)}}}function zm(e,n){return e[It]?e[ma][eo]=n:e[It]=n,e[ma]=n,n}function Ry(e,n,r){yc(0);const i=pi(null);try{n(e,r)}finally{pi(i)}}function u_(e){return e[cc]||(e[cc]=[])}function l_(e){return e.cleanup||(e.cleanup=[])}function h_(e,n){const r=e[Ts],i=r?r.get(ja,null):null;i&&i.handleError(n)}function Ly(e,n,r,i,a){for(let u=0;u<r.length;){const h=r[u++],m=r[u++];s_(e.data[h],n[h],i,m,a)}}function $S(e,n){const r=gi(n,e),i=r[Ie];!function qS(e,n){for(let r=n.length;r<e.blueprint.length;r++)n.push(e.blueprint[r])}(i,r);const a=r[Fn];null!==a&&null===r[Qr]&&(r[Qr]=hy(a,r[Ts])),Py(i,r,r[zn])}function Py(e,n,r){Iu(n);try{const i=e.viewQuery;null!==i&&Ry(1,i,r);const a=e.template;null!==a&&Kb(e,n,a,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&c_(e,n),e.staticViewQueries&&Ry(2,e.viewQuery,r);const u=e.components;null!==u&&function ZS(e,n){for(let r=0;r<n.length;r++)$S(e,n[r])}(n,u)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[xt]&=-5,Aa()}}let f_=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(r,i,a){const u=typeof Zone>"u"?null:Zone.current,h=function Rv(e,n,r){const i=Object.create(Lv);r&&(i.consumerAllowSignalWrites=!0),i.fn=e,i.schedule=n;const a=h=>{i.cleanupFn=h};return i.ref={notify:()=>xh(i),run:()=>{if(i.dirty=!1,i.hasRun&&!wa(i))return;i.hasRun=!0;const h=Ll(i);try{i.cleanupFn(),i.cleanupFn=qp,i.fn(a)}finally{Pl(i,h)}},cleanup:()=>i.cleanupFn()},i.ref}(r,x=>{this.all.has(x)&&this.queue.set(x,u)},a);let m;this.all.add(h),h.notify();const g=()=>{h.cleanup(),m?.(),this.all.delete(h),this.queue.delete(h)};return m=i?.onDestroy(g),{destroy:g}}flush(){if(0!==this.queue.size)for(const[r,i]of this.queue)this.queue.delete(r),i?i.run(()=>r.run()):r.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=at({token:e,providedIn:"root",factory:()=>new e})}return e})();function Gm(e,n,r){let i=r?e.styles:null,a=r?e.classes:null,u=0;if(null!==n)for(let h=0;h<n.length;h++){const m=n[h];"number"==typeof m?u=m:1==u?a=wl(a,m):2==u&&(i=wl(i,m+": "+n[++h]+";"))}r?e.styles=i:e.stylesWithoutHost=i,r?e.classes=a:e.classesWithoutHost=a}function gf(e,n,r,i,a=!1){for(;null!==r;){const u=n[r.index];null!==u&&i.push(bn(u)),Wn(u)&&p_(u,i);const h=r.type;if(8&h)gf(e,n,r.child,i);else if(32&h){const m=Ju(r,n);let g;for(;g=m();)i.push(g)}else if(16&h){const m=Cm(n,r);if(Array.isArray(m))i.push(...m);else{const g=Fa(n[Gn]);gf(g[Ie],g,m,i,!0)}}r=a?r.projectionNext:r.next}return i}function p_(e,n){for(let r=jn;r<e.length;r++){const i=e[r],a=i[Ie].firstChild;null!==a&&gf(i[Ie],i,a,n)}e[rt]!==e[Fn]&&n.push(e[rt])}function jm(e,n,r,i=!0){const a=n[uc],u=a.rendererFactory,h=a.afterRenderEventManager;u.begin?.(),h?.begin();try{m_(e,n,e.template,r)}catch(g){throw i&&h_(n,g),g}finally{u.end?.(),a.effectManager?.flush(),h?.end()}}function m_(e,n,r,i){const a=n[xt];if(256!=(256&a)){n[uc].effectManager?.flush(),Iu(n);try{Th(n),function ts(e){return ct.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==r&&Kb(e,n,r,2,i);const h=3==(3&a);if(h){const x=e.preOrderCheckHooks;null!==x&&Fs(n,x,null)}else{const x=e.preOrderHooks;null!==x&&rs(n,x,0,null),Oh(n,0)}if(function QS(e){for(let n=rd(e);null!==n;n=nf(n)){if(!n[st])continue;const r=n[So];for(let i=0;i<r.length;i++){Bv(r[i])}}}(n),g_(n,2),null!==e.contentQueries&&c_(e,n),h){const x=e.contentCheckHooks;null!==x&&Fs(n,x)}else{const x=e.contentHooks;null!==x&&rs(n,x,1),Oh(n,1)}!function xS(e,n){const r=e.hostBindingOpCodes;if(null===r)return;const i=qb(n,ga);try{for(let a=0;a<r.length;a++){const u=r[a];if(u<0)so(~u);else{const h=u,m=r[++a],g=r[++a];kl(m,h),i.dirty=!1;const x=Ll(i);try{g(2,n[h])}finally{Pl(i,x)}}}}finally{null===n[ga]&&Zb(n,ga),so(-1)}}(e,n);const m=e.components;null!==m&&y_(n,m,0);const g=e.viewQuery;if(null!==g&&Ry(2,g,i),h){const x=e.viewCheckHooks;null!==x&&Fs(n,x)}else{const x=e.viewHooks;null!==x&&rs(n,x,2),Oh(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[xt]&=-73,Kp(n)}finally{Aa()}}}function g_(e,n){for(let r=rd(e);null!==r;r=nf(r))for(let i=jn;i<r.length;i++)v_(r[i],n)}function JS(e,n,r){v_(gi(n,e),r)}function v_(e,n){if(!function Qp(e){return 128==(128&e[xt])}(e))return;const r=e[Ie],i=e[xt];if(80&i&&0===n||1024&i||2===n)m_(r,e,r.template,e[zn]);else if(e[wu]>0){g_(e,1);const a=r.components;null!==a&&y_(e,a,1)}}function y_(e,n,r){for(let i=0;i<n.length;i++)JS(e,n[i],r)}class vf{get rootNodes(){const n=this._lView,r=n[Ie];return gf(r,n,r.firstChild,[])}constructor(n,r){this._lView=n,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zn]}set context(n){this._lView[zn]=n}get destroyed(){return 256==(256&this._lView[xt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Sn];if(Wn(n)){const r=n[8],i=r?r.indexOf(this):-1;i>-1&&(Ba(n,i),Pa(r,i))}this._attachedToViewContainer=!1}Zs(this._lView[Ie],this._lView)}onDestroy(n){!function tm(e,n){if(256==(256&e[xt]))throw new Me(911,!1);null===e[Is]&&(e[Is]=[]),e[Is].push(n)}(this._lView,n)}markForCheck(){pf(this._cdRefInjectingView||this._lView)}detach(){this._lView[xt]&=-129}reattach(){this._lView[xt]|=128}detectChanges(){jm(this._lView[Ie],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wc(e,n){rl(e,n,n[wt],2,null,null)}(this._lView[Ie],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=n}}class KS extends vf{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;jm(n[Ie],n,n[zn],!1)}checkNoChanges(){}get context(){return null}}class w_ extends km{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const r=Ht(n);return new yf(r,this.ngModule)}}function b_(e){const n=[];for(let r in e)e.hasOwnProperty(r)&&n.push({propName:e[r],templateName:r});return n}class tD{constructor(n,r){this.injector=n,this.parentInjector=r}get(n,r,i){i=Al(i);const a=this.injector.get(n,my,i);return a!==my||r===my?a:this.parentInjector.get(n,r,i)}}class yf extends Ab{get inputs(){const n=this.componentDef,r=n.inputTransforms,i=b_(n.inputs);if(null!==r)for(const a of i)r.hasOwnProperty(a.propName)&&(a.transform=r[a.propName]);return i}get outputs(){return b_(this.componentDef.outputs)}constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=function gv(e){return e.map(mv).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}create(n,r,i,a){let u=(a=a||this.ngModule)instanceof Gr?a:a?.injector;u&&null!==this.componentDef.getStandaloneInjector&&(u=this.componentDef.getStandaloneInjector(u)||u);const h=u?new tD(n,u):n,m=h.get(Sb,null);if(null===m)throw new Me(407,!1);const L={rendererFactory:m,sanitizer:h.get(XC,null),effectManager:h.get(f_,null),afterRenderEventManager:h.get(xy,null)},H=m.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",ee=i?function MS(e,n,r,i){const u=i.get(Gb,!1)||r===Ji.ShadowDom,h=e.selectRootElement(n,u);return function AS(e){t_(e)}(h),h}(H,i,this.componentDef.encapsulation,h):ps(H,W,function eD(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(W)),we=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let oe=null;null!==ee&&(oe=hy(ee,h,!0));const nt=Sy(0,null,null,1,0,null,null,null,null,null,null),vt=Hm(null,nt,null,we,null,null,L,H,h,null,oe);let zt,Gi;Iu(vt);try{const ec=this.componentDef;let qd,Bw=null;ec.findHostDirectiveDefs?(qd=[],Bw=new Map,ec.findHostDirectiveDefs(ec,qd,Bw),qd.push(ec)):qd=[ec];const OF=function rD(e,n){const r=e[Ie],i=Nt;return e[i]=n,vd(r,i,2,"#host",null)}(vt,ee),NF=function iD(e,n,r,i,a,u,h){const m=a[Ie];!function oD(e,n,r,i){for(const a of e)n.mergedAttrs=yu(n.mergedAttrs,a.hostAttrs);null!==n.mergedAttrs&&(Gm(n,n.mergedAttrs,!0),null!==r&&Im(i,r,n))}(i,e,n,h);let g=null;null!==n&&(g=hy(n,a[Ts]));const x=u.rendererFactory.createRenderer(n,r);let D=16;r.signals?D=4096:r.onPush&&(D=64);const L=Hm(a,e_(r),null,D,a[e.index],e,u,x,null,null,g);return m.firstCreatePass&&Ty(m,e,i.length-1),zm(a,L),a[e.index]=L}(OF,ee,ec,qd,vt,L,H);Gi=function Xp(e,n){return e.data[n]}(nt,Nt),ee&&function aD(e,n,r,i){if(i)vh(e,r,["ng-version",QC.full]);else{const{attrs:a,classes:u}=function vv(e){const n=[],r=[];let i=1,a=2;for(;i<e.length;){let u=e[i];if("string"==typeof u)2===a?""!==u&&n.push(u,e[++i]):8===a&&r.push(u);else{if(!Ki(a))break;a=u}i++}return{attrs:n,classes:r}}(n.selectors[0]);a&&vh(e,r,a),u&&u.length>0&&Tm(e,r,u.join(" "))}}(H,ec,ee,i),void 0!==r&&function cD(e,n,r){const i=e.projection=[];for(let a=0;a<n.length;a++){const u=r[a];i.push(null!=u?Array.from(u):null)}}(Gi,this.ngContentSelectors,r),zt=function sD(e,n,r,i,a,u){const h=pr(),m=a[Ie],g=Kr(h,a);i_(m,a,h,r,null,i);for(let D=0;D<r.length;D++)Yn(uo(a,m,h.directiveStart+D,h),a);o_(m,a,h),g&&Yn(g,a);const x=uo(a,m,h.directiveStart+h.componentOffset,h);if(e[zn]=a[zn]=x,null!==u)for(const D of u)D(x,n);return My(m,h,e),x}(NF,ec,qd,Bw,vt,[uD]),Py(nt,vt,null)}finally{Aa()}return new nD(this.componentType,zt,pd(Gi,vt),vt,Gi)}}class nD extends jC{constructor(n,r,i,a,u){super(),this.location=i,this._rootLView=a,this._tNode=u,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new KS(a),this.componentType=n}setInput(n,r){const i=this._tNode.inputs;let a;if(null!==i&&(a=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),r))return;const u=this._rootLView;Ly(u[Ie],u,a,n,r),this.previousInputValues.set(n,r),pf(gi(this._tNode.index,u))}}get injector(){return new Zn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function uD(){const e=pr();ns(le()[Ie],e)}function Hy(e,n,r,i,a){const h=a?"class":"style";Ly(e,r,n.inputs[h],h,i)}function Sd(e,n,r,i){const a=le(),u=Et(),h=Nt+e,m=a[wt],g=u.firstCreatePass?function jD(e,n,r,i,a,u){const h=n.consts,g=vd(n,e,2,i,Do(h,a));return function Dy(e,n,r,i){if(im()){const a=null===i?null:{"":-1},u=function BS(e,n){const r=e.directiveRegistry;let i=null,a=null;if(r)for(let u=0;u<r.length;u++){const h=r[u];if(Pp(n,h.selectors,!1))if(i||(i=[]),Oi(h))if(null!==h.findHostDirectiveDefs){const m=[];a=a||new Map,h.findHostDirectiveDefs(h,m,a),i.unshift(...m,h),Ty(e,n,m.length)}else i.unshift(h),Ty(e,n,0);else a=a||new Map,h.findHostDirectiveDefs?.(h,i,a),i.push(h)}return null===i?null:[i,a]}(e,r);let h,m;null===u?h=m=null:[h,m]=u,null!==h&&i_(e,n,r,h,a,m),a&&function US(e,n,r){if(n){const i=e.localNames=[];for(let a=0;a<n.length;a+=2){const u=r[n[a+1]];if(null==u)throw new Me(-301,!1);i.push(n[a],u)}}}(r,i,a)}r.mergedAttrs=yu(r.mergedAttrs,r.attrs)}(n,r,g,Do(h,u)),null!==g.attrs&&Gm(g,g.attrs,!1),null!==g.mergedAttrs&&Gm(g,g.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,g),g}(h,u,a,n,r,i):u.data[h],x=z_(u,a,g,m,n,e);a[h]=x;const D=_u(g);return ro(g,!0),Im(m,x,g),32!=(32&g.flags)&&Ns()&&ad(u,a,x,g),0===function Vv(){return ct.lFrame.elementDepthCount}()&&Yn(x,a),function Hv(){ct.lFrame.elementDepthCount++}(),D&&(function Ay(e,n,r){im()&&(function FS(e,n,r,i){const a=r.directiveStart,u=r.directiveEnd;no(r)&&function GS(e,n,r){const i=Kr(n,e),a=e_(r);let h=16;r.signals?h=4096:r.onPush&&(h=64);const m=zm(e,Hm(e,a,null,h,i,n,null,e[uc].rendererFactory.createRenderer(i,r),null,null,null));e[n.index]=m}(n,r,e.data[a+r.componentOffset]),e.firstCreatePass||ks(r,n),Yn(i,n);const h=r.initialInputs;for(let m=a;m<u;m++){const g=e.data[m],x=uo(n,e,m,r);Yn(x,n),null!==h&&jS(0,m-a,x,g,0,h),Oi(g)&&(gi(r.index,n)[zn]=uo(n,e,m,r))}}(e,n,r,Kr(r,n)),64==(64&r.flags)&&o_(e,n,r))}(u,a,g),My(u,g,a)),null!==i&&function Cy(e,n,r=Kr){const i=n.localNames;if(null!==i){let a=n.index+1;for(let u=0;u<i.length;u+=2){const h=i[u+1],m=-1===h?r(n,e):e[h];e[a++]=m}}}(a,g),Sd}function Dd(){let e=pr();Rh()?function Su(){ct.lFrame.isParent=!1}():(e=e.parent,ro(e,!1));const n=e;(function Os(e){return ct.skipHydrationRootTNode===e})(n)&&function sm(){ct.skipHydrationRootTNode=null}(),function rm(){ct.lFrame.elementDepthCount--}();const r=Et();return r.firstCreatePass&&(ns(r,e),Ce(e)&&r.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Wv(e){return 0!=(8&e.flags)}(n)&&Hy(r,n,le(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function $v(e){return 0!=(16&e.flags)}(n)&&Hy(r,n,le(),n.stylesWithoutHost,!1),Dd}function Ef(e,n,r,i){return Sd(e,n,r,i),Dd(),Ef}let z_=(e,n,r,i,a,u)=>(ei(!0),ps(i,a,function Ec(){return ct.lFrame.currentNamespace}()));function Qm(e){return!!e&&"function"==typeof e.then}function W_(e){return!!e&&"function"==typeof e.subscribe}function Mf(e,n,r,i){const a=le(),u=Et(),h=pr();return function q_(e,n,r,i,a,u,h){const m=_u(i),x=e.firstCreatePass&&l_(e),D=n[zn],L=u_(n);let H=!0;if(3&i.type||h){const ie=Kr(i,n),fe=h?h(ie):ie,we=L.length,oe=h?vt=>h(bn(vt[i.index])):i.index;let nt=null;if(!h&&m&&(nt=function QD(e,n,r,i){const a=e.cleanup;if(null!=a)for(let u=0;u<a.length-1;u+=2){const h=a[u];if(h===r&&a[u+1]===i){const m=n[cc],g=a[u+2];return m.length>g?m[g]:null}"string"==typeof h&&(u+=2)}return null}(e,n,a,i.index)),null!==nt)(nt.__ngLastListenerFn__||nt).__ngNextListenerFn__=u,nt.__ngLastListenerFn__=u,H=!1;else{u=Y_(i,n,D,u,!1);const vt=r.listen(fe,a,u);L.push(u,vt),x&&x.push(a,oe,we,we+1)}}else u=Y_(i,n,D,u,!1);const W=i.outputs;let ee;if(H&&null!==W&&(ee=W[a])){const ie=ee.length;if(ie)for(let fe=0;fe<ie;fe+=2){const zt=n[ee[fe]][ee[fe+1]].subscribe(u),Gi=L.length;L.push(u,zt),x&&x.push(a,i.index,Gi,-(Gi+1))}}}(u,a,a[wt],h,e,n,i),Mf}function Z_(e,n,r,i){try{return xr(6,n,r),!1!==r(i)}catch(a){return h_(e,a),!1}finally{xr(7,n,r)}}function Y_(e,n,r,i,a){return function u(h){if(h===Function)return i;pf(e.componentOffset>-1?gi(e.index,n):n);let g=Z_(n,r,i,h),x=u.__ngNextListenerFn__;for(;x;)g=Z_(n,r,x,h)&&g,x=x.__ngNextListenerFn__;return a&&!1===g&&h.preventDefault(),g}}function Yy(e,n=""){const r=le(),i=Et(),a=e+Nt,u=i.firstCreatePass?vd(i,a,1,n,null):i.data[a],h=bx(i,r,u,n,e);r[a]=h,Ns()&&ad(i,r,h,u),ro(u,!1)}let bx=(e,n,r,i,a)=>(ei(!0),function zc(e,n){return e.createText(n)}(n[wt],i));const Rd="en-US";let Gx=Rd;class ul{}class mE{}class r0 extends ul{constructor(n,r,i){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new w_(this);const a=hi(n);this._bootstrapComponents=Wa(a.bootstrap),this._r3Injector=Lb(n,r,[{provide:ul,useValue:this},{provide:km,useValue:this.componentFactoryResolver},...i],Nn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class o0 extends mE{constructor(n){super(),this.moduleType=n}create(n){return new r0(this.moduleType,n,[])}}class gE extends ul{constructor(n){super(),this.componentFactoryResolver=new w_(this),this.instance=null;const r=new Xs([...n.providers,{provide:ul,useValue:this},{provide:km,useValue:this.componentFactoryResolver}],n.parent||ii(),n.debugName,new Set(["environment"]));this.injector=r,n.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function s0(e,n,r=null){return new gE({providers:e,parent:n,debugName:r,runEnvironmentInitializers:!0}).injector}let Z1=(()=>{class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const i=zr(0,r.type),a=i.length>0?s0([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,a)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=at({token:e,providedIn:"environment",factory:()=>new e(ot(Gr))})}return e})();function vE(e){e.getStandaloneInjector=n=>n.get(Z1).getOrCreateStandaloneInjector(e)}function bI(){return this._results[Symbol.iterator]()}class c0{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Mi)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=c0.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=bI)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,r){return this._results.reduce(n,r)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,r){const i=this;i.dirty=!1;const a=function Hr(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Mr(e,n,r){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let a=e[i],u=n[i];if(r&&(a=r(a),u=r(u)),u!==a)return!1}return!0}(i._results,a,r))&&(i._results=a,i.length=a.length,i.last=a[this.length-1],i.first=a[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function xI(e,n,r,i=!0){const a=n[Ie];if(function qc(e,n,r,i){const a=jn+i,u=r.length;i>0&&(r[a-1][eo]=n),i<u-jn?(n[eo]=r[a],La(r,jn+i,n)):(r.push(n),n[eo]=null),n[Sn]=r;const h=n[bu];null!==h&&r!==h&&function Zc(e,n){const r=e[So];n[Gn]!==n[Sn][Sn][Gn]&&(e[st]=!0),null===r?e[So]=[n]:r.push(n)}(h,n);const m=n[Re];null!==m&&m.insertView(e),n[xt]|=128}(a,n,e,r),i){const u=af(r,e),h=n[wt],m=sd(h,e[rt]);null!==m&&function jc(e,n,r,i,a,u){i[Fn]=a,i[Rr]=n,rl(e,i,r,1,a,u)}(a,e[Rr],h,n,m,u)}}let qa=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=AI}return e})();const EI=qa,MI=class extends EI{constructor(n,r,i){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){const a=function _I(e,n,r,i){const a=n.tView,m=Hm(e,a,r,4096&e[xt]?4096:16,null,n,null,null,null,i?.injector??null,i?.hydrationInfo??null);m[bu]=e[n.index];const x=e[Re];return null!==x&&(m[Re]=x.createEmbeddedView(a)),Py(a,m,r),m}(this._declarationLView,this._declarationTContainer,n,{injector:r,hydrationInfo:i});return new vf(a)}};function AI(){return ig(pr(),le())}function ig(e,n){return 4&e.type?new MI(n,e,pd(e,n)):null}let ys=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=RI}return e})();function RI(){return NE(pr(),le())}const LI=ys,PE=class extends LI{constructor(n,r,i){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=i}get element(){return pd(this._hostTNode,this._hostLView)}get injector(){return new Zn(this._hostTNode,this._hostLView)}get parentInjector(){const n=Fi(this._hostTNode,this._hostLView);if(ku(n)){const r=Uu(n,this._hostLView),i=Bu(n);return new Zn(r[Ie].data[i+8],r)}return new Zn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const r=OE(this._lContainer);return null!==r&&r[n]||null}get length(){return this._lContainer.length-jn}createEmbeddedView(n,r,i){let a,u;"number"==typeof i?a=i:null!=i&&(a=i.index,u=i.injector);const m=n.createEmbeddedViewImpl(r||{},u,null);return this.insertImpl(m,a,false),m}createComponent(n,r,i,a,u){const h=n&&!function zs(e){return"function"==typeof e}(n);let m;if(h)m=r;else{const ie=r||{};m=ie.index,i=ie.injector,a=ie.projectableNodes,u=ie.environmentInjector||ie.ngModuleRef}const g=h?n:new yf(Ht(n)),x=i||this.parentInjector;if(!u&&null==g.ngModule){const fe=(h?x:this.parentInjector).get(Gr,null);fe&&(u=fe)}Ht(g.componentType??{});const W=g.create(x,a,null,u);return this.insertImpl(W.hostView,m,false),W}insert(n,r){return this.insertImpl(n,r,!1)}insertImpl(n,r,i){const a=n._lView;if(function Jp(e){return Wn(e[Sn])}(a)){const g=this.indexOf(n);if(-1!==g)this.detach(g);else{const x=a[Sn],D=new PE(x,x[Rr],x[Sn]);D.detach(D.indexOf(n))}}const h=this._adjustIndex(r),m=this._lContainer;return xI(m,a,h,!i),n.attachToViewContainerRef(),La(u0(m),h,n),n}move(n,r){return this.insert(n,r)}indexOf(n){const r=OE(this._lContainer);return null!==r?r.indexOf(n):-1}remove(n){const r=this._adjustIndex(n,-1),i=Ba(this._lContainer,r);i&&(Pa(u0(this._lContainer),r),Zs(i[Ie],i))}detach(n){const r=this._adjustIndex(n,-1),i=Ba(this._lContainer,r);return i&&null!=Pa(u0(this._lContainer),r)?new vf(i):null}_adjustIndex(n,r=0){return n??this.length+r}};function OE(e){return e[8]}function u0(e){return e[8]||(e[8]=[])}function NE(e,n){let r;const i=n[e.index];return Wn(i)?r=i:(r=function a_(e,n,r,i){return[e,!0,!1,n,null,0,i,r,null,null,null]}(i,n,null,e),n[e.index]=r,zm(n,r)),FE(r,n,e,i),new PE(r,e,n)}let FE=function kE(e,n,r,i){if(e[rt])return;let a;a=8&r.type?bn(i):function PI(e,n){const r=e[wt],i=r.createComment(""),a=Kr(n,e);return vo(r,sd(r,a),i,function ey(e,n){return e.nextSibling(n)}(r,a),!1),i}(n,r),e[rt]=a};class l0{constructor(n){this.queryList=n,this.matches=null}clone(){return new l0(this.queryList)}setDirty(){this.queryList.setDirty()}}class d0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const r=n.queries;if(null!==r){const i=null!==n.contentQueries?n.contentQueries[0]:r.length,a=[];for(let u=0;u<i;u++){const h=r.getByIndex(u);a.push(this.queries[h.indexInDeclarationView].clone())}return new d0(a)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let r=0;r<this.queries.length;r++)null!==GE(n,r).matches&&this.queries[r].setDirty()}}class BE{constructor(n,r,i=null){this.predicate=n,this.flags=r,this.read=i}}class h0{constructor(n=[]){this.queries=n}elementStart(n,r){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,r)}elementEnd(n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(n)}embeddedTView(n){let r=null;for(let i=0;i<this.length;i++){const a=null!==r?r.length:0,u=this.getByIndex(i).embeddedTView(n,a);u&&(u.indexInDeclarationView=i,null!==r?r.push(u):r=[u])}return null!==r?new h0(r):null}template(n,r){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,r)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class f0{constructor(n,r=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(n,r){this.isApplyingToNode(r)&&this.matchTNode(n,r)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,r){this.elementStart(n,r)}embeddedTView(n,r){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,r),new f0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==r;)i=i.parent;return r===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,r){const i=this.metadata.predicate;if(Array.isArray(i))for(let a=0;a<i.length;a++){const u=i[a];this.matchTNodeWithReadOption(n,r,FI(r,u)),this.matchTNodeWithReadOption(n,r,is(r,n,u,!1,!1))}else i===qa?4&r.type&&this.matchTNodeWithReadOption(n,r,-1):this.matchTNodeWithReadOption(n,r,is(r,n,i,!1,!1))}matchTNodeWithReadOption(n,r,i){if(null!==i){const a=this.metadata.read;if(null!==a)if(a===tu||a===ys||a===qa&&4&r.type)this.addMatch(r.index,-2);else{const u=is(r,n,a,!1,!1);null!==u&&this.addMatch(r.index,u)}else this.addMatch(r.index,i)}}addMatch(n,r){null===this.matches?this.matches=[n,r]:this.matches.push(n,r)}}function FI(e,n){const r=e.localNames;if(null!==r)for(let i=0;i<r.length;i+=2)if(r[i]===n)return r[i+1];return null}function BI(e,n,r,i){return-1===r?function kI(e,n){return 11&e.type?pd(e,n):4&e.type?ig(e,n):null}(n,e):-2===r?function UI(e,n,r){return r===tu?pd(n,e):r===qa?ig(n,e):r===ys?NE(n,e):void 0}(e,n,i):uo(e,e[Ie],r,n)}function UE(e,n,r,i){const a=n[Re].queries[i];if(null===a.matches){const u=e.data,h=r.matches,m=[];for(let g=0;g<h.length;g+=2){const x=h[g];m.push(x<0?null:BI(n,u[x],h[g+1],r.metadata.read))}a.matches=m}return a.matches}function p0(e,n,r,i){const a=e.queries.getByIndex(r),u=a.matches;if(null!==u){const h=UE(e,n,a,r);for(let m=0;m<u.length;m+=2){const g=u[m];if(g>0)i.push(h[m/2]);else{const x=u[m+1],D=n[-g];for(let L=jn;L<D.length;L++){const H=D[L];H[bu]===H[Sn]&&p0(H[Ie],H,x,i)}if(null!==D[So]){const L=D[So];for(let H=0;H<L.length;H++){const W=L[H];p0(W[Ie],W,x,i)}}}}}return i}function sg(e){const n=le(),r=Et(),i=ln();yc(i+1);const a=GE(r,i);if(e.dirty&&function Au(e){return 4==(4&e[xt])}(n)===(2==(2&a.metadata.flags))){if(null===a.matches)e.reset([]);else{const u=a.crossesNgTemplate?p0(r,n,i,[]):UE(r,n,a,i);e.reset(u,ZC),e.notifyOnChanges()}return!0}return!1}function m0(e,n,r){const i=Et();i.firstCreatePass&&(function zE(e,n,r){null===e.queries&&(e.queries=new h0),e.queries.track(new f0(n,r))}(i,new BE(e,n,r),-1),2==(2&n)&&(i.staticViewQueries=!0)),function HE(e,n,r){const i=new c0(4==(4&r));(function DS(e,n,r,i){const a=u_(n);a.push(r),e.firstCreatePass&&l_(e).push(i,a.length-1)})(e,n,i,i.destroy),null===n[Re]&&(n[Re]=new d0),n[Re].queries.push(new l0(i))}(i,le(),n)}function ag(){return function VI(e,n){return e[Re].queries[n].queryList}(le(),ln())}function GE(e,n){return e.queries.getByIndex(n)}const _0=new Je("Application Initializer");let x0=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=Ge(_0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const a of this.appInits){const u=a();if(Qm(u))r.push(u);else if(W_(u)){const h=new Promise((m,g)=>{u.subscribe({complete:m,error:g})});r.push(h)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(a=>{this.reject(a)}),0===r.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),sM=(()=>{class e{log(r){console.log(r)}warn(r){console.warn(r)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const Za=new Je("LocaleId",{providedIn:"root",factory:()=>Ge(Za,Ot.Optional|Ot.SkipSelf)||function uR(){return typeof $localize<"u"&&$localize.locale||Rd}()});let aM=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new di(!1)}add(){this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class hR{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}}let cM=(()=>{class e{compileModuleSync(r){return new o0(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const i=this.compileModuleSync(r),u=Wa(hi(r).declarations).reduce((h,m)=>{const g=Ht(m);return g&&h.push(new yf(g)),h},[]);return new hR(i,u)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const hM=new Je(""),lg=new Je("");let S0,A0=(()=>{class e{constructor(r,i,a){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,S0||(function OR(e){S0=e}(a),a.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(r)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,a){let u=-1;i&&i>0&&(u=setTimeout(()=>{this._callbacks=this._callbacks.filter(h=>h.timeoutId!==u),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:u,updateCb:a})}whenStable(r,i,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,a){return[]}static#e=this.\u0275fac=function(i){return new(i||e)(ot(Dn),ot(C0),ot(lg))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),C0=(()=>{class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return S0?.findTestabilityInTree(this,r,i)??null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),ru=null;const fM=new Je("AllowMultipleToken"),D0=new Je("PlatformDestroyListeners"),T0=new Je("appBootstrapListener");class mM{constructor(n,r){this.name=n,this.token=r}}function vM(e,n,r=[]){const i=`Platform: ${n}`,a=new Je(i);return(u=[])=>{let h=I0();if(!h||h.injector.get(fM,!1)){const m=[...r,...u,{provide:a,useValue:!0}];e?e(m):function kR(e){if(ru&&!ru.get(fM,!1))throw new Me(400,!1);(function pM(){!function Cv(e){Gp=e}(()=>{throw new Me(600,!1)})})(),ru=e;const n=e.get(wM);(function gM(e){e.get(Om,null)?.forEach(r=>r())})(e)}(function yM(e=[],n){return Vo.create({name:n,providers:[{provide:Xt,useValue:"platform"},{provide:D0,useValue:new Set([()=>ru=null])},...e]})}(m,i))}return function UR(e){const n=I0();if(!n)throw new Me(401,!1);return n}()}}function I0(){return ru?.get(wM)??null}let wM=(()=>{class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){const a=function VR(e="zone.js",n){return"noop"===e?new uS:"zone.js"===e?new Dn(n):e}(i?.ngZone,function bM(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return a.run(()=>{const u=function q1(e,n,r){return new r0(e,n,r)}(r.moduleType,this.injector,function AM(e){return[{provide:Dn,useFactory:e},{provide:Yt,multi:!0,useFactory:()=>{const n=Ge(zR,{optional:!0});return()=>n.initialize()}},{provide:MM,useFactory:HR},{provide:kb,useFactory:Bb}]}(()=>a)),h=u.injector.get(ja,null);return a.runOutsideAngular(()=>{const m=a.onError.subscribe({next:g=>{h.handleError(g)}});u.onDestroy(()=>{dg(this._modules,u),m.unsubscribe()})}),function _M(e,n,r){try{const i=r();return Qm(i)?i.catch(a=>{throw n.runOutsideAngular(()=>e.handleError(a)),a}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}(h,a,()=>{const m=u.injector.get(x0);return m.runInitializers(),m.donePromise.then(()=>(function jx(e){Hn(e,"Expected localeId to be defined"),"string"==typeof e&&(Gx=e.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Za,Rd)||Rd),this._moduleDoBootstrap(u),u))})})}bootstrapModule(r,i=[]){const a=xM({},i);return function NR(e,n,r){const i=new o0(r);return Promise.resolve(i)}(0,0,r).then(u=>this.bootstrapModuleFactory(u,a))}_moduleDoBootstrap(r){const i=r.injector.get(Od);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(a=>i.bootstrap(a));else{if(!r.instance.ngDoBootstrap)throw new Me(-403,!1);r.instance.ngDoBootstrap(i)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const r=this._injector.get(D0,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||e)(ot(Vo))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function xM(e,n){return Array.isArray(n)?n.reduce(xM,e):{...e,...n}}let Od=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ge(MM),this.zoneIsStable=Ge(kb),this.componentTypes=[],this.components=[],this.isStable=Ge(aM).hasPendingTasks.pipe($r(r=>r?ft(!1):this.zoneIsStable),function yl(e,n=ai){return e=e??da,Be((r,i)=>{let a,u=!0;r.subscribe(Ne(i,h=>{const m=n(h);(u||!e(a,m))&&(u=!1,a=m,i.next(h))}))})}(),rh()),this._injector=Ge(Gr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){const a=r instanceof Ab;if(!this._injector.get(x0).done)throw!a&&function ac(e){const n=Ht(e)||_r(e)||Vr(e);return null!==n&&n.standalone}(r),new Me(405,!1);let h;h=a?r:this._injector.get(km).resolveComponentFactory(r),this.componentTypes.push(h.componentType);const m=function FR(e){return e.isBoundToModule}(h)?void 0:this._injector.get(ul),x=h.create(Vo.NULL,[],i||h.selector,m),D=x.location.nativeElement,L=x.injector.get(hM,null);return L?.registerApplication(D),x.onDestroy(()=>{this.detachView(x.hostView),dg(this.components,x),L?.unregisterApplication(D)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){const i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){const i=r;dg(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const i=this._injector.get(T0,[]);i.push(...this._bootstrapListeners),i.forEach(a=>a(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>dg(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Me(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function dg(e,n){const r=e.indexOf(n);r>-1&&e.splice(r,1)}const MM=new Je("",{providedIn:"root",factory:()=>Ge(ja).handleError.bind(void 0)});function HR(){const e=Ge(Dn),n=Ge(ja);return r=>e.runOutsideAngular(()=>n.handleError(r))}let zR=(()=>{class e{constructor(){this.zone=Ge(Dn),this.applicationRef=Ge(Od)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let R0=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=jR}return e})();function jR(e){return function WR(e,n,r){if(no(e)&&!r){const i=gi(e.index,n);return new vf(i,i)}return 47&e.type?new vf(n[Gn],n):null}(pr(),le(),16==(16&e))}const iL=vM(null,"core",[]);let oL=(()=>{class e{constructor(r){}static#e=this.\u0275fac=function(i){return new(i||e)(ot(Od))};static#t=this.\u0275mod=pa({type:e});static#n=this.\u0275inj=Ss({})}return e})(),B0=null;function Nd(){return B0}class wL{}const zo=new Je("DocumentToken");let U0=(()=>{class e{historyGo(r){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:function(){return Ge(_L)},providedIn:"platform"})}return e})();const bL=new Je("Location Initialized");let _L=(()=>{class e extends U0{constructor(){super(),this._doc=Ge(zo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nd().getBaseHref(this._doc)}onPopState(r){const i=Nd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=Nd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,a){this._history.pushState(r,i,a)}replaceState(r,i,a){this._history.replaceState(r,i,a)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function V0(e,n){if(0==e.length)return n;if(0==n.length)return e;let r=0;return e.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?e+n.substring(1):1==r?e+n:e+"/"+n}function GM(e){const n=e.match(/#|\?|$/),r=n&&n.index||e.length;return e.slice(0,r-("/"===e[r-1]?1:0))+e.slice(r)}function Ya(e){return e&&"?"!==e[0]?"?"+e:e}let dl=(()=>{class e{historyGo(r){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:function(){return Ge(WM)},providedIn:"root"})}return e})();const jM=new Je("appBaseHref");let WM=(()=>{class e extends dl{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ge(zo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return V0(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+Ya(this._platformLocation.search),a=this._platformLocation.hash;return a&&r?`${i}${a}`:i}pushState(r,i,a,u){const h=this.prepareExternalUrl(a+Ya(u));this._platformLocation.pushState(r,i,h)}replaceState(r,i,a,u){const h=this.prepareExternalUrl(a+Ya(u));this._platformLocation.replaceState(r,i,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}static#e=this.\u0275fac=function(i){return new(i||e)(ot(U0),ot(jM,8))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xL=(()=>{class e extends dl{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=V0(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,a,u){let h=this.prepareExternalUrl(a+Ya(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(r,i,h)}replaceState(r,i,a,u){let h=this.prepareExternalUrl(a+Ya(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}static#e=this.\u0275fac=function(i){return new(i||e)(ot(U0),ot(jM,8))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),H0=(()=>{class e{constructor(r){this._subject=new Mi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function AL(e){if(new RegExp("^(https?:)?//").test(e)){const[,r]=e.split(/\/\/[^\/]+/);return r}return e}(GM($M(i))),this._locationStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ya(i))}normalize(r){return e.stripTrailingSlash(function ML(e,n){if(!e||!n.startsWith(e))return n;const r=n.substring(e.length);return""===r||["/",";","?","#"].includes(r[0])?r:n}(this._basePath,$M(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",a=null){this._locationStrategy.pushState(a,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ya(i)),a)}replaceState(r,i="",a=null){this._locationStrategy.replaceState(a,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ya(i)),a)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(a=>a(r,i))}subscribe(r,i,a){return this._subject.subscribe({next:r,error:i,complete:a})}static#e=this.normalizeQueryParams=Ya;static#t=this.joinWithSlash=V0;static#n=this.stripTrailingSlash=GM;static#r=this.\u0275fac=function(i){return new(i||e)(ot(dl))};static#i=this.\u0275prov=at({token:e,factory:function(){return function EL(){return new H0(ot(dl))}()},providedIn:"root"})}return e})();function $M(e){return e.replace(/\/index.html$/,"")}let VP=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=pa({type:e});static#n=this.\u0275inj=Ss({})}return e})();function cA(e){return"server"===e}let jP=(()=>{class e{static#e=this.\u0275prov=at({token:e,providedIn:"root",factory:()=>new WP(ot(zo),window)})}return e})();class WP{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function $P(e,n){const r=e.getElementById(n)||e.getElementsByName(n)[0];if(r)return r;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let a=i.currentNode;for(;a;){const u=a.shadowRoot;if(u){const h=u.getElementById(n)||u.querySelector(`[name="${n}"]`);if(h)return h}a=i.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),r.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const r=n.getBoundingClientRect(),i=r.left+this.window.pageXOffset,a=r.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(i-u[0],a-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class gO extends wL{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class iw extends gO{static makeCurrent(){!function yL(e){B0||(B0=e)}(new iw)}onAndCancel(n,r,i){return n.addEventListener(r,i),()=>{n.removeEventListener(r,i)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=function vO(){return Uf=Uf||document.querySelector("base"),Uf?Uf.getAttribute("href"):null}();return null==r?null:function yO(e){Dg=Dg||document.createElement("a"),Dg.setAttribute("href",e);const n=Dg.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){Uf=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function uP(e,n){n=encodeURIComponent(n);for(const r of e.split(";")){const i=r.indexOf("="),[a,u]=-1==i?[r,""]:[r.slice(0,i),r.slice(i+1)];if(a.trim()===n)return decodeURIComponent(u)}return null}(document.cookie,n)}}let Dg,Uf=null,bO=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})();const ow=new Je("EventManagerPlugins");let fA=(()=>{class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(a=>{a.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,a){return this._findPluginFor(i).addEventListener(r,i,a)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(u=>u.supports(r)),!i)throw new Me(5101,!1);return this._eventNameToPlugin.set(r,i),i}static#e=this.\u0275fac=function(i){return new(i||e)(ot(ow),ot(Dn))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})();class pA{constructor(n){this._doc=n}}const sw="ng-app-id";let mA=(()=>{class e{constructor(r,i,a,u={}){this.doc=r,this.appId=i,this.nonce=a,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=cA(u),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(a=>a.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${sw}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(a=>{null!=a.textContent&&i.set(a.textContent,a)}),i}return null}changeUsageCount(r,i){const a=this.styleRef;if(a.has(r)){const u=a.get(r);return u.usage+=i,u.usage}return a.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const a=this.styleNodesInDOM,u=a?.get(i);if(u?.parentNode===r)return a.delete(i),u.removeAttribute(sw),u;{const h=this.doc.createElement("style");return this.nonce&&h.setAttribute("nonce",this.nonce),h.textContent=i,this.platformIsServer&&h.setAttribute(sw,this.appId),h}}addStyleToHost(r,i){const a=this.getStyleElement(r,i);r.appendChild(a);const u=this.styleRef,h=u.get(i)?.elements;h?h.push(a):u.set(i,{elements:[a],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||e)(ot(zo),ot(fd),ot(X,8),ot(Jc))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})();const aw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cw=/%COMP%/g,MO=new Je("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function vA(e,n){return n.map(r=>r.replace(cw,e))}let yA=(()=>{class e{constructor(r,i,a,u,h,m,g,x=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=a,this.removeStylesOnCompDestroy=u,this.doc=h,this.platformId=m,this.ngZone=g,this.nonce=x,this.rendererByCompId=new Map,this.platformIsServer=cA(m),this.defaultRenderer=new uw(r,h,g,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ji.ShadowDom&&(i={...i,encapsulation:Ji.Emulated});const a=this.getOrCreateRenderer(r,i);return a instanceof bA?a.applyToHost(r):a instanceof lw&&a.applyStyles(),a}getOrCreateRenderer(r,i){const a=this.rendererByCompId;let u=a.get(i.id);if(!u){const h=this.doc,m=this.ngZone,g=this.eventManager,x=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,L=this.platformIsServer;switch(i.encapsulation){case Ji.Emulated:u=new bA(g,x,i,this.appId,D,h,m,L);break;case Ji.ShadowDom:return new DO(g,x,r,i,h,m,this.nonce,L);default:u=new lw(g,x,i,D,h,m,L)}a.set(i.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||e)(ot(fA),ot(mA),ot(fd),ot(MO),ot(zo),ot(Jc),ot(Dn),ot(X))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})();class uw{constructor(n,r,i,a){this.eventManager=n,this.doc=r,this.ngZone=i,this.platformIsServer=a,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,r){return r?this.doc.createElementNS(aw[r]||r,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,r){(wA(n)?n.content:n).appendChild(r)}insertBefore(n,r,i){n&&(wA(n)?n.content:n).insertBefore(r,i)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new Me(-5104,!1);return r||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,i,a){if(a){r=a+":"+r;const u=aw[a];u?n.setAttributeNS(u,r,i):n.setAttribute(r,i)}else n.setAttribute(r,i)}removeAttribute(n,r,i){if(i){const a=aw[i];a?n.removeAttributeNS(a,r):n.removeAttribute(`${i}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,i,a){a&(Bo.DashCase|Bo.Important)?n.style.setProperty(r,i,a&Bo.Important?"important":""):n.style[r]=i}removeStyle(n,r,i){i&Bo.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,i){n[r]=i}setValue(n,r){n.nodeValue=r}listen(n,r,i){if("string"==typeof n&&!(n=Nd().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${r}`);return this.eventManager.addEventListener(n,r,this.decoratePreventDefault(i))}decoratePreventDefault(n){return r=>{if("__ngUnwrap__"===r)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(r)):n(r))&&r.preventDefault()}}}function wA(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class DO extends uw{constructor(n,r,i,a,u,h,m,g){super(n,u,h,g),this.sharedStylesHost=r,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const x=vA(a.id,a.styles);for(const D of x){const L=document.createElement("style");m&&L.setAttribute("nonce",m),L.textContent=D,this.shadowRoot.appendChild(L)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,i){return super.insertBefore(this.nodeOrShadowRoot(n),r,i)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lw extends uw{constructor(n,r,i,a,u,h,m,g){super(n,u,h,m),this.sharedStylesHost=r,this.removeStylesOnCompDestroy=a,this.styles=g?vA(g,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class bA extends lw{constructor(n,r,i,a,u,h,m,g){const x=a+"-"+i.id;super(n,r,i,u,h,m,g,x),this.contentAttr=function AO(e){return"_ngcontent-%COMP%".replace(cw,e)}(x),this.hostAttr=function CO(e){return"_nghost-%COMP%".replace(cw,e)}(x)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,r){const i=super.createElement(n,r);return super.setAttribute(i,this.contentAttr,""),i}}let TO=(()=>{class e extends pA{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,a){return r.addEventListener(i,a,!1),()=>this.removeEventListener(r,i,a)}removeEventListener(r,i,a){return r.removeEventListener(i,a)}static#e=this.\u0275fac=function(i){return new(i||e)(ot(zo))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})();const _A=["alt","control","meta","shift"],IO={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RO={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let LO=(()=>{class e extends pA{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,a){const u=e.parseEventName(i),h=e.eventCallback(u.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nd().onAndCancel(r,u.domEventName,h))}static parseEventName(r){const i=r.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const u=e._normalizeKey(i.pop());let h="",m=i.indexOf("code");if(m>-1&&(i.splice(m,1),h="code."),_A.forEach(x=>{const D=i.indexOf(x);D>-1&&(i.splice(D,1),h+=x+".")}),h+=u,0!=i.length||0===u.length)return null;const g={};return g.domEventName=a,g.fullKey=h,g}static matchEventFullKeyCode(r,i){let a=IO[r.key]||r.key,u="";return i.indexOf("code.")>-1&&(a=r.code,u="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),_A.forEach(h=>{h!==a&&(0,RO[h])(r)&&(u+=h+".")}),u+=a,u===i)}static eventCallback(r,i,a){return u=>{e.matchEventFullKeyCode(u,r)&&a.runGuarded(()=>i(u))}}static _normalizeKey(r){return"esc"===r?"escape":r}static#e=this.\u0275fac=function(i){return new(i||e)(ot(zo))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})();const FO=vM(iL,"browser",[{provide:Jc,useValue:"browser"},{provide:Om,useValue:function PO(){iw.makeCurrent()},multi:!0},{provide:zo,useFactory:function NO(){return function cy(e){uf=e}(document),document},deps:[]}]),kO=new Je(""),MA=[{provide:lg,useClass:class wO{addToWindow(n){wn.getAngularTestability=(i,a=!0)=>{const u=n.findTestabilityInTree(i,a);if(null==u)throw new Me(5103,!1);return u},wn.getAllAngularTestabilities=()=>n.getAllTestabilities(),wn.getAllAngularRootElements=()=>n.getAllRootElements(),wn.frameworkStabilizers||(wn.frameworkStabilizers=[]),wn.frameworkStabilizers.push(i=>{const a=wn.getAllAngularTestabilities();let u=a.length,h=!1;const m=function(g){h=h||g,u--,0==u&&i(h)};a.forEach(g=>{g.whenStable(m)})})}findTestabilityInTree(n,r,i){return null==r?null:n.getTestability(r)??(i?Nd().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null)}},deps:[]},{provide:hM,useClass:A0,deps:[Dn,C0,lg]},{provide:A0,useClass:A0,deps:[Dn,C0,lg]}],AA=[{provide:Xt,useValue:"root"},{provide:ja,useFactory:function OO(){return new ja},deps:[]},{provide:ow,useClass:TO,multi:!0,deps:[zo,Dn,Jc]},{provide:ow,useClass:LO,multi:!0,deps:[zo]},yA,mA,fA,{provide:Sb,useExisting:yA},{provide:class qP{},useClass:bO,deps:[]},[]];let BO=(()=>{class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:fd,useValue:r.appId}]}}static#e=this.\u0275fac=function(i){return new(i||e)(ot(kO,12))};static#t=this.\u0275mod=pa({type:e});static#n=this.\u0275inj=Ss({providers:[...AA,...MA],imports:[VP,oL]})}return e})(),CA=(()=>{class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}static#e=this.\u0275fac=function(i){return new(i||e)(ot(zo))};static#t=this.\u0275prov=at({token:e,factory:function(i){let a=null;return a=i?new i:function VO(){return new CA(ot(zo))}(),a},providedIn:"root"})}return e})();typeof window<"u"&&window;const{isArray:$O}=Array,{getPrototypeOf:qO,prototype:ZO,keys:YO}=Object;const{isArray:JO}=Array;function hw(...e){const n=ic(e),r=function cp(e){return Te(vl(e))?e.pop():void 0}(e),{args:i,keys:a}=function XO(e){if(1===e.length){const n=e[0];if($O(n))return{args:n,keys:null};if(function QO(e){return e&&"object"==typeof e&&qO(e)===ZO}(n)){const r=YO(n);return{args:r.map(i=>n[i]),keys:r}}}return{args:e,keys:null}}(e);if(0===i.length)return dr([],n);const u=new C(function nN(e,n,r=ai){return i=>{IA(n,()=>{const{length:a}=e,u=new Array(a);let h=a,m=a;for(let g=0;g<a;g++)IA(n,()=>{const x=dr(e[g],n);let D=!1;x.subscribe(Ne(i,L=>{u[g]=L,D||(D=!0,m--),m||i.next(r(u.slice()))},()=>{--h||i.complete()}))},i)},i)}}(i,n,a?h=>function tN(e,n){return e.reduce((r,i,a)=>(r[i]=n[a],r),{})}(a,h):ai));return r?u.pipe(function eN(e){return be(n=>function KO(e,n){return JO(n)?e(...n):e(n)}(e,n))}(r)):u}function IA(e,n,r){e?Qi(r,e,n):n()}const Tg=te(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function fw(...e){return function rN(){return As(1)}()(dr(e,ic(e)))}function RA(e){return new C(n=>{rr(e()).subscribe(n)})}function Vf(e,n){const r=Te(e)?e:()=>e,i=a=>a.error(r());return new C(n?a=>n.schedule(i,0,a):i)}function pw(){return Be((e,n)=>{let r=null;e._refCount++;const i=Ne(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(r=null);const a=e._connection,u=r;r=null,a&&(!u||a===u)&&a.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(r=e.connect())})}class LA extends C{constructor(n,r){super(),this.source=n,this.subjectFactory=r,this._subject=null,this._refCount=0,this._connection=null,ye(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new nn;const r=this.getSubject();n.add(this.source.subscribe(Ne(r,void 0,()=>{this._teardown(),r.complete()},i=>{this._teardown(),r.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=nn.EMPTY)}return n}refCount(){return pw()(this)}}function kd(e){return e<=0?()=>Pi:Be((n,r)=>{let i=0;n.subscribe(Ne(r,a=>{++i<=e&&(r.next(a),e<=i&&r.complete())}))})}function ou(e,n){return Be((r,i)=>{let a=0;r.subscribe(Ne(i,u=>e.call(n,u,a++)&&i.next(u)))})}function Ig(e){return Be((n,r)=>{let i=!1;n.subscribe(Ne(r,a=>{i=!0,r.next(a)},()=>{i||r.next(e),r.complete()}))})}function PA(e=oN){return Be((n,r)=>{let i=!1;n.subscribe(Ne(r,a=>{i=!0,r.next(a)},()=>i?r.complete():r.error(e())))})}function oN(){return new Tg}function hl(e,n){const r=arguments.length>=2;return i=>i.pipe(e?ou((a,u)=>e(a,u,i)):ai,kd(1),r?Ig(n):PA(()=>new Tg))}function Hf(e,n){return Te(n)?ir(e,n,1):ir(e,1)}function si(e,n,r){const i=Te(e)||n||r?{next:e,error:n,complete:r}:e;return i?Be((a,u)=>{var h;null===(h=i.subscribe)||void 0===h||h.call(i);let m=!0;a.subscribe(Ne(u,g=>{var x;null===(x=i.next)||void 0===x||x.call(i,g),u.next(g)},()=>{var g;m=!1,null===(g=i.complete)||void 0===g||g.call(i),u.complete()},g=>{var x;m=!1,null===(x=i.error)||void 0===x||x.call(i,g),u.error(g)},()=>{var g,x;m&&(null===(g=i.unsubscribe)||void 0===g||g.call(i)),null===(x=i.finalize)||void 0===x||x.call(i)}))}):ai}function fl(e){return Be((n,r)=>{let u,i=null,a=!1;i=n.subscribe(Ne(r,void 0,void 0,h=>{u=rr(e(h,fl(e)(n))),i?(i.unsubscribe(),i=null,u.subscribe(r)):a=!0})),a&&(i.unsubscribe(),i=null,u.subscribe(r))})}function mw(e){return e<=0?()=>Pi:Be((n,r)=>{let i=[];n.subscribe(Ne(r,a=>{i.push(a),e<i.length&&i.shift()},()=>{for(const a of i)r.next(a);r.complete()},void 0,()=>{i=null}))})}function gw(e){return Be((n,r)=>{try{n.subscribe(r)}finally{r.add(e)}})}const Lt="primary",zf=Symbol("RouteTitle");class dN{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function Bd(e){return new dN(e)}function hN(e,n,r){const i=r.path.split("/");if(i.length>e.length||"full"===r.pathMatch&&(n.hasChildren()||i.length<e.length))return null;const a={};for(let u=0;u<i.length;u++){const h=i[u],m=e[u];if(h.startsWith(":"))a[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:e.slice(0,i.length),posParams:a}}function ta(e,n){const r=e?Object.keys(e):void 0,i=n?Object.keys(n):void 0;if(!r||!i||r.length!=i.length)return!1;let a;for(let u=0;u<r.length;u++)if(a=r[u],!OA(e[a],n[a]))return!1;return!0}function OA(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const r=[...e].sort(),i=[...n].sort();return r.every((a,u)=>i[u]===a)}return e===n}function NA(e){return e.length>0?e[e.length-1]:null}function su(e){return function WO(e){return!!e&&(e instanceof C||Te(e.lift)&&Te(e.subscribe))}(e)?e:Qm(e)?dr(Promise.resolve(e)):ft(e)}const pN={exact:function BA(e,n,r){if(!pl(e.segments,n.segments)||!Rg(e.segments,n.segments,r)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!e.children[i]||!BA(e.children[i],n.children[i],r))return!1;return!0},subset:UA},FA={exact:function mN(e,n){return ta(e,n)},subset:function gN(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(r=>OA(e[r],n[r]))},ignored:()=>!0};function kA(e,n,r){return pN[r.paths](e.root,n.root,r.matrixParams)&&FA[r.queryParams](e.queryParams,n.queryParams)&&!("exact"===r.fragment&&e.fragment!==n.fragment)}function UA(e,n,r){return VA(e,n,n.segments,r)}function VA(e,n,r,i){if(e.segments.length>r.length){const a=e.segments.slice(0,r.length);return!(!pl(a,r)||n.hasChildren()||!Rg(a,r,i))}if(e.segments.length===r.length){if(!pl(e.segments,r)||!Rg(e.segments,r,i))return!1;for(const a in n.children)if(!e.children[a]||!UA(e.children[a],n.children[a],i))return!1;return!0}{const a=r.slice(0,e.segments.length),u=r.slice(e.segments.length);return!!(pl(e.segments,a)&&Rg(e.segments,a,i)&&e.children[Lt])&&VA(e.children[Lt],n,u,i)}}function Rg(e,n,r){return n.every((i,a)=>FA[r](e[a].parameters,i.parameters))}class Ud{constructor(n=new yn([],{}),r={},i=null){this.root=n,this.queryParams=r,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bd(this.queryParams)),this._queryParamMap}toString(){return wN.serialize(this)}}class yn{constructor(n,r){this.segments=n,this.children=r,this.parent=null,Object.values(r).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Lg(this)}}class Gf{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=Bd(this.parameters)),this._parameterMap}toString(){return GA(this)}}function pl(e,n){return e.length===n.length&&e.every((r,i)=>r.path===n[i].path)}let jf=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:function(){return new vw},providedIn:"root"})}return e})();class vw{parse(n){const r=new IN(n);return new Ud(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){const r=`/${Wf(n.root,!0)}`,i=function xN(e){const n=Object.keys(e).map(r=>{const i=e[r];return Array.isArray(i)?i.map(a=>`${Pg(r)}=${Pg(a)}`).join("&"):`${Pg(r)}=${Pg(i)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${r}${i}${"string"==typeof n.fragment?`#${function bN(e){return encodeURI(e)}(n.fragment)}`:""}`}}const wN=new vw;function Lg(e){return e.segments.map(n=>GA(n)).join("/")}function Wf(e,n){if(!e.hasChildren())return Lg(e);if(n){const r=e.children[Lt]?Wf(e.children[Lt],!1):"",i=[];return Object.entries(e.children).forEach(([a,u])=>{a!==Lt&&i.push(`${a}:${Wf(u,!1)}`)}),i.length>0?`${r}(${i.join("//")})`:r}{const r=function yN(e,n){let r=[];return Object.entries(e.children).forEach(([i,a])=>{i===Lt&&(r=r.concat(n(a,i)))}),Object.entries(e.children).forEach(([i,a])=>{i!==Lt&&(r=r.concat(n(a,i)))}),r}(e,(i,a)=>a===Lt?[Wf(e.children[Lt],!1)]:[`${a}:${Wf(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Lt]?`${Lg(e)}/${r[0]}`:`${Lg(e)}/(${r.join("//")})`}}function HA(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pg(e){return HA(e).replace(/%3B/gi,";")}function yw(e){return HA(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Og(e){return decodeURIComponent(e)}function zA(e){return Og(e.replace(/\+/g,"%20"))}function GA(e){return`${yw(e.path)}${function _N(e){return Object.keys(e).map(n=>`;${yw(n)}=${yw(e[n])}`).join("")}(e.parameters)}`}const EN=/^[^\/()?;#]+/;function ww(e){const n=e.match(EN);return n?n[0]:""}const MN=/^[^\/()?;=#]+/,CN=/^[^=?&#]+/,DN=/^[^&#]+/;class IN{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(i[Lt]=new yn(n,r)),i}parseSegment(){const n=ww(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Me(4009,!1);return this.capture(n),new Gf(Og(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=function AN(e){const n=e.match(MN);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let i="";if(this.consumeOptional("=")){const a=ww(this.remaining);a&&(i=a,this.capture(i))}n[Og(r)]=Og(i)}parseQueryParam(n){const r=function SN(e){const n=e.match(CN);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let i="";if(this.consumeOptional("=")){const h=function TN(e){const n=e.match(DN);return n?n[0]:""}(this.remaining);h&&(i=h,this.capture(i))}const a=zA(r),u=zA(i);if(n.hasOwnProperty(a)){let h=n[a];Array.isArray(h)||(h=[h],n[a]=h),h.push(u)}else n[a]=u}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=ww(this.remaining),a=this.remaining[i.length];if("/"!==a&&")"!==a&&";"!==a)throw new Me(4010,!1);let u;i.indexOf(":")>-1?(u=i.slice(0,i.indexOf(":")),this.capture(u),this.capture(":")):n&&(u=Lt);const h=this.parseChildren();r[u]=1===Object.keys(h).length?h[Lt]:new yn([],h),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Me(4011,!1)}}function jA(e){return e.segments.length>0?new yn([],{[Lt]:e}):e}function WA(e){const n={};for(const i of Object.keys(e.children)){const u=WA(e.children[i]);if(i===Lt&&0===u.segments.length&&u.hasChildren())for(const[h,m]of Object.entries(u.children))n[h]=m;else(u.segments.length>0||u.hasChildren())&&(n[i]=u)}return function RN(e){if(1===e.numberOfChildren&&e.children[Lt]){const n=e.children[Lt];return new yn(e.segments.concat(n.segments),n.children)}return e}(new yn(e.segments,n))}function ml(e){return e instanceof Ud}function $A(e){let n;const a=jA(function r(u){const h={};for(const g of u.children){const x=r(g);h[g.outlet]=x}const m=new yn(u.url,h);return u===e&&(n=m),m}(e.root));return n??a}function qA(e,n,r,i){let a=e;for(;a.parent;)a=a.parent;if(0===n.length)return bw(a,a,a,r,i);const u=function PN(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new YA(!0,0,e);let n=0,r=!1;const i=e.reduce((a,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([g,x])=>{m[g]="string"==typeof x?x.split("/"):x}),[...a,{outlets:m}]}if(u.segmentPath)return[...a,u.segmentPath]}return"string"!=typeof u?[...a,u]:0===h?(u.split("/").forEach((m,g)=>{0==g&&"."===m||(0==g&&""===m?r=!0:".."===m?n++:""!=m&&a.push(m))}),a):[...a,u]},[]);return new YA(r,n,i)}(n);if(u.toRoot())return bw(a,a,new yn([],{}),r,i);const h=function ON(e,n,r){if(e.isAbsolute)return new Fg(n,!0,0);if(!r)return new Fg(n,!1,NaN);if(null===r.parent)return new Fg(r,!0,0);const i=Ng(e.commands[0])?0:1;return function NN(e,n,r){let i=e,a=n,u=r;for(;u>a;){if(u-=a,i=i.parent,!i)throw new Me(4005,!1);a=i.segments.length}return new Fg(i,!1,a-u)}(r,r.segments.length-1+i,e.numberOfDoubleDots)}(u,a,e),m=h.processChildren?qf(h.segmentGroup,h.index,u.commands):XA(h.segmentGroup,h.index,u.commands);return bw(a,h.segmentGroup,m,r,i)}function Ng(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function $f(e){return"object"==typeof e&&null!=e&&e.outlets}function bw(e,n,r,i,a){let h,u={};i&&Object.entries(i).forEach(([g,x])=>{u[g]=Array.isArray(x)?x.map(D=>`${D}`):`${x}`}),h=e===n?r:ZA(e,n,r);const m=jA(WA(h));return new Ud(m,u,a)}function ZA(e,n,r){const i={};return Object.entries(e.children).forEach(([a,u])=>{i[a]=u===n?r:ZA(u,n,r)}),new yn(e.segments,i)}class YA{constructor(n,r,i){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=i,n&&i.length>0&&Ng(i[0]))throw new Me(4003,!1);const a=i.find($f);if(a&&a!==NA(i))throw new Me(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fg{constructor(n,r,i){this.segmentGroup=n,this.processChildren=r,this.index=i}}function XA(e,n,r){if(e||(e=new yn([],{})),0===e.segments.length&&e.hasChildren())return qf(e,n,r);const i=function kN(e,n,r){let i=0,a=n;const u={match:!1,pathIndex:0,commandIndex:0};for(;a<e.segments.length;){if(i>=r.length)return u;const h=e.segments[a],m=r[i];if($f(m))break;const g=`${m}`,x=i<r.length-1?r[i+1]:null;if(a>0&&void 0===g)break;if(g&&x&&"object"==typeof x&&void 0===x.outlets){if(!JA(g,x,h))return u;i+=2}else{if(!JA(g,{},h))return u;i++}a++}return{match:!0,pathIndex:a,commandIndex:i}}(e,n,r),a=r.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const u=new yn(e.segments.slice(0,i.pathIndex),{});return u.children[Lt]=new yn(e.segments.slice(i.pathIndex),e.children),qf(u,0,a)}return i.match&&0===a.length?new yn(e.segments,{}):i.match&&!e.hasChildren()?_w(e,n,r):i.match?qf(e,0,a):_w(e,n,r)}function qf(e,n,r){if(0===r.length)return new yn(e.segments,{});{const i=function FN(e){return $f(e[0])?e[0].outlets:{[Lt]:e}}(r),a={};if(Object.keys(i).some(u=>u!==Lt)&&e.children[Lt]&&1===e.numberOfChildren&&0===e.children[Lt].segments.length){const u=qf(e.children[Lt],n,r);return new yn(e.segments,u.children)}return Object.entries(i).forEach(([u,h])=>{"string"==typeof h&&(h=[h]),null!==h&&(a[u]=XA(e.children[u],n,h))}),Object.entries(e.children).forEach(([u,h])=>{void 0===i[u]&&(a[u]=h)}),new yn(e.segments,a)}}function _w(e,n,r){const i=e.segments.slice(0,n);let a=0;for(;a<r.length;){const u=r[a];if($f(u)){const g=BN(u.outlets);return new yn(i,g)}if(0===a&&Ng(r[0])){i.push(new Gf(e.segments[n].path,QA(r[0]))),a++;continue}const h=$f(u)?u.outlets[Lt]:`${u}`,m=a<r.length-1?r[a+1]:null;h&&m&&Ng(m)?(i.push(new Gf(h,QA(m))),a+=2):(i.push(new Gf(h,{})),a++)}return new yn(i,{})}function BN(e){const n={};return Object.entries(e).forEach(([r,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[r]=_w(new yn([],{}),0,i))}),n}function QA(e){const n={};return Object.entries(e).forEach(([r,i])=>n[r]=`${i}`),n}function JA(e,n,r){return e==r.path&&ta(n,r.parameters)}const Zf="imperative";class na{constructor(n,r){this.id=n,this.url=r}}class kg extends na{constructor(n,r,i="imperative",a=null){super(n,r),this.type=0,this.navigationTrigger=i,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class au extends na{constructor(n,r,i){super(n,r),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yf extends na{constructor(n,r,i,a){super(n,r),this.reason=i,this.code=a,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vd extends na{constructor(n,r,i,a){super(n,r),this.reason=i,this.code=a,this.type=16}}class Bg extends na{constructor(n,r,i,a){super(n,r),this.error=i,this.target=a,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KA extends na{constructor(n,r,i,a){super(n,r),this.urlAfterRedirects=i,this.state=a,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UN extends na{constructor(n,r,i,a){super(n,r),this.urlAfterRedirects=i,this.state=a,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VN extends na{constructor(n,r,i,a,u){super(n,r),this.urlAfterRedirects=i,this.state=a,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class HN extends na{constructor(n,r,i,a){super(n,r),this.urlAfterRedirects=i,this.state=a,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zN extends na{constructor(n,r,i,a){super(n,r),this.urlAfterRedirects=i,this.state=a,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GN{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jN{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class WN{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $N{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qN{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZN{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eC{constructor(n,r,i){this.routerEvent=n,this.position=r,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xw{}class Ew{constructor(n){this.url=n}}class YN{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Xf,this.attachRef=null}}let Xf=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const a=this.getOrCreateContext(r);a.outlet=i,this.contexts.set(r,a)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new YN,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class tC{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=Mw(n,this._root);return r?r.children.map(i=>i.value):[]}firstChild(n){const r=Mw(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=Aw(n,this._root);return r.length<2?[]:r[r.length-2].children.map(a=>a.value).filter(a=>a!==n)}pathFromRoot(n){return Aw(n,this._root).map(r=>r.value)}}function Mw(e,n){if(e===n.value)return n;for(const r of n.children){const i=Mw(e,r);if(i)return i}return null}function Aw(e,n){if(e===n.value)return[n];for(const r of n.children){const i=Aw(e,r);if(i.length)return i.unshift(n),i}return[]}class Ja{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function Hd(e){const n={};return e&&e.children.forEach(r=>n[r.value.outlet]=r),n}class nC extends tC{constructor(n,r){super(n),this.snapshot=r,Cw(this,n)}toString(){return this.snapshot.toString()}}function rC(e,n){const r=function XN(e,n){const h=new Ug([],{},{},"",{},Lt,n,null,{});return new oC("",new Ja(h,[]))}(0,n),i=new di([new Gf("",{})]),a=new di({}),u=new di({}),h=new di({}),m=new di(""),g=new zd(i,a,h,m,u,Lt,n,r.root);return g.snapshot=r.root,new nC(new Ja(g,[]),r)}class zd{constructor(n,r,i,a,u,h,m,g){this.urlSubject=n,this.paramsSubject=r,this.queryParamsSubject=i,this.fragmentSubject=a,this.dataSubject=u,this.outlet=h,this.component=m,this._futureSnapshot=g,this.title=this.dataSubject?.pipe(be(x=>x[zf]))??ft(void 0),this.url=n,this.params=r,this.queryParams=i,this.fragment=a,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(n=>Bd(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(n=>Bd(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iC(e,n="emptyOnly"){const r=e.pathFromRoot;let i=0;if("always"!==n)for(i=r.length-1;i>=1;){const a=r[i],u=r[i-1];if(a.routeConfig&&""===a.routeConfig.path)i--;else{if(u.component)break;i--}}return function QN(e){return e.reduce((n,r)=>({params:{...n.params,...r.params},data:{...n.data,...r.data},resolve:{...r.data,...n.resolve,...r.routeConfig?.data,...r._resolvedData}}),{params:{},data:{},resolve:{}})}(r.slice(i))}class Ug{get title(){return this.data?.[zf]}constructor(n,r,i,a,u,h,m,g,x){this.url=n,this.params=r,this.queryParams=i,this.fragment=a,this.data=u,this.outlet=h,this.component=m,this.routeConfig=g,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oC extends tC{constructor(n,r){super(r),this.url=n,Cw(this,r)}toString(){return sC(this._root)}}function Cw(e,n){n.value._routerState=e,n.children.forEach(r=>Cw(e,r))}function sC(e){const n=e.children.length>0?` { ${e.children.map(sC).join(", ")} } `:"";return`${e.value}${n}`}function Sw(e){if(e.snapshot){const n=e.snapshot,r=e._futureSnapshot;e.snapshot=r,ta(n.queryParams,r.queryParams)||e.queryParamsSubject.next(r.queryParams),n.fragment!==r.fragment&&e.fragmentSubject.next(r.fragment),ta(n.params,r.params)||e.paramsSubject.next(r.params),function fN(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;++r)if(!ta(e[r],n[r]))return!1;return!0}(n.url,r.url)||e.urlSubject.next(r.url),ta(n.data,r.data)||e.dataSubject.next(r.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Dw(e,n){const r=ta(e.params,n.params)&&function vN(e,n){return pl(e,n)&&e.every((r,i)=>ta(r.parameters,n[i].parameters))}(e.url,n.url);return r&&!(!e.parent!=!n.parent)&&(!e.parent||Dw(e.parent,n.parent))}let aC=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new Mi,this.deactivateEvents=new Mi,this.attachEvents=new Mi,this.detachEvents=new Mi,this.parentContexts=Ge(Xf),this.location=Ge(ys),this.changeDetector=Ge(R0),this.environmentInjector=Ge(Gr),this.inputBinder=Ge(Vg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:a}=r.name;if(i)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Me(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Me(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Me(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Me(4013,!1);this._activatedRoute=r;const a=this.location,h=r.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,g=new JN(r,m,a.injector);this.activated=a.createComponent(h,{index:a.length,injector:g,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275dir=Ur({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ba]})}return e})();class JN{constructor(n,r,i){this.route=n,this.childContexts=r,this.parent=i}get(n,r){return n===zd?this.route:n===Xf?this.childContexts:this.parent.get(n,r)}}const Vg=new Je("");let cC=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,a=hw([i.queryParams,i.params,i.data]).pipe($r(([u,h,m],g)=>(m={...u,...h,...m},0===g?ft(m):Promise.resolve(m)))).subscribe(u=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const h=function vL(e){const n=Ht(e);if(!n)return null;const r=new yf(n);return{get selector(){return r.selector},get type(){return r.componentType},get inputs(){return r.inputs},get outputs(){return r.outputs},get ngContentSelectors(){return r.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(h)for(const{templateName:m}of h.inputs)r.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,a)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})();function Qf(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const a=function e2(e,n,r){return n.children.map(i=>{for(const a of r.children)if(e.shouldReuseRoute(i.value,a.value.snapshot))return Qf(e,i,a);return Qf(e,i)})}(e,n,r);return new Ja(i,a)}{if(e.shouldAttach(n.value)){const u=e.retrieve(n.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=n.value,h.children=n.children.map(m=>Qf(e,m)),h}}const i=function t2(e){return new zd(new di(e.url),new di(e.params),new di(e.queryParams),new di(e.fragment),new di(e.data),e.outlet,e.component,e)}(n.value),a=n.children.map(u=>Qf(e,u));return new Ja(i,a)}}const Tw="ngNavigationCancelingError";function uC(e,n){const{redirectTo:r,navigationBehaviorOptions:i}=ml(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,a=lC(!1,0,n);return a.url=r,a.navigationBehaviorOptions=i,a}function lC(e,n,r){const i=new Error("NavigationCancelingError: "+(e||""));return i[Tw]=!0,i.cancellationCode=n,r&&(i.url=r),i}function dC(e){return e&&e[Tw]}let hC=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=Dl({type:e,selectors:[["ng-component"]],standalone:!0,features:[vE],decls:1,vars:0,template:function(i,a){1&i&&Ef(0,"router-outlet")},dependencies:[aC],encapsulation:2})}return e})();function Iw(e){const n=e.children&&e.children.map(Iw),r=n?{...e,children:n}:{...e};return!r.component&&!r.loadComponent&&(n||r.loadChildren)&&r.outlet&&r.outlet!==Lt&&(r.component=hC),r}function _s(e){return e.outlet||Lt}function Jf(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const r=n.routeConfig;if(r?._loadedInjector)return r._loadedInjector;if(r?._injector)return r._injector}return null}class u2{constructor(n,r,i,a,u){this.routeReuseStrategy=n,this.futureState=r,this.currState=i,this.forwardEvent=a,this.inputBindingEnabled=u}activate(n){const r=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,i,n),Sw(this.futureState.root),this.activateChildRoutes(r,i,n)}deactivateChildRoutes(n,r,i){const a=Hd(r);n.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,a[h],i),delete a[h]}),Object.values(a).forEach(u=>{this.deactivateRouteAndItsChildren(u,i)})}deactivateRoutes(n,r,i){const a=n.value,u=r?r.value:null;if(a===u)if(a.component){const h=i.getContext(a.outlet);h&&this.deactivateChildRoutes(n,r,h.children)}else this.deactivateChildRoutes(n,r,i);else u&&this.deactivateRouteAndItsChildren(r,i)}deactivateRouteAndItsChildren(n,r){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const i=r.getContext(n.value.outlet),a=i&&n.value.component?i.children:r,u=Hd(n);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],a);if(i&&i.outlet){const h=i.outlet.detach(),m=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:h,route:n,contexts:m})}}deactivateRouteAndOutlet(n,r){const i=r.getContext(n.value.outlet),a=i&&n.value.component?i.children:r,u=Hd(n);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],a);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,r,i){const a=Hd(r);n.children.forEach(u=>{this.activateRoutes(u,a[u.value.outlet],i),this.forwardEvent(new ZN(u.value.snapshot))}),n.children.length&&this.forwardEvent(new $N(n.value.snapshot))}activateRoutes(n,r,i){const a=n.value,u=r?r.value:null;if(Sw(a),a===u)if(a.component){const h=i.getOrCreateContext(a.outlet);this.activateChildRoutes(n,r,h.children)}else this.activateChildRoutes(n,r,i);else if(a.component){const h=i.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const m=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),Sw(m.route.value),this.activateChildRoutes(n,null,h.children)}else{const m=Jf(a.snapshot);h.attachRef=null,h.route=a,h.injector=m,h.outlet&&h.outlet.activateWith(a,h.injector),this.activateChildRoutes(n,null,h.children)}}else this.activateChildRoutes(n,null,i)}}class fC{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Hg{constructor(n,r){this.component=n,this.route=r}}function l2(e,n,r){const i=e._root;return Kf(i,n?n._root:null,r,[i.value])}function Gd(e,n){const r=Symbol(),i=n.get(e,r);return i===r?"function"!=typeof e||function Yg(e){return null!==_l(e)}(e)?n.get(e):e:i}function Kf(e,n,r,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const u=Hd(n);return e.children.forEach(h=>{(function h2(e,n,r,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const u=e.value,h=n?n.value:null,m=r?r.getContext(e.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const g=function f2(e,n,r){if("function"==typeof r)return r(e,n);switch(r){case"pathParamsChange":return!pl(e.url,n.url);case"pathParamsOrQueryParamsChange":return!pl(e.url,n.url)||!ta(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dw(e,n)||!ta(e.queryParams,n.queryParams);default:return!Dw(e,n)}}(h,u,u.routeConfig.runGuardsAndResolvers);g?a.canActivateChecks.push(new fC(i)):(u.data=h.data,u._resolvedData=h._resolvedData),Kf(e,n,u.component?m?m.children:null:r,i,a),g&&m&&m.outlet&&m.outlet.isActivated&&a.canDeactivateChecks.push(new Hg(m.outlet.component,h))}else h&&ep(n,m,a),a.canActivateChecks.push(new fC(i)),Kf(e,null,u.component?m?m.children:null:r,i,a)})(h,u[h.value.outlet],r,i.concat([h.value]),a),delete u[h.value.outlet]}),Object.entries(u).forEach(([h,m])=>ep(m,r.getContext(h),a)),a}function ep(e,n,r){const i=Hd(e),a=e.value;Object.entries(i).forEach(([u,h])=>{ep(h,a.component?n?n.children.getContext(u):null:n,r)}),r.canDeactivateChecks.push(new Hg(a.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,a))}function tp(e){return"function"==typeof e}function pC(e){return e instanceof Tg||"EmptyError"===e?.name}const zg=Symbol("INITIAL_VALUE");function jd(){return $r(e=>hw(e.map(n=>n.pipe(kd(1),function iN(...e){const n=ic(e);return Be((r,i)=>{(n?fw(e,r,n):fw(e,r)).subscribe(i)})}(zg)))).pipe(be(n=>{for(const r of n)if(!0!==r){if(r===zg)return zg;if(!1===r||r instanceof Ud)return r}return!0}),ou(n=>n!==zg),kd(1)))}function mC(e){return function tc(...e){return v(e)}(si(n=>{if(ml(n))throw uC(0,n)}),be(n=>!0===n))}class Gg{constructor(n){this.segmentGroup=n||null}}class gC{constructor(n){this.urlTree=n}}function Wd(e){return Vf(new Gg(e))}function vC(e){return Vf(new gC(e))}class P2{constructor(n,r){this.urlSerializer=n,this.urlTree=r}noMatchError(n){return new Me(4002,!1)}lineralizeSegments(n,r){let i=[],a=r.root;for(;;){if(i=i.concat(a.segments),0===a.numberOfChildren)return ft(i);if(a.numberOfChildren>1||!a.children[Lt])return Vf(new Me(4e3,!1));a=a.children[Lt]}}applyRedirectCommands(n,r,i){return this.applyRedirectCreateUrlTree(r,this.urlSerializer.parse(r),n,i)}applyRedirectCreateUrlTree(n,r,i,a){const u=this.createSegmentGroup(n,r.root,i,a);return new Ud(u,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const i={};return Object.entries(n).forEach(([a,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);i[a]=r[m]}else i[a]=u}),i}createSegmentGroup(n,r,i,a){const u=this.createSegments(n,r.segments,i,a);let h={};return Object.entries(r.children).forEach(([m,g])=>{h[m]=this.createSegmentGroup(n,g,i,a)}),new yn(u,h)}createSegments(n,r,i,a){return r.map(u=>u.path.startsWith(":")?this.findPosParam(n,u,a):this.findOrReturn(u,i))}findPosParam(n,r,i){const a=i[r.path.substring(1)];if(!a)throw new Me(4001,!1);return a}findOrReturn(n,r){let i=0;for(const a of r){if(a.path===n.path)return r.splice(i),a;i++}return n}}const Rw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function O2(e,n,r,i,a){const u=Lw(e,n,r);return u.matched?(i=function r2(e,n){return e.providers&&!e._injector&&(e._injector=s0(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,i),function I2(e,n,r,i){const a=n.canMatch;return a&&0!==a.length?ft(a.map(h=>{const m=Gd(h,e);return su(function w2(e){return e&&tp(e.canMatch)}(m)?m.canMatch(n,r):e.runInContext(()=>m(n,r)))})).pipe(jd(),mC()):ft(!0)}(i,n,r).pipe(be(h=>!0===h?u:{...Rw}))):ft(u)}function Lw(e,n,r){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||r.length>0)?{...Rw}:{matched:!0,consumedSegments:[],remainingSegments:r,parameters:{},positionalParamSegments:{}};const a=(n.matcher||hN)(r,e,n);if(!a)return{...Rw};const u={};Object.entries(a.posParams??{}).forEach(([m,g])=>{u[m]=g.path});const h=a.consumed.length>0?{...u,...a.consumed[a.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:a.consumed,remainingSegments:r.slice(a.consumed.length),parameters:h,positionalParamSegments:a.posParams??{}}}function yC(e,n,r,i){return r.length>0&&function k2(e,n,r){return r.some(i=>jg(e,n,i)&&_s(i)!==Lt)}(e,r,i)?{segmentGroup:new yn(n,F2(i,new yn(r,e.children))),slicedSegments:[]}:0===r.length&&function B2(e,n,r){return r.some(i=>jg(e,n,i))}(e,r,i)?{segmentGroup:new yn(e.segments,N2(e,0,r,i,e.children)),slicedSegments:r}:{segmentGroup:new yn(e.segments,e.children),slicedSegments:r}}function N2(e,n,r,i,a){const u={};for(const h of i)if(jg(e,r,h)&&!a[_s(h)]){const m=new yn([],{});u[_s(h)]=m}return{...a,...u}}function F2(e,n){const r={};r[Lt]=n;for(const i of e)if(""===i.path&&_s(i)!==Lt){const a=new yn([],{});r[_s(i)]=a}return r}function jg(e,n,r){return(!(e.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}class z2{constructor(n,r,i,a,u,h,m){this.injector=n,this.configLoader=r,this.rootComponentType=i,this.config=a,this.urlTree=u,this.paramsInheritanceStrategy=h,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new P2(this.urlSerializer,this.urlTree)}noMatchError(n){return new Me(4002,!1)}recognize(){const n=yC(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,Lt).pipe(fl(r=>{if(r instanceof gC)return this.allowRedirects=!1,this.urlTree=r.urlTree,this.match(r.urlTree);throw r instanceof Gg?this.noMatchError(r):r}),be(r=>{const i=new Ug([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,{}),a=new Ja(i,r),u=new oC("",a),h=function LN(e,n,r=null,i=null){return qA($A(e),n,r,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return h.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(h),this.inheritParamsAndData(u._root),{state:u,tree:h}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,Lt).pipe(fl(i=>{throw i instanceof Gg?this.noMatchError(i):i}))}inheritParamsAndData(n){const r=n.value,i=iC(r,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),n.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(n,r,i,a){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,r,i):this.processSegment(n,r,i,i.segments,a,!0)}processChildren(n,r,i){const a=[];for(const u of Object.keys(i.children))"primary"===u?a.unshift(u):a.push(u);return dr(a).pipe(Hf(u=>{const h=i.children[u],m=function a2(e,n){const r=e.filter(i=>_s(i)===n);return r.push(...e.filter(i=>_s(i)!==n)),r}(r,u);return this.processSegmentGroup(n,m,h,u)}),function aN(e,n){return Be(function sN(e,n,r,i,a){return(u,h)=>{let m=r,g=n,x=0;u.subscribe(Ne(h,D=>{const L=x++;g=m?e(g,D,L):(m=!0,D),i&&h.next(g)},a&&(()=>{m&&h.next(g),h.complete()})))}}(e,n,arguments.length>=2,!0))}((u,h)=>(u.push(...h),u)),Ig(null),function cN(e,n){const r=arguments.length>=2;return i=>i.pipe(e?ou((a,u)=>e(a,u,i)):ai,mw(1),r?Ig(n):PA(()=>new Tg))}(),ir(u=>{if(null===u)return Wd(i);const h=wC(u);return function G2(e){e.sort((n,r)=>n.value.outlet===Lt?-1:r.value.outlet===Lt?1:n.value.outlet.localeCompare(r.value.outlet))}(h),ft(h)}))}processSegment(n,r,i,a,u,h){return dr(r).pipe(Hf(m=>this.processSegmentAgainstRoute(m._injector??n,r,m,i,a,u,h).pipe(fl(g=>{if(g instanceof Gg)return ft(null);throw g}))),hl(m=>!!m),fl(m=>{if(pC(m))return function V2(e,n,r){return 0===n.length&&!e.children[r]}(i,a,u)?ft([]):Wd(i);throw m}))}processSegmentAgainstRoute(n,r,i,a,u,h,m){return function U2(e,n,r,i){return!!(_s(e)===i||i!==Lt&&jg(n,r,e))&&("**"===e.path||Lw(n,e,r).matched)}(i,a,u,h)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,a,i,u,h,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,a,r,i,u,h):Wd(a):Wd(a)}expandSegmentAgainstRouteUsingRedirect(n,r,i,a,u,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,i,a,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,a){const u=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?vC(u):this.applyRedirects.lineralizeSegments(i,u).pipe(ir(h=>{const m=new yn(h,{});return this.processSegment(n,r,m,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,i,a,u,h){const{matched:m,consumedSegments:g,remainingSegments:x,positionalParamSegments:D}=Lw(r,a,u);if(!m)return Wd(r);const L=this.applyRedirects.applyRedirectCommands(g,a.redirectTo,D);return a.redirectTo.startsWith("/")?vC(L):this.applyRedirects.lineralizeSegments(a,L).pipe(ir(H=>this.processSegment(n,i,r,H.concat(x),h,!1)))}matchSegmentAgainstRoute(n,r,i,a,u,h){let m;if("**"===i.path){const g=a.length>0?NA(a).parameters:{};m=ft({snapshot:new Ug(a,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bC(i),_s(i),i.component??i._loadedComponent??null,i,_C(i)),consumedSegments:[],remainingSegments:[]}),r.children={}}else m=O2(r,i,a,n).pipe(be(({matched:g,consumedSegments:x,remainingSegments:D,parameters:L})=>g?{snapshot:new Ug(x,L,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bC(i),_s(i),i.component??i._loadedComponent??null,i,_C(i)),consumedSegments:x,remainingSegments:D}:null));return m.pipe($r(g=>null===g?Wd(r):this.getChildConfig(n=i._injector??n,i,a).pipe($r(({routes:x})=>{const D=i._loadedInjector??n,{snapshot:L,consumedSegments:H,remainingSegments:W}=g,{segmentGroup:ee,slicedSegments:ie}=yC(r,H,W,x);if(0===ie.length&&ee.hasChildren())return this.processChildren(D,x,ee).pipe(be(we=>null===we?null:[new Ja(L,we)]));if(0===x.length&&0===ie.length)return ft([new Ja(L,[])]);const fe=_s(i)===u;return this.processSegment(D,x,ee,ie,fe?Lt:u,!0).pipe(be(we=>[new Ja(L,we)]))}))))}getChildConfig(n,r,i){return r.children?ft({routes:r.children,injector:n}):r.loadChildren?void 0!==r._loadedRoutes?ft({routes:r._loadedRoutes,injector:r._loadedInjector}):function T2(e,n,r,i){const a=n.canLoad;return void 0===a||0===a.length?ft(!0):ft(a.map(h=>{const m=Gd(h,e);return su(function m2(e){return e&&tp(e.canLoad)}(m)?m.canLoad(n,r):e.runInContext(()=>m(n,r)))})).pipe(jd(),mC())}(n,r,i).pipe(ir(a=>a?this.configLoader.loadChildren(n,r).pipe(si(u=>{r._loadedRoutes=u.routes,r._loadedInjector=u.injector})):function L2(e){return Vf(lC(!1,3))}())):ft({routes:[],injector:n})}}function j2(e){const n=e.value.routeConfig;return n&&""===n.path}function wC(e){const n=[],r=new Set;for(const i of e){if(!j2(i)){n.push(i);continue}const a=n.find(u=>i.value.routeConfig===u.value.routeConfig);void 0!==a?(a.children.push(...i.children),r.add(a)):n.push(i)}for(const i of r){const a=wC(i.children);n.push(new Ja(i.value,a))}return n.filter(i=>!r.has(i))}function bC(e){return e.data||{}}function _C(e){return e.resolve||{}}function xC(e){return"string"==typeof e.title||null===e.title}function Pw(e){return $r(n=>{const r=e(n);return r?dr(r).pipe(be(()=>n)):ft(n)})}const $d=new Je("ROUTES");let Ow=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ge(cM)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ft(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=su(r.loadComponent()).pipe(be(EC),si(u=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=u}),gw(()=>{this.componentLoaders.delete(r)})),a=new LA(i,()=>new ce).pipe(pw());return this.componentLoaders.set(r,a),a}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ft({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const u=function Q2(e,n,r,i){return su(e.loadChildren()).pipe(be(EC),ir(a=>a instanceof mE||Array.isArray(a)?ft(a):dr(n.compileModuleAsync(a))),be(a=>{i&&i(e);let u,h,m=!1;return Array.isArray(a)?(h=a,!0):(u=a.create(r).injector,h=u.get($d,[],{optional:!0,self:!0}).flat()),{routes:h.map(Iw),injector:u}}))}(i,this.compiler,r,this.onLoadEndListener).pipe(gw(()=>{this.childrenLoaders.delete(i)})),h=new LA(u,()=>new ce).pipe(pw());return this.childrenLoaders.set(i,h),h}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function EC(e){return function J2(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Wg=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ce,this.transitionAbortSubject=new ce,this.configLoader=Ge(Ow),this.environmentInjector=Ge(Gr),this.urlSerializer=Ge(jf),this.rootContexts=Ge(Xf),this.inputBindingEnabled=null!==Ge(Vg,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ft(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=a=>this.events.next(new jN(a)),this.configLoader.onLoadStartListener=a=>this.events.next(new GN(a))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:i})}setupNavigations(r,i,a){return this.transitions=new di({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:r.urlHandlingStrategy.extract(i),urlAfterRedirects:r.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Zf,restoredState:null,currentSnapshot:a.snapshot,targetSnapshot:null,currentRouterState:a,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ou(u=>0!==u.id),be(u=>({...u,extractedUrl:r.urlHandlingStrategy.extract(u.rawUrl)})),$r(u=>{this.currentTransition=u;let h=!1,m=!1;return ft(u).pipe(si(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$r(g=>{const x=g.currentBrowserUrl.toString(),D=!r.navigated||g.extractedUrl.toString()!==x||x!==g.currentUrlTree.toString();if(!D&&"reload"!==(g.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const H="";return this.events.next(new Vd(g.id,this.urlSerializer.serialize(g.rawUrl),H,0)),g.resolve(null),Pi}if(r.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return ft(g).pipe($r(H=>{const W=this.transitions?.getValue();return this.events.next(new kg(H.id,this.urlSerializer.serialize(H.extractedUrl),H.source,H.restoredState)),W!==this.transitions?.getValue()?Pi:Promise.resolve(H)}),function W2(e,n,r,i,a,u){return ir(h=>function H2(e,n,r,i,a,u,h="emptyOnly"){return new z2(e,n,r,i,a,h,u).recognize()}(e,n,r,i,h.extractedUrl,a,u).pipe(be(({state:m,tree:g})=>({...h,targetSnapshot:m,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),si(H=>{u.targetSnapshot=H.targetSnapshot,u.urlAfterRedirects=H.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:H.urlAfterRedirects};const W=new KA(H.id,this.urlSerializer.serialize(H.extractedUrl),this.urlSerializer.serialize(H.urlAfterRedirects),H.targetSnapshot);this.events.next(W)}));if(D&&r.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:H,extractedUrl:W,source:ee,restoredState:ie,extras:fe}=g,we=new kg(H,this.urlSerializer.serialize(W),ee,ie);this.events.next(we);const oe=rC(0,this.rootComponentType).snapshot;return this.currentTransition=u={...g,targetSnapshot:oe,urlAfterRedirects:W,extras:{...fe,skipLocationChange:!1,replaceUrl:!1}},ft(u)}{const H="";return this.events.next(new Vd(g.id,this.urlSerializer.serialize(g.extractedUrl),H,1)),g.resolve(null),Pi}}),si(g=>{const x=new UN(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(x)}),be(g=>(this.currentTransition=u={...g,guards:l2(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},u)),function _2(e,n){return ir(r=>{const{targetSnapshot:i,currentSnapshot:a,guards:{canActivateChecks:u,canDeactivateChecks:h}}=r;return 0===h.length&&0===u.length?ft({...r,guardsResult:!0}):function x2(e,n,r,i){return dr(e).pipe(ir(a=>function D2(e,n,r,i,a){const u=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return u&&0!==u.length?ft(u.map(m=>{const g=Jf(n)??a,x=Gd(m,g);return su(function y2(e){return e&&tp(e.canDeactivate)}(x)?x.canDeactivate(e,n,r,i):g.runInContext(()=>x(e,n,r,i))).pipe(hl())})).pipe(jd()):ft(!0)}(a.component,a.route,r,n,i)),hl(a=>!0!==a,!0))}(h,i,a,e).pipe(ir(m=>m&&function p2(e){return"boolean"==typeof e}(m)?function E2(e,n,r,i){return dr(n).pipe(Hf(a=>fw(function A2(e,n){return null!==e&&n&&n(new WN(e)),ft(!0)}(a.route.parent,i),function M2(e,n){return null!==e&&n&&n(new qN(e)),ft(!0)}(a.route,i),function S2(e,n,r){const i=n[n.length-1],u=n.slice(0,n.length-1).reverse().map(h=>function d2(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(h)).filter(h=>null!==h).map(h=>RA(()=>ft(h.guards.map(g=>{const x=Jf(h.node)??r,D=Gd(g,x);return su(function v2(e){return e&&tp(e.canActivateChild)}(D)?D.canActivateChild(i,e):x.runInContext(()=>D(i,e))).pipe(hl())})).pipe(jd())));return ft(u).pipe(jd())}(e,a.path,r),function C2(e,n,r){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return ft(!0);const a=i.map(u=>RA(()=>{const h=Jf(n)??r,m=Gd(u,h);return su(function g2(e){return e&&tp(e.canActivate)}(m)?m.canActivate(n,e):h.runInContext(()=>m(n,e))).pipe(hl())}));return ft(a).pipe(jd())}(e,a.route,r))),hl(a=>!0!==a,!0))}(i,u,e,n):ft(m)),be(m=>({...r,guardsResult:m})))})}(this.environmentInjector,g=>this.events.next(g)),si(g=>{if(u.guardsResult=g.guardsResult,ml(g.guardsResult))throw uC(0,g.guardsResult);const x=new VN(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(x)}),ou(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),Pw(g=>{if(g.guards.canActivateChecks.length)return ft(g).pipe(si(x=>{const D=new HN(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(D)}),$r(x=>{let D=!1;return ft(x).pipe(function $2(e,n){return ir(r=>{const{targetSnapshot:i,guards:{canActivateChecks:a}}=r;if(!a.length)return ft(r);let u=0;return dr(a).pipe(Hf(h=>function q2(e,n,r,i){const a=e.routeConfig,u=e._resolve;return void 0!==a?.title&&!xC(a)&&(u[zf]=a.title),function Z2(e,n,r,i){const a=function Y2(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===a.length)return ft({});const u={};return dr(a).pipe(ir(h=>function X2(e,n,r,i){const a=Jf(n)??i,u=Gd(e,a);return su(u.resolve?u.resolve(n,r):a.runInContext(()=>u(n,r)))}(e[h],n,r,i).pipe(hl(),si(m=>{u[h]=m}))),mw(1),function uN(e){return be(()=>e)}(u),fl(h=>pC(h)?Pi:Vf(h)))}(u,e,n,i).pipe(be(h=>(e._resolvedData=h,e.data=iC(e,r).resolve,a&&xC(a)&&(e.data[zf]=a.title),null)))}(h.route,i,e,n)),si(()=>u++),mw(1),ir(h=>u===a.length?ft(r):Pi))})}(r.paramsInheritanceStrategy,this.environmentInjector),si({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(x,"",2)}}))}),si(x=>{const D=new zN(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(D)}))}),Pw(g=>{const x=D=>{const L=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&L.push(this.configLoader.loadComponent(D.routeConfig).pipe(si(H=>{D.component=H}),be(()=>{})));for(const H of D.children)L.push(...x(H));return L};return hw(x(g.targetSnapshot.root)).pipe(Ig(),kd(1))}),Pw(()=>this.afterPreactivation()),be(g=>{const x=function KN(e,n,r){const i=Qf(e,n._root,r?r._root:void 0);return new nC(i,n)}(r.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=u={...g,targetRouterState:x},u}),si(()=>{this.events.next(new xw)}),((e,n,r,i)=>be(a=>(new u2(n,a.targetRouterState,a.currentRouterState,r,i).activate(e),a)))(this.rootContexts,r.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),kd(1),si({next:g=>{h=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new au(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),r.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{h=!0}}),function lN(e){return Be((n,r)=>{rr(e).subscribe(Ne(r,()=>r.complete(),Dr)),!r.closed&&n.subscribe(r)})}(this.transitionAbortSubject.pipe(si(g=>{throw g}))),gw(()=>{h||m||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),fl(g=>{if(m=!0,dC(g))this.events.next(new Yf(u.id,this.urlSerializer.serialize(u.extractedUrl),g.message,g.cancellationCode)),function n2(e){return dC(e)&&ml(e.url)}(g)?this.events.next(new Ew(g.url)):u.resolve(!1);else{this.events.next(new Bg(u.id,this.urlSerializer.serialize(u.extractedUrl),g,u.targetSnapshot??void 0));try{u.resolve(r.errorHandler(g))}catch(x){u.reject(x)}}return Pi}))}))}cancelNavigationTransition(r,i,a){const u=new Yf(r.id,this.urlSerializer.serialize(r.extractedUrl),i,a);this.events.next(u),r.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function MC(e){return e!==Zf}let AC=(()=>{class e{buildTitle(r){let i,a=r.root;for(;void 0!==a;)i=this.getResolvedTitleForRoute(a)??i,a=a.children.find(u=>u.outlet===Lt);return i}getResolvedTitleForRoute(r){return r.data[zf]}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:function(){return Ge(K2)},providedIn:"root"})}return e})(),K2=(()=>{class e extends AC{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||e)(ot(CA))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),eF=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:function(){return Ge(nF)},providedIn:"root"})}return e})();class tF{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}let nF=(()=>{class e extends tF{static#e=this.\u0275fac=function(){let r;return function(a){return(r||(r=function Bh(e){return Qo(()=>{const n=e.prototype.constructor,r=n[Jo]||Vs(n),i=Object.prototype;let a=Object.getPrototypeOf(e.prototype).constructor;for(;a&&a!==i;){const u=a[Jo]||Vs(a);if(u&&u!==r)return u;a=Object.getPrototypeOf(a)}return u=>new u})}(e)))(a||e)}}();static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const $g=new Je("",{providedIn:"root",factory:()=>({})});let rF=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:function(){return Ge(iF)},providedIn:"root"})}return e})(),iF=(()=>{class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var np=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(np||{});function CC(e,n){e.events.pipe(ou(r=>r instanceof au||r instanceof Yf||r instanceof Bg||r instanceof Vd),be(r=>r instanceof au||r instanceof Vd?np.COMPLETE:r instanceof Yf&&(0===r.code||1===r.code)?np.REDIRECTING:np.FAILED),ou(r=>r!==np.REDIRECTING),kd(1)).subscribe(()=>{n()})}function oF(e){throw e}function sF(e,n,r){return n.parse("/")}const aF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wo=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ge(sM),this.isNgZoneEnabled=!1,this._events=new ce,this.options=Ge($g,{optional:!0})||{},this.pendingTasks=Ge(aM),this.errorHandler=this.options.errorHandler||oF,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||sF,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ge(rF),this.routeReuseStrategy=Ge(eF),this.titleStrategy=Ge(AC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ge($d,{optional:!0})?.flat()??[],this.navigationTransitions=Ge(Wg),this.urlSerializer=Ge(jf),this.location=Ge(H0),this.componentInputBindingEnabled=!!Ge(Vg,{optional:!0}),this.eventsSubscription=new nn,this.isNgZoneEnabled=Ge(Dn)instanceof Dn&&Dn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ud,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rC(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const r=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:a}=this.navigationTransitions;if(null===a)return void(SC(i)&&this._events.next(i));if(i instanceof kg)MC(a.source)&&(this.browserUrlTree=a.extractedUrl);else if(i instanceof Vd)this.rawUrlTree=a.rawUrl;else if(i instanceof KA){if("eager"===this.urlUpdateStrategy){if(!a.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl);this.setBrowserUrl(u,a)}this.browserUrlTree=a.urlAfterRedirects}}else if(i instanceof xw)this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects);else if(i instanceof Yf)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(a);else if(i instanceof Ew){const u=this.urlHandlingStrategy.merge(i.url,a.currentRawUrl),h={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||MC(a.source)};this.scheduleNavigation(u,Zf,null,h,{resolve:a.resolve,reject:a.reject,promise:a.promise})}i instanceof Bg&&this.restoreHistory(a,!0),i instanceof au&&(this.navigated=!0),SC(i)&&this._events.next(i)}catch(a){this.navigationTransitions.transitionAbortSubject.next(a)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Zf,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,a){const u={replaceUrl:!0},h=a?.navigationId?a:null;if(a){const g={...a};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(u.state=g)}const m=this.parseUrl(r);this.scheduleNavigation(m,i,h,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Iw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){const{relativeTo:a,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:g}=i,x=g?this.currentUrlTree.fragment:h;let L,D=null;switch(m){case"merge":D={...this.currentUrlTree.queryParams,...u};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=u||null}null!==D&&(D=this.removeEmptyProps(D));try{L=$A(a?a.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),L=this.currentUrlTree.root}return qA(L,r,D,x??null)}navigateByUrl(r,i={skipLocationChange:!1}){const a=ml(r)?r:this.parseUrl(r),u=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(u,Zf,null,i)}navigate(r,i={skipLocationChange:!1}){return function uF(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new Me(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(a){i=this.malformedUriErrorHandler(a,this.urlSerializer,r)}return i}isActive(r,i){let a;if(a=!0===i?{...aF}:!1===i?{...cF}:i,ml(r))return kA(this.currentUrlTree,r,a);const u=this.parseUrl(r);return kA(this.currentUrlTree,u,a)}removeEmptyProps(r){return Object.keys(r).reduce((i,a)=>{const u=r[a];return null!=u&&(i[a]=u),i},{})}scheduleNavigation(r,i,a,u,h){if(this.disposed)return Promise.resolve(!1);let m,g,x;h?(m=h.resolve,g=h.reject,x=h.promise):x=new Promise((L,H)=>{m=L,g=H});const D=this.pendingTasks.add();return CC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:r,extras:u,resolve:m,reject:g,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(L=>Promise.reject(L))}setBrowserUrl(r,i){const a=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(a)||i.extras.replaceUrl){const h={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(a,"",h)}else{const u={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(a,"",u)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function SC(e){return!(e instanceof xw||e instanceof Ew)}class DC{}let hF=(()=>{class e{constructor(r,i,a,u,h){this.router=r,this.injector=a,this.preloadingStrategy=u,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(ou(r=>r instanceof au),Hf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const a=[];for(const u of i){u.providers&&!u._injector&&(u._injector=s0(u.providers,r,`Route: ${u.path}`));const h=u._injector??r,m=u._loadedInjector??h;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&a.push(this.preloadConfig(h,u)),(u.children||u._loadedRoutes)&&a.push(this.processRoutes(m,u.children??u._loadedRoutes))}return dr(a).pipe(As())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let a;a=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):ft(null);const u=a.pipe(ir(h=>null===h?ft(void 0):(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,this.processRoutes(h.injector??r,h.routes))));return i.loadComponent&&!i._loadedComponent?dr([u,this.loader.loadComponent(i)]).pipe(As()):u})}static#e=this.\u0275fac=function(i){return new(i||e)(ot(Wo),ot(cM),ot(Gr),ot(DC),ot(Ow))};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Fw=new Je("");let TC=(()=>{class e{constructor(r,i,a,u,h={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=a,this.zone=u,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration=h.scrollPositionRestoration||"disabled",h.anchorScrolling=h.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof kg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof au?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Vd&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof eC&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new eC(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function Jb(){throw new Error("invalid")}()};static#t=this.\u0275prov=at({token:e,factory:e.\u0275fac})}return e})();function Ka(e,n){return{\u0275kind:e,\u0275providers:n}}function RC(){const e=Ge(Vo);return n=>{const r=e.get(Od);if(n!==r.components[0])return;const i=e.get(Wo),a=e.get(LC);1===e.get(kw)&&i.initialNavigation(),e.get(PC,null,Ot.Optional)?.setUpPreloading(),e.get(Fw,null,Ot.Optional)?.init(),i.resetRootComponentType(r.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}const LC=new Je("",{factory:()=>new ce}),kw=new Je("",{providedIn:"root",factory:()=>1}),PC=new Je("");function gF(e){return Ka(0,[{provide:PC,useExisting:hF},{provide:DC,useExisting:e}])}const OC=new Je("ROUTER_FORROOT_GUARD"),yF=[H0,{provide:jf,useClass:vw},Wo,Xf,{provide:zd,useFactory:function IC(e){return e.routerState.root},deps:[Wo]},Ow,[]];function wF(){return new mM("Router",Wo)}let NC=(()=>{class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[yF,[],{provide:$d,multi:!0,useValue:r},{provide:OC,useFactory:EF,deps:[[Wo,new ds,new Oa]]},{provide:$g,useValue:i||{}},i?.useHash?{provide:dl,useClass:xL}:{provide:dl,useClass:WM},{provide:Fw,useFactory:()=>{const e=Ge(jP),n=Ge(Dn),r=Ge($g),i=Ge(Wg),a=Ge(jf);return r.scrollOffset&&e.setOffset(r.scrollOffset),new TC(a,i,e,n,r)}},i?.preloadingStrategy?gF(i.preloadingStrategy).\u0275providers:[],{provide:mM,multi:!0,useFactory:wF},i?.initialNavigation?MF(i):[],i?.bindToComponentInputs?Ka(8,[cC,{provide:Vg,useExisting:cC}]).\u0275providers:[],[{provide:FC,useFactory:RC},{provide:T0,multi:!0,useExisting:FC}]]}}static forChild(r){return{ngModule:e,providers:[{provide:$d,multi:!0,useValue:r}]}}static#e=this.\u0275fac=function(i){return new(i||e)(ot(OC,8))};static#t=this.\u0275mod=pa({type:e});static#n=this.\u0275inj=Ss({})}return e})();function EF(e){return"guarded"}function MF(e){return["disabled"===e.initialNavigation?Ka(3,[{provide:_0,multi:!0,useFactory:()=>{const n=Ge(Wo);return()=>{n.setUpLocationChangeListener()}}},{provide:kw,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Ka(2,[{provide:kw,useValue:0},{provide:_0,multi:!0,deps:[Vo],useFactory:n=>{const r=n.get(bL,Promise.resolve());return()=>r.then(()=>new Promise(i=>{const a=n.get(Wo),u=n.get(LC);CC(a,()=>{i(!0)}),n.get(Wg).afterPreactivation=()=>(i(!0),u.closed?ft(void 0):u),a.initialNavigation()}))}}]).\u0275providers:[]]}const FC=new Je(""),CF=[];let SF=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=pa({type:e});static#n=this.\u0275inj=Ss({imports:[NC.forRoot(CF),NC]})}return e})();var kC=wr(990);const DF=["screenshotCanvas"],TF=["panoramaContainer"];let IF=(()=>{class e{constructor(r){this.renderer=r,this.isCropping=!1,this.startX=0,this.startY=0,this.currentX=0,this.currentY=0}ngAfterViewInit(){this.initializePanolens(),this.initializeCanvas()}initializePanolens(){const i=new kC.ImagePanorama("assets/panaroma.png");this.viewer=new kC.Viewer({container:this.panoramaContainer.nativeElement}),this.viewer.add(i),this.screenShot=!0}initializeCanvas(){const r=this.screenshotCanvas.nativeElement;r.width=this.panoramaContainer.nativeElement.clientWidth,r.height=this.panoramaContainer.nativeElement.clientHeight,this.ctx=r.getContext("2d")}enableCrop(){this.isCropping=!0,this.renderer.listen(this.panoramaContainer.nativeElement,"mousedown",r=>this.startCrop(r)),this.renderer.listen(this.panoramaContainer.nativeElement,"mousemove",r=>this.drawCrop(r)),this.renderer.listen(this.panoramaContainer.nativeElement,"mouseup",()=>this.endCrop())}startCrop(r){this.isCropping&&(this.startX=r.offsetX,this.startY=r.offsetY,this.ctx.clearRect(0,0,this.screenshotCanvas.nativeElement.width,this.screenshotCanvas.nativeElement.height))}drawCrop(r){!this.isCropping||!this.ctx||(this.currentX=r.offsetX,this.currentY=r.offsetY,this.ctx.clearRect(0,0,this.screenshotCanvas.nativeElement.width,this.screenshotCanvas.nativeElement.height),this.ctx.strokeStyle="red",this.ctx.lineWidth=2,this.ctx.strokeRect(this.startX,this.startY,this.currentX-this.startX,this.currentY-this.startY))}endCrop(){this.isCropping=!1,this.screenShot=!1}saveScreenshot(){const r=this.viewer.getRenderer(),i=this.viewer.getCamera(),a=this.viewer.getScene(),u=document.createElement("canvas");u.width=r.domElement.width,u.height=r.domElement.height;const h=u.getContext("2d");if(h){r.render(a,i),h.drawImage(r.domElement,0,0);const m=document.createElement("canvas");m.width=this.currentX-this.startX,m.height=this.currentY-this.startY;const g=m.getContext("2d");g&&(g.drawImage(u,this.startX,this.startY,this.currentX-this.startX,this.currentY-this.startY,0,0,m.width,m.height),m.toBlob(x=>{if(x){const D=document.createElement("a");D.href=URL.createObjectURL(x),D.download="screenshot.png",D.click(),this.screenShot=!0}}))}}static#e=this.\u0275fac=function(i){return new(i||e)(ht(ff))};static#t=this.\u0275cmp=Dl({type:e,selectors:[["app-panorama-viewer"]],viewQuery:function(i,a){if(1&i&&(m0(DF,7),m0(TF,7)),2&i){let u;sg(u=ag())&&(a.screenshotCanvas=u.first),sg(u=ag())&&(a.panoramaContainer=u.first)}},decls:9,vars:0,consts:[[2,"width","100%","height","900px"],["panoramaContainer",""],[2,"position","absolute","top","0","left","0","z-index","10"],["screenshotCanvas",""],[1,"button-container"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(i,a){1&i&&(Sd(0,"div",0,1),Ef(2,"canvas",2,3),Dd(),Sd(4,"div",4)(5,"button",5),Mf("click",function(){return a.enableCrop()}),Yy(6,"Enable Crop"),Dd(),Sd(7,"button",6),Mf("click",function(){return a.saveScreenshot()}),Yy(8,"Save Screenshot"),Dd()())},styles:["Style[_ngcontent-%COMP%]   for[_ngcontent-%COMP%]   the[_ngcontent-%COMP%]   container[_ngcontent-%COMP%]   of[_ngcontent-%COMP%]   buttons[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;display:flex;gap:20px}.btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;border:none;border-radius:5px;cursor:pointer;color:#fff;transition:background-color .3s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-success[_ngcontent-%COMP%]{background-color:#28a745}.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}return e})(),RF=(()=>{class e{constructor(){this.title="panolens-angular-app"}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=Dl({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,a){1&i&&Ef(0,"app-panorama-viewer")},dependencies:[IF]})}return e})(),LF=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=pa({type:e,bootstrap:[RF]});static#n=this.\u0275inj=Ss({imports:[BO,SF]})}return e})();var PF=wr(42);FO().bootstrapModule(LF).catch(e=>console.error(e)),window.process=PF},990:function(cu,pn,wr){!function(Te,te){function ji(v){this.constraints=Object.assign({video:{width:{ideal:1920},height:{ideal:1080},facingMode:{exact:"environment"}},audio:!1},v),this.element=this.scene=this.container=null,this.devices=[],this.stream=null,this.ratioScalar=1,this.videoDeviceIndex=0}function Di(v,C,R){v=void 0===v?16777215:v,C=void 0===C||C,R=void 0===R?1500:R,this.dpr=window.devicePixelRatio;var A=this.createCanvas(),z=A.canvas;A=A.context;var Y=new te.SpriteMaterial({color:v,map:this.createCanvasTexture(z)});te.Sprite.call(this,Y),this.canvasWidth=z.width,this.canvasHeight=z.height,this.context=A,this.color=v instanceof te.Color?v:new te.Color(v),this.autoSelect=C,this.dwellTime=R,this.rippleDuration=500,this.position.z=-10,this.center.set(.5,.5),this.scale.set(.5,.5,1),this.callback=this.timerId=this.startTimestamp=null,this.frustumCulled=!1,this.updateCanvasArcByProgress(0)}function nn(v,C,R){v=void 0===v?300:v,C=C||mn.Info,te.Sprite.call(this),this.type="infospot",this.animated=void 0===R||R,this.frustumCulled=this.isHovering=!1,this.cursorStyle=this.toPanorama=this.element=null,this.mode=rn.NORMAL,this.scale.set(v,v,1),this.rotation.y=Math.PI,this.container=null,this.originalRaycast=this.raycast,this.HANDLER_FOCUS=null,this.material.side=te.DoubleSide,this.material.depthTest=!1,this.material.transparent=!0,this.material.opacity=0,this.scaleUpAnimation=new Jt.Tween,this.scaleDownAnimation=new Jt.Tween,R=function(A){if(this.material){var z=A.image.width/A.image.height,Y=new te.Vector3;A.image.width=A.image.naturalWidth||64,A.image.height=A.image.naturalHeight||64,this.scale.set(z*v,v,1),Y.copy(this.scale),this.scaleUpAnimation=new Jt.Tween(this.scale).to({x:1.3*Y.x,y:1.3*Y.y},500).easing(Jt.Easing.Elastic.Out),this.scaleDownAnimation=new Jt.Tween(this.scale).to({x:Y.x,y:Y.y},500).easing(Jt.Easing.Elastic.Out),this.material.map=A,this.material.needsUpdate=!0}}.bind(this),this.showAnimation=new Jt.Tween(this.material).to({opacity:1},500).onStart(this.enableRaycast.bind(this,!0)).easing(Jt.Easing.Quartic.Out),this.hideAnimation=new Jt.Tween(this.material).to({opacity:0},500).onStart(this.enableRaycast.bind(this,!1)).easing(Jt.Easing.Quartic.Out),this.addEventListener("click",this.onClick),this.addEventListener("hover",this.onHover),this.addEventListener("hoverenter",this.onHoverStart),this.addEventListener("hoverleave",this.onHoverEnd),this.addEventListener("panolens-dual-eye-effect",this.onDualEyeEffect),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("dismiss",this.onDismiss),this.addEventListener("panolens-infospot-focus",this.setFocusMethod),jr.load(C,R)}function ur(v){v||console.warn("PANOLENS.Widget: No container specified"),te.EventDispatcher.call(this),this.DEFAULT_TRANSITION="all 0.27s ease",this.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),this.PREVENT_EVENT_HANDLER=function(C){C.preventDefault(),C.stopPropagation()},this.container=v,this.mask=this.activeSubMenu=this.activeMainItem=this.mainMenu=this.settingElement=this.videoElement=this.fullscreenElement=this.barElement=null}function $t(v,C){te.Mesh.call(this,v,C),this.type="panorama",this.ImageQualityLow=1,this.ImageQualityFair=2,this.ImageQualityMedium=3,this.ImageQualityHigh=4,this.ImageQualitySuperHigh=5,this.animationDuration=1e3,this.defaultInfospotSize=350,this.container=void 0,this.loaded=!1,this.linkedSpots=[],this.isInfospotVisible=!1,this.linkingImageScale=this.linkingImageURL=void 0,this.material.side=te.BackSide,this.material.opacity=0,this.scale.x*=-1,this.renderOrder=-1,this.active=!1,this.infospotAnimation=new Jt.Tween(this).to({},this.animationDuration/2),this.addEventListener("load",this.fadeIn.bind(this)),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("click",this.onClick.bind(this)),this.setupTransitions()}function Cn(v,C,R){C=C||new te.SphereBufferGeometry(5e3,60,40),R=R||new te.MeshBasicMaterial({opacity:0,transparent:!0}),$t.call(this,C,R),this.src=v,this.radius=5e3}function Sr(){var v=new te.BufferGeometry,C=new te.MeshBasicMaterial({color:0,opacity:0,transparent:!0});v.addAttribute("position",new te.BufferAttribute(new Float32Array,1)),$t.call(this,v,C)}function Ti(v){v=void 0===v?[]:v;var C=Object.assign({},te.ShaderLib.cube),R=new te.BoxBufferGeometry(1e4,1e4,1e4);C=new te.ShaderMaterial({fragmentShader:C.fragmentShader,vertexShader:C.vertexShader,uniforms:C.uniforms,side:te.BackSide,transparent:!0}),$t.call(this,R,C),this.images=v,this.edgeLength=1e4,this.material.uniforms.opacity.value=0}function Wi(){for(var v=[],C=0;6>C;C++)v.push(mn.WhiteTile);Ti.call(this,v)}function Dr(v,C){C=void 0===C?{}:C;var R=new te.SphereBufferGeometry(5e3,60,40),A=new te.MeshBasicMaterial({opacity:0,transparent:!0});$t.call(this,R,A),this.src=v,this.options={videoElement:document.createElement("video"),loop:!0,muted:!0,autoplay:!1,playsinline:!0,crossOrigin:"anonymous"},Object.assign(this.options,C),this.videoElement=this.options.videoElement,this.videoProgress=0,this.radius=5e3,this.addEventListener("leave",this.pauseVideo.bind(this)),this.addEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.addEventListener("video-toggle",this.toggleVideo.bind(this)),this.addEventListener("video-time",this.setVideoCurrentTime.bind(this))}function Jn(v){var C;this._parameters=v=void 0===v?{}:v,this._panoId=this._zoom=null,this._panoClient=new google.maps.StreetViewService,this._total=this._count=0,this._canvas=[],this._ctx=[],this._hc=this._wc=0,this.result=null,this.rotation=0,this.copyright="",this.onPanoramaLoad=this.onSizeChange=null,this.levelsW=[1,2,4,7,13,26],this.levelsH=[1,1,2,4,7,13],this.widths=[416,832,1664,3328,6656,13312],this.heights=[416,416,832,1664,3328,6656],this.maxH=this.maxW=6656;try{var R=document.createElement("canvas");(C=R.getContext("experimental-webgl"))||(C=R.getContext("webgl"))}catch{}this.maxW=Math.max(C.getParameter(C.MAX_TEXTURE_SIZE),this.maxW),this.maxH=Math.max(C.getParameter(C.MAX_TEXTURE_SIZE),this.maxH)}function bt(v,C){Cn.call(this),this.panoId=v,this.gsvLoader=null,this.loadRequested=!1,this.setupGoogleMapAPI(C)}function xn(v,C,R,A){R=void 0===R?1e4:R,A=void 0===A?.5:A,"image"===(void 0===v?"image":v)&&Cn.call(this,C,this.createGeometry(R,A),this.createMaterial(R)),this.size=R,this.ratio=A,this.EPS=1e-6,this.frameId=null,this.dragging=!1,this.userMouse=new te.Vector2,this.quatA=new te.Quaternion,this.quatB=new te.Quaternion,this.quatCur=new te.Quaternion,this.quatSlerp=new te.Quaternion,this.vectorX=new te.Vector3(1,0,0),this.vectorY=new te.Vector3(0,1,0),this.addEventListener("window-resize",this.onWindowResize)}function Tr(v,C,R){xn.call(this,"image",v,C,R)}function Ii(v){var C=new te.SphereBufferGeometry(5e3,60,40),R=new te.MeshBasicMaterial({visible:!1});$t.call(this,C,R),this.media=new ji(v),this.radius=5e3,this.addEventListener("enter",this.start.bind(this)),this.addEventListener("leave",this.stop.bind(this)),this.addEventListener("panolens-container",this.onPanolensContainer.bind(this)),this.addEventListener("panolens-scene",this.onPanolensScene.bind(this))}function bo(v,C){function R(ve){if(li=!1,ui=Wr=0,!1!==J.enabled){if(ve.preventDefault(),ve.button===J.mouseButtons.ORBIT){if(!0===J.noRotate)return;gn=St.ROTATE,be.set(ve.clientX,ve.clientY)}else if(ve.button===J.mouseButtons.ZOOM){if(!0===J.noZoom)return;gn=St.DOLLY,xo.set(ve.clientX,ve.clientY)}else if(ve.button===J.mouseButtons.PAN){if(!0===J.noPan)return;gn=St.PAN,Pn.set(ve.clientX,ve.clientY)}gn!==St.NONE&&(document.addEventListener("mousemove",A,!1),document.addEventListener("mouseup",z,!1),J.dispatchEvent(Yo)),J.update()}}function A(ve){if(!1!==J.enabled){ve.preventDefault();var qt=J.domElement===document?J.domElement.body:J.domElement;if(gn===St.ROTATE){if(!0===J.noRotate)return;on.set(ve.clientX,ve.clientY),Kn.subVectors(on,be),J.rotateLeft(2*Math.PI*Kn.x/qt.clientWidth*J.rotateSpeed),J.rotateUp(2*Math.PI*Kn.y/qt.clientHeight*J.rotateSpeed),be.copy(on),Vn&&(ui=ve.clientX-Vn.clientX,Wr=ve.clientY-Vn.clientY),Vn=ve}else if(gn===St.DOLLY){if(!0===J.noZoom)return;Ri.set(ve.clientX,ve.clientY),Ir.subVectors(Ri,xo),0<Ir.y?J.dollyIn():0>Ir.y&&J.dollyOut(),xo.copy(Ri)}else if(gn===St.PAN){if(!0===J.noPan)return;En.set(ve.clientX,ve.clientY),Un.subVectors(En,Pn),J.pan(Un.x,Un.y),Pn.copy(En)}gn!==St.NONE&&J.update()}}function z(){li=!0,Vn=void 0,!1!==J.enabled&&(document.removeEventListener("mousemove",A,!1),document.removeEventListener("mouseup",z,!1),J.dispatchEvent(Es),gn=St.NONE)}function Y(ve){if(!1!==J.enabled&&!0!==J.noZoom&&gn===St.NONE){ve.preventDefault(),ve.stopPropagation();var qt=0;void 0!==ve.wheelDelta?qt=ve.wheelDelta:void 0!==ve.detail&&(qt=-ve.detail),0<qt?(J.object.fov=J.object.fov<J.maxFov?J.object.fov+1:J.maxFov,J.object.updateProjectionMatrix()):0>qt&&(J.object.fov=J.object.fov>J.minFov?J.object.fov-1:J.minFov,J.object.updateProjectionMatrix()),J.update(),J.dispatchEvent(Eo),J.dispatchEvent(Yo),J.dispatchEvent(Es)}}function ce(ve){switch(ve.keyCode){case J.keys.UP:Zo=!1;break;case J.keys.BOTTOM:Br=!1;break;case J.keys.LEFT:er=!1;break;case J.keys.RIGHT:Li=!1}}function de(ve){if(!1!==J.enabled&&!0!==J.noKeys&&!0!==J.noRotate){switch(ve.keyCode){case J.keys.UP:Zo=!0;break;case J.keys.BOTTOM:Br=!0;break;case J.keys.LEFT:er=!0;break;case J.keys.RIGHT:Li=!0}(Zo||Br||er||Li)&&(li=!0,Zo&&(Wr=-J.rotateSpeed*J.momentumKeydownFactor),Br&&(Wr=J.rotateSpeed*J.momentumKeydownFactor),er&&(ui=-J.rotateSpeed*J.momentumKeydownFactor),Li&&(ui=J.rotateSpeed*J.momentumKeydownFactor))}}function ye(ve){if(li=!1,ui=Wr=0,!1!==J.enabled){switch(ve.touches.length){case 1:if(!0===J.noRotate)return;gn=St.TOUCH_ROTATE,be.set(ve.touches[0].pageX,ve.touches[0].pageY);break;case 2:if(!0===J.noZoom)return;gn=St.TOUCH_DOLLY;var qt=ve.touches[0].pageX-ve.touches[1].pageX;ve=ve.touches[0].pageY-ve.touches[1].pageY,xo.set(0,Math.sqrt(qt*qt+ve*ve));break;case 3:if(!0===J.noPan)return;gn=St.TOUCH_PAN,Pn.set(ve.touches[0].pageX,ve.touches[0].pageY);break;default:gn=St.NONE}gn!==St.NONE&&J.dispatchEvent(Yo)}}function Be(ve){if(!1!==J.enabled){ve.preventDefault(),ve.stopPropagation();var qt=J.domElement===document?J.domElement.body:J.domElement;switch(ve.touches.length){case 1:if(!0===J.noRotate||gn!==St.TOUCH_ROTATE)break;on.set(ve.touches[0].pageX,ve.touches[0].pageY),Kn.subVectors(on,be),J.rotateLeft(2*Math.PI*Kn.x/qt.clientWidth*J.rotateSpeed),J.rotateUp(2*Math.PI*Kn.y/qt.clientHeight*J.rotateSpeed),be.copy(on),Vn&&(ui=ve.touches[0].pageX-Vn.pageX,Wr=ve.touches[0].pageY-Vn.pageY),Vn={pageX:ve.touches[0].pageX,pageY:ve.touches[0].pageY},J.update();break;case 2:if(!0===J.noZoom||gn!==St.TOUCH_DOLLY)break;qt=ve.touches[0].pageX-ve.touches[1].pageX,ve=ve.touches[0].pageY-ve.touches[1].pageY,Ri.set(0,Math.sqrt(qt*qt+ve*ve)),Ir.subVectors(Ri,xo),0>Ir.y?(J.object.fov=J.object.fov<J.maxFov?J.object.fov+1:J.maxFov,J.object.updateProjectionMatrix()):0<Ir.y&&(J.object.fov=J.object.fov>J.minFov?J.object.fov-1:J.minFov,J.object.updateProjectionMatrix()),xo.copy(Ri),J.update(),J.dispatchEvent(Eo);break;case 3:if(!0===J.noPan||gn!==St.TOUCH_PAN)break;En.set(ve.touches[0].pageX,ve.touches[0].pageY),Un.subVectors(En,Pn),J.pan(Un.x,Un.y),Pn.copy(En),J.update();break;default:gn=St.NONE}}}function Ne(){li=!0,Vn=void 0,!1!==J.enabled&&(J.dispatchEvent(Es),gn=St.NONE)}this.object=v,this.domElement=void 0!==C?C:document,this.frameId=null,this.enabled=!0,this.center=this.target=new te.Vector3,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=-.15,this.noPan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.momentumDampingFactor=.9,this.momentumScalingFactor=-.005,this.momentumKeydownFactor=20,this.minFov=30,this.maxFov=120,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:te.MOUSE.LEFT,ZOOM:te.MOUSE.MIDDLE,PAN:te.MOUSE.RIGHT};var Vn,Zo,Br,er,Li,J=this,be=new te.Vector2,on=new te.Vector2,Kn=new te.Vector2,Pn=new te.Vector2,En=new te.Vector2,Un=new te.Vector2,Yi=new te.Vector3,Rn=new te.Vector3,xo=new te.Vector2,Ri=new te.Vector2,Ir=new te.Vector2,ci=0,On=0,oa=0,$o=0,sa=1,Xi=new te.Vector3,qo=new te.Vector3,xs=new te.Quaternion,ui=0,Wr=0,li=!1,St={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},gn=St.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var aa=(new te.Quaternion).setFromUnitVectors(v.up,new te.Vector3(0,1,0)),lr=aa.clone().inverse(),Eo={type:"change"},Yo={type:"start"},Es={type:"end"};this.setLastQuaternion=function(ve){xs.copy(ve),J.object.quaternion.copy(ve)},this.getLastPosition=function(){return qo},this.rotateLeft=function(ve){void 0===ve&&(ve=2*Math.PI/60/60*J.autoRotateSpeed),$o-=ve},this.rotateUp=function(ve){void 0===ve&&(ve=2*Math.PI/60/60*J.autoRotateSpeed),oa-=ve},this.panLeft=function(ve){var qt=this.object.matrix.elements;Yi.set(qt[0],qt[1],qt[2]),Yi.multiplyScalar(-ve),Xi.add(Yi)},this.panUp=function(ve){var qt=this.object.matrix.elements;Yi.set(qt[4],qt[5],qt[6]),Yi.multiplyScalar(ve),Xi.add(Yi)},this.pan=function(ve,qt){var br=J.domElement===document?J.domElement.body:J.domElement;if(J.object instanceof te.PerspectiveCamera){var ca=J.object.position.clone().sub(J.target).length();ca*=Math.tan(J.object.fov/2*Math.PI/180),J.panLeft(2*ve*ca/br.clientHeight),J.panUp(2*qt*ca/br.clientHeight)}else J.object instanceof te.OrthographicCamera?(J.panLeft(ve*(J.object.right-J.object.left)/br.clientWidth),J.panUp(qt*(J.object.top-J.object.bottom)/br.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.momentum=function(){li&&(1e-4>Math.abs(ui)&&1e-4>Math.abs(Wr)?li=!1:($o-=this.momentumScalingFactor*(ui*=this.momentumDampingFactor),oa-=this.momentumScalingFactor*(Wr*=this.momentumDampingFactor)))},this.dollyIn=function(ve){void 0===ve&&(ve=Math.pow(.95,J.zoomSpeed)),J.object instanceof te.PerspectiveCamera?sa/=ve:J.object instanceof te.OrthographicCamera?(J.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*ve)),J.object.updateProjectionMatrix(),J.dispatchEvent(Eo)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(ve){void 0===ve&&(ve=Math.pow(.95,J.zoomSpeed)),J.object instanceof te.PerspectiveCamera?sa*=ve:J.object instanceof te.OrthographicCamera?(J.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/ve)),J.object.updateProjectionMatrix(),J.dispatchEvent(Eo)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(ve){var qt=this.object.position;Rn.copy(qt).sub(this.target),Rn.applyQuaternion(aa),ci=Math.atan2(Rn.x,Rn.z),On=Math.atan2(Math.sqrt(Rn.x*Rn.x+Rn.z*Rn.z),Rn.y),this.autoRotate&&gn===St.NONE&&this.rotateLeft(2*Math.PI/60/60*J.autoRotateSpeed),this.momentum(),ci+=$o,On+=oa,ci=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,ci)),On=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,On)),On=Math.max(1e-7,Math.min(Math.PI-1e-7,On));var br=Rn.length()*sa;br=Math.max(this.minDistance,Math.min(this.maxDistance,br)),this.target.add(Xi),Rn.x=br*Math.sin(On)*Math.sin(ci),Rn.y=br*Math.cos(On),Rn.z=br*Math.sin(On)*Math.cos(ci),Rn.applyQuaternion(lr),qt.copy(this.target).add(Rn),this.object.lookAt(this.target),oa=$o=0,sa=1,Xi.set(0,0,0),(1e-7<qo.distanceToSquared(this.object.position)||1e-7<8*(1-xs.dot(this.object.quaternion)))&&(!0!==ve&&this.dispatchEvent(Eo),qo.copy(this.object.position),xs.copy(this.object.quaternion))},this.reset=function(){gn=St.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Eo),this.update()},this.getPolarAngle=function(){return On},this.getAzimuthalAngle=function(){return ci},this.dispose=function(){this.domElement.removeEventListener("mousedown",R),this.domElement.removeEventListener("mousewheel",Y),this.domElement.removeEventListener("DOMMouseScroll",Y),this.domElement.removeEventListener("touchstart",ye),this.domElement.removeEventListener("touchend",Ne),this.domElement.removeEventListener("touchmove",Be),window.removeEventListener("keyup",ce),window.removeEventListener("keydown",de)},this.domElement.addEventListener("mousedown",R,{passive:!1}),this.domElement.addEventListener("mousewheel",Y,{passive:!1}),this.domElement.addEventListener("DOMMouseScroll",Y,{passive:!1}),this.domElement.addEventListener("touchstart",ye,{passive:!1}),this.domElement.addEventListener("touchend",Ne,{passive:!1}),this.domElement.addEventListener("touchmove",Be,{passive:!1}),window.addEventListener("keyup",ce,{passive:!1}),window.addEventListener("keydown",de,{passive:!1}),this.update()}function ra(v,C){var R=this,A={type:"change"},z=0,Y=0,ce=0,de=0;this.camera=v,this.camera.rotation.reorder("YXZ"),this.domElement=void 0!==C?C:document,this.enabled=!0,this.deviceOrientation={},this.alphaOffsetAngle=this.alpha=this.screenOrientation=0;var ye=function(be){R.deviceOrientation=be},Be=function(){R.screenOrientation=window.orientation||0},Ne=function(be){be.preventDefault(),be.stopPropagation(),ce=be.touches[0].pageX,de=be.touches[0].pageY},J=function(be){be.preventDefault(),be.stopPropagation(),z+=te.Math.degToRad((be.touches[0].pageX-ce)/4),Y+=te.Math.degToRad((de-be.touches[0].pageY)/4),R.updateAlphaOffsetAngle(z),ce=be.touches[0].pageX,de=be.touches[0].pageY};this.connect=function(){Be(),window.addEventListener("orientationchange",Be,{passive:!0}),window.addEventListener("deviceorientation",ye,{passive:!0}),window.addEventListener("deviceorientation",this.update.bind(this),{passive:!0}),R.domElement.addEventListener("touchstart",Ne,{passive:!1}),R.domElement.addEventListener("touchmove",J,{passive:!1}),R.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",Be,!1),window.removeEventListener("deviceorientation",ye,!1),window.removeEventListener("deviceorientation",this.update.bind(this),!1),R.domElement.removeEventListener("touchstart",Ne,!1),R.domElement.removeEventListener("touchmove",J,!1),R.enabled=!1},this.update=function(be){if(!1!==R.enabled){var on=R.deviceOrientation.alpha?te.Math.degToRad(R.deviceOrientation.alpha)+R.alphaOffsetAngle:0,Kn=R.deviceOrientation.beta?te.Math.degToRad(R.deviceOrientation.beta):0,Pn=R.deviceOrientation.gamma?te.Math.degToRad(R.deviceOrientation.gamma):0,En=R.screenOrientation?te.Math.degToRad(R.screenOrientation):0,Un=R.camera.quaternion,Yi=new te.Vector3(0,0,1),Rn=new te.Euler,xo=new te.Quaternion,Ri=new te.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),Ir=new te.Quaternion,ci=new te.Quaternion;if(0==R.screenOrientation){var On=new te.Vector3(1,0,0);Ir.setFromAxisAngle(On,-Y)}else 180==R.screenOrientation?(On=new te.Vector3(1,0,0),Ir.setFromAxisAngle(On,Y)):90==R.screenOrientation?(On=new te.Vector3(0,1,0),Ir.setFromAxisAngle(On,Y)):-90==R.screenOrientation&&(On=new te.Vector3(0,1,0),Ir.setFromAxisAngle(On,-Y));Ri.multiply(Ir),Ri.multiply(ci),Rn.set(Kn,on,-Pn,"YXZ"),Un.setFromEuler(Rn),Un.multiply(Ri),Un.multiply(xo.setFromAxisAngle(Yi,-En)),R.alpha=on,!0!==be&&R.dispatchEvent(A)}},this.updateAlphaOffsetAngle=function(be){this.alphaOffsetAngle=be,this.update()},this.dispose=function(){this.disconnect()},this.connect()}function $i(v){var C=new te.OrthographicCamera(-1,1,1,-1,0,1),R=new te.Scene,A=new te.StereoCamera;A.aspect=.5;var z=new te.WebGLRenderTarget(512,512,{minFilter:te.LinearFilter,magFilter:te.NearestFilter,format:te.RGBAFormat});z.scissorTest=!0,z.texture.generateMipmaps=!1;var Y=new te.Vector2(.441,.156),ce=new te.PlaneBufferGeometry(1,1,10,20).removeAttribute("normal").toNonIndexed(),de=ce.attributes.position.array,ye=ce.attributes.uv.array;ce.attributes.position.count*=2,ce.attributes.uv.count*=2;var Be=new Float32Array(2*de.length);Be.set(de),Be.set(de,de.length);var Ne=new Float32Array(2*ye.length);Ne.set(ye),Ne.set(ye,ye.length),ye=new te.Vector2,de=de.length/3;for(var J=0,be=Be.length/3;J<be;J++){ye.x=Be[3*J],ye.y=Be[3*J+1];var on=ye.dot(ye),Kn=J<de?0:1;Be[3*J]=ye.x/(on=1.5+(Y.x+Y.y*on)*on)*1.5-.5+Kn,Be[3*J+1]=ye.y/on*3,Ne[2*J]=.5*(Ne[2*J]+Kn)}ce.attributes.position.array=Be,ce.attributes.uv.array=Ne,Y=new te.MeshBasicMaterial({map:z.texture}),ce=new te.Mesh(ce,Y),R.add(ce),this.setSize=function(Pn,En){v.setSize(Pn,En);var Un=v.getPixelRatio();z.setSize(Pn*Un,En*Un)},this.render=function(Pn,En){Pn.updateMatrixWorld(),null===En.parent&&En.updateMatrixWorld(),A.update(En),En=z.width/2;var Un=z.height;v.autoClear&&v.clear(),z.scissor.set(0,0,En,Un),z.viewport.set(0,0,En,Un),v.setRenderTarget(z),v.render(Pn,A.cameraL),v.clearDepth(),z.scissor.set(En,0,En,Un),z.viewport.set(En,0,En,Un),v.setRenderTarget(z),v.render(Pn,A.cameraR),v.clearDepth(),v.setRenderTarget(null),v.render(R,C)}}function _o(v){if((v=v||{}).controlBar=void 0===v.controlBar||v.controlBar,v.controlButtons=v.controlButtons||["fullscreen","setting","video"],v.autoHideControlBar=void 0!==v.autoHideControlBar&&v.autoHideControlBar,v.autoHideInfospot=void 0===v.autoHideInfospot||v.autoHideInfospot,v.horizontalView=void 0!==v.horizontalView&&v.horizontalView,v.clickTolerance=v.clickTolerance||10,v.cameraFov=v.cameraFov||60,v.reverseDragging=v.reverseDragging||!1,v.enableReticle=v.enableReticle||!1,v.dwellTime=v.dwellTime||1500,v.autoReticleSelect=void 0===v.autoReticleSelect||v.autoReticleSelect,v.viewIndicator=void 0!==v.viewIndicator&&v.viewIndicator,v.indicatorSize=v.indicatorSize||30,v.output=v.output?v.output:"none",v.autoRotate=v.autoRotate||!1,v.autoRotateSpeed=v.autoRotateSpeed||2,v.autoRotateActivationDuration=v.autoRotateActivationDuration||5e3,this.options=v,v.container){var C=v.container;C._width=C.clientWidth,C._height=C.clientHeight}else(C=document.createElement("div")).classList.add("panolens-container"),C.style.width="100%",C.style.height="100%",C._width=window.innerWidth,C._height=window.innerHeight,document.body.appendChild(C);this.container=C,this.camera=v.camera||new te.PerspectiveCamera(this.options.cameraFov,this.container.clientWidth/this.container.clientHeight,1,1e4),this.scene=v.scene||new te.Scene,this.renderer=v.renderer||new te.WebGLRenderer({alpha:!0,antialias:!1}),this.sceneReticle=new te.Scene,this.viewIndicatorSize=this.options.indicatorSize,this.reticle={},this.tempEnableReticle=this.options.enableReticle,this.mode=rn.NORMAL,this.pressObject=this.pressEntityObject=this.infospot=this.hoverObject=this.widget=this.panorama=null,this.raycaster=new te.Raycaster,this.raycasterPoint=new te.Vector2,this.userMouse=new te.Vector2,this.updateCallbacks=[],this.requestAnimationId=null,this.cameraFrustum=new te.Frustum,this.cameraViewProjectionMatrix=new te.Matrix4,this.outputDivElement=this.autoRotateRequestId=null,this.touchSupported="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,this.HANDLER_MOUSE_DOWN=this.onMouseDown.bind(this),this.HANDLER_MOUSE_UP=this.onMouseUp.bind(this),this.HANDLER_MOUSE_MOVE=this.onMouseMove.bind(this),this.HANDLER_WINDOW_RESIZE=this.onWindowResize.bind(this),this.HANDLER_KEY_DOWN=this.onKeyDown.bind(this),this.HANDLER_KEY_UP=this.onKeyUp.bind(this),this.HANDLER_TAP=this.onTap.bind(this,{clientX:this.container.clientWidth/2,clientY:this.container.clientHeight/2}),this.OUTPUT_INFOSPOT=!1,this.tweenLeftAnimation=new Jt.Tween,this.tweenUpAnimation=new Jt.Tween,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,this.renderer.domElement.classList.add("panolens-canvas"),this.renderer.domElement.style.display="block",this.container.style.backgroundColor="#000",this.container.appendChild(this.renderer.domElement),this.OrbitControls=new bo(this.camera,this.container),this.OrbitControls.id="orbit",this.OrbitControls.minDistance=1,this.OrbitControls.noPan=!0,this.OrbitControls.autoRotate=this.options.autoRotate,this.OrbitControls.autoRotateSpeed=this.options.autoRotateSpeed,this.DeviceOrientationControls=new ra(this.camera,this.container),this.DeviceOrientationControls.id="device-orientation",this.DeviceOrientationControls.enabled=!1,this.camera.position.z=1,this.options.passiveRendering&&console.warn("passiveRendering is now deprecated"),this.controls=[this.OrbitControls,this.DeviceOrientationControls],this.control=this.OrbitControls,this.CardboardEffect=new $i(this.renderer),this.CardboardEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.StereoEffect=new tc(this.renderer),this.StereoEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.effect=this.CardboardEffect,this.addReticle(),this.options.horizontalView&&(this.OrbitControls.minPolarAngle=Math.PI/2,this.OrbitControls.maxPolarAngle=Math.PI/2),!1!==this.options.controlBar&&this.addDefaultControlBar(this.options.controlButtons),this.options.viewIndicator&&this.addViewIndicator(),this.options.reverseDragging&&this.reverseDraggingDirection(),this.options.enableReticle?this.enableReticleControl():this.registerMouseAndTouchEvents(),"overlay"===this.options.output&&this.addOutputElement(),this.registerEventListeners(),this.animate.call(this)}var qi="^0.105.2".replace(/[^0-9.]/g,""),Zi={ORBIT:0,DEVICEORIENTATION:1},rn={UNKNOWN:0,NORMAL:1,CARDBOARD:2,STEREO:3},mn={Info:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADBklEQVR42u2bP08UQRiHnzFaSYCI/xoksdBIqGwIiYWRUBISExpCQ0ej38FWOmlIKKhoMPEbaCxsrrHiYrQgOSlQEaICrT+LHSPZzNzt3s3c3Hn7lHvLzvv82L2dm30XKioqKgYY062BJF0HpoA7wARwBbhsPz4DjoEG8AnYNcZ8Sx1Op8IXJM1KWpdUV3nq9m9nJV1I7VNGfEzSM0mNNqR9NOwxx1L7NRMflbQm6SSgeJ4TO8Zoat+8/LKkg4jieQ4kLaf2RtKwpJ0uiufZkTScSn5S0l5C+b/sSZrstvyMpKPU5uc4kjTTjkvpeYCkaeA1/+7hvcIZMGuMqUULQNIU8Aa4ltrWwyHwyBizGzwASSPAe+B2assW7AH3jTE/i+xcZoa12Qfy2Bo3i+5cKABl99zF1GYlWFTBeULLS0DZrOsDcDNggTXgc27bLWA64BhfgHvGmB8dHUXZ1DM0S45xliKMs9bKr+klIOkqsBrwv9JtVq1DewEAT4Ch1BYdMGQdygeg7Df4SmqDAKyoyXpCszPgITCeuvoAjFuX0gE8jljUdv7bCtiOOJ7XpdUZ8L/gdXHOA5QtYH5NXXVgbrgWWn1nwFTqaiPgdPIFcDd1tRFwOl307DwRuZgXwLvctgfA04hjOp18AcReZ6sZY16e3yDpUuQxnU6+S2AkcjEpcDr1zxOXSPgCKLSa0mc4nXwB/EpdbQScTr4AGqmrjYDTyRfAx9TVRsDp5Aug8LJyH+F0cgZg58z11BUHpO5ruGh2G3ybuuqAeF2aBfAqddUB8bq0OgP2U1cegH3aOQOMMb+BrdTVB2DLupQLwLIOnKY26IBT6+ClaQDGmO/ARmqLDtiwDn7HVkcY+EdjNoTlCI+tYhO2iUppm6HKslPUq2qQKHpUe8AFsjaUXuUQWCgqXyoAG8IuME/WkNRrnAHzZfqDSgdgQ6gBc2Td3b3CMTBXtkOsIzTIjZLnQhjcVtlcEIPZLJ0LoVvt8s/Va+3yuSAG84UJRxB98cpM9dJURUVFxSDzBxKde4Lk3/h2AAAAAElFTkSuQmCC",Arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADPklEQVR42u2bMUscQRiG30/SRaJEI1ZKUiRErNIELRUbQYSAnX8hpVUgkDYp0wgWVjYW+QcJaQzYpLojJIXhtDDEKBpj65ti58ixmdmb2ZvZ7+T2AUHudmfmeXf2bnb3O6CmpqZmgJGqOiI5AWAWwEMA0wDuArht3r4CcAagBeAbgIaI/NQOp1fhIZKLJN+SbDKcptl3keSQtk+I+BjJVyRbJaRdtEybY9p+ReKjJN+QvIwonufS9DGq7ZuXXyd5nFA8zzHJdW1vkLxDcrdC8Ty7JO9oyc+QPFCUb3NAcqZq+TmSp9rmHZySnCvjErwOIPkUwHv8+w7vF64ALIrIfrIASM4C+ADgnratgxMACyLSiB4AyREAnwE80LbswgGAJyJy4bNxyApr6wbIw4xxy3djrwCYfeeuaZsFsEbPdULXU4DZqusLgMkEA21P05EEbf8A8FhEzos28pkBLxLKL5s/r/M1kEkz9vKQHGeatf05yfmOfubNa7G5JDle5NhtBjwHMBz5yFwAWBaRT+0XzP8pZsKwcQiH2fX8Ycojb+kzxUw4ZJn7CSQXqpRPHMKCq7+iZJ71Mvdy/DftXSQ6HcJdSDaqPPKW/mPOBO+lcbvzCU35RCFM2PpwnQKzZQfdgfe0dxH5dLA6uQJ4pC2fIASrkyuA6X6QjxyC1ckVQNn7bNHlI4ZgdXIFUObiJJl8pBCsTjGfuIwA2Cv4FN7xbYjkjqsRAHuIePXoCiDF1Zk2VidXAL+1R5sAq5MrgJb2aBNgdXIF8FV7tAmwOrkCCFs73wysTtYATHFCU3vEEWm6Ci6KvgY/ao86Ik6XogDeaY86Ik6XbjPgSHvkEThCwQy45XpDRK5JbgN4GWkgUyR9H65MRQxgW0SunZ5FezK7pfwd8e8MV8UfAPdF5Jdrg8JrAbPjprZFD2wWyQP6j8ZSEufRmGlgQ9umBBvd5IOgbjFUKLu+XnWBhG+rpsFVZGUo/coJgFVf+aAATAgNACvICpL6jSsAKyH1QcEBmBD2ASwhq+7uF84ALIVWiPUEB7lQsiOEwS2VzQUxmMXSuRCqKpd/zX4rl88FMZg/mLAEcSN+MlP/aKqmpqZmkPkL0hSjwOpNKxwAAAAASUVORK5CYII=",FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg==",Setting:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADn0lEQVR42u2bzUsVURjGnyO6CPzAMnTjppAo3LTwH1CqTfaxbeOiRS37A0wXtROFVi1aRBs3LWohSIGbQAQXViBGRhG0UIRKUCpK7q/FnOB2uc6cOXNmRnGe3eW+H8/7zLln3vNxpQoVKlQ4wjBFJAFOSRqX1O7osivpvjHmU1nChBZglvSYLYJbS0EanCvIJzWK+gnsyH34/8OuMaYjb265jwCgz6N4SWq3vodbAEmnS/KtBDgoAgyU5BteAOAkMAPcBroc7PskDWfgN+wyDwBdltMMcDI3tYBnde/pHeARMNTErgd4APzweP834oeN1dMkz5DlsFNn/yyv4kdiSK4At4AO4CqwGaDwRmza2B0210qM7YhrXU59ANAq6bWkwQTTn5KO5fIE0uVYlXTeGLOXFMx1DrjlULwKKN41x6DlnIjEEQCckPRe0okCiguJr5LOGGO+xhm5jICJQ1i8LOeJJKPYEQAMKvrtt5ZdjSf2FM0Fq/sZJI2A6UNcvCz36TiDfUcAcE1SPu/U6Mm8k/TFfu6XdFb5iX3dGPM8lQfwNod3+TowBnQ3yddtv1vPIe+b1JIBiwEJ1IAJ208k5W21trWA+V/5CHAcmAtU/A2P/DcCiTAHHE8tgCVhgLvAXgYCk17Jo/yTGfLuWe7Zd72AC8CWB4n3OAz7mLytNkZabAEXMhfeQKYfWEpJZCxA3rGUOZeA/qDF15FpAz47EvlNk9neI2e3jeWCz0BbmvipNkSMMX8kuSZYM8Z8zyqAjbHmaN5mOeYjgIXrU93MWrxHrNQjrqiDkQMLHwG+OdqF3NN3jeXKzU8AoF1SzdH8XKhJUO7HZDXLMbwAwICkJUULFxe0SbqSVQAbw3Xi7Ze0ZLmGAzAKbHs0JGU1QtvAaIjCW4B7ZOvJy2qFa5a730RPtBiaz0CgnkiZi6F5fBZDVMvho7EhcuS3xJJ2hV9IupgTqaLw0hhzab8vq23xOG/r+LDsKjLgYVzxUnU0ltwK2wDezUyJmEwqXgp/PL4rvxthaeCSI+zxuA10J8ZkWdJNSb2SLkvayKHwDRu71+ZajrG941J8agALDQ3GU/a/IvMkYCPzmCbtLNEVmacNtgs5iP9fYVNEV1Q6Hez7yNZSL+J2SarTcpqiyV2iUkG0IvPFvbz5FbEn+KEk3wMjwMeSfCsBXFBdly9CAPk9ydyffpECuB5tZfVJjaKWueOSfinln6YK4lahQoUKRxd/AcRPGTcQCAUQAAAAAElFTkSuQmCC",ChevronRight:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguNTksMTYuNThMMTMuMTcsMTJMOC41OSw3LjQxTDEwLDZMMTYsMTJMMTAsMThMOC41OSwxNi41OFoiIC8+PC9zdmc+",Check:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDdMOSwxOUwzLjUsMTMuNUw0LjkxLDEyLjA5TDksMTYuMTdMMTkuNTksNS41OUwyMSw3WiIgLz48L3N2Zz4=",ViewIndicator:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0idmlldy1pbmRpY2F0b3IiIGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgdmlld0JveD0iLTIuNSAtMSAzMCAzMCI+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7ZmlsbDpub25lO30uc3Qxe3N0cm9rZS13aWR0aDo2O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCTwvc3R5bGU+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNIDEyLjUgMCBBIDEyLjUgMTIuNSAwIDAgMCAtMTIuNSAwIEEgMTIuNSAxMi41IDAgMCAwIDEyLjUgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0gMTMgMCBMIDEwIDIgTCAxNiAyIFoiPjwvcGF0aD4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNIDIgMCBBIDIgMiAwIDAgMCAtMiAwIEEgMiAyIDAgMCAwIDIgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGlkPSJpbmRpY2F0b3IiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTMsMTUuNSkiPjwvcGF0aD4KCTwvZz4KPC9zdmc+"},ia={load:function(v,C,R,A){var z,Y,ce,de;for(de in C=void 0===C?function(){}:C,R=void 0===R?function(){}:R,A=void 0===A?function(){}:A,te.Cache.enabled=!0,mn)mn.hasOwnProperty(de)&&v===mn[de]&&(z=de);var ye=te.Cache.get(z||v);if(void 0!==ye)return C&&setTimeout(function(){R({loaded:1,total:1}),C(ye)},0),ye;var Be=window.URL||window.webkitURL,Ne=document.createElementNS("http://www.w3.org/1999/xhtml","img");te.Cache.add(z||v,Ne);var J=function(){Be.revokeObjectURL(Ne.src),C(Ne)};if(0===v.indexOf("data:"))return Ne.addEventListener("load",J,!1),Ne.src=v,Ne;Ne.crossOrigin=void 0!==this.crossOrigin?this.crossOrigin:"",(z=new window.XMLHttpRequest).open("GET",v,!0),"test"!==process.env.npm_lifecycle_event&&(z.onreadystatechange=function(){4===this.readyState&&400<=this.status&&A()}),z.responseType="arraybuffer",z.addEventListener("error",A),z.addEventListener("progress",function(be){be&&be.lengthComputable&&R({loaded:be.loaded,total:be.total})}),z.addEventListener("loadend",function(be){be&&(Y=new Uint8Array(be.currentTarget.response),ce=new window.Blob([Y]),Ne.addEventListener("load",J,!1),Ne.src=Be.createObjectURL(ce))}),z.send(null)}},jr={load:function(v,C,R,A){C=void 0===C?function(){}:C;var z=new te.Texture;return ia.load(v,function(Y){z.image=Y,Y=0<v.search(/\.(jpg|jpeg)$/)||0===v.search(/^data:image\/jpeg/),z.format=Y?te.RGBFormat:te.RGBAFormat,z.needsUpdate=!0,C(z)},R,A),z}},uu={load:function(v,C,R,A){C=void 0===C?function(){}:C,R=void 0===R?function(){}:R;var z,Y=new te.CubeTexture([]),ce=0,de={},ye={};return v.map(function(Be,Ne){ia.load(Be,function(J){Y.images[Ne]=J,6==++ce&&(Y.needsUpdate=!0,C(Y))},function(J){for(var be in de[Ne]={loaded:J.loaded,total:J.total},ye.loaded=0,z=ye.total=0,de)z++,ye.loaded+=de[be].loaded,ye.total+=de[be].total;6>z&&(ye.total=ye.total/z*6),R(ye)},A)}),Y}};ji.prototype=Object.assign(Object.create(te.EventDispatcher.prototype),{setContainer:function(v){this.container=v},setScene:function(v){this.scene=v},enumerateDevices:function(){var v=this.devices,C=new Promise(function(R){R(v)});return 0<v.length?C:window.navigator.mediaDevices.enumerateDevices()},switchNextVideoDevice:function(){var v=this.stop.bind(this),C=this.start.bind(this),R=this.setVideDeviceIndex.bind(this),A=this.videoDeviceIndex;this.getDevices("video").then(function(z){v(),++A>=z.length?(R(0),A--):R(A),C(z[A])})},getDevices:function(v){v=void 0===v?"video":v;var C=this.devices;return this.enumerateDevices().then(function(R){return R.map(function(A){return C.includes(A)||C.push(A),A})}).then(function(R){var A=new RegExp(v,"i");return R.filter(function(z){return A.test(z.kind)})})},getUserMedia:function(v){var C=this.setMediaStream.bind(this),R=this.playVideo.bind(this);return window.navigator.mediaDevices.getUserMedia(v).then(C).then(R).catch(function(A){console.warn("PANOLENS.Media: "+A)})},setVideDeviceIndex:function(v){this.videoDeviceIndex=v},start:function(v){var C=this.constraints,R=this.getUserMedia.bind(this);return this.element=this.createVideoElement(),this.getDevices().then(function(A){if(!A||0===A.length)throw Error("no video device found");return C.video.deviceId=(v||A[0]).deviceId,R(C)})},stop:function(){var v=this.stream;v&&v.active&&(v.getTracks()[0].stop(),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.stream=this.element=null)},setMediaStream:function(v){this.stream=v,this.element.srcObject=v,this.scene&&(this.scene.background=this.createVideoTexture()),window.addEventListener("resize",this.onWindowResize.bind(this))},playVideo:function(){var v=this.element;v&&(v.play(),this.dispatchEvent({type:"play"}))},pauseVideo:function(){var v=this.element;v&&(v.pause(),this.dispatchEvent({type:"pause"}))},createVideoTexture:function(){var v=this.element,C=new te.VideoTexture(v);return C.generateMipmaps=!1,C.minFilter=te.LinearFilter,C.magFilter=te.LinearFilter,C.format=te.RGBFormat,C.center.set(.5,.5),v.addEventListener("canplay",this.onWindowResize.bind(this)),C},createVideoElement:function(){var v=this.dispatchEvent.bind(this),C=document.createElement("video");return C.setAttribute("autoplay",""),C.setAttribute("muted",""),C.setAttribute("playsinline",""),C.style.position="absolute",C.style.top="0",C.style.left="0",C.style.width="100%",C.style.height="100%",C.style.objectPosition="center",C.style.objectFit="cover",C.style.display=this.scene?"none":"",C.addEventListener("canplay",function(){return v({type:"canplay"})}),C},onWindowResize:function(){if(this.element&&this.element.videoWidth&&this.element.videoHeight&&this.scene){var v=this.container,C=v.clientWidth;v=v.clientHeight;var R=this.scene.background,A=this.element;A=A.videoHeight/A.videoWidth*(this.container?C/v:1)*this.ratioScalar,C>v?R.repeat.set(A,1):R.repeat.set(1,1/A)}}}),Di.prototype=Object.assign(Object.create(te.Sprite.prototype),{constructor:Di,setColor:function(v){this.material.color.copy(v instanceof te.Color?v:new te.Color(v))},createCanvasTexture:function(v){return(v=new te.CanvasTexture(v)).minFilter=te.LinearFilter,v.magFilter=te.LinearFilter,v.generateMipmaps=!1,v},createCanvas:function(){var v=document.createElement("canvas"),C=v.getContext("2d"),R=this.dpr;return v.width=32*R,v.height=32*R,C.scale(R,R),C.shadowBlur=5,C.shadowColor="rgba(200,200,200,0.9)",{canvas:v,context:C}},updateCanvasArcByProgress:function(v){var C=this.context,R=this.canvasWidth,A=this.canvasHeight,z=this.material,Y=this.dpr,ce=v*Math.PI*2,de=this.color.getStyle(),ye=.5*R/Y;Y=.5*A/Y,C.clearRect(0,0,R,A),C.beginPath(),0===v?(C.arc(ye,Y,R/16,0,2*Math.PI),C.fillStyle=de,C.fill()):(C.arc(ye,Y,R/4-3,-Math.PI/2,-Math.PI/2+ce),C.strokeStyle=de,C.lineWidth=3,C.stroke()),C.closePath(),z.map.needsUpdate=!0},ripple:function(){var v=this,C=this.context,R=this.canvasWidth,A=this.canvasHeight,z=this.material,Y=this.rippleDuration,ce=performance.now(),de=this.color,ye=this.dpr,Be=.5*R/ye,Ne=.5*A/ye,J=function(){var be=window.requestAnimationFrame(J),on=(performance.now()-ce)/Y,Kn=0<1-on?1-on:0,Pn=on*R*.5/ye;C.clearRect(0,0,R,A),C.beginPath(),C.arc(Be,Ne,Pn,0,2*Math.PI),C.fillStyle="rgba("+255*de.r+", "+255*de.g+", "+255*de.b+", "+Kn+")",C.fill(),C.closePath(),1<=on&&(window.cancelAnimationFrame(be),v.updateCanvasArcByProgress(0),v.dispatchEvent({type:"reticle-ripple-end"})),z.map.needsUpdate=!0};this.dispatchEvent({type:"reticle-ripple-start"}),J()},show:function(){this.visible=!0},hide:function(){this.visible=!1},start:function(v){this.autoSelect&&(this.dispatchEvent({type:"reticle-start"}),this.startTimestamp=performance.now(),this.callback=v,this.update())},end:function(){this.startTimestamp&&(window.cancelAnimationFrame(this.timerId),this.updateCanvasArcByProgress(0),this.startTimestamp=this.timerId=this.callback=null,this.dispatchEvent({type:"reticle-end"}))},update:function(){this.timerId=window.requestAnimationFrame(this.update.bind(this));var v=(performance.now()-this.startTimestamp)/this.dwellTime;this.updateCanvasArcByProgress(v),this.dispatchEvent({type:"reticle-update",progress:v}),1<=v&&(window.cancelAnimationFrame(this.timerId),this.callback&&this.callback(),this.end(),this.ripple())}});var v,C,Jt=(v=function(v,C){(C=function(){this._tweens={},this._tweensAddedDuringUpdate={}}).prototype={getAll:function(){return Object.keys(this._tweens).map(function(A){return this._tweens[A]}.bind(this))},removeAll:function(){this._tweens={}},add:function(A){this._tweens[A.getId()]=A,this._tweensAddedDuringUpdate[A.getId()]=A},remove:function(A){delete this._tweens[A.getId()],delete this._tweensAddedDuringUpdate[A.getId()]},update:function(A,z){var Y=Object.keys(this._tweens);if(0===Y.length)return!1;for(A=void 0!==A?A:R.now();0<Y.length;){this._tweensAddedDuringUpdate={};for(var ce=0;ce<Y.length;ce++){var de=this._tweens[Y[ce]];de&&!1===de.update(A)&&(de._isPlaying=!1,z||delete this._tweens[Y[ce]])}Y=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var A,R=new C;R.Group=C,R._nextId=0,R.nextId=function(){return R._nextId++},R.now=typeof self>"u"&&typeof process<"u"&&process.hrtime?function(){var A=process.hrtime();return 1e3*A[0]+A[1]/1e6}:typeof self<"u"&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},R.Tween=function(A,z){this._object=A,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._reversed=this._isPlaying=this._yoyo=!1,this._delayTime=0,this._startTime=null,this._easingFunction=R.Easing.Linear.None,this._interpolationFunction=R.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onStopCallback=this._onCompleteCallback=this._onRepeatCallback=this._onUpdateCallback=null,this._group=z||R,this._id=R.nextId()},R.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(A,z){return this._valuesEnd=Object.create(A),void 0!==z&&(this._duration=z),this},duration:function(A){return this._duration=A,this},start:function(A){for(var z in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==A?"string"==typeof A?R.now()+parseFloat(A):A:R.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[z]instanceof Array){if(0===this._valuesEnd[z].length)continue;this._valuesEnd[z]=[this._object[z]].concat(this._valuesEnd[z])}void 0!==this._object[z]&&(this._valuesStart[z]=this._object[z],!(this._valuesStart[z]instanceof Array)&&(this._valuesStart[z]*=1),this._valuesStartRepeat[z]=this._valuesStart[z]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var A=0,z=this._chainedTweens.length;A<z;A++)this._chainedTweens[A].stop()},group:function(A){return this._group=A,this},delay:function(A){return this._delayTime=A,this},repeat:function(A){return this._repeat=A,this},repeatDelay:function(A){return this._repeatDelayTime=A,this},yoyo:function(A){return this._yoyo=A,this},easing:function(A){return this._easingFunction=A,this},interpolation:function(A){return this._interpolationFunction=A,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(A){return this._onStartCallback=A,this},onUpdate:function(A){return this._onUpdateCallback=A,this},onRepeat:function(A){return this._onRepeatCallback=A,this},onComplete:function(A){return this._onCompleteCallback=A,this},onStop:function(A){return this._onStopCallback=A,this},update:function(A){var z;if(A<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0);var Y=(A-this._startTime)/this._duration,ce=this._easingFunction(Y=0===this._duration||1<Y?1:Y);for(z in this._valuesEnd)if(void 0!==this._valuesStart[z]){var de=this._valuesStart[z]||0,ye=this._valuesEnd[z];ye instanceof Array?this._object[z]=this._interpolationFunction(ye,ce):("string"==typeof ye&&(ye="+"===ye.charAt(0)||"-"===ye.charAt(0)?de+parseFloat(ye):parseFloat(ye)),"number"==typeof ye&&(this._object[z]=de+(ye-de)*ce))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,Y),1===Y){if(!(0<this._repeat)){for(null!==this._onCompleteCallback&&this._onCompleteCallback(this._object),A=0,z=this._chainedTweens.length;A<z;A++)this._chainedTweens[A].start(this._startTime+this._duration);return!1}for(z in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)"string"==typeof this._valuesEnd[z]&&(this._valuesStartRepeat[z]+=parseFloat(this._valuesEnd[z])),this._yoyo&&(Y=this._valuesStartRepeat[z],this._valuesStartRepeat[z]=this._valuesEnd[z],this._valuesEnd[z]=Y),this._valuesStart[z]=this._valuesStartRepeat[z];this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?A+this._repeatDelayTime:A+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object)}return!0}},R.Easing={Linear:{None:function(A){return A}},Quadratic:{In:function(A){return A*A},Out:function(A){return A*(2-A)},InOut:function(A){return 1>(A*=2)?.5*A*A:-.5*(--A*(A-2)-1)}},Cubic:{In:function(A){return A*A*A},Out:function(A){return--A*A*A+1},InOut:function(A){return 1>(A*=2)?.5*A*A*A:.5*((A-=2)*A*A+2)}},Quartic:{In:function(A){return A*A*A*A},Out:function(A){return 1- --A*A*A*A},InOut:function(A){return 1>(A*=2)?.5*A*A*A*A:-.5*((A-=2)*A*A*A-2)}},Quintic:{In:function(A){return A*A*A*A*A},Out:function(A){return--A*A*A*A*A+1},InOut:function(A){return 1>(A*=2)?.5*A*A*A*A*A:.5*((A-=2)*A*A*A*A+2)}},Sinusoidal:{In:function(A){return 1-Math.cos(A*Math.PI/2)},Out:function(A){return Math.sin(A*Math.PI/2)},InOut:function(A){return.5*(1-Math.cos(Math.PI*A))}},Exponential:{In:function(A){return 0===A?0:Math.pow(1024,A-1)},Out:function(A){return 1===A?1:1-Math.pow(2,-10*A)},InOut:function(A){return 0===A?0:1===A?1:1>(A*=2)?.5*Math.pow(1024,A-1):.5*(2-Math.pow(2,-10*(A-1)))}},Circular:{In:function(A){return 1-Math.sqrt(1-A*A)},Out:function(A){return Math.sqrt(1- --A*A)},InOut:function(A){return 1>(A*=2)?-.5*(Math.sqrt(1-A*A)-1):.5*(Math.sqrt(1-(A-=2)*A)+1)}},Elastic:{In:function(A){return 0===A?0:1===A?1:-Math.pow(2,10*(A-1))*Math.sin(5*(A-1.1)*Math.PI)},Out:function(A){return 0===A?0:1===A?1:Math.pow(2,-10*A)*Math.sin(5*(A-.1)*Math.PI)+1},InOut:function(A){return 0===A?0:1===A?1:1>(A*=2)?-.5*Math.pow(2,10*(A-1))*Math.sin(5*(A-1.1)*Math.PI):.5*Math.pow(2,-10*(A-1))*Math.sin(5*(A-1.1)*Math.PI)+1}},Back:{In:function(A){return A*A*(2.70158*A-1.70158)},Out:function(A){return--A*A*(2.70158*A+1.70158)+1},InOut:function(A){return 1>(A*=2)?.5*A*A*(3.5949095*A-2.5949095):.5*((A-=2)*A*(3.5949095*A+2.5949095)+2)}},Bounce:{In:function(A){return 1-R.Easing.Bounce.Out(1-A)},Out:function(A){return A<1/2.75?7.5625*A*A:A<2/2.75?7.5625*(A-=1.5/2.75)*A+.75:A<2.5/2.75?7.5625*(A-=2.25/2.75)*A+.9375:7.5625*(A-=2.625/2.75)*A+.984375},InOut:function(A){return.5>A?.5*R.Easing.Bounce.In(2*A):.5*R.Easing.Bounce.Out(2*A-1)+.5}}},R.Interpolation={Linear:function(A,z){var Y=A.length-1,ce=Y*z,de=Math.floor(ce),ye=R.Interpolation.Utils.Linear;return 0>z?ye(A[0],A[1],ce):1<z?ye(A[Y],A[Y-1],Y-ce):ye(A[de],A[de+1>Y?Y:de+1],ce-de)},Bezier:function(A,z){for(var Y=0,ce=A.length-1,de=Math.pow,ye=R.Interpolation.Utils.Bernstein,Be=0;Be<=ce;Be++)Y+=de(1-z,ce-Be)*de(z,Be)*A[Be]*ye(ce,Be);return Y},CatmullRom:function(A,z){var Y=A.length-1,ce=Y*z,de=Math.floor(ce),ye=R.Interpolation.Utils.CatmullRom;return A[0]===A[Y]?(0>z&&(de=Math.floor(ce=Y*(1+z))),ye(A[(de-1+Y)%Y],A[de],A[(de+1)%Y],A[(de+2)%Y],ce-de)):0>z?A[0]-(ye(A[0],A[0],A[1],A[1],-ce)-A[0]):1<z?A[Y]-(ye(A[Y],A[Y],A[Y-1],A[Y-1],ce-Y)-A[Y]):ye(A[de?de-1:0],A[de],A[Y<de+1?Y:de+1],A[Y<de+2?Y:de+2],ce-de)},Utils:{Linear:function(A,z,Y){return(z-A)*Y+A},Bernstein:function(A,z){var Y=R.Interpolation.Utils.Factorial;return Y(A)/Y(z)/Y(A-z)},Factorial:(A=[1],function(z){var Y=1;if(A[z])return A[z];for(var ce=z;1<ce;ce--)Y*=ce;return A[z]=Y}),CatmullRom:function(A,z,Y,ce,de){var ye=de*de;return(2*z-2*Y+(A=.5*(Y-A))+(ce=.5*(ce-z)))*de*ye+(-3*z+3*Y-2*A-ce)*ye+A*de+z}}},v.exports=R},v(C={exports:{}},C.exports),C.exports);nn.prototype=Object.assign(Object.create(te.Sprite.prototype),{constructor:nn,setContainer:function(v){if(v instanceof HTMLElement)var C=v;else v&&v.container&&(C=v.container);C&&this.element&&C.appendChild(this.element),this.container=C},getContainer:function(){return this.container},onClick:function(v){this.element&&this.getContainer()&&(this.onHoverStart(v),this.lockHoverElement())},onDismiss:function(){this.element&&(this.unlockHoverElement(),this.onHoverEnd())},onHover:function(){},onHoverStart:function(v){if(this.getContainer()){var C=this.cursorStyle||(this.mode===rn.NORMAL?"pointer":"default"),R=this.scaleDownAnimation,A=this.scaleUpAnimation,z=this.element;this.isHovering=!0,this.container.style.cursor=C,this.animated&&(R.stop(),A.start()),z&&0<=v.mouseEvent.clientX&&0<=v.mouseEvent.clientY&&(v=z.left,C=z.right,R=z.style,this.mode===rn.CARDBOARD||this.mode===rn.STEREO?(R.display="none",v.style.display="block",C.style.display="block",z._width=v.clientWidth,z._height=v.clientHeight):(R.display="block",v&&(v.style.display="none"),C&&(C.style.display="none"),z._width=z.clientWidth,z._height=z.clientHeight))}},onHoverEnd:function(){if(this.getContainer()){var v=this.scaleDownAnimation,C=this.scaleUpAnimation,R=this.element;this.isHovering=!1,this.container.style.cursor="default",this.animated&&(C.stop(),v.start()),R&&!this.element.locked&&(v=R.left,C=R.right,R.style.display="none",v&&(v.style.display="none"),C&&(C.style.display="none"),this.unlockHoverElement())}},onDualEyeEffect:function(v){if(this.getContainer()){this.mode=v.mode;var C=this.container.clientWidth/2,R=this.container.clientHeight/2;(v=this.element)&&(v.left||v.right||(v.left=v.cloneNode(!0),v.right=v.cloneNode(!0)),this.mode===rn.CARDBOARD||this.mode===rn.STEREO?(v.left.style.display=v.style.display,v.right.style.display=v.style.display,v.style.display="none"):(v.style.display=v.left.style.display,v.left.style.display="none",v.right.style.display="none"),this.translateElement(C,R),this.container.appendChild(v.left),this.container.appendChild(v.right))}},translateElement:function(v,C){if(this.element._width&&this.element._height&&this.getContainer()){var R=this.container,A=this.element,z=A._width/2,Y=A._height/2,ce=void 0!==A.verticalDelta?A.verticalDelta:40,de=v-z,ye=C-Y-ce;this.mode!==rn.CARDBOARD&&this.mode!==rn.STEREO||!A.left||!A.right||v===R.clientWidth/2&&C===R.clientHeight/2?this.setElementStyle("transform",A,"translate("+de+"px, "+ye+"px)"):(this.setElementStyle("transform",A.left,"translate("+(de=R.clientWidth/4-z+(v-R.clientWidth/2))+"px, "+(ye=R.clientHeight/2-Y-ce+(C-R.clientHeight/2))+"px)"),this.setElementStyle("transform",A.right,"translate("+(de+=R.clientWidth/2)+"px, "+ye+"px)"))}},setElementStyle:function(v,C,R){C=C.style,"transform"===v&&(C.webkitTransform=C.msTransform=C.transform=R)},setText:function(v){this.element&&(this.element.textContent=v)},setCursorHoverStyle:function(v){this.cursorStyle=v},addHoverText:function(v,C){C=void 0===C?40:C,this.element||(this.element=document.createElement("div"),this.element.style.display="none",this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=C),this.setText(v)},addHoverElement:function(v,C){C=void 0===C?40:C,this.element||(this.element=v.cloneNode(!0),this.element.style.display="none",this.element.style.top=0,this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=C)},removeHoverElement:function(){this.element&&(this.element.left&&(this.container.removeChild(this.element.left),this.element.left=null),this.element.right&&(this.container.removeChild(this.element.right),this.element.right=null),this.container.removeChild(this.element),this.element=null)},lockHoverElement:function(){this.element&&(this.element.locked=!0)},unlockHoverElement:function(){this.element&&(this.element.locked=!1)},enableRaycast:function(v){this.raycast=void 0===v||v?this.originalRaycast:function(){}},show:function(v){v=void 0===v?0:v;var R=this.showAnimation,A=this.material;this.animated?(this.hideAnimation.stop(),R.delay(v).start()):(this.enableRaycast(!0),A.opacity=1)},hide:function(v){v=void 0===v?0:v;var C=this.animated,R=this.hideAnimation,A=this.showAnimation,z=this.material,Y=this.element;Y&&(Y.style.display="none"),C?(A.stop(),R.delay(v).start()):(this.enableRaycast(!1),z.opacity=0)},setFocusMethod:function(v){v&&(this.HANDLER_FOCUS=v.method)},focus:function(v,C){this.HANDLER_FOCUS&&(this.HANDLER_FOCUS(this.position,v,C),this.onDismiss())},dispose:function(){var v=this.geometry,C=this.material,R=C.map;this.removeHoverElement(),this.parent&&this.parent.remove(this),R&&(R.dispose(),C.map=null),v&&(v.dispose(),this.geometry=null),C&&(C.dispose(),this.material=null)}}),ur.prototype=Object.assign(Object.create(te.EventDispatcher.prototype),{constructor:ur,addControlBar:function(){if(this.container){var R,v=this,A=document.createElement("div");A.style.width="100%",A.style.height="44px",A.style.float="left",A.style.transform=A.style.webkitTransform=A.style.msTransform="translateY(-100%)",A.style.background="-webkit-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",A.style.background="-moz-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",A.style.background="-o-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",A.style.background="-ms-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",A.style.background="linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",A.style.transition=this.DEFAULT_TRANSITION,A.style.pointerEvents="none",A.isHidden=!1,A.toggle=function(){A.isHidden=!A.isHidden,R=A.isHidden?0:1,A.style.transform=A.style.webkitTransform=A.style.msTransform=A.isHidden?"translateY(0)":"translateY(-100%)",A.style.opacity=R};var z=this.createDefaultMenu();this.mainMenu=this.createMainMenu(z),A.appendChild(this.mainMenu),this.mask=z=this.createMask(),this.container.appendChild(z),A.dispose=function(){v.fullscreenElement&&(A.removeChild(v.fullscreenElement),v.fullscreenElement.dispose(),v.fullscreenElement=null),v.settingElement&&(A.removeChild(v.settingElement),v.settingElement.dispose(),v.settingElement=null),v.videoElement&&(A.removeChild(v.videoElement),v.videoElement.dispose(),v.videoElement=null)},this.container.appendChild(A),this.mask.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener(v.TOUCH_ENABLED?"touchend":"click",function(Y){Y.preventDefault(),Y.stopPropagation(),v.mask.hide(),v.settingElement.deactivate()},!1),this.addEventListener("control-bar-toggle",A.toggle),this.barElement=A}else console.warn("Widget container not set")},createDefaultMenu:function(){var v=this,C=function(R,A){return function(){v.dispatchEvent({type:"panolens-viewer-handler",method:R,data:A})}};return[{title:"Control",subMenu:[{title:this.TOUCH_ENABLED?"Touch":"Mouse",handler:C("enableControl",Zi.ORBIT)},{title:"Sensor",handler:C("enableControl",Zi.DEVICEORIENTATION)}]},{title:"Mode",subMenu:[{title:"Normal",handler:C("disableEffect")},{title:"Cardboard",handler:C("enableEffect",rn.CARDBOARD)},{title:"Stereoscopic",handler:C("enableEffect",rn.STEREO)}]}]},addControlButton:function(v){switch(v){case"fullscreen":this.fullscreenElement=v=this.createFullscreenButton();break;case"setting":this.settingElement=v=this.createSettingButton();break;case"video":this.videoElement=v=this.createVideoControl();break;default:return}v&&this.barElement.appendChild(v)},createMask:function(){var v=document.createElement("div");return v.style.position="absolute",v.style.top=0,v.style.left=0,v.style.width="100%",v.style.height="100%",v.style.background="transparent",v.style.display="none",v.show=function(){this.style.display="block"},v.hide=function(){this.style.display="none"},v},createSettingButton:function(){var v=this,C=this.createCustomItem({style:{backgroundImage:'url("'+mn.Setting+'")',webkitTransition:this.DEFAULT_TRANSITION,transition:this.DEFAULT_TRANSITION},onTap:function(R){R.preventDefault(),R.stopPropagation(),v.mainMenu.toggle(),this.activated?this.deactivate():this.activate()}});return C.activate=function(){this.style.transform="rotate3d(0,0,1,90deg)",this.activated=!0,v.mask.show()},C.deactivate=function(){this.style.transform="rotate3d(0,0,0,0)",this.activated=!1,v.mask.hide(),v.mainMenu&&v.mainMenu.visible&&v.mainMenu.hide(),v.activeSubMenu&&v.activeSubMenu.visible&&v.activeSubMenu.hide(),v.mainMenu&&v.mainMenu._width&&(v.mainMenu.changeSize(v.mainMenu._width),v.mainMenu.unslideAll())},C.activated=!1,C},createFullscreenButton:function(){function v(){A&&(Y.style.backgroundImage=(R=!R)?'url("'+mn.FullscreenLeave+'")':'url("'+mn.FullscreenEnter+'")'),C.dispatchEvent({type:"panolens-viewer-handler",method:"onWindowResize"}),A=!0}var C=this,R=!1,A=!0,z=this.container;if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){document.addEventListener("fullscreenchange",v,!1),document.addEventListener("webkitfullscreenchange",v,!1),document.addEventListener("mozfullscreenchange",v,!1),document.addEventListener("MSFullscreenChange",v,!1);var Y=this.createCustomItem({style:{backgroundImage:'url("'+mn.FullscreenEnter+'")'},onTap:function(de){de.preventDefault(),de.stopPropagation(),A=!1,R?(document.exitFullscreen&&document.exitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&document.webkitExitFullscreen(),R=!1):(z.requestFullscreen&&z.requestFullscreen(),z.msRequestFullscreen&&z.msRequestFullscreen(),z.mozRequestFullScreen&&z.mozRequestFullScreen(),z.webkitRequestFullscreen&&z.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),R=!0),this.style.backgroundImage=R?'url("'+mn.FullscreenLeave+'")':'url("'+mn.FullscreenEnter+'")'}});if(!document.querySelector("panolens-style-addon")){var ce=document.createElement("style");ce.id="panolens-style-addon",ce.innerHTML=":-webkit-full-screen { width: 100% !important; height: 100% !important }",document.body.appendChild(ce)}return Y}},createVideoControl:function(){var v=document.createElement("span");return v.style.display="none",v.show=function(){v.style.display=""},v.hide=function(){v.style.display="none",v.controlButton.paused=!0,v.controlButton.update()},v.controlButton=this.createVideoControlButton(),v.seekBar=this.createVideoControlSeekbar(),v.appendChild(v.controlButton),v.appendChild(v.seekBar),v.dispose=function(){v.removeChild(v.controlButton),v.removeChild(v.seekBar),v.controlButton.dispose(),v.controlButton=null,v.seekBar.dispose(),v.seekBar=null},this.addEventListener("video-control-show",v.show),this.addEventListener("video-control-hide",v.hide),v},createVideoControlButton:function(){var v=this,C=this.createCustomItem({style:{float:"left",backgroundImage:'url("'+mn.VideoPlay+'")'},onTap:function(R){R.preventDefault(),R.stopPropagation(),v.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVideoPlay",data:!this.paused}),this.paused=!this.paused,C.update()}});return C.paused=!0,C.update=function(R){this.paused=void 0!==R?R:this.paused,this.style.backgroundImage='url("'+(this.paused?mn.VideoPlay:mn.VideoPause)+'")'},C},createVideoControlSeekbar:function(){function v(be){be.stopPropagation(),Y=!0,ce=be.clientX||be.changedTouches&&be.changedTouches[0].clientX,de=parseInt(Be.style.width)/100,z.container.addEventListener("mousemove",C,{passive:!0}),z.container.addEventListener("mouseup",R,{passive:!0}),z.container.addEventListener("touchmove",C,{passive:!0}),z.container.addEventListener("touchend",R,{passive:!0})}function C(be){Y&&(J.setProgress(ye=1<(ye=de+(ye=((be.clientX||be.changedTouches&&be.changedTouches[0].clientX)-ce)/J.clientWidth))?1:0>ye?0:ye),z.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:ye}))}function R(be){be.stopPropagation(),Y=!1,A()}function A(){z.container.removeEventListener("mousemove",C,!1),z.container.removeEventListener("mouseup",R,!1),z.container.removeEventListener("touchmove",C,!1),z.container.removeEventListener("touchend",R,!1)}var ce,de,ye,z=this,Y=!1,Be=document.createElement("div");Be.style.width="0%",Be.style.height="100%",Be.style.backgroundColor="#fff";var Ne=document.createElement("div");Ne.style.float="right",Ne.style.width="14px",Ne.style.height="14px",Ne.style.transform="translate(7px, -5px)",Ne.style.borderRadius="50%",Ne.style.backgroundColor="#ddd",Ne.addEventListener("mousedown",v,{passive:!0}),Ne.addEventListener("touchstart",v,{passive:!0}),Be.appendChild(Ne);var J=this.createCustomItem({style:{float:"left",width:"30%",height:"4px",marginTop:"20px",backgroundColor:"rgba(188,188,188,0.8)"},onTap:function(be){if(be.preventDefault(),be.stopPropagation(),be.target!==Ne){var on=be.changedTouches&&0<be.changedTouches.length?(be.changedTouches[0].pageX-be.target.getBoundingClientRect().left)/this.clientWidth:be.offsetX/this.clientWidth;z.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:on}),J.setProgress(be.offsetX/this.clientWidth)}},onDispose:function(){A(),Ne=Be=null}});return J.appendChild(Be),J.setProgress=function(be){Be.style.width=100*be+"%"},this.addEventListener("video-update",function(be){J.setProgress(be.percentage)}),J.progressElement=Be,J.progressElementControl=Ne,J},createMenuItem:function(v){var C=this,R=document.createElement("a");return R.textContent=v,R.style.display="block",R.style.padding="10px",R.style.textDecoration="none",R.style.cursor="pointer",R.style.pointerEvents="auto",R.style.transition=this.DEFAULT_TRANSITION,R.slide=function(A){this.style.transform="translateX("+(A?"":"-")+"100%)"},R.unslide=function(){this.style.transform="translateX(0)"},R.setIcon=function(A){this.icon&&(this.icon.style.backgroundImage="url("+A+")")},R.setSelectionTitle=function(A){this.selection&&(this.selection.textContent=A)},R.addSelection=function(A){var z=document.createElement("span");return z.style.fontSize="13px",z.style.fontWeight="300",z.style.float="right",this.selection=z,this.setSelectionTitle(A),this.appendChild(z),this},R.addIcon=function(A,z,Y){A=void 0===A?mn.ChevronRight:A,z=void 0!==z&&z,Y=void 0!==Y&&Y;var ce=document.createElement("span");return ce.style.float=z?"left":"right",ce.style.width="17px",ce.style.height="17px",ce.style["margin"+(z?"Right":"Left")]="12px",ce.style.backgroundSize="cover",Y&&(ce.style.transform="rotateZ(180deg)"),this.icon=ce,this.setIcon(A),this.appendChild(ce),this},R.addSubMenu=function(A,z){return this.subMenu=C.createSubMenu(A,z),this},R.addEventListener("mouseenter",function(){this.style.backgroundColor="#e0e0e0"},!1),R.addEventListener("mouseleave",function(){this.style.backgroundColor="#fafafa"},!1),R},createMenuItemHeader:function(v){return(v=this.createMenuItem(v)).style.borderBottom="1px solid #333",v.style.paddingBottom="15px",v},createMainMenu:function(v){function C(ce){ce.preventDefault(),ce.stopPropagation();var de=R.mainMenu,ye=this.subMenu;de.hide(),de.slideAll(),de.parentElement.appendChild(ye),R.activeMainItem=this,R.activeSubMenu=ye,window.requestAnimationFrame(function(){de.changeSize(ye.clientWidth),ye.show(),ye.unslideAll()})}var R=this,A=this.createMenu();A._width=200,A.changeSize(A._width);for(var z=0;z<v.length;z++){var Y=A.addItem(v[z].title);Y.style.paddingLeft="20px",Y.addIcon().addEventListener(R.TOUCH_ENABLED?"touchend":"click",C,!1),v[z].subMenu&&0<v[z].subMenu.length&&Y.addSelection(v[z].subMenu[0].title).addSubMenu(v[z].title,v[z].subMenu)}return A},createSubMenu:function(v,C){function R(de){de.preventDefault(),de.stopPropagation(),(z=A.mainMenu).changeSize(z._width),z.unslideAll(),z.show(),Y.slideAll(!0),Y.hide(),"header"!==this.type&&(Y.setActiveItem(this),A.activeMainItem.setSelectionTitle(this.textContent),this.handler&&this.handler())}var z,A=this,Y=this.createMenu();for(Y.items=C,Y.activeItem=null,Y.addHeader(v).addIcon(void 0,!0,!0).addEventListener(A.TOUCH_ENABLED?"touchend":"click",R,!1),v=0;v<C.length;v++){var ce=Y.addItem(C[v].title);ce.style.fontWeight=300,ce.handler=C[v].handler,ce.addIcon(" ",!0),ce.addEventListener(A.TOUCH_ENABLED?"touchend":"click",R,!1),Y.activeItem||Y.setActiveItem(ce)}return Y.slideAll(!0),Y},createMenu:function(){var v=this,C=document.createElement("span"),R=C.style;return R.padding="5px 0",R.position="fixed",R.bottom="100%",R.right="14px",R.backgroundColor="#fafafa",R.fontFamily="Helvetica Neue",R.fontSize="14px",R.visibility="hidden",R.opacity=0,R.boxShadow="0 0 12pt rgba(0,0,0,0.25)",R.borderRadius="2px",R.overflow="hidden",R.willChange="width, height, opacity",R.pointerEvents="auto",R.transition=this.DEFAULT_TRANSITION,C.visible=!1,C.changeSize=function(A,z){A&&(this.style.width=A+"px"),z&&(this.style.height=z+"px")},C.show=function(){this.style.opacity=1,this.style.visibility="visible",this.visible=!0},C.hide=function(){this.style.opacity=0,this.style.visibility="hidden",this.visible=!1},C.toggle=function(){this.visible?this.hide():this.show()},C.slideAll=function(A){for(var z=0;z<C.children.length;z++)C.children[z].slide&&C.children[z].slide(A)},C.unslideAll=function(){for(var A=0;A<C.children.length;A++)C.children[A].unslide&&C.children[A].unslide()},C.addHeader=function(A){return(A=v.createMenuItemHeader(A)).type="header",this.appendChild(A),A},C.addItem=function(A){return(A=v.createMenuItem(A)).type="item",this.appendChild(A),A},C.setActiveItem=function(A){this.activeItem&&this.activeItem.setIcon(" "),A.setIcon(mn.Check),this.activeItem=A},C.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),C.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),C.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),C},createCustomItem:function(v){var C=this,R=(v=void 0===v?{}:v).element||document.createElement("span"),A=v.onDispose;return R.style.cursor="pointer",R.style.float="right",R.style.width="44px",R.style.height="100%",R.style.backgroundSize="60%",R.style.backgroundRepeat="no-repeat",R.style.backgroundPosition="center",R.style.webkitUserSelect=R.style.MozUserSelect=R.style.userSelect="none",R.style.position="relative",R.style.pointerEvents="auto",R.addEventListener(C.TOUCH_ENABLED?"touchstart":"mouseenter",function(){R.style.filter=R.style.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"},{passive:!0}),R.addEventListener(C.TOUCH_ENABLED?"touchend":"mouseleave",function(){R.style.filter=R.style.webkitFilter=""},{passive:!0}),this.mergeStyleOptions(R,v.style),v.onTap&&R.addEventListener(C.TOUCH_ENABLED?"touchend":"click",v.onTap,!1),R.dispose=function(){R.removeEventListener(C.TOUCH_ENABLED?"touchend":"click",v.onTap,!1),A&&v.onDispose()},R},mergeStyleOptions:function(v,C){for(var R in C=void 0===C?{}:C)C.hasOwnProperty(R)&&(v.style[R]=C[R]);return v},dispose:function(){this.barElement&&(this.container.removeChild(this.barElement),this.barElement.dispose(),this.barElement=null)}}),$t.prototype=Object.assign(Object.create(te.Mesh.prototype),{constructor:$t,add:function(v){var C;if(1<arguments.length){for(C=0;C<arguments.length;C++)this.add(arguments[C]);return this}if(v instanceof nn){if(C=v,v.dispatchEvent){var R=this.container;R&&v.dispatchEvent({type:"panolens-container",container:R}),v.dispatchEvent({type:"panolens-infospot-focus",method:function(A,z,Y){this.dispatchEvent({type:"panolens-viewer-handler",method:"tweenControlCenter",data:[A,z,Y]})}.bind(this)})}}else(C=new te.Object3D).scale.x=-1,C.scalePlaceHolder=!0,C.add(v);te.Object3D.prototype.add.call(this,C)},load:function(){this.onLoad()},onClick:function(v){v.intersects&&0===v.intersects.length&&this.traverse(function(C){C.dispatchEvent({type:"dismiss"})})},setContainer:function(v){if(v instanceof HTMLElement)var C=v;else v&&v.container&&(C=v.container);C&&(this.children.forEach(function(R){R instanceof nn&&R.dispatchEvent&&R.dispatchEvent({type:"panolens-container",container:C})}),this.container=C)},onLoad:function(){this.loaded=!0,this.dispatchEvent({type:"load"})},onProgress:function(v){this.dispatchEvent({type:"progress",progress:v})},onError:function(){this.dispatchEvent({type:"error"})},getZoomLevel:function(){return 800>=window.innerWidth?this.ImageQualityFair:800<window.innerWidth&&1280>=window.innerWidth?this.ImageQualityMedium:1280<window.innerWidth&&1920>=window.innerWidth?this.ImageQualityHigh:1920<window.innerWidth?this.ImageQualitySuperHigh:this.ImageQualityLow},updateTexture:function(v){this.material.map=v,this.material.needsUpdate=!0},toggleInfospotVisibility:function(v,C){C=void 0!==C?C:0;var R=void 0!==v?v:!this.isInfospotVisible;this.traverse(function(A){A instanceof nn&&(R?A.show(C):A.hide(C))}),this.isInfospotVisible=R,this.infospotAnimation.onComplete(function(){this.dispatchEvent({type:"infospot-animation-complete",visible:R})}.bind(this)).delay(C).start()},setLinkingImage:function(v,C){this.linkingImageURL=v,this.linkingImageScale=C},link:function(v,C,R,A){this.visible=!0,C?((A=new nn(R=void 0!==R?R:void 0!==v.linkingImageScale?v.linkingImageScale:300,A=A||(v.linkingImageURL?v.linkingImageURL:mn.Arrow))).position.copy(C),A.toPanorama=v,A.addEventListener("click",function(){this.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:v})}.bind(this)),this.linkedSpots.push(A),this.add(A),this.visible=!1):console.warn("Please specify infospot position for linking")},reset:function(){this.children.length=0},setupTransitions:function(){this.fadeInAnimation=new Jt.Tween(this.material).easing(Jt.Easing.Quartic.Out).onStart(function(){this.visible=!0,this.dispatchEvent({type:"enter-fade-start"})}.bind(this)),this.fadeOutAnimation=new Jt.Tween(this.material).easing(Jt.Easing.Quartic.Out).onComplete(function(){this.visible=!1,this.dispatchEvent({type:"leave-complete"})}.bind(this)),this.enterTransition=new Jt.Tween(this).easing(Jt.Easing.Quartic.Out).onComplete(function(){this.dispatchEvent({type:"enter-complete"})}.bind(this)).start(),this.leaveTransition=new Jt.Tween(this).easing(Jt.Easing.Quartic.Out)},onFadeAnimationUpdate:function(){var C=this.material.uniforms;C&&C.opacity&&(C.opacity.value=this.material.opacity)},fadeIn:function(v){v=0<=v?v:this.animationDuration,this.fadeOutAnimation.stop(),this.fadeInAnimation.to({opacity:1},v).onUpdate(this.onFadeAnimationUpdate.bind(this)).onComplete(function(){this.toggleInfospotVisibility(!0,v/2),this.dispatchEvent({type:"enter-fade-complete"})}.bind(this)).start()},fadeOut:function(v){v=0<=v?v:this.animationDuration,this.fadeInAnimation.stop(),this.fadeOutAnimation.to({opacity:0},v).onUpdate(this.onFadeAnimationUpdate.bind(this)).start()},onEnter:function(){var v=this.animationDuration;this.leaveTransition.stop(),this.enterTransition.to({},v).onStart(function(){this.dispatchEvent({type:"enter-start"}),this.loaded?this.fadeIn(v):this.load()}.bind(this)).start(),this.dispatchEvent({type:"enter"}),this.children.forEach(function(C){C.dispatchEvent({type:"panorama-enter"})}),this.active=!0},onLeave:function(){var v=this.animationDuration;this.enterTransition.stop(),this.leaveTransition.to({},v).onStart(function(){this.dispatchEvent({type:"leave-start"}),this.fadeOut(v),this.toggleInfospotVisibility(!1)}.bind(this)).start(),this.dispatchEvent({type:"leave"}),this.children.forEach(function(C){C.dispatchEvent({type:"panorama-leave"})}),this.active=!1},dispose:function(){this.infospotAnimation.stop(),this.fadeInAnimation.stop(),this.fadeOutAnimation.stop(),this.enterTransition.stop(),this.leaveTransition.stop(),this.dispatchEvent({type:"panolens-viewer-handler",method:"onPanoramaDispose",data:this}),function v(C){for(var R=C.geometry,A=C.material,z=C.children.length-1;0<=z;z--)v(C.children[z]),C.remove(C.children[z]);C instanceof nn&&C.dispose(),R&&(R.dispose(),C.geometry=null),A&&(A.dispose(),C.material=null)}(this),this.parent&&this.parent.remove(this)}}),Cn.prototype=Object.assign(Object.create($t.prototype),{constructor:Cn,load:function(v){(v=v||this.src)?"string"==typeof v?jr.load(v,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)):v instanceof HTMLImageElement&&this.onLoad(new te.Texture(v)):console.warn("Image source undefined")},onLoad:function(v){v.minFilter=v.magFilter=te.LinearFilter,v.needsUpdate=!0,this.updateTexture(v),window.requestAnimationFrame($t.prototype.onLoad.bind(this))},reset:function(){$t.prototype.reset.call(this)},dispose:function(){var v=this.material.map;te.Cache.remove(this.src),v&&v.dispose(),$t.prototype.dispose.call(this)}}),Sr.prototype=Object.assign(Object.create($t.prototype),{constructor:Sr}),Ti.prototype=Object.assign(Object.create($t.prototype),{constructor:Ti,load:function(){uu.load(this.images,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this))},onLoad:function(v){this.material.uniforms.tCube.value=v,$t.prototype.onLoad.call(this)},dispose:function(){var v=this.material.uniforms.tCube.value;this.images.forEach(function(C){te.Cache.remove(C)}),v instanceof te.CubeTexture&&v.dispose(),$t.prototype.dispose.call(this)}}),Wi.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Wi}),Dr.prototype=Object.assign(Object.create($t.prototype),{constructor:Dr,isMobile:function(){var v=!1,C=window.navigator.userAgent||window.navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(C)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(C.substr(0,4)))&&(v=!0),v},load:function(){var v=this.options,C=v.muted,R=v.loop,A=v.autoplay,z=v.playsinline;v=v.crossOrigin;var Y=this.videoElement,ce=this.material,de=this.onProgress.bind(this),ye=this.onLoad.bind(this);Y.loop=R,Y.autoplay=A,Y.playsinline=z,Y.crossOrigin=v,Y.muted=C,z&&(Y.setAttribute("playsinline",""),Y.setAttribute("webkit-playsinline","")),z=function(){this.setVideoTexture(Y),A&&this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}),this.isMobile()&&(Y.pause(),this.dispatchEvent(A&&C?{type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}:{type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0})),window.requestAnimationFrame(function(){ce.map.needsUpdate=!0,de({loaded:1,total:1}),ye()})},2<Y.readyState?z.call(this):(0===Y.querySelectorAll("source").length&&((v=document.createElement("source")).src=this.src,Y.appendChild(v)),Y.load()),Y.addEventListener("loadeddata",z.bind(this)),Y.addEventListener("timeupdate",function(){this.videoProgress=0<=Y.duration?Y.currentTime/Y.duration:0,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:this.videoProgress})}.bind(this)),Y.addEventListener("ended",function(){R||(this.resetVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}))}.bind(this),!1)},setVideoTexture:function(v){v&&((v=new te.VideoTexture(v)).minFilter=te.LinearFilter,v.magFilter=te.LinearFilter,v.format=te.RGBFormat,this.updateTexture(v))},reset:function(){this.videoElement=void 0,$t.prototype.reset.call(this)},isVideoPaused:function(){return this.videoElement.paused},toggleVideo:function(){var v=this.videoElement;v&&v[v.paused?"play":"pause"]()},setVideoCurrentTime:function(v){v=v.percentage;var C=this.videoElement;C&&!Number.isNaN(v)&&1!==v&&(C.currentTime=C.duration*v,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:v}))},playVideo:function(){var v=this.videoElement,C=this.playVideo.bind(this),R=this.dispatchEvent.bind(this);v&&v.paused&&v.play().then(function(){R({type:"play"})}).catch(function(Y){window.requestAnimationFrame(C),R({type:"play-error",error:Y})})},pauseVideo:function(){var v=this.videoElement;v&&!v.paused&&v.pause(),this.dispatchEvent({type:"pause"})},resumeVideoProgress:function(){var v=this.videoElement;4<=v.readyState&&v.autoplay&&!this.isMobile()?(this.playVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1})):(this.pauseVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0})),this.setVideoCurrentTime({percentage:this.videoProgress})},resetVideo:function(){this.videoElement&&this.setVideoCurrentTime({percentage:0})},isVideoMuted:function(){return this.videoElement.muted},muteVideo:function(){var v=this.videoElement;v&&!v.muted&&(v.muted=!0),this.dispatchEvent({type:"volumechange"})},unmuteVideo:function(){var v=this.videoElement;v&&this.isVideoMuted()&&(v.muted=!1),this.dispatchEvent({type:"volumechange"})},getVideoElement:function(){return this.videoElement},dispose:function(){var v=this.material.map;this.pauseVideo(),this.removeEventListener("leave",this.pauseVideo.bind(this)),this.removeEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.removeEventListener("video-toggle",this.toggleVideo.bind(this)),this.removeEventListener("video-time",this.setVideoCurrentTime.bind(this)),v&&v.dispose(),$t.prototype.dispose.call(this)}}),Object.assign(Jn.prototype,{constructor:Jn,setProgress:function(v,C){this.onProgress&&this.onProgress({loaded:v,total:C})},adaptTextureToZoom:function(){var v=this.widths[this._zoom],C=this.heights[this._zoom],R=this.maxW,A=this.maxH;this._wc=Math.ceil(v/R),this._hc=Math.ceil(C/A);for(var z=0;z<this._hc;z++)for(var Y=0;Y<this._wc;Y++){var ce=document.createElement("canvas");ce.width=Y<this._wc-1?R:v-R*Y,ce.height=z<this._hc-1?A:C-A*z,this._canvas.push(ce),this._ctx.push(ce.getContext("2d"))}},composeFromTile:function(v,C,R){var A=this.maxW,z=this.maxH;v*=512,C*=512;var Y=Math.floor(v/A),ce=Math.floor(C/z);this._ctx[ce*this._wc+Y].drawImage(R,0,0,R.width,R.height,v-Y*A,C-ce*z,512,512),this.progress()},progress:function(){this._count++,this.setProgress(this._count,this._total),this._count===this._total&&(this.canvas=this._canvas,this.panoId=this._panoId,this.zoom=this._zoom,this.onPanoramaLoad)&&this.onPanoramaLoad(this._canvas[0])},composePanorama:function(){this.setProgress(0,1);var v=this.levelsW[this._zoom],C=this.levelsH[this._zoom],R=this;this._count=0,this._total=v*C;for(var A=this._parameters.useWebGL,z=0;z<C;z++)for(var Y={},ce=0;ce<v;Y={$jscomp$loop$prop$url$1:Y.$jscomp$loop$prop$url$1},ce++)Y.$jscomp$loop$prop$url$1="https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom="+this._zoom+"&x="+ce+"&y="+z+"&panoid="+this._panoId+"&nbt&fover=2",function(de){return function(ye,Be){if(A)var Ne=jr.load(de.$jscomp$loop$prop$url$1,null,function(){R.composeFromTile(ye,Be,Ne)});else{var J=new Image;J.addEventListener("load",function(){R.composeFromTile(ye,Be,this)}),J.crossOrigin="",J.src=de.$jscomp$loop$prop$url$1}}}(Y)(ce,z)},load:function(v){this.loadPano(v)},loadPano:function(v){var C=this;this._panoClient.getPanoramaById(v,function(R,A){A===google.maps.StreetViewStatus.OK&&(C.result=R,C.copyright=R.copyright,C._panoId=R.location.pano,C.composePanorama())})},setZoom:function(v){this._zoom=v,this.adaptTextureToZoom()}}),bt.prototype=Object.assign(Object.create(Cn.prototype),{constructor:bt,load:function(v){this.loadRequested=!0,v=v||this.panoId||{},this.gsvLoader&&this.loadGSVLoader(v)},setupGoogleMapAPI:function(v){var C=document.createElement("script");C.src="https://maps.googleapis.com/maps/api/js?",C.src+=v?"key="+v:"",C.onreadystatechange=this.setGSVLoader.bind(this),C.onload=this.setGSVLoader.bind(this),document.querySelector("head").appendChild(C)},setGSVLoader:function(){this.gsvLoader=new Jn,this.loadRequested&&this.load()},getGSVLoader:function(){return this.gsvLoader},loadGSVLoader:function(v){this.loadRequested=!1,this.gsvLoader.onProgress=this.onProgress.bind(this),this.gsvLoader.onPanoramaLoad=this.onLoad.bind(this),this.gsvLoader.setZoom(this.getZoomLevel()),this.gsvLoader.load(v),this.gsvLoader.loaded=!0},onLoad:function(v){Cn.prototype.onLoad.call(this,new te.Texture(v))},reset:function(){this.gsvLoader=void 0,Cn.prototype.reset.call(this)}});var ai={uniforms:{tDiffuse:{value:new te.Texture},resolution:{value:1},transform:{value:new te.Matrix4},zoom:{value:1},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float resolution;\nuniform mat4 transform;\nuniform float zoom;\nuniform float opacity;\nvarying vec2 vUv;\nconst float PI = 3.141592653589793;\nvoid main(){\nvec2 position = -1.0 +  2.0 * vUv;\nposition *= vec2( zoom * resolution, zoom * 0.5 );\nfloat x2y2 = position.x * position.x + position.y * position.y;\nvec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );\nsphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );\nvec2 sampleUV = vec2(\n(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,\n(asin(sphere_pnt.z) / PI + 0.5)\n);\ngl_FragColor = texture2D( tDiffuse, sampleUV );\ngl_FragColor.a *= opacity;\n}"};xn.prototype=Object.assign(Object.create(Cn.prototype),{constructor:xn,add:function(v){if(1<arguments.length){for(var C=0;C<arguments.length;C++)this.add(arguments[C]);return this}v instanceof nn&&(v.material.depthTest=!1),Cn.prototype.add.call(this,v)},createGeometry:function(v,C){return new te.PlaneBufferGeometry(v,v*C)},createMaterial:function(v){var C=Object.assign({},ai),R=C.uniforms;return R.zoom.value=v,R.opacity.value=0,new te.ShaderMaterial({uniforms:R,vertexShader:C.vertexShader,fragmentShader:C.fragmentShader,side:te.BackSide,transparent:!0})},registerMouseEvents:function(){this.container.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("touchstart",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("touchmove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("touchend",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("mousewheel",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("contextmenu",this.onContextMenu.bind(this),{passive:!0})},unregisterMouseEvents:function(){this.container.removeEventListener("mousedown",this.onMouseDown.bind(this),!1),this.container.removeEventListener("mousemove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("mouseup",this.onMouseUp.bind(this),!1),this.container.removeEventListener("touchstart",this.onMouseDown.bind(this),!1),this.container.removeEventListener("touchmove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("touchend",this.onMouseUp.bind(this),!1),this.container.removeEventListener("mousewheel",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("contextmenu",this.onContextMenu.bind(this),!1)},onMouseDown:function(v){switch(v.touches&&v.touches.length||1){case 1:var C=0<=v.clientX?v.clientX:v.touches[0].clientX;v=0<=v.clientY?v.clientY:v.touches[0].clientY,this.dragging=!0,this.userMouse.set(C,v);break;case 2:C=v.touches[0].pageX-v.touches[1].pageX,v=v.touches[0].pageY-v.touches[1].pageY,this.userMouse.pinchDistance=Math.sqrt(C*C+v*v)}this.onUpdateCallback()},onMouseMove:function(v){switch(v.touches&&v.touches.length||1){case 1:var C=0<=v.clientX?v.clientX:v.touches[0].clientX;v=0<=v.clientY?v.clientY:v.touches[0].clientY;var R=.4*te.Math.degToRad(C-this.userMouse.x),A=.4*te.Math.degToRad(v-this.userMouse.y);this.dragging&&(this.quatA.setFromAxisAngle(this.vectorY,R),this.quatB.setFromAxisAngle(this.vectorX,A),this.quatCur.multiply(this.quatA).multiply(this.quatB),this.userMouse.set(C,v));break;case 2:C=v.touches[0].pageX-v.touches[1].pageX,v=v.touches[0].pageY-v.touches[1].pageY,this.addZoomDelta(this.userMouse.pinchDistance-Math.sqrt(C*C+v*v))}},onMouseUp:function(){this.dragging=!1},onMouseWheel:function(v){v.preventDefault(),v.stopPropagation();var C=0;void 0!==v.wheelDelta?C=v.wheelDelta:void 0!==v.detail&&(C=-v.detail),this.addZoomDelta(C),this.onUpdateCallback()},addZoomDelta:function(v){var C=this.material.uniforms,R=.1*this.size,A=10*this.size;C.zoom.value+=v,C.zoom.value<=R?C.zoom.value=R:C.zoom.value>=A&&(C.zoom.value=A)},onUpdateCallback:function(){this.frameId=window.requestAnimationFrame(this.onUpdateCallback.bind(this)),this.quatSlerp.slerp(this.quatCur,.1),this.material&&this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp),!this.dragging&&1-this.quatSlerp.clone().dot(this.quatCur)<this.EPS&&window.cancelAnimationFrame(this.frameId)},reset:function(){this.quatCur.set(0,0,0,1),this.quatSlerp.set(0,0,0,1),this.onUpdateCallback()},onLoad:function(v){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight,this.registerMouseEvents(),this.onUpdateCallback(),this.dispatchEvent({type:"panolens-viewer-handler",method:"disableControl"}),Cn.prototype.onLoad.call(this,v)},onLeave:function(){this.unregisterMouseEvents(),this.dispatchEvent({type:"panolens-viewer-handler",method:"enableControl",data:Zi.ORBIT}),window.cancelAnimationFrame(this.frameId),Cn.prototype.onLeave.call(this)},onWindowResize:function(){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight},onContextMenu:function(){this.dragging=!1},dispose:function(){this.unregisterMouseEvents(),Cn.prototype.dispose.call(this)}}),Tr.prototype=Object.assign(Object.create(xn.prototype),{constructor:Tr,onLoad:function(v){this.updateTexture(v),xn.prototype.onLoad.call(this,v)},updateTexture:function(v){v.minFilter=v.magFilter=te.LinearFilter,this.material.uniforms.tDiffuse.value=v},dispose:function(){var v=this.material.uniforms.tDiffuse;v&&v.value&&v.value.dispose(),xn.prototype.dispose.call(this)}}),Ii.prototype=Object.assign(Object.create($t.prototype),{constructor:Ii,onPanolensContainer:function(v){this.media.setContainer(v.container)},onPanolensScene:function(v){this.media.setScene(v.scene)},start:function(){return this.media.start()},stop:function(){this.media.stop()}}),bo.prototype=Object.assign(Object.create(te.EventDispatcher.prototype),{constructor:bo}),ra.prototype=Object.assign(Object.create(te.EventDispatcher.prototype),{constructor:ra});var tc=function(v){var C=new te.StereoCamera;C.aspect=.5;var R=new te.Vector2;this.setEyeSeparation=function(A){C.eyeSep=A},this.setSize=function(A,z){v.setSize(A,z)},this.render=function(A,z){A.updateMatrixWorld(),null===z.parent&&z.updateMatrixWorld(),C.update(z),v.getSize(R),v.autoClear&&v.clear(),v.setScissorTest(!0),v.setScissor(0,0,R.width/2,R.height),v.setViewport(0,0,R.width/2,R.height),v.render(A,C.cameraL),v.setScissor(R.width/2,0,R.width/2,R.height),v.setViewport(R.width/2,0,R.width/2,R.height),v.render(A,C.cameraR),v.setScissorTest(!1)}};_o.prototype=Object.assign(Object.create(te.EventDispatcher.prototype),{constructor:_o,add:function(v){if(1<arguments.length){for(var C=0;C<arguments.length;C++)this.add(arguments[C]);return this}this.scene.add(v),v.addEventListener&&v.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),v instanceof $t&&v.dispatchEvent&&v.dispatchEvent({type:"panolens-container",container:this.container}),v instanceof Ii&&v.dispatchEvent({type:"panolens-scene",scene:this.scene}),"panorama"===v.type&&(this.addPanoramaEventListener(v),this.panorama||this.setPanorama(v))},remove:function(v){v.removeEventListener&&v.removeEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),this.scene.remove(v)},addDefaultControlBar:function(v){if(this.widget)console.warn("Default control bar exists");else{var C=new ur(this.container);C.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),C.addControlBar(),v.forEach(function(R){C.addControlButton(R)}),this.widget=C}},setPanorama:function(v){var C=this.panorama;if("panorama"===v.type&&C!==v){this.hideInfospot();var R=function(){C&&C.onLeave(),v.removeEventListener("enter-fade-start",R)};v.addEventListener("enter-fade-start",R),(this.panorama=v).onEnter()}},eventHandler:function(v){v.method&&this[v.method]&&this[v.method](v.data)},dispatchEventToChildren:function(v){this.scene.traverse(function(C){C.dispatchEvent&&C.dispatchEvent(v)})},activateWidgetItem:function(v,C){var R=this.widget.mainMenu,A=R.children[0];if(R=R.children[1],void 0!==v){switch(v){case 0:default:v=A.subMenu.children[1];break;case 1:v=A.subMenu.children[2]}A.subMenu.setActiveItem(v),A.setSelectionTitle(v.textContent)}if(void 0!==C){switch(C){case rn.CARDBOARD:v=R.subMenu.children[2];break;case rn.STEREO:v=R.subMenu.children[3];break;default:v=R.subMenu.children[1]}R.subMenu.setActiveItem(v),R.setSelectionTitle(v.textContent)}},enableEffect:function(v){if(this.mode!==v)if(v===rn.NORMAL)this.disableEffect();else{this.mode=v;var C=this.camera.fov;switch(v){case rn.CARDBOARD:this.effect=this.CardboardEffect,this.enableReticleControl();break;case rn.STEREO:this.effect=this.StereoEffect,this.enableReticleControl();break;default:this.effect=null,this.disableReticleControl()}this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.camera.fov=C+.01,this.effect.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.camera.fov=C,this.dispatchEvent({type:"mode-change",mode:this.mode})}},disableEffect:function(){this.mode!==rn.NORMAL&&(this.mode=rn.NORMAL,this.disableReticleControl(),this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.dispatchEvent({type:"mode-change",mode:this.mode}))},enableReticleControl:function(){this.reticle.visible||(this.tempEnableReticle=!0,this.unregisterMouseAndTouchEvents(),this.reticle.show(),this.registerReticleEvent(),this.updateReticleEvent())},disableReticleControl:function(){this.tempEnableReticle=!1,this.options.enableReticle?this.updateReticleEvent():(this.reticle.hide(),this.unregisterReticleEvent(),this.registerMouseAndTouchEvents())},enableAutoRate:function(){this.options.autoRotate=!0,this.OrbitControls.autoRotate=!0},disableAutoRate:function(){clearTimeout(this.autoRotateRequestId),this.options.autoRotate=!1,this.OrbitControls.autoRotate=!1},toggleVideoPlay:function(v){this.panorama instanceof Dr&&this.panorama.dispatchEvent({type:"video-toggle",pause:v})},setVideoCurrentTime:function(v){this.panorama instanceof Dr&&this.panorama.dispatchEvent({type:"video-time",percentage:v})},onVideoUpdate:function(v){var C=this.widget;C&&C.dispatchEvent({type:"video-update",percentage:v})},addUpdateCallback:function(v){v&&this.updateCallbacks.push(v)},removeUpdateCallback:function(v){var C=this.updateCallbacks.indexOf(v);v&&0<=C&&this.updateCallbacks.splice(C,1)},showVideoWidget:function(){var v=this.widget;v&&v.dispatchEvent({type:"video-control-show"})},hideVideoWidget:function(){var v=this.widget;v&&v.dispatchEvent({type:"video-control-hide"})},updateVideoPlayButton:function(v){var C=this.widget;C&&C.videoElement&&C.videoElement.controlButton&&C.videoElement.controlButton.update(v)},addPanoramaEventListener:function(v){v.addEventListener("enter-fade-start",this.setCameraControl.bind(this)),v instanceof Dr&&(v.addEventListener("enter-fade-start",this.showVideoWidget.bind(this)),v.addEventListener("leave",function(){this.panorama instanceof Dr||this.hideVideoWidget.call(this)}.bind(this)))},setCameraControl:function(){this.OrbitControls.target.copy(this.panorama.position)},getControl:function(){return this.control},getScene:function(){return this.scene},getCamera:function(){return this.camera},getRenderer:function(){return this.renderer},getContainer:function(){return this.container},getControlId:function(){return this.control.id},getNextControlId:function(){return this.controls[this.getNextControlIndex()].id},getNextControlIndex:function(){var v=this.controls,C=v.indexOf(this.control)+1;return C>=v.length?0:C},setCameraFov:function(v){this.camera.fov=v,this.camera.updateProjectionMatrix()},enableControl:function(v){switch(v=0<=v&&v<this.controls.length?v:0,this.control.enabled=!1,this.control=this.controls[v],this.control.enabled=!0,v){case Zi.ORBIT:this.camera.position.copy(this.panorama.position),this.camera.position.z+=1;break;case Zi.DEVICEORIENTATION:this.camera.position.copy(this.panorama.position)}this.control.update(),this.activateWidgetItem(v,void 0)},disableControl:function(){this.control.enabled=!1},toggleNextControl:function(){this.enableControl(this.getNextControlIndex())},getScreenVector:function(v){v=v.clone();var C=this.container.clientWidth/2,R=this.container.clientHeight/2;return v.project(this.camera),v.x=v.x*C+C,v.y=-v.y*R+R,v.z=0,v},checkSpriteInViewport:function(v){return this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld),this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix),v.visible&&this.cameraFrustum.intersectsSprite(v)},reverseDraggingDirection:function(){this.OrbitControls.rotateSpeed*=-1,this.OrbitControls.momentumScalingFactor*=-1},addReticle:function(){this.reticle=new Di(16777215,!0,this.options.dwellTime),this.reticle.hide(),this.camera.add(this.reticle),this.sceneReticle.add(this.camera)},tweenControlCenter:function(v,C,R){var A;if(this.control===this.OrbitControls){v instanceof Array&&(C=v[1],R=v[2],v=v[0]),C=void 0!==C?C:1e3,R=R||Jt.Easing.Exponential.Out;var z=this,Y=this.camera.getWorldDirection(new te.Vector3),ce=Y.clone(),de=this.panorama.getWorldPosition(new te.Vector3).sub(this.camera.getWorldPosition(new te.Vector3));(v=v.clone()).x*=-1,v.add(de).normalize();var ye=v.clone();Y.y=0,v.y=0,de=(de=(de=Math.atan2(v.z,v.x)-Math.atan2(Y.z,Y.x))>Math.PI?de-2*Math.PI:de)<-Math.PI?de+2*Math.PI:de,Y=Math.abs(ce.angleTo(Y)+(0>=ce.y*ye.y?ye.angleTo(v):-ye.angleTo(v))),Y*=ye.y<ce.y?1:-1,ce={left:0,up:0};var Be=A=0;this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.tweenLeftAnimation=new Jt.Tween(ce).to({left:de},C).easing(R).onUpdate(function(Ne){z.control.rotateLeft(Ne.left-A),A=Ne.left}).start(),this.tweenUpAnimation=new Jt.Tween(ce).to({up:Y},C).easing(R).onUpdate(function(Ne){z.control.rotateUp(Ne.up-Be),Be=Ne.up}).start()}},tweenControlCenterByObject:function(v,C,R){var A=!1;if(v.traverseAncestors(function(Y){Y.scalePlaceHolder&&(A=!0)}),A){var z=new te.Vector3(-1,1,1);this.tweenControlCenter(v.getWorldPosition(new te.Vector3).multiply(z),C,R)}else this.tweenControlCenter(v.getWorldPosition(new te.Vector3),C,R)},onWindowResize:function(v,C){var R=this.container.classList.contains("panolens-container")||this.container.isFullscreen;if(void 0!==v&&void 0!==C){var A=v,z=C;this.container._width=v,this.container._height=C}else v=(C=/(android)/i.test(window.navigator.userAgent))?Math.min(document.documentElement.clientWidth,window.innerWidth||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),C=C?Math.min(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientHeight,window.innerHeight||0),z=R?C:this.container.clientHeight,this.container._width=A=R?v:this.container.clientWidth,this.container._height=z;this.camera.aspect=A/z,this.camera.updateProjectionMatrix(),this.renderer.setSize(A,z),(this.options.enableReticle||this.tempEnableReticle)&&this.updateReticleEvent(),this.dispatchEvent({type:"window-resize",width:A,height:z}),this.scene.traverse(function(Y){Y.dispatchEvent&&Y.dispatchEvent({type:"window-resize",width:A,height:z})})},addOutputElement:function(){var v=document.createElement("div");v.style.position="absolute",v.style.right="10px",v.style.top="10px",v.style.color="#fff",this.container.appendChild(v),this.outputDivElement=v},outputPosition:function(){var v=this.raycaster.intersectObject(this.panorama,!0);if(0<v.length){v=v[0].point.clone();var C=new te.Vector3(-1,1,1),R=this.panorama.getWorldPosition(new te.Vector3);if(v.sub(R).multiply(C),R=(C={x:v.x.toFixed(2),y:v.y.toFixed(2),z:v.z.toFixed(2)}).x+", "+C.y+", "+C.z,0!==v.length())switch(this.options.output){case"event":this.dispatchEvent({type:"position-output",position:C});break;case"console":console.info(R);break;case"overlay":this.outputDivElement.textContent=R}}},onMouseDown:function(v){v.preventDefault(),this.userMouse.x=0<=v.clientX?v.clientX:v.touches[0].clientX,this.userMouse.y=0<=v.clientY?v.clientY:v.touches[0].clientY,this.userMouse.type="mousedown",this.onTap(v)},onMouseMove:function(v){v.preventDefault(),this.userMouse.type="mousemove",this.onTap(v)},onMouseUp:function(v){this.userMouse.type="mouseup";var C=this.userMouse.x>=v.clientX-this.options.clickTolerance&&this.userMouse.x<=v.clientX+this.options.clickTolerance&&this.userMouse.y>=v.clientY-this.options.clickTolerance&&this.userMouse.y<=v.clientY+this.options.clickTolerance||v.changedTouches&&this.userMouse.x>=v.changedTouches[0].clientX-this.options.clickTolerance&&this.userMouse.x<=v.changedTouches[0].clientX+this.options.clickTolerance&&this.userMouse.y>=v.changedTouches[0].clientY-this.options.clickTolerance&&this.userMouse.y<=v.changedTouches[0].clientY+this.options.clickTolerance?"click":void 0;if((!v||!v.target||v.target.classList.contains("panolens-canvas"))&&(v.preventDefault(),v=this.onTap(v.changedTouches&&1===v.changedTouches.length?{clientX:v.changedTouches[0].clientX,clientY:v.changedTouches[0].clientY}:v,C),this.userMouse.type="none",!v&&"click"===C)){v=(C=this.options).autoHideControlBar;var R=this.panorama,A=this.toggleControlBar;C.autoHideInfospot&&R&&R.toggleInfospotVisibility(),v&&A()}},onTap:function(v,C){var R=this.container.getBoundingClientRect(),A=R.top,z=this.container,Y=z.clientHeight;if(this.raycasterPoint.x=(v.clientX-R.left)/z.clientWidth*2-1,this.raycasterPoint.y=-(v.clientY-A)/Y*2+1,this.raycaster.setFromCamera(this.raycasterPoint,this.camera),this.panorama){if(("mousedown"!==v.type&&this.touchSupported||this.OUTPUT_INFOSPOT)&&this.outputPosition(),R=this.raycaster.intersectObjects(this.panorama.children,!0),A=this.getConvertedIntersect(R),z=0<R.length?R[0].object:void 0,"mouseup"===this.userMouse.type&&(A&&this.pressEntityObject===A&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:v}),this.pressEntityObject=void 0),"mouseup"===this.userMouse.type&&(z&&this.pressObject===z&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:v}),this.pressObject=void 0),"click"===C?(this.panorama.dispatchEvent({type:"click",intersects:R,mouseEvent:v}),A&&A.dispatchEvent&&A.dispatchEvent({type:"click-entity",mouseEvent:v}),z&&z.dispatchEvent&&z.dispatchEvent({type:"click",mouseEvent:v})):(this.panorama.dispatchEvent({type:"hover",intersects:R,mouseEvent:v}),(this.hoverObject&&0<R.length&&this.hoverObject!==A||this.hoverObject&&0===R.length)&&(this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverleave",mouseEvent:v}),this.reticle.end()),this.hoverObject=void 0),A&&0<R.length&&(this.hoverObject!==A&&(this.hoverObject=A,this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverenter",mouseEvent:v}),(this.options.autoReticleSelect&&this.options.enableReticle||this.tempEnableReticle)&&this.reticle.start(this.onTap.bind(this,v,"click")))),"mousedown"===this.userMouse.type&&this.pressEntityObject!=A&&(this.pressEntityObject=A,this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstart-entity",mouseEvent:v})),"mousedown"===this.userMouse.type&&this.pressObject!=z&&(this.pressObject=z,this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstart",mouseEvent:v})),"mousemove"===this.userMouse.type||this.options.enableReticle)&&(z&&z.dispatchEvent&&z.dispatchEvent({type:"hover",mouseEvent:v}),this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressmove-entity",mouseEvent:v}),this.pressObject&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressmove",mouseEvent:v})),!A&&this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&(this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:v}),this.pressEntityObject=void 0),!z&&this.pressObject&&this.pressObject.dispatchEvent&&(this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:v}),this.pressObject=void 0)),z&&z instanceof nn){if(this.infospot=z,"click"===C)return!0}else this.infospot&&this.hideInfospot();this.options.autoRotate&&"mousemove"!==this.userMouse.type&&(clearTimeout(this.autoRotateRequestId),this.control===this.OrbitControls&&(this.OrbitControls.autoRotate=!1,this.autoRotateRequestId=window.setTimeout(this.enableAutoRate.bind(this),this.options.autoRotateActivationDuration)))}},getConvertedIntersect:function(v){for(var C,R=0;R<v.length;R++)if(0<=v[R].distance&&v[R].object&&!v[R].object.passThrough&&(!v[R].object.entity||!v[R].object.entity.passThrough)){C=v[R].object.entity&&!v[R].object.entity.passThrough?v[R].object.entity:v[R].object;break}return C},hideInfospot:function(){this.infospot&&(this.infospot.onHoverEnd(),this.infospot=void 0)},toggleControlBar:function(){var v=this.widget;v&&v.dispatchEvent({type:"control-bar-toggle"})},onKeyDown:function(v){this.options.output&&"none"!==this.options.output&&"Control"===v.key&&(this.OUTPUT_INFOSPOT=!0)},onKeyUp:function(){this.OUTPUT_INFOSPOT=!1},update:function(){Jt.update(),this.updateCallbacks.forEach(function(v){v()}),this.control.update(),this.scene.traverse(function(v){if(v instanceof nn&&v.element&&(this.hoverObject===v||"none"!==v.element.style.display||v.element.left&&"none"!==v.element.left.style.display||v.element.right&&"none"!==v.element.right.style.display))if(this.checkSpriteInViewport(v)){var C=this.getScreenVector(v.getWorldPosition(new te.Vector3));v.translateElement(C.x,C.y)}else v.onDismiss()}.bind(this))},render:function(){this.mode===rn.CARDBOARD||this.mode===rn.STEREO?(this.renderer.clear(),this.effect.render(this.scene,this.camera),this.effect.render(this.sceneReticle,this.camera)):(this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.sceneReticle,this.camera))},animate:function(){this.requestAnimationId=window.requestAnimationFrame(this.animate.bind(this)),this.onChange()},onChange:function(){this.update(),this.render()},registerMouseAndTouchEvents:function(){var v={passive:!1};this.container.addEventListener("mousedown",this.HANDLER_MOUSE_DOWN,v),this.container.addEventListener("mousemove",this.HANDLER_MOUSE_MOVE,v),this.container.addEventListener("mouseup",this.HANDLER_MOUSE_UP,v),this.container.addEventListener("touchstart",this.HANDLER_MOUSE_DOWN,v),this.container.addEventListener("touchend",this.HANDLER_MOUSE_UP,v)},unregisterMouseAndTouchEvents:function(){this.container.removeEventListener("mousedown",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("mousemove",this.HANDLER_MOUSE_MOVE,!1),this.container.removeEventListener("mouseup",this.HANDLER_MOUSE_UP,!1),this.container.removeEventListener("touchstart",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("touchend",this.HANDLER_MOUSE_UP,!1)},registerReticleEvent:function(){this.addUpdateCallback(this.HANDLER_TAP)},unregisterReticleEvent:function(){this.removeUpdateCallback(this.HANDLER_TAP)},updateReticleEvent:function(){var v=this.container.clientWidth/2+this.container.offsetLeft,C=this.container.clientHeight/2;this.removeUpdateCallback(this.HANDLER_TAP),this.HANDLER_TAP=this.onTap.bind(this,{clientX:v,clientY:C}),this.addUpdateCallback(this.HANDLER_TAP)},registerEventListeners:function(){window.addEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.addEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.addEventListener("keyup",this.HANDLER_KEY_UP,!0)},unregisterEventListeners:function(){window.removeEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.removeEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.removeEventListener("keyup",this.HANDLER_KEY_UP,!0)},dispose:function(){this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.unregisterEventListeners(),function v(C){for(var R=C.children.length-1;0<=R;R--)v(C.children[R]),C.remove(C.children[R]);C instanceof $t||C instanceof nn?C.dispose():C.dispatchEvent&&C.dispatchEvent("dispose")}(this.scene),this.widget&&(this.widget.dispose(),this.widget=null),te.Cache&&te.Cache.enabled&&te.Cache.clear()},destroy:function(){this.dispose(),this.render(),window.cancelAnimationFrame(this.requestAnimationId)},onPanoramaDispose:function(v){v instanceof Dr&&this.hideVideoWidget(),v===this.panorama&&(this.panorama=null)},loadAsyncRequest:function(v,C){C=void 0===C?function(){}:C;var R=new window.XMLHttpRequest;R.onloadend=function(A){C(A)},R.open("GET",v,!0),R.send(null)},addViewIndicator:function(){var v=this;this.loadAsyncRequest(mn.ViewIndicator,function(C){if(0!==C.loaded){(C=C.target.responseXML.documentElement).style.width=v.viewIndicatorSize+"px",C.style.height=v.viewIndicatorSize+"px",C.style.position="absolute",C.style.top="10px",C.style.left="10px",C.style.opacity="0.5",C.style.cursor="pointer",C.id="panolens-view-indicator-container",v.container.appendChild(C);var R=C.querySelector("#indicator");v.addUpdateCallback(function(){v.radius=.225*v.viewIndicatorSize,v.currentPanoAngle=v.camera.rotation.y-te.Math.degToRad(90),v.fovAngle=te.Math.degToRad(v.camera.fov),v.leftAngle=-v.currentPanoAngle-v.fovAngle/2,v.rightAngle=v.fovAngle/2-v.currentPanoAngle,v.leftX=v.radius*Math.cos(v.leftAngle),v.leftY=v.radius*Math.sin(v.leftAngle),v.rightX=v.radius*Math.cos(v.rightAngle),v.rightY=v.radius*Math.sin(v.rightAngle),v.indicatorD="M "+v.leftX+" "+v.leftY+" A "+v.radius+" "+v.radius+" 0 0 1 "+v.rightX+" "+v.rightY,v.leftX&&v.leftY&&v.rightX&&v.rightY&&v.radius&&R.setAttribute("d",v.indicatorD)}),C.addEventListener("mouseenter",function(){this.style.opacity="1"}),C.addEventListener("mouseleave",function(){this.style.opacity="0.5"})}})},appendControlItem:function(v){var C=this.widget.createCustomItem(v);return"video"===v.group?this.widget.videoElement.appendChild(C):this.widget.barElement.appendChild(C),C},clearAllCache:function(){te.Cache.clear()}}),"105"!=te.REVISION&&console.warn("three.js version is not matched. Please consider use the target revision 105"),window.TWEEN=Jt,Te.BasicPanorama=Wi,Te.CONTROLS=Zi,Te.CameraPanorama=Ii,Te.CubePanorama=Ti,Te.CubeTextureLoader=uu,Te.DataImage=mn,Te.EmptyPanorama=Sr,Te.GoogleStreetviewPanorama=bt,Te.ImageLittlePlanet=Tr,Te.ImageLoader=ia,Te.ImagePanorama=Cn,Te.Infospot=nn,Te.LittlePlanet=xn,Te.MODES=rn,Te.Media=ji,Te.Panorama=$t,Te.REVISION="12",Te.Reticle=Di,Te.THREE_REVISION="105",Te.THREE_VERSION=qi,Te.TextureLoader=jr,Te.VERSION="0.12.1",Te.VideoPanorama=Dr,Te.Viewer=_o,Te.Widget=ur,Object.defineProperty(Te,"__esModule",{value:!0})}(pn,wr(750))},750:(cu,pn,wr)=>{"use strict";function Te(){}wr.r(pn),wr.d(pn,{ACESFilmicToneMapping:()=>sa,AddEquation:()=>jr,AddOperation:()=>Ri,AdditiveBlending:()=>Zi,AlphaFormat:()=>Xd,AlwaysDepth:()=>be,AmbientLight:()=>Zh,AmbientLightProbe:()=>Qu,AnimationClip:()=>ki,AnimationLoader:()=>hm,AnimationMixer:()=>Ju,AnimationObjectGroup:()=>ym,AnimationUtils:()=>mr,ArcCurve:()=>ds,ArrayCamera:()=>Cu,ArrowHelper:()=>ms,Audio:()=>Hc,AudioAnalyser:()=>Kh,AudioContext:()=>Qh,AudioListener:()=>Jl,AudioLoader:()=>Yl,AxesHelper:()=>od,AxisHelper:()=>oy,BackSide:()=>bt,BasicDepthPacking:()=>gt,BasicShadowMap:()=>Ti,BinaryTextureLoader:()=>cy,Bone:()=>Ph,BooleanKeyframeTrack:()=>Hr,BoundingBoxHelper:()=>sy,Box2:()=>qs,Box3:()=>Ao,Box3Helper:()=>Xc,BoxBufferGeometry:()=>hc,BoxGeometry:()=>dc,BoxHelper:()=>go,BufferAttribute:()=>rt,BufferGeometry:()=>Pe,BufferGeometryLoader:()=>Wl,ByteType:()=>ve,Cache:()=>ls,Camera:()=>Et,CameraHelper:()=>el,CanvasRenderer:()=>ld,CanvasTexture:()=>wc,CatmullRomCurve3:()=>ar,CineonToneMapping:()=>$o,CircleBufferGeometry:()=>lo,CircleGeometry:()=>Lo,ClampToEdgeWrapping:()=>er,Clock:()=>Ql,ClosedSplineCurve3:()=>il,Color:()=>je,ColorKeyframeTrack:()=>cs,CompressedTexture:()=>Ea,CompressedTextureLoader:()=>fm,ConeBufferGeometry:()=>Ro,ConeGeometry:()=>Hs,CubeCamera:()=>fs,CubeGeometry:()=>dc,CubeReflectionMapping:()=>qo,CubeRefractionMapping:()=>xs,CubeTexture:()=>Ps,CubeTextureLoader:()=>Vh,CubeUVReflectionMapping:()=>li,CubeUVRefractionMapping:()=>Zo,CubicBezierCurve:()=>po,CubicBezierCurve3:()=>Oo,CubicInterpolant:()=>Bn,CullFaceBack:()=>nn,CullFaceFront:()=>ur,CullFaceFrontBack:()=>$t,CullFaceNone:()=>Di,Curve:()=>Ye,CurvePath:()=>Fo,CustomBlending:()=>ia,CylinderBufferGeometry:()=>Io,CylinderGeometry:()=>Ia,Cylindrical:()=>rf,DataTexture:()=>fa,DataTexture2DArray:()=>kn,DataTexture3D:()=>es,DataTextureLoader:()=>Uh,DefaultLoadingManager:()=>xi,DepthFormat:()=>Ms,DepthStencilFormat:()=>rc,DepthTexture:()=>bc,DirectionalLight:()=>qh,DirectionalLightHelper:()=>Yc,DirectionalLightShadow:()=>$h,DiscreteInterpolant:()=>zs,DodecahedronBufferGeometry:()=>Sa,DodecahedronGeometry:()=>Ec,DoubleSide:()=>xn,DstAlphaFactor:()=>ce,DstColorFactor:()=>ye,DynamicBufferAttribute:()=>Sm,EdgesGeometry:()=>Vs,EdgesHelper:()=>_b,EllipseCurve:()=>Ei,EqualDepth:()=>Pn,EquirectangularReflectionMapping:()=>ui,EquirectangularRefractionMapping:()=>Wr,Euler:()=>to,EventDispatcher:()=>Te,ExtrudeBufferGeometry:()=>co,ExtrudeGeometry:()=>Bs,Face3:()=>Qr,Face4:()=>sd,FaceColors:()=>ra,FaceNormalsHelper:()=>Ua,FileLoader:()=>fo,FlatShading:()=>Tr,Float32Attribute:()=>Tm,Float32BufferAttribute:()=>Ce,Float64Attribute:()=>Im,Float64BufferAttribute:()=>no,FloatType:()=>ua,Fog:()=>Lh,FogExp2:()=>Fl,Font:()=>Xh,FontLoader:()=>ql,FrontFaceDirectionCCW:()=>Sr,FrontFaceDirectionCW:()=>Cn,FrontSide:()=>Jn,Frustum:()=>sh,GammaEncoding:()=>du,Geometry:()=>st,GeometryUtils:()=>Qc,GreaterDepth:()=>Un,GreaterEqualDepth:()=>En,GridHelper:()=>Ku,Group:()=>le,HalfFloatType:()=>lu,HemisphereLight:()=>kc,HemisphereLightHelper:()=>qc,HemisphereLightProbe:()=>Nr,IcosahedronBufferGeometry:()=>xc,IcosahedronGeometry:()=>Pu,ImageBitmapLoader:()=>Bo,ImageLoader:()=>ju,ImageUtils:()=>qr,ImmediateRenderObject:()=>Gc,InstancedBufferAttribute:()=>qu,InstancedBufferGeometry:()=>$u,InstancedInterleavedBuffer:()=>Fa,Int16Attribute:()=>Dm,Int16BufferAttribute:()=>jn,Int32Attribute:()=>ry,Int32BufferAttribute:()=>fr,Int8Attribute:()=>cf,Int8BufferAttribute:()=>Rs,IntType:()=>ca,InterleavedBuffer:()=>qn,InterleavedBufferAttribute:()=>yi,Interpolant:()=>bi,InterpolateDiscrete:()=>la,InterpolateLinear:()=>$r,InterpolateSmooth:()=>yl,JSONLoader:()=>lf,KeyframeTrack:()=>Mr,LOD:()=>Tu,LatheBufferGeometry:()=>Dc,LatheGeometry:()=>os,Layers:()=>ga,LensFlare:()=>Lm,LessDepth:()=>on,LessEqualDepth:()=>Kn,Light:()=>_n,LightProbe:()=>mo,LightProbeHelper:()=>Zc,LightShadow:()=>Bc,Line:()=>sr,Line3:()=>zc,LineBasicMaterial:()=>tn,LineCurve:()=>ti,LineCurve3:()=>ni,LineDashedMaterial:()=>Pc,LineLoop:()=>yc,LinePieces:()=>xm,LineSegments:()=>ln,LineStrip:()=>ey,LinearEncoding:()=>ha,LinearFilter:()=>lr,LinearInterpolant:()=>zu,LinearMipMapLinearFilter:()=>Yo,LinearMipMapNearestFilter:()=>Eo,LinearToneMapping:()=>ci,Loader:()=>Xu,LoaderUtils:()=>Vc,LoadingManager:()=>Gs,LogLuvEncoding:()=>Uw,LoopOnce:()=>di,LoopPingPong:()=>rh,LoopRepeat:()=>ft,LuminanceAlphaFormat:()=>op,LuminanceFormat:()=>ip,MOUSE:()=>ji,Material:()=>_t,MaterialLoader:()=>Na,Math:()=>yt,Matrix3:()=>hr,Matrix4:()=>it,MaxEquation:()=>tc,Mesh:()=>Pr,MeshBasicMaterial:()=>Ni,MeshDepthMaterial:()=>vi,MeshDistanceMaterial:()=>Os,MeshFaceMaterial:()=>Em,MeshLambertMaterial:()=>Rc,MeshMatcapMaterial:()=>Lc,MeshNormalMaterial:()=>Ic,MeshPhongMaterial:()=>Po,MeshPhysicalMaterial:()=>Ra,MeshStandardMaterial:()=>as,MeshToonMaterial:()=>Tc,MinEquation:()=>ai,MirroredRepeatWrapping:()=>Li,MixOperation:()=>xo,MultiMaterial:()=>Mm,MultiplyBlending:()=>mn,MultiplyOperation:()=>Rn,NearestFilter:()=>St,NearestMipMapLinearFilter:()=>aa,NearestMipMapNearestFilter:()=>gn,NeverDepth:()=>J,NoBlending:()=>_o,NoColors:()=>bo,NoToneMapping:()=>Ir,NormalBlending:()=>qi,NotEqualDepth:()=>Yi,NumberKeyframeTrack:()=>La,Object3D:()=>Le,ObjectLoader:()=>$l,ObjectSpaceNormalMap:()=>Zg,OctahedronBufferGeometry:()=>Ca,OctahedronGeometry:()=>Lu,OneFactor:()=>C,OneMinusDstAlphaFactor:()=>de,OneMinusDstColorFactor:()=>Be,OneMinusSrcAlphaFactor:()=>Y,OneMinusSrcColorFactor:()=>A,OrthographicCamera:()=>Gl,PCFShadowMap:()=>Wi,PCFSoftShadowMap:()=>Dr,ParametricBufferGeometry:()=>_c,ParametricGeometry:()=>Aa,Particle:()=>Am,ParticleBasicMaterial:()=>Cm,ParticleSystem:()=>ad,ParticleSystemMaterial:()=>af,Path:()=>ko,PerspectiveCamera:()=>$n,Plane:()=>Qe,PlaneBufferGeometry:()=>va,PlaneGeometry:()=>xu,PlaneHelper:()=>vo,PointCloud:()=>sf,PointCloudMaterial:()=>nl,PointLight:()=>Wh,PointLightHelper:()=>Wc,Points:()=>xa,PointsMaterial:()=>oo,PolarGridHelper:()=>Ba,PolyhedronBufferGeometry:()=>dn,PolyhedronGeometry:()=>Ru,PositionalAudio:()=>Kl,PositionalAudioHelper:()=>Zs,PropertyBinding:()=>Fr,PropertyMixer:()=>ed,QuadraticBezierCurve:()=>Ui,QuadraticBezierCurve3:()=>No,Quaternion:()=>en,QuaternionKeyframeTrack:()=>us,QuaternionLinearInterpolant:()=>Pa,REVISION:()=>te,RGBADepthPacking:()=>Kt,RGBAFormat:()=>Mo,RGBA_ASTC_10x10_Format:()=>mp,RGBA_ASTC_10x5_Format:()=>fp,RGBA_ASTC_10x6_Format:()=>nh,RGBA_ASTC_10x8_Format:()=>pp,RGBA_ASTC_12x10_Format:()=>dr,RGBA_ASTC_12x12_Format:()=>gp,RGBA_ASTC_4x4_Format:()=>cp,RGBA_ASTC_5x4_Format:()=>ic,RGBA_ASTC_5x5_Format:()=>up,RGBA_ASTC_6x5_Format:()=>eh,RGBA_ASTC_6x6_Format:()=>th,RGBA_ASTC_8x5_Format:()=>lp,RGBA_ASTC_8x6_Format:()=>dp,RGBA_ASTC_8x8_Format:()=>hp,RGBA_PVRTC_2BPPV1_Format:()=>Kd,RGBA_PVRTC_4BPPV1_Format:()=>Jd,RGBA_S3TC_DXT1_Format:()=>Qd,RGBA_S3TC_DXT3_Format:()=>ir,RGBA_S3TC_DXT5_Format:()=>As,RGBDEncoding:()=>hu,RGBEEncoding:()=>bl,RGBEFormat:()=>qg,RGBFormat:()=>rr,RGBM16Encoding:()=>Me,RGBM7Encoding:()=>ih,RGB_ETC1_Format:()=>vl,RGB_PVRTC_2BPPV1_Format:()=>ap,RGB_PVRTC_4BPPV1_Format:()=>Pi,RGB_S3TC_DXT1_Format:()=>Qi,RawShaderMaterial:()=>ho,Ray:()=>fc,Raycaster:()=>wm,RectAreaLight:()=>jl,RectAreaLightHelper:()=>$c,RedFormat:()=>sp,ReinhardToneMapping:()=>On,RepeatWrapping:()=>Br,ReverseSubtractEquation:()=>Jt,RingBufferGeometry:()=>Da,RingGeometry:()=>Sc,Scene:()=>Du,SceneUtils:()=>Rm,ShaderChunk:()=>It,ShaderLib:()=>Xr,ShaderMaterial:()=>fi,ShadowMaterial:()=>ss,Shape:()=>js,ShapeBufferGeometry:()=>Ta,ShapeGeometry:()=>Zn,ShapePath:()=>Yh,ShapeUtils:()=>Fi,ShortType:()=>qt,Skeleton:()=>kl,SkeletonHelper:()=>jc,SkinnedMesh:()=>vc,SmoothShading:()=>Ii,Sphere:()=>Hn,SphereBufferGeometry:()=>Us,SphereGeometry:()=>uo,Spherical:()=>nf,SphericalHarmonics3:()=>Xl,SphericalReflectionMapping:()=>Vn,Spline:()=>Ys,SplineCurve:()=>Vi,SplineCurve3:()=>ud,SpotLight:()=>Uc,SpotLightHelper:()=>ps,SpotLightShadow:()=>jh,Sprite:()=>wi,SpriteMaterial:()=>ts,SrcAlphaFactor:()=>z,SrcAlphaSaturateFactor:()=>Ne,SrcColorFactor:()=>R,StereoCamera:()=>Jh,StringKeyframeTrack:()=>Vl,SubtractEquation:()=>uu,SubtractiveBlending:()=>rn,TangentSpaceNormalMap:()=>fu,TetrahedronBufferGeometry:()=>hn,TetrahedronGeometry:()=>so,TextBufferGeometry:()=>is,TextGeometry:()=>Hu,Texture:()=>vn,TextureLoader:()=>Nc,TorusBufferGeometry:()=>rs,TorusGeometry:()=>Fs,TorusKnotBufferGeometry:()=>ns,TorusKnotGeometry:()=>Ou,Triangle:()=>Lr,TriangleFanDrawMode:()=>vp,TriangleStripDrawMode:()=>wl,TrianglesDrawMode:()=>Nn,TubeBufferGeometry:()=>ei,TubeGeometry:()=>Ns,UVMapping:()=>Xi,Uint16Attribute:()=>ny,Uint16BufferAttribute:()=>lc,Uint32Attribute:()=>iy,Uint32BufferAttribute:()=>Wn,Uint8Attribute:()=>rl,Uint8BufferAttribute:()=>So,Uint8ClampedAttribute:()=>ty,Uint8ClampedBufferAttribute:()=>Ko,Uncharted2ToneMapping:()=>oa,Uniform:()=>nd,UniformsLib:()=>Re,UniformsUtils:()=>Gn,UnsignedByteType:()=>Es,UnsignedInt248Type:()=>nc,UnsignedIntType:()=>gl,UnsignedShort4444Type:()=>rp,UnsignedShort5551Type:()=>Zd,UnsignedShort565Type:()=>Yd,UnsignedShortType:()=>br,Vector2:()=>pe,Vector3:()=>k,Vector4:()=>un,VectorKeyframeTrack:()=>Gu,Vertex:()=>cd,VertexColors:()=>$i,VertexNormalsHelper:()=>ka,VideoTexture:()=>Iu,WebGLMultisampleRenderTarget:()=>oh,WebGLRenderTarget:()=>Xo,WebGLRenderTargetCube:()=>oc,WebGLRenderer:()=>Su,WebGLUtils:()=>sm,WireframeGeometry:()=>Ma,WireframeHelper:()=>ay,WrapAroundEnding:()=>Cs,XHRLoader:()=>uf,ZeroCurvatureEnding:()=>da,ZeroFactor:()=>v,ZeroSlopeEnding:()=>Ut,sRGBEncoding:()=>dt}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),s=1;s<arguments.length;s++){var c=arguments[s];if(null!=c)for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(o[l]=c[l])}return o}),Object.assign(Te.prototype,{addEventListener:function(t,o){void 0===this._listeners&&(this._listeners={});var s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(o)&&s[t].push(o)},hasEventListener:function(t,o){if(void 0===this._listeners)return!1;var s=this._listeners;return void 0!==s[t]&&-1!==s[t].indexOf(o)},removeEventListener:function(t,o){if(void 0!==this._listeners){var c=this._listeners[t];if(void 0!==c){var l=c.indexOf(o);-1!==l&&c.splice(l,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var s=this._listeners[t.type];if(void 0!==s){t.target=this;for(var c=s.slice(0),l=0,d=c.length;l<d;l++)c[l].call(this,t)}}}});var t,te="105",ji={LEFT:0,MIDDLE:1,RIGHT:2},Di=0,nn=1,ur=2,$t=3,Cn=0,Sr=1,Ti=0,Wi=1,Dr=2,Jn=0,bt=1,xn=2,Tr=1,Ii=2,bo=0,ra=1,$i=2,_o=0,qi=1,Zi=2,rn=3,mn=4,ia=5,jr=100,uu=101,Jt=102,ai=103,tc=104,v=200,C=201,R=202,A=203,z=204,Y=205,ce=206,de=207,ye=208,Be=209,Ne=210,J=0,be=1,on=2,Kn=3,Pn=4,En=5,Un=6,Yi=7,Rn=0,xo=1,Ri=2,Ir=0,ci=1,On=2,oa=3,$o=4,sa=5,Xi=300,qo=301,xs=302,ui=303,Wr=304,Vn=305,li=306,Zo=307,Br=1e3,er=1001,Li=1002,St=1003,gn=1004,aa=1005,lr=1006,Eo=1007,Yo=1008,Es=1009,ve=1010,qt=1011,br=1012,ca=1013,gl=1014,ua=1015,lu=1016,rp=1017,Zd=1018,Yd=1019,nc=1020,Xd=1021,rr=1022,Mo=1023,ip=1024,op=1025,qg=Mo,Ms=1026,rc=1027,sp=1028,Qi=33776,Qd=33777,ir=33778,As=33779,Pi=35840,ap=35841,Jd=35842,Kd=35843,vl=36196,cp=37808,ic=37809,up=37810,eh=37811,th=37812,lp=37813,dp=37814,hp=37815,fp=37816,nh=37817,pp=37818,mp=37819,dr=37820,gp=37821,di=2200,ft=2201,rh=2202,la=2300,$r=2301,yl=2302,da=2400,Ut=2401,Cs=2402,Nn=0,wl=1,vp=2,ha=3e3,dt=3001,du=3007,bl=3002,Uw=3003,ih=3004,Me=3005,hu=3006,gt=3200,Kt=3201,fu=0,Zg=1,yt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],o=0;o<256;o++)t[o]=(o<16?"0":"")+o.toString(16);return function(){var c=4294967295*Math.random()|0,l=4294967295*Math.random()|0,d=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return(t[255&c]+t[c>>8&255]+t[c>>16&255]+t[c>>24&255]+"-"+t[255&l]+t[l>>8&255]+"-"+t[l>>16&15|64]+t[l>>24&255]+"-"+t[63&d|128]+t[d>>8&255]+"-"+t[d>>16&255]+t[d>>24&255]+t[255&f]+t[f>>8&255]+t[f>>16&255]+t[f>>24&255]).toUpperCase()}}(),clamp:function(t,o,s){return Math.max(o,Math.min(s,t))},euclideanModulo:function(t,o){return(t%o+o)%o},mapLinear:function(t,o,s,c,l){return c+(t-o)*(l-c)/(s-o)},lerp:function(t,o,s){return(1-s)*t+s*o},smoothstep:function(t,o,s){return t<=o?0:t>=s?1:(t=(t-o)/(s-o))*t*(3-2*t)},smootherstep:function(t,o,s){return t<=o?0:t>=s?1:(t=(t-o)/(s-o))*t*t*(t*(6*t-15)+10)},randInt:function(t,o){return t+Math.floor(Math.random()*(o-t+1))},randFloat:function(t,o){return t+Math.random()*(o-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*yt.DEG2RAD},radToDeg:function(t){return t*yt.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function pe(t,o){this.x=t||0,this.y=o||0}function en(t,o,s,c){this._x=t||0,this._y=o||0,this._z=s||0,this._w=void 0!==c?c:1}function k(t,o,s){this.x=t||0,this.y=o||0,this.z=s||0}function hr(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(pe.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(pe.prototype,{isVector2:!0,set:function(t,o){return this.x=t,this.y=o,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,o){switch(t){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,o){return void 0!==o?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,o)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,o){return this.x=t.x+o.x,this.y=t.y+o.y,this},addScaledVector:function(t,o){return this.x+=t.x*o,this.y+=t.y*o,this},sub:function(t,o){return void 0!==o?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,o)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,o){return this.x=t.x-o.x,this.y=t.y-o.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var o=this.x,s=this.y,c=t.elements;return this.x=c[0]*o+c[3]*s+c[6],this.y=c[1]*o+c[4]*s+c[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,o){return this.x=Math.max(t.x,Math.min(o.x,this.x)),this.y=Math.max(t.y,Math.min(o.y,this.y)),this},clampScalar:function(t,o){return this.x=Math.max(t,Math.min(o,this.x)),this.y=Math.max(t,Math.min(o,this.y)),this},clampLength:function(t,o){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(o,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var o=this.x-t.x,s=this.y-t.y;return o*o+s*s},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,o){return this.x+=(t.x-this.x)*o,this.y+=(t.y-this.y)*o,this},lerpVectors:function(t,o,s){return this.subVectors(o,t).multiplyScalar(s).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,o){return void 0===o&&(o=0),this.x=t[o],this.y=t[o+1],this},toArray:function(t,o){return void 0===t&&(t=[]),void 0===o&&(o=0),t[o]=this.x,t[o+1]=this.y,t},fromBufferAttribute:function(t,o,s){return void 0!==s&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(o),this.y=t.getY(o),this},rotateAround:function(t,o){var s=Math.cos(o),c=Math.sin(o),l=this.x-t.x,d=this.y-t.y;return this.x=l*s-d*c+t.x,this.y=l*c+d*s+t.y,this}}),Object.assign(en,{slerp:function(t,o,s,c){return s.copy(t).slerp(o,c)},slerpFlat:function(t,o,s,c,l,d,f){var p=s[c+0],y=s[c+1],w=s[c+2],b=s[c+3],_=l[d+0],E=l[d+1],M=l[d+2],S=l[d+3];if(b!==S||p!==_||y!==E||w!==M){var I=1-f,T=p*_+y*E+w*M+b*S,O=T>=0?1:-1,F=1-T*T;if(F>Number.EPSILON){var N=Math.sqrt(F),B=Math.atan2(N,T*O);I=Math.sin(I*B)/N,f=Math.sin(f*B)/N}var U=f*O;if(p=p*I+_*U,y=y*I+E*U,w=w*I+M*U,b=b*I+S*U,I===1-f){var q=1/Math.sqrt(p*p+y*y+w*w+b*b);p*=q,y*=q,w*=q,b*=q}}t[o]=p,t[o+1]=y,t[o+2]=w,t[o+3]=b}}),Object.defineProperties(en.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(en.prototype,{isQuaternion:!0,set:function(t,o,s,c){return this._x=t,this._y=o,this._z=s,this._w=c,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,o){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var s=t._x,c=t._y,l=t._z,d=t.order,f=Math.cos,p=Math.sin,y=f(s/2),w=f(c/2),b=f(l/2),_=p(s/2),E=p(c/2),M=p(l/2);return"XYZ"===d?(this._x=_*w*b+y*E*M,this._y=y*E*b-_*w*M,this._z=y*w*M+_*E*b,this._w=y*w*b-_*E*M):"YXZ"===d?(this._x=_*w*b+y*E*M,this._y=y*E*b-_*w*M,this._z=y*w*M-_*E*b,this._w=y*w*b+_*E*M):"ZXY"===d?(this._x=_*w*b-y*E*M,this._y=y*E*b+_*w*M,this._z=y*w*M+_*E*b,this._w=y*w*b-_*E*M):"ZYX"===d?(this._x=_*w*b-y*E*M,this._y=y*E*b+_*w*M,this._z=y*w*M-_*E*b,this._w=y*w*b+_*E*M):"YZX"===d?(this._x=_*w*b+y*E*M,this._y=y*E*b+_*w*M,this._z=y*w*M-_*E*b,this._w=y*w*b-_*E*M):"XZY"===d&&(this._x=_*w*b-y*E*M,this._y=y*E*b-_*w*M,this._z=y*w*M+_*E*b,this._w=y*w*b+_*E*M),!1!==o&&this.onChangeCallback(),this},setFromAxisAngle:function(t,o){var s=o/2,c=Math.sin(s);return this._x=t.x*c,this._y=t.y*c,this._z=t.z*c,this._w=Math.cos(s),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var E,o=t.elements,s=o[0],c=o[4],l=o[8],d=o[1],f=o[5],p=o[9],y=o[2],w=o[6],b=o[10],_=s+f+b;return _>0?(E=.5/Math.sqrt(_+1),this._w=.25/E,this._x=(w-p)*E,this._y=(l-y)*E,this._z=(d-c)*E):s>f&&s>b?(E=2*Math.sqrt(1+s-f-b),this._w=(w-p)/E,this._x=.25*E,this._y=(c+d)/E,this._z=(l+y)/E):f>b?(E=2*Math.sqrt(1+f-s-b),this._w=(l-y)/E,this._x=(c+d)/E,this._y=.25*E,this._z=(p+w)/E):(E=2*Math.sqrt(1+b-s-f),this._w=(d-c)/E,this._x=(l+y)/E,this._y=(p+w)/E,this._z=.25*E),this.onChangeCallback(),this},setFromUnitVectors:function(t,o){var c=t.dot(o)+1;return c<1e-6?(c=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=c):(this._x=0,this._y=-t.z,this._z=t.y,this._w=c)):(this._x=t.y*o.z-t.z*o.y,this._y=t.z*o.x-t.x*o.z,this._z=t.x*o.y-t.y*o.x,this._w=c),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(yt.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,o){var s=this.angleTo(t);if(0===s)return this;var c=Math.min(1,o/s);return this.slerp(t,c),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,o){return void 0!==o?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,o)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,o){var s=t._x,c=t._y,l=t._z,d=t._w,f=o._x,p=o._y,y=o._z,w=o._w;return this._x=s*w+d*f+c*y-l*p,this._y=c*w+d*p+l*f-s*y,this._z=l*w+d*y+s*p-c*f,this._w=d*w-s*f-c*p-l*y,this.onChangeCallback(),this},slerp:function(t,o){if(0===o)return this;if(1===o)return this.copy(t);var s=this._x,c=this._y,l=this._z,d=this._w,f=d*t._w+s*t._x+c*t._y+l*t._z;if(f<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,f=-f):this.copy(t),f>=1)return this._w=d,this._x=s,this._y=c,this._z=l,this;var p=1-f*f;if(p<=Number.EPSILON){var y=1-o;return this._w=y*d+o*this._w,this._x=y*s+o*this._x,this._y=y*c+o*this._y,this._z=y*l+o*this._z,this.normalize()}var w=Math.sqrt(p),b=Math.atan2(w,f),_=Math.sin((1-o)*b)/w,E=Math.sin(o*b)/w;return this._w=d*_+this._w*E,this._x=s*_+this._x*E,this._y=c*_+this._y*E,this._z=l*_+this._z*E,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,o){return void 0===o&&(o=0),this._x=t[o],this._y=t[o+1],this._z=t[o+2],this._w=t[o+3],this.onChangeCallback(),this},toArray:function(t,o){return void 0===t&&(t=[]),void 0===o&&(o=0),t[o]=this._x,t[o+1]=this._y,t[o+2]=this._z,t[o+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(k.prototype,{isVector3:!0,set:function(t,o,s){return this.x=t,this.y=o,this.z=s,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,o){switch(t){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,o){return void 0!==o?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,o)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,o){return this.x=t.x+o.x,this.y=t.y+o.y,this.z=t.z+o.z,this},addScaledVector:function(t,o){return this.x+=t.x*o,this.y+=t.y*o,this.z+=t.z*o,this},sub:function(t,o){return void 0!==o?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,o)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,o){return this.x=t.x-o.x,this.y=t.y-o.y,this.z=t.z-o.z,this},multiply:function(t,o){return void 0!==o?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,o)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,o){return this.x=t.x*o.x,this.y=t.y*o.y,this.z=t.z*o.z,this},applyEuler:(t=new en,function(s){return s&&s.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(s))}),applyAxisAngle:function(){var t=new en;return function(s,c){return this.applyQuaternion(t.setFromAxisAngle(s,c))}}(),applyMatrix3:function(t){var o=this.x,s=this.y,c=this.z,l=t.elements;return this.x=l[0]*o+l[3]*s+l[6]*c,this.y=l[1]*o+l[4]*s+l[7]*c,this.z=l[2]*o+l[5]*s+l[8]*c,this},applyMatrix4:function(t){var o=this.x,s=this.y,c=this.z,l=t.elements,d=1/(l[3]*o+l[7]*s+l[11]*c+l[15]);return this.x=(l[0]*o+l[4]*s+l[8]*c+l[12])*d,this.y=(l[1]*o+l[5]*s+l[9]*c+l[13])*d,this.z=(l[2]*o+l[6]*s+l[10]*c+l[14])*d,this},applyQuaternion:function(t){var o=this.x,s=this.y,c=this.z,l=t.x,d=t.y,f=t.z,p=t.w,y=p*o+d*c-f*s,w=p*s+f*o-l*c,b=p*c+l*s-d*o,_=-l*o-d*s-f*c;return this.x=y*p+_*-l+w*-f-b*-d,this.y=w*p+_*-d+b*-l-y*-f,this.z=b*p+_*-f+y*-d-w*-l,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var o=this.x,s=this.y,c=this.z,l=t.elements;return this.x=l[0]*o+l[4]*s+l[8]*c,this.y=l[1]*o+l[5]*s+l[9]*c,this.z=l[2]*o+l[6]*s+l[10]*c,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,o){return this.x=Math.max(t.x,Math.min(o.x,this.x)),this.y=Math.max(t.y,Math.min(o.y,this.y)),this.z=Math.max(t.z,Math.min(o.z,this.z)),this},clampScalar:function(t,o){return this.x=Math.max(t,Math.min(o,this.x)),this.y=Math.max(t,Math.min(o,this.y)),this.z=Math.max(t,Math.min(o,this.z)),this},clampLength:function(t,o){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(o,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,o){return this.x+=(t.x-this.x)*o,this.y+=(t.y-this.y)*o,this.z+=(t.z-this.z)*o,this},lerpVectors:function(t,o,s){return this.subVectors(o,t).multiplyScalar(s).add(t)},cross:function(t,o){return void 0!==o?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,o)):this.crossVectors(this,t)},crossVectors:function(t,o){var s=t.x,c=t.y,l=t.z,d=o.x,f=o.y,p=o.z;return this.x=c*p-l*f,this.y=l*d-s*p,this.z=s*f-c*d,this},projectOnVector:function(t){var o=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(o)},projectOnPlane:function(){var t=new k;return function(s){return t.copy(this).projectOnVector(s),this.sub(t)}}(),reflect:function(){var t=new k;return function(s){return this.sub(t.copy(s).multiplyScalar(2*this.dot(s)))}}(),angleTo:function(t){var o=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(yt.clamp(o,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var o=this.x-t.x,s=this.y-t.y,c=this.z-t.z;return o*o+s*s+c*c},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,o,s){var c=Math.sin(o)*t;return this.x=c*Math.sin(s),this.y=Math.cos(o)*t,this.z=c*Math.cos(s),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,o,s){return this.x=t*Math.sin(o),this.y=s,this.z=t*Math.cos(o),this},setFromMatrixPosition:function(t){var o=t.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this},setFromMatrixScale:function(t){var o=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),c=this.setFromMatrixColumn(t,2).length();return this.x=o,this.y=s,this.z=c,this},setFromMatrixColumn:function(t,o){return this.fromArray(t.elements,4*o)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,o){return void 0===o&&(o=0),this.x=t[o],this.y=t[o+1],this.z=t[o+2],this},toArray:function(t,o){return void 0===t&&(t=[]),void 0===o&&(o=0),t[o]=this.x,t[o+1]=this.y,t[o+2]=this.z,t},fromBufferAttribute:function(t,o,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(o),this.y=t.getY(o),this.z=t.getZ(o),this}}),Object.assign(hr.prototype,{isMatrix3:!0,set:function(t,o,s,c,l,d,f,p,y){var w=this.elements;return w[0]=t,w[1]=c,w[2]=f,w[3]=o,w[4]=l,w[5]=p,w[6]=s,w[7]=d,w[8]=y,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var o=this.elements,s=t.elements;return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],this},setFromMatrix4:function(t){var o=t.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this},applyToBufferAttribute:function(){var t=new k;return function(s){for(var c=0,l=s.count;c<l;c++)t.x=s.getX(c),t.y=s.getY(c),t.z=s.getZ(c),t.applyMatrix3(this),s.setXYZ(c,t.x,t.y,t.z);return s}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,o){var s=t.elements,c=o.elements,l=this.elements,d=s[0],f=s[3],p=s[6],y=s[1],w=s[4],b=s[7],_=s[2],E=s[5],M=s[8],S=c[0],I=c[3],T=c[6],O=c[1],F=c[4],N=c[7],B=c[2],U=c[5],q=c[8];return l[0]=d*S+f*O+p*B,l[3]=d*I+f*F+p*U,l[6]=d*T+f*N+p*q,l[1]=y*S+w*O+b*B,l[4]=y*I+w*F+b*U,l[7]=y*T+w*N+b*q,l[2]=_*S+E*O+M*B,l[5]=_*I+E*F+M*U,l[8]=_*T+E*N+M*q,this},multiplyScalar:function(t){var o=this.elements;return o[0]*=t,o[3]*=t,o[6]*=t,o[1]*=t,o[4]*=t,o[7]*=t,o[2]*=t,o[5]*=t,o[8]*=t,this},determinant:function(){var t=this.elements,o=t[0],s=t[1],c=t[2],l=t[3],d=t[4],f=t[5],p=t[6],y=t[7],w=t[8];return o*d*w-o*f*y-s*l*w+s*f*p+c*l*y-c*d*p},getInverse:function(t,o){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var s=t.elements,c=this.elements,l=s[0],d=s[1],f=s[2],p=s[3],y=s[4],w=s[5],b=s[6],_=s[7],E=s[8],M=E*y-w*_,S=w*b-E*p,I=_*p-y*b,T=l*M+d*S+f*I;if(0===T){var O="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===o)throw new Error(O);return console.warn(O),this.identity()}var F=1/T;return c[0]=M*F,c[1]=(f*_-E*d)*F,c[2]=(w*d-f*y)*F,c[3]=S*F,c[4]=(E*l-f*b)*F,c[5]=(f*p-w*l)*F,c[6]=I*F,c[7]=(d*b-_*l)*F,c[8]=(y*l-d*p)*F,this},transpose:function(){var t,o=this.elements;return t=o[1],o[1]=o[3],o[3]=t,t=o[2],o[2]=o[6],o[6]=t,t=o[5],o[5]=o[7],o[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var o=this.elements;return t[0]=o[0],t[1]=o[3],t[2]=o[6],t[3]=o[1],t[4]=o[4],t[5]=o[7],t[6]=o[2],t[7]=o[5],t[8]=o[8],this},setUvTransform:function(t,o,s,c,l,d,f){var p=Math.cos(l),y=Math.sin(l);this.set(s*p,s*y,-s*(p*d+y*f)+d+t,-c*y,c*p,-c*(-y*d+p*f)+f+o,0,0,1)},scale:function(t,o){var s=this.elements;return s[0]*=t,s[3]*=t,s[6]*=t,s[1]*=o,s[4]*=o,s[7]*=o,this},rotate:function(t){var o=Math.cos(t),s=Math.sin(t),c=this.elements,l=c[0],d=c[3],f=c[6],p=c[1],y=c[4],w=c[7];return c[0]=o*l+s*p,c[3]=o*d+s*y,c[6]=o*f+s*w,c[1]=-s*l+o*p,c[4]=-s*d+o*y,c[7]=-s*f+o*w,this},translate:function(t,o){var s=this.elements;return s[0]+=t*s[2],s[3]+=t*s[5],s[6]+=t*s[8],s[1]+=o*s[2],s[4]+=o*s[5],s[7]+=o*s[8],this},equals:function(t){for(var o=this.elements,s=t.elements,c=0;c<9;c++)if(o[c]!==s[c])return!1;return!0},fromArray:function(t,o){void 0===o&&(o=0);for(var s=0;s<9;s++)this.elements[s]=t[s+o];return this},toArray:function(t,o){void 0===t&&(t=[]),void 0===o&&(o=0);var s=this.elements;return t[o]=s[0],t[o+1]=s[1],t[o+2]=s[2],t[o+3]=s[3],t[o+4]=s[4],t[o+5]=s[5],t[o+6]=s[6],t[o+7]=s[7],t[o+8]=s[8],t}});var pu,qr={getDataURL:function(t){var o;if(typeof HTMLCanvasElement>"u")return t.src;if(t instanceof HTMLCanvasElement)o=t;else{void 0===pu&&(pu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),pu.width=t.width,pu.height=t.height;var s=pu.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),o=pu}return o.width>2048||o.height>2048?o.toDataURL("image/jpeg",.6):o.toDataURL("image/png")}},Vw=0;function vn(t,o,s,c,l,d,f,p,y,w){Object.defineProperty(this,"id",{value:Vw++}),this.uuid=yt.generateUUID(),this.name="",this.image=void 0!==t?t:vn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==o?o:vn.DEFAULT_MAPPING,this.wrapS=void 0!==s?s:er,this.wrapT=void 0!==c?c:er,this.magFilter=void 0!==l?l:lr,this.minFilter=void 0!==d?d:Yo,this.anisotropy=void 0!==y?y:1,this.format=void 0!==f?f:Mo,this.type=void 0!==p?p:Es,this.offset=new pe(0,0),this.repeat=new pe(1,1),this.center=new pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==w?w:ha,this.version=0,this.onUpdate=null}function un(t,o,s,c){this.x=t||0,this.y=o||0,this.z=s||0,this.w=void 0!==c?c:1}function Xo(t,o,s){this.width=t,this.height=o,this.scissor=new un(0,0,t,o),this.scissorTest=!1,this.viewport=new un(0,0,t,o),this.texture=new vn(void 0,void 0,(s=s||{}).wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:lr,this.depthBuffer=void 0===s.depthBuffer||s.depthBuffer,this.stencilBuffer=void 0===s.stencilBuffer||s.stencilBuffer,this.depthTexture=void 0!==s.depthTexture?s.depthTexture:null}function oh(t,o,s){Xo.call(this,t,o,s),this.samples=4}function oc(t,o,s){Xo.call(this,t,o,s)}function fa(t,o,s,c,l,d,f,p,y,w,b,_){vn.call(this,null,d,f,p,y,w,c,l,b,_),this.image={data:t,width:o,height:s},this.magFilter=void 0!==y?y:St,this.minFilter=void 0!==w?w:St,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Ao(t,o){this.min=void 0!==t?t:new k(1/0,1/0,1/0),this.max=void 0!==o?o:new k(-1/0,-1/0,-1/0)}function Hn(t,o){this.center=void 0!==t?t:new k,this.radius=void 0!==o?o:0}function Qe(t,o){this.normal=void 0!==t?t:new k(1,0,0),this.constant=void 0!==o?o:0}function sh(t,o,s,c,l,d){this.planes=[void 0!==t?t:new Qe,void 0!==o?o:new Qe,void 0!==s?s:new Qe,void 0!==c?c:new Qe,void 0!==l?l:new Qe,void 0!==d?d:new Qe]}function it(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}vn.DEFAULT_IMAGE=void 0,vn.DEFAULT_MAPPING=Xi,vn.prototype=Object.assign(Object.create(Te.prototype),{constructor:vn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var o=void 0===t||"string"==typeof t;if(!o&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var c=this.image;if(void 0===c.uuid&&(c.uuid=yt.generateUUID()),!o&&void 0===t.images[c.uuid]){var l;if(Array.isArray(c)){l=[];for(var d=0,f=c.length;d<f;d++)l.push(qr.getDataURL(c[d]))}else l=qr.getDataURL(c);t.images[c.uuid]={uuid:c.uuid,url:l}}s.image=c.uuid}return o||(t.textures[this.uuid]=s),s},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==Xi)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Br:t.x=t.x-Math.floor(t.x);break;case er:t.x=t.x<0?0:1;break;case Li:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Br:t.y=t.y-Math.floor(t.y);break;case er:t.y=t.y<0?0:1;break;case Li:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(vn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(un.prototype,{isVector4:!0,set:function(t,o,s,c){return this.x=t,this.y=o,this.z=s,this.w=c,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,o){switch(t){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,o){return void 0!==o?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,o)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,o){return this.x=t.x+o.x,this.y=t.y+o.y,this.z=t.z+o.z,this.w=t.w+o.w,this},addScaledVector:function(t,o){return this.x+=t.x*o,this.y+=t.y*o,this.z+=t.z*o,this.w+=t.w*o,this},sub:function(t,o){return void 0!==o?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,o)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,o){return this.x=t.x-o.x,this.y=t.y-o.y,this.z=t.z-o.z,this.w=t.w-o.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var o=this.x,s=this.y,c=this.z,l=this.w,d=t.elements;return this.x=d[0]*o+d[4]*s+d[8]*c+d[12]*l,this.y=d[1]*o+d[5]*s+d[9]*c+d[13]*l,this.z=d[2]*o+d[6]*s+d[10]*c+d[14]*l,this.w=d[3]*o+d[7]*s+d[11]*c+d[15]*l,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var o=Math.sqrt(1-t.w*t.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/o,this.y=t.y/o,this.z=t.z/o),this},setAxisAngleFromRotationMatrix:function(t){var o,s,c,l,d=.01,f=.1,p=t.elements,y=p[0],w=p[4],b=p[8],_=p[1],E=p[5],M=p[9],S=p[2],I=p[6],T=p[10];if(Math.abs(w-_)<d&&Math.abs(b-S)<d&&Math.abs(M-I)<d){if(Math.abs(w+_)<f&&Math.abs(b+S)<f&&Math.abs(M+I)<f&&Math.abs(y+E+T-3)<f)return this.set(1,0,0,0),this;o=Math.PI;var O=(y+1)/2,F=(E+1)/2,N=(T+1)/2,B=(w+_)/4,U=(b+S)/4,q=(M+I)/4;return O>F&&O>N?O<d?(s=0,c=.707106781,l=.707106781):(c=B/(s=Math.sqrt(O)),l=U/s):F>N?F<d?(s=.707106781,c=0,l=.707106781):(s=B/(c=Math.sqrt(F)),l=q/c):N<d?(s=.707106781,c=.707106781,l=0):(s=U/(l=Math.sqrt(N)),c=q/l),this.set(s,c,l,o),this}var Z=Math.sqrt((I-M)*(I-M)+(b-S)*(b-S)+(_-w)*(_-w));return Math.abs(Z)<.001&&(Z=1),this.x=(I-M)/Z,this.y=(b-S)/Z,this.z=(_-w)/Z,this.w=Math.acos((y+E+T-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,o){return this.x=Math.max(t.x,Math.min(o.x,this.x)),this.y=Math.max(t.y,Math.min(o.y,this.y)),this.z=Math.max(t.z,Math.min(o.z,this.z)),this.w=Math.max(t.w,Math.min(o.w,this.w)),this},clampScalar:function(){var t,o;return function(c,l){return void 0===t&&(t=new un,o=new un),t.set(c,c,c,c),o.set(l,l,l,l),this.clamp(t,o)}}(),clampLength:function(t,o){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(o,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,o){return this.x+=(t.x-this.x)*o,this.y+=(t.y-this.y)*o,this.z+=(t.z-this.z)*o,this.w+=(t.w-this.w)*o,this},lerpVectors:function(t,o,s){return this.subVectors(o,t).multiplyScalar(s).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,o){return void 0===o&&(o=0),this.x=t[o],this.y=t[o+1],this.z=t[o+2],this.w=t[o+3],this},toArray:function(t,o){return void 0===t&&(t=[]),void 0===o&&(o=0),t[o]=this.x,t[o+1]=this.y,t[o+2]=this.z,t[o+3]=this.w,t},fromBufferAttribute:function(t,o,s){return void 0!==s&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(o),this.y=t.getY(o),this.z=t.getZ(o),this.w=t.getW(o),this}}),Xo.prototype=Object.assign(Object.create(Te.prototype),{constructor:Xo,isWebGLRenderTarget:!0,setSize:function(t,o){(this.width!==t||this.height!==o)&&(this.width=t,this.height=o,this.dispose()),this.viewport.set(0,0,t,o),this.scissor.set(0,0,t,o)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),oh.prototype=Object.assign(Object.create(Xo.prototype),{constructor:oh,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Xo.prototype.copy.call(this,t),this.samples=t.samples,this}}),(oc.prototype=Object.create(Xo.prototype)).constructor=oc,oc.prototype.isWebGLRenderTargetCube=!0,(fa.prototype=Object.create(vn.prototype)).constructor=fa,fa.prototype.isDataTexture=!0,Object.assign(Ao.prototype,{isBox3:!0,set:function(t,o){return this.min.copy(t),this.max.copy(o),this},setFromArray:function(t){for(var o=1/0,s=1/0,c=1/0,l=-1/0,d=-1/0,f=-1/0,p=0,y=t.length;p<y;p+=3){var w=t[p],b=t[p+1],_=t[p+2];w<o&&(o=w),b<s&&(s=b),_<c&&(c=_),w>l&&(l=w),b>d&&(d=b),_>f&&(f=_)}return this.min.set(o,s,c),this.max.set(l,d,f),this},setFromBufferAttribute:function(t){for(var o=1/0,s=1/0,c=1/0,l=-1/0,d=-1/0,f=-1/0,p=0,y=t.count;p<y;p++){var w=t.getX(p),b=t.getY(p),_=t.getZ(p);w<o&&(o=w),b<s&&(s=b),_<c&&(c=_),w>l&&(l=w),b>d&&(d=b),_>f&&(f=_)}return this.min.set(o,s,c),this.max.set(l,d,f),this},setFromPoints:function(t){this.makeEmpty();for(var o=0,s=t.length;o<s;o++)this.expandByPoint(t[o]);return this},setFromCenterAndSize:function(){var t=new k;return function(s,c){var l=t.copy(c).multiplyScalar(.5);return this.min.copy(s).sub(l),this.max.copy(s).add(l),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new k),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new k),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,o,s,c=new k;function l(d){var f=d.geometry;if(void 0!==f)if(f.isGeometry){var p=f.vertices;for(o=0,s=p.length;o<s;o++)c.copy(p[o]),c.applyMatrix4(d.matrixWorld),t.expandByPoint(c)}else if(f.isBufferGeometry){var y=f.attributes.position;if(void 0!==y)for(o=0,s=y.count;o<s;o++)c.fromBufferAttribute(y,o).applyMatrix4(d.matrixWorld),t.expandByPoint(c)}}return function(f){return t=this,f.updateMatrixWorld(!0),f.traverse(l),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,o){return void 0===o&&(console.warn("THREE.Box3: .getParameter() target is now required"),o=new k),o.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new k;return function(s){return this.clampPoint(s.center,t),t.distanceToSquared(s.center)<=s.radius*s.radius}}(),intersectsPlane:function(t){var o,s;return t.normal.x>0?(o=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(o=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(o+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(o+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(o+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(o+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),o<=-t.constant&&s>=-t.constant},intersectsTriangle:function(){var t=new k,o=new k,s=new k,c=new k,l=new k,d=new k,f=new k,p=new k,y=new k,w=new k;function b(_){var E,M;for(E=0,M=_.length-3;E<=M;E+=3){f.fromArray(_,E);var S=y.x*Math.abs(f.x)+y.y*Math.abs(f.y)+y.z*Math.abs(f.z),I=t.dot(f),T=o.dot(f),O=s.dot(f);if(Math.max(-Math.max(I,T,O),Math.min(I,T,O))>S)return!1}return!0}return function(E){if(this.isEmpty())return!1;this.getCenter(p),y.subVectors(this.max,p),t.subVectors(E.a,p),o.subVectors(E.b,p),s.subVectors(E.c,p),c.subVectors(o,t),l.subVectors(s,o),d.subVectors(t,s);var M=[0,-c.z,c.y,0,-l.z,l.y,0,-d.z,d.y,c.z,0,-c.x,l.z,0,-l.x,d.z,0,-d.x,-c.y,c.x,0,-l.y,l.x,0,-d.y,d.x,0];return!(!b(M)||(M=[1,0,0,0,1,0,0,0,1],!b(M)))&&(w.crossVectors(c,l),b(M=[w.x,w.y,w.z]))}}(),clampPoint:function(t,o){return void 0===o&&(console.warn("THREE.Box3: .clampPoint() target is now required"),o=new k),o.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new k;return function(s){return t.copy(s).clamp(this.min,this.max).sub(s).length()}}(),getBoundingSphere:function(){var t=new k;return function(s){return void 0===s&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(s.center),s.radius=.5*this.getSize(t).length(),s}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new k,new k,new k,new k,new k,new k,new k,new k];return function(s){return this.isEmpty()||(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(s),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(s),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(s),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(s),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(s),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(s),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(s),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(s),this.setFromPoints(t)),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Hn.prototype,{set:function(t,o){return this.center.copy(t),this.radius=o,this},setFromPoints:function(){var t=new Ao;return function(s,c){var l=this.center;void 0!==c?l.copy(c):t.setFromPoints(s).getCenter(l);for(var d=0,f=0,p=s.length;f<p;f++)d=Math.max(d,l.distanceToSquared(s[f]));return this.radius=Math.sqrt(d),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var o=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=o*o},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,o){var s=this.center.distanceToSquared(t);return void 0===o&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),o=new k),o.copy(t),s>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Ao),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(Qe.prototype,{set:function(t,o){return this.normal.copy(t),this.constant=o,this},setComponents:function(t,o,s,c){return this.normal.set(t,o,s),this.constant=c,this},setFromNormalAndCoplanarPoint:function(t,o){return this.normal.copy(t),this.constant=-o.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new k,o=new k;return function(c,l,d){var f=t.subVectors(d,l).cross(o.subVectors(c,l)).normalize();return this.setFromNormalAndCoplanarPoint(f,c),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,o){return void 0===o&&(console.warn("THREE.Plane: .projectPoint() target is now required"),o=new k),o.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new k;return function(s,c){void 0===c&&(console.warn("THREE.Plane: .intersectLine() target is now required"),c=new k);var l=s.delta(t),d=this.normal.dot(l);if(0===d)return 0===this.distanceToPoint(s.start)?c.copy(s.start):void 0;var f=-(s.start.dot(this.normal)+this.constant)/d;return f<0||f>1?void 0:c.copy(l).multiplyScalar(f).add(s.start)}}(),intersectsLine:function(t){var o=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return o<0&&s>0||s<0&&o>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new k),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new k,o=new hr;return function(c,l){var d=l||o.getNormalMatrix(c),f=this.coplanarPoint(t).applyMatrix4(c),p=this.normal.applyMatrix3(d).normalize();return this.constant=-f.dot(p),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(sh.prototype,{set:function(t,o,s,c,l,d){var f=this.planes;return f[0].copy(t),f[1].copy(o),f[2].copy(s),f[3].copy(c),f[4].copy(l),f[5].copy(d),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var o=this.planes,s=0;s<6;s++)o[s].copy(t.planes[s]);return this},setFromMatrix:function(t){var o=this.planes,s=t.elements,c=s[0],l=s[1],d=s[2],f=s[3],p=s[4],y=s[5],w=s[6],b=s[7],_=s[8],E=s[9],M=s[10],S=s[11],I=s[12],T=s[13],O=s[14],F=s[15];return o[0].setComponents(f-c,b-p,S-_,F-I).normalize(),o[1].setComponents(f+c,b+p,S+_,F+I).normalize(),o[2].setComponents(f+l,b+y,S+E,F+T).normalize(),o[3].setComponents(f-l,b-y,S-E,F-T).normalize(),o[4].setComponents(f-d,b-w,S-M,F-O).normalize(),o[5].setComponents(f+d,b+w,S+M,F+O).normalize(),this},intersectsObject:function(){var t=new Hn;return function(s){var c=s.geometry;return null===c.boundingSphere&&c.computeBoundingSphere(),t.copy(c.boundingSphere).applyMatrix4(s.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new Hn;return function(s){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(s.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var o=this.planes,s=t.center,c=-t.radius,l=0;l<6;l++)if(o[l].distanceToPoint(s)<c)return!1;return!0},intersectsBox:function(){var t=new k;return function(s){for(var c=this.planes,l=0;l<6;l++){var d=c[l];if(t.x=d.normal.x>0?s.max.x:s.min.x,t.y=d.normal.y>0?s.max.y:s.min.y,t.z=d.normal.z>0?s.max.z:s.min.z,d.distanceToPoint(t)<0)return!1}return!0}}(),containsPoint:function(t){for(var o=this.planes,s=0;s<6;s++)if(o[s].distanceToPoint(t)<0)return!1;return!0}}),Object.assign(it.prototype,{isMatrix4:!0,set:function(t,o,s,c,l,d,f,p,y,w,b,_,E,M,S,I){var T=this.elements;return T[0]=t,T[4]=o,T[8]=s,T[12]=c,T[1]=l,T[5]=d,T[9]=f,T[13]=p,T[2]=y,T[6]=w,T[10]=b,T[14]=_,T[3]=E,T[7]=M,T[11]=S,T[15]=I,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new it).fromArray(this.elements)},copy:function(t){var o=this.elements,s=t.elements;return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],this},copyPosition:function(t){var o=this.elements,s=t.elements;return o[12]=s[12],o[13]=s[13],o[14]=s[14],this},extractBasis:function(t,o,s){return t.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this},makeBasis:function(t,o,s){return this.set(t.x,o.x,s.x,0,t.y,o.y,s.y,0,t.z,o.z,s.z,0,0,0,0,1),this},extractRotation:function(){var t=new k;return function(s){var c=this.elements,l=s.elements,d=1/t.setFromMatrixColumn(s,0).length(),f=1/t.setFromMatrixColumn(s,1).length(),p=1/t.setFromMatrixColumn(s,2).length();return c[0]=l[0]*d,c[1]=l[1]*d,c[2]=l[2]*d,c[3]=0,c[4]=l[4]*f,c[5]=l[5]*f,c[6]=l[6]*f,c[7]=0,c[8]=l[8]*p,c[9]=l[9]*p,c[10]=l[10]*p,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var o=this.elements,s=t.x,c=t.y,l=t.z,d=Math.cos(s),f=Math.sin(s),p=Math.cos(c),y=Math.sin(c),w=Math.cos(l),b=Math.sin(l);if("XYZ"===t.order){var _=d*w,E=d*b,M=f*w,S=f*b;o[0]=p*w,o[4]=-p*b,o[8]=y,o[1]=E+M*y,o[5]=_-S*y,o[9]=-f*p,o[2]=S-_*y,o[6]=M+E*y,o[10]=d*p}else if("YXZ"===t.order){var T=p*b,O=y*w;o[0]=(I=p*w)+(F=y*b)*f,o[4]=O*f-T,o[8]=d*y,o[1]=d*b,o[5]=d*w,o[9]=-f,o[2]=T*f-O,o[6]=F+I*f,o[10]=d*p}else if("ZXY"===t.order){var I,F;T=p*b,O=y*w,o[0]=(I=p*w)-(F=y*b)*f,o[4]=-d*b,o[8]=O+T*f,o[1]=T+O*f,o[5]=d*w,o[9]=F-I*f,o[2]=-d*y,o[6]=f,o[10]=d*p}else if("ZYX"===t.order)_=d*w,E=d*b,M=f*w,S=f*b,o[0]=p*w,o[4]=M*y-E,o[8]=_*y+S,o[1]=p*b,o[5]=S*y+_,o[9]=E*y-M,o[2]=-y,o[6]=f*p,o[10]=d*p;else if("YZX"===t.order){var N=d*p,B=d*y,U=f*p,q=f*y;o[0]=p*w,o[4]=q-N*b,o[8]=U*b+B,o[1]=b,o[5]=d*w,o[9]=-f*w,o[2]=-y*w,o[6]=B*b+U,o[10]=N-q*b}else"XZY"===t.order&&(N=d*p,B=d*y,U=f*p,q=f*y,o[0]=p*w,o[4]=-b,o[8]=y*w,o[1]=N*b+q,o[5]=d*w,o[9]=B*b-U,o[2]=U*b-B,o[6]=f*w,o[10]=q*b+N);return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this},makeRotationFromQuaternion:function(){var t=new k(0,0,0),o=new k(1,1,1);return function(c){return this.compose(t,c,o)}}(),lookAt:function(){var t=new k,o=new k,s=new k;return function(l,d,f){var p=this.elements;return s.subVectors(l,d),0===s.lengthSq()&&(s.z=1),s.normalize(),t.crossVectors(f,s),0===t.lengthSq()&&(1===Math.abs(f.z)?s.x+=1e-4:s.z+=1e-4,s.normalize(),t.crossVectors(f,s)),t.normalize(),o.crossVectors(s,t),p[0]=t.x,p[4]=o.x,p[8]=s.x,p[1]=t.y,p[5]=o.y,p[9]=s.y,p[2]=t.z,p[6]=o.z,p[10]=s.z,this}}(),multiply:function(t,o){return void 0!==o?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,o)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,o){var s=t.elements,c=o.elements,l=this.elements,d=s[0],f=s[4],p=s[8],y=s[12],w=s[1],b=s[5],_=s[9],E=s[13],M=s[2],S=s[6],I=s[10],T=s[14],O=s[3],F=s[7],N=s[11],B=s[15],U=c[0],q=c[4],Z=c[8],re=c[12],ne=c[1],ue=c[5],$=c[9],Q=c[13],ae=c[2],me=c[6],xe=c[10],Ae=c[14],De=c[3],he=c[7],_e=c[11],Fe=c[15];return l[0]=d*U+f*ne+p*ae+y*De,l[4]=d*q+f*ue+p*me+y*he,l[8]=d*Z+f*$+p*xe+y*_e,l[12]=d*re+f*Q+p*Ae+y*Fe,l[1]=w*U+b*ne+_*ae+E*De,l[5]=w*q+b*ue+_*me+E*he,l[9]=w*Z+b*$+_*xe+E*_e,l[13]=w*re+b*Q+_*Ae+E*Fe,l[2]=M*U+S*ne+I*ae+T*De,l[6]=M*q+S*ue+I*me+T*he,l[10]=M*Z+S*$+I*xe+T*_e,l[14]=M*re+S*Q+I*Ae+T*Fe,l[3]=O*U+F*ne+N*ae+B*De,l[7]=O*q+F*ue+N*me+B*he,l[11]=O*Z+F*$+N*xe+B*_e,l[15]=O*re+F*Q+N*Ae+B*Fe,this},multiplyScalar:function(t){var o=this.elements;return o[0]*=t,o[4]*=t,o[8]*=t,o[12]*=t,o[1]*=t,o[5]*=t,o[9]*=t,o[13]*=t,o[2]*=t,o[6]*=t,o[10]*=t,o[14]*=t,o[3]*=t,o[7]*=t,o[11]*=t,o[15]*=t,this},applyToBufferAttribute:function(){var t=new k;return function(s){for(var c=0,l=s.count;c<l;c++)t.x=s.getX(c),t.y=s.getY(c),t.z=s.getZ(c),t.applyMatrix4(this),s.setXYZ(c,t.x,t.y,t.z);return s}}(),determinant:function(){var t=this.elements,o=t[0],s=t[4],c=t[8],l=t[12],d=t[1],f=t[5],p=t[9],y=t[13],w=t[2],b=t[6],_=t[10],E=t[14];return t[3]*(+l*p*b-c*y*b-l*f*_+s*y*_+c*f*E-s*p*E)+t[7]*(+o*p*E-o*y*_+l*d*_-c*d*E+c*y*w-l*p*w)+t[11]*(+o*y*b-o*f*E-l*d*b+s*d*E+l*f*w-s*y*w)+t[15]*(-c*f*w-o*p*b+o*f*_+c*d*b-s*d*_+s*p*w)},transpose:function(){var o,t=this.elements;return o=t[1],t[1]=t[4],t[4]=o,o=t[2],t[2]=t[8],t[8]=o,o=t[6],t[6]=t[9],t[9]=o,o=t[3],t[3]=t[12],t[12]=o,o=t[7],t[7]=t[13],t[13]=o,o=t[11],t[11]=t[14],t[14]=o,this},setPosition:function(t,o,s){var c=this.elements;return t.isVector3?(c[12]=t.x,c[13]=t.y,c[14]=t.z):(c[12]=t,c[13]=o,c[14]=s),this},getInverse:function(t,o){var s=this.elements,c=t.elements,l=c[0],d=c[1],f=c[2],p=c[3],y=c[4],w=c[5],b=c[6],_=c[7],E=c[8],M=c[9],S=c[10],I=c[11],T=c[12],O=c[13],F=c[14],N=c[15],B=M*F*_-O*S*_+O*b*I-w*F*I-M*b*N+w*S*N,U=T*S*_-E*F*_-T*b*I+y*F*I+E*b*N-y*S*N,q=E*O*_-T*M*_+T*w*I-y*O*I-E*w*N+y*M*N,Z=T*M*b-E*O*b-T*w*S+y*O*S+E*w*F-y*M*F,re=l*B+d*U+f*q+p*Z;if(0===re){var ne="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===o)throw new Error(ne);return console.warn(ne),this.identity()}var ue=1/re;return s[0]=B*ue,s[1]=(O*S*p-M*F*p-O*f*I+d*F*I+M*f*N-d*S*N)*ue,s[2]=(w*F*p-O*b*p+O*f*_-d*F*_-w*f*N+d*b*N)*ue,s[3]=(M*b*p-w*S*p-M*f*_+d*S*_+w*f*I-d*b*I)*ue,s[4]=U*ue,s[5]=(E*F*p-T*S*p+T*f*I-l*F*I-E*f*N+l*S*N)*ue,s[6]=(T*b*p-y*F*p-T*f*_+l*F*_+y*f*N-l*b*N)*ue,s[7]=(y*S*p-E*b*p+E*f*_-l*S*_-y*f*I+l*b*I)*ue,s[8]=q*ue,s[9]=(T*M*p-E*O*p-T*d*I+l*O*I+E*d*N-l*M*N)*ue,s[10]=(y*O*p-T*w*p+T*d*_-l*O*_-y*d*N+l*w*N)*ue,s[11]=(E*w*p-y*M*p-E*d*_+l*M*_+y*d*I-l*w*I)*ue,s[12]=Z*ue,s[13]=(E*O*f-T*M*f+T*d*S-l*O*S-E*d*F+l*M*F)*ue,s[14]=(T*w*f-y*O*f-T*d*b+l*O*b+y*d*F-l*w*F)*ue,s[15]=(y*M*f-E*w*f+E*d*b-l*M*b-y*d*S+l*w*S)*ue,this},scale:function(t){var o=this.elements,s=t.x,c=t.y,l=t.z;return o[0]*=s,o[4]*=c,o[8]*=l,o[1]*=s,o[5]*=c,o[9]*=l,o[2]*=s,o[6]*=c,o[10]*=l,o[3]*=s,o[7]*=c,o[11]*=l,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,o,s){return this.set(1,0,0,t,0,1,0,o,0,0,1,s,0,0,0,1),this},makeRotationX:function(t){var o=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,o,-s,0,0,s,o,0,0,0,0,1),this},makeRotationY:function(t){var o=Math.cos(t),s=Math.sin(t);return this.set(o,0,s,0,0,1,0,0,-s,0,o,0,0,0,0,1),this},makeRotationZ:function(t){var o=Math.cos(t),s=Math.sin(t);return this.set(o,-s,0,0,s,o,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,o){var s=Math.cos(o),c=Math.sin(o),l=1-s,d=t.x,f=t.y,p=t.z,y=l*d,w=l*f;return this.set(y*d+s,y*f-c*p,y*p+c*f,0,y*f+c*p,w*f+s,w*p-c*d,0,y*p-c*f,w*p+c*d,l*p*p+s,0,0,0,0,1),this},makeScale:function(t,o,s){return this.set(t,0,0,0,0,o,0,0,0,0,s,0,0,0,0,1),this},makeShear:function(t,o,s){return this.set(1,o,s,0,t,1,s,0,t,o,1,0,0,0,0,1),this},compose:function(t,o,s){var c=this.elements,l=o._x,d=o._y,f=o._z,p=o._w,y=l+l,w=d+d,b=f+f,_=l*y,E=l*w,M=l*b,S=d*w,I=d*b,T=f*b,O=p*y,F=p*w,N=p*b,B=s.x,U=s.y,q=s.z;return c[0]=(1-(S+T))*B,c[1]=(E+N)*B,c[2]=(M-F)*B,c[3]=0,c[4]=(E-N)*U,c[5]=(1-(_+T))*U,c[6]=(I+O)*U,c[7]=0,c[8]=(M+F)*q,c[9]=(I-O)*q,c[10]=(1-(_+S))*q,c[11]=0,c[12]=t.x,c[13]=t.y,c[14]=t.z,c[15]=1,this},decompose:function(){var t=new k,o=new it;return function(c,l,d){var f=this.elements,p=t.set(f[0],f[1],f[2]).length(),y=t.set(f[4],f[5],f[6]).length(),w=t.set(f[8],f[9],f[10]).length();this.determinant()<0&&(p=-p),c.x=f[12],c.y=f[13],c.z=f[14],o.copy(this);var _=1/p,E=1/y,M=1/w;return o.elements[0]*=_,o.elements[1]*=_,o.elements[2]*=_,o.elements[4]*=E,o.elements[5]*=E,o.elements[6]*=E,o.elements[8]*=M,o.elements[9]*=M,o.elements[10]*=M,l.setFromRotationMatrix(o),d.x=p,d.y=y,d.z=w,this}}(),makePerspective:function(t,o,s,c,l,d){void 0===d&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var f=this.elements,y=2*l/(s-c),w=(o+t)/(o-t),b=(s+c)/(s-c),_=-(d+l)/(d-l),E=-2*d*l/(d-l);return f[0]=2*l/(o-t),f[4]=0,f[8]=w,f[12]=0,f[1]=0,f[5]=y,f[9]=b,f[13]=0,f[2]=0,f[6]=0,f[10]=_,f[14]=E,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this},makeOrthographic:function(t,o,s,c,l,d){var f=this.elements,p=1/(o-t),y=1/(s-c),w=1/(d-l),b=(o+t)*p,_=(s+c)*y,E=(d+l)*w;return f[0]=2*p,f[4]=0,f[8]=0,f[12]=-b,f[1]=0,f[5]=2*y,f[9]=0,f[13]=-_,f[2]=0,f[6]=0,f[10]=-2*w,f[14]=-E,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this},equals:function(t){for(var o=this.elements,s=t.elements,c=0;c<16;c++)if(o[c]!==s[c])return!1;return!0},fromArray:function(t,o){void 0===o&&(o=0);for(var s=0;s<16;s++)this.elements[s]=t[s+o];return this},toArray:function(t,o){void 0===t&&(t=[]),void 0===o&&(o=0);var s=this.elements;return t[o]=s[0],t[o+1]=s[1],t[o+2]=s[2],t[o+3]=s[3],t[o+4]=s[4],t[o+5]=s[5],t[o+6]=s[6],t[o+7]=s[7],t[o+8]=s[8],t[o+9]=s[9],t[o+10]=s[10],t[o+11]=s[11],t[o+12]=s[12],t[o+13]=s[13],t[o+14]=s[14],t[o+15]=s[15],t}});var It={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function ma(t){var o={};for(var s in t)for(var c in o[s]={},t[s]){var l=t[s][c];o[s][c]=l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture)?l.clone():Array.isArray(l)?l.slice():l}return o}function or(t){for(var o={},s=0;s<t.length;s++){var c=ma(t[s]);for(var l in c)o[l]=c[l]}return o}var Gn={clone:ma,merge:or},bu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function je(t,o,s){return void 0===o&&void 0===s?this.set(t):this.setRGB(t,o,s)}Object.assign(je.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,o,s){return this.r=t,this.g=o,this.b=s,this},setHSL:function(){function t(o,s,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?o+6*(s-o)*c:c<.5?s:c<2/3?o+6*(s-o)*(2/3-c):o}return function(s,c,l){if(s=yt.euclideanModulo(s,1),c=yt.clamp(c,0,1),l=yt.clamp(l,0,1),0===c)this.r=this.g=this.b=l;else{var d=l<=.5?l*(1+c):l+c-l*c,f=2*l-d;this.r=t(f,d,s+1/3),this.g=t(f,d,s),this.b=t(f,d,s-1/3)}return this}}(),setStyle:function(t){function o(_){void 0!==_&&parseFloat(_)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var s;if(s=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var c,d=s[2];switch(s[1]){case"rgb":case"rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,o(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,o(c[5]),this;break;case"hsl":case"hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var f=parseFloat(c[1])/360,p=parseInt(c[2],10)/100,y=parseInt(c[3],10)/100;return o(c[5]),this.setHSL(f,p,y)}}}else if(s=/^\#([A-Fa-f0-9]+)$/.exec(t)){var w,b=(w=s[1]).length;if(3===b)return this.r=parseInt(w.charAt(0)+w.charAt(0),16)/255,this.g=parseInt(w.charAt(1)+w.charAt(1),16)/255,this.b=parseInt(w.charAt(2)+w.charAt(2),16)/255,this;if(6===b)return this.r=parseInt(w.charAt(0)+w.charAt(1),16)/255,this.g=parseInt(w.charAt(2)+w.charAt(3),16)/255,this.b=parseInt(w.charAt(4)+w.charAt(5),16)/255,this}return t&&t.length>0&&(void 0!==(w=bu[t])?this.setHex(w):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,o){return void 0===o&&(o=2),this.r=Math.pow(t.r,o),this.g=Math.pow(t.g,o),this.b=Math.pow(t.b,o),this},copyLinearToGamma:function(t,o){void 0===o&&(o=2);var s=o>0?1/o:1;return this.r=Math.pow(t.r,s),this.g=Math.pow(t.g,s),this.b=Math.pow(t.b,s),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(o){return o<.04045?.0773993808*o:Math.pow(.9478672986*o+.0521327014,2.4)}return function(s){return this.r=t(s.r),this.g=t(s.g),this.b=t(s.b),this}}(),copyLinearToSRGB:function(){function t(o){return o<.0031308?12.92*o:1.055*Math.pow(o,.41666)-.055}return function(s){return this.r=t(s.r),this.g=t(s.g),this.b=t(s.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var f,p,o=this.r,s=this.g,c=this.b,l=Math.max(o,s,c),d=Math.min(o,s,c),y=(d+l)/2;if(d===l)f=0,p=0;else{var w=l-d;switch(p=y<=.5?w/(l+d):w/(2-l-d),l){case o:f=(s-c)/w+(s<c?6:0);break;case s:f=(c-o)/w+2;break;case c:f=(o-s)/w+4}f/=6}return t.h=f,t.s=p,t.l=y,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(o,s,c){return this.getHSL(t),t.h+=o,t.s+=s,t.l+=c,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,o){return this.r=t.r+o.r,this.g=t.g+o.g,this.b=t.b+o.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,o){return this.r+=(t.r-this.r)*o,this.g+=(t.g-this.g)*o,this.b+=(t.b-this.b)*o,this},lerpHSL:function(){var t={h:0,s:0,l:0},o={h:0,s:0,l:0};return function(c,l){this.getHSL(t),c.getHSL(o);var d=yt.lerp(t.h,o.h,l),f=yt.lerp(t.s,o.s,l),p=yt.lerp(t.l,o.l,l);return this.setHSL(d,f,p),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,o){return void 0===o&&(o=0),this.r=t[o],this.g=t[o+1],this.b=t[o+2],this},toArray:function(t,o){return void 0===t&&(t=[]),void 0===o&&(o=0),t[o]=this.r,t[o+1]=this.g,t[o+2]=this.b,t},toJSON:function(){return this.getHex()}});var Re={common:{diffuse:{value:new je(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new hr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new je(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new hr}},sprite:{diffuse:{value:new je(15658734)},opacity:{value:1},center:{value:new pe(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new hr}}},Xr={basic:{uniforms:or([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:It.meshbasic_vert,fragmentShader:It.meshbasic_frag},lambert:{uniforms:or([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.fog,Re.lights,{emissive:{value:new je(0)}}]),vertexShader:It.meshlambert_vert,fragmentShader:It.meshlambert_frag},phong:{uniforms:or([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new je(0)},specular:{value:new je(1118481)},shininess:{value:30}}]),vertexShader:It.meshphong_vert,fragmentShader:It.meshphong_frag},standard:{uniforms:or([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new je(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag},matcap:{uniforms:or([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:It.meshmatcap_vert,fragmentShader:It.meshmatcap_frag},points:{uniforms:or([Re.points,Re.fog]),vertexShader:It.points_vert,fragmentShader:It.points_frag},dashed:{uniforms:or([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:It.linedashed_vert,fragmentShader:It.linedashed_frag},depth:{uniforms:or([Re.common,Re.displacementmap]),vertexShader:It.depth_vert,fragmentShader:It.depth_frag},normal:{uniforms:or([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:It.normal_vert,fragmentShader:It.normal_frag},sprite:{uniforms:or([Re.sprite,Re.fog]),vertexShader:It.sprite_vert,fragmentShader:It.sprite_frag},background:{uniforms:{uvTransform:{value:new hr},t2D:{value:null}},vertexShader:It.background_vert,fragmentShader:It.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:It.cube_vert,fragmentShader:It.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:It.equirect_vert,fragmentShader:It.equirect_frag},distanceRGBA:{uniforms:or([Re.common,Re.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:It.distanceRGBA_vert,fragmentShader:It.distanceRGBA_frag},shadow:{uniforms:or([Re.lights,Re.fog,{color:{value:new je(0)},opacity:{value:1}}]),vertexShader:It.shadow_vert,fragmentShader:It.shadow_frag}};function Il(){var t=null,o=!1,s=null;function c(l,d){!1!==o&&(s(l,d),t.requestAnimationFrame(c))}return{start:function(){!0!==o&&null!==s&&(t.requestAnimationFrame(c),o=!0)},stop:function(){o=!1},setAnimationLoop:function(l){s=l},setContext:function(l){t=l}}}function Is(t){var o=new WeakMap;return{get:function l(p){return p.isInterleavedBufferAttribute&&(p=p.data),o.get(p)},remove:function d(p){p.isInterleavedBufferAttribute&&(p=p.data);var y=o.get(p);y&&(t.deleteBuffer(y.buffer),o.delete(p))},update:function f(p,y){p.isInterleavedBufferAttribute&&(p=p.data);var w=o.get(p);void 0===w?o.set(p,function s(p,y){var w=p.array,b=p.dynamic?35048:35044,_=t.createBuffer();t.bindBuffer(y,_),t.bufferData(y,w,b),p.onUploadCallback();var E=5126;return w instanceof Float32Array?E=5126:w instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):w instanceof Uint16Array?E=5123:w instanceof Int16Array?E=5122:w instanceof Uint32Array?E=5125:w instanceof Int32Array?E=5124:w instanceof Int8Array?E=5120:w instanceof Uint8Array&&(E=5121),{buffer:_,type:E,bytesPerElement:w.BYTES_PER_ELEMENT,version:p.version}}(p,y)):w.version<p.version&&(function c(p,y,w){var b=y.array,_=y.updateRange;t.bindBuffer(w,p),!1===y.dynamic?t.bufferData(w,b,35044):-1===_.count?t.bufferSubData(w,0,b):0===_.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(w,_.offset*b.BYTES_PER_ELEMENT,b.subarray(_.offset,_.offset+_.count)),_.count=-1)}(w.buffer,p,y),w.version=p.version)}}}function Qr(t,o,s,c,l,d){this.a=t,this.b=o,this.c=s,this.normal=c&&c.isVector3?c:new k,this.vertexNormals=Array.isArray(c)?c:[],this.color=l&&l.isColor?l:new je,this.vertexColors=Array.isArray(l)?l:[],this.materialIndex=void 0!==d?d:0}function to(t,o,s,c){this._x=t||0,this._y=o||0,this._z=s||0,this._order=c||to.DefaultOrder}function ga(){this.mask=1}Xr.physical={uniforms:or([Xr.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag},Object.assign(Qr.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var o=0,s=t.vertexNormals.length;o<s;o++)this.vertexNormals[o]=t.vertexNormals[o].clone();for(o=0,s=t.vertexColors.length;o<s;o++)this.vertexColors[o]=t.vertexColors[o].clone();return this}}),to.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],to.DefaultOrder="XYZ",Object.defineProperties(to.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(to.prototype,{isEuler:!0,set:function(t,o,s,c){return this._x=t,this._y=o,this._z=s,this._order=c||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,o,s){var c=yt.clamp,l=t.elements,d=l[0],f=l[4],p=l[8],y=l[1],w=l[5],b=l[9],_=l[2],E=l[6],M=l[10];return"XYZ"===(o=o||this._order)?(this._y=Math.asin(c(p,-1,1)),Math.abs(p)<.99999?(this._x=Math.atan2(-b,M),this._z=Math.atan2(-f,d)):(this._x=Math.atan2(E,w),this._z=0)):"YXZ"===o?(this._x=Math.asin(-c(b,-1,1)),Math.abs(b)<.99999?(this._y=Math.atan2(p,M),this._z=Math.atan2(y,w)):(this._y=Math.atan2(-_,d),this._z=0)):"ZXY"===o?(this._x=Math.asin(c(E,-1,1)),Math.abs(E)<.99999?(this._y=Math.atan2(-_,M),this._z=Math.atan2(-f,w)):(this._y=0,this._z=Math.atan2(y,d))):"ZYX"===o?(this._y=Math.asin(-c(_,-1,1)),Math.abs(_)<.99999?(this._x=Math.atan2(E,M),this._z=Math.atan2(y,d)):(this._x=0,this._z=Math.atan2(-f,w))):"YZX"===o?(this._z=Math.asin(c(y,-1,1)),Math.abs(y)<.99999?(this._x=Math.atan2(-b,w),this._y=Math.atan2(-_,d)):(this._x=0,this._y=Math.atan2(p,M))):"XZY"===o?(this._z=Math.asin(-c(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(E,w),this._y=Math.atan2(p,d)):(this._x=Math.atan2(-b,M),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+o),this._order=o,!1!==s&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new it;return function(s,c,l){return t.makeRotationFromQuaternion(s),this.setFromRotationMatrix(t,c,l)}}(),setFromVector3:function(t,o){return this.set(t.x,t.y,t.z,o||this._order)},reorder:function(){var t=new en;return function(s){return t.setFromEuler(this),this.setFromQuaternion(t,s)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,o){return void 0===t&&(t=[]),void 0===o&&(o=0),t[o]=this._x,t[o+1]=this._y,t[o+2]=this._z,t[o+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new k(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(ga.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var Nt=0;function Le(){Object.defineProperty(this,"id",{value:Nt++}),this.uuid=yt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Le.DefaultUp.clone();var t=new k,o=new to,s=new en,c=new k(1,1,1);o.onChange(function l(){s.setFromEuler(o,!1)}),s.onChange(function d(){o.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new it},normalMatrix:{value:new hr}}),this.matrix=new it,this.matrixWorld=new it,this.matrixAutoUpdate=Le.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ga,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Le.DefaultUp=new k(0,1,0),Le.DefaultMatrixAutoUpdate=!0,Le.prototype=Object.assign(Object.create(Te.prototype),{constructor:Le,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,o){this.quaternion.setFromAxisAngle(t,o)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new en;return function(s,c){return t.setFromAxisAngle(s,c),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new en;return function(s,c){return t.setFromAxisAngle(s,c),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new k(1,0,0);return function(s){return this.rotateOnAxis(t,s)}}(),rotateY:function(){var t=new k(0,1,0);return function(s){return this.rotateOnAxis(t,s)}}(),rotateZ:function(){var t=new k(0,0,1);return function(s){return this.rotateOnAxis(t,s)}}(),translateOnAxis:function(){var t=new k;return function(s,c){return t.copy(s).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(c)),this}}(),translateX:function(){var t=new k(1,0,0);return function(s){return this.translateOnAxis(t,s)}}(),translateY:function(){var t=new k(0,1,0);return function(s){return this.translateOnAxis(t,s)}}(),translateZ:function(){var t=new k(0,0,1);return function(s){return this.translateOnAxis(t,s)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new it;return function(s){return s.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new en,o=new it,s=new k,c=new k;return function(d,f,p){d.isVector3?s.copy(d):s.set(d,f,p);var y=this.parent;this.updateWorldMatrix(!0,!1),c.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?o.lookAt(c,s,this.up):o.lookAt(s,c,this.up),this.quaternion.setFromRotationMatrix(o),y&&(o.extractRotation(y.matrixWorld),t.setFromRotationMatrix(o),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var o=0;o<arguments.length;o++)this.remove(arguments[o]);return this}var s=this.children.indexOf(t);return-1!==s&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(s,1)),this},attach:function(){var t=new it;return function(s){return this.updateWorldMatrix(!0,!1),t.getInverse(this.matrixWorld),null!==s.parent&&(s.parent.updateWorldMatrix(!0,!1),t.multiply(s.parent.matrixWorld)),s.applyMatrix(t),s.updateWorldMatrix(!1,!1),this.add(s),this}}(),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,o){if(this[t]===o)return this;for(var s=0,c=this.children.length;s<c;s++){var d=this.children[s].getObjectByProperty(t,o);if(void 0!==d)return d}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new k),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new k,o=new k;return function(c){return void 0===c&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),c=new en),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,c,o),c}}(),getWorldScale:function(){var t=new k,o=new en;return function(c){return void 0===c&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),c=new k),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,o,c),c}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new k),this.updateMatrixWorld(!0);var o=this.matrixWorld.elements;return t.set(o[8],o[9],o[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var o=this.children,s=0,c=o.length;s<c;s++)o[s].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var o=this.children,s=0,c=o.length;s<c;s++)o[s].traverseVisible(t)}},traverseAncestors:function(t){var o=this.parent;null!==o&&(t(o),o.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var o=this.children,s=0,c=o.length;s<c;s++)o[s].updateMatrixWorld(t)},updateWorldMatrix:function(t,o){var s=this.parent;if(!0===t&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===o)for(var c=this.children,l=0,d=c.length;l<d;l++)c[l].updateWorldMatrix(!1,!0)},toJSON:function(t){var o=void 0===t||"string"==typeof t,s={};o&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var c={};function l(T,O){return void 0===T[O.uuid]&&(T[O.uuid]=O.toJSON(t)),O.uuid}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),!0===this.castShadow&&(c.castShadow=!0),!0===this.receiveShadow&&(c.receiveShadow=!0),!1===this.visible&&(c.visible=!1),!1===this.frustumCulled&&(c.frustumCulled=!1),0!==this.renderOrder&&(c.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),c.layers=this.layers.mask,c.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(c.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Nn&&(c.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){c.geometry=l(t.geometries,this.geometry);var d=this.geometry.parameters;if(void 0!==d&&void 0!==d.shapes){var f=d.shapes;if(Array.isArray(f))for(var p=0,y=f.length;p<y;p++)l(t.shapes,f[p]);else l(t.shapes,f)}}if(void 0!==this.material)if(Array.isArray(this.material)){var b=[];for(p=0,y=this.material.length;p<y;p++)b.push(l(t.materials,this.material[p]));c.material=b}else c.material=l(t.materials,this.material);if(this.children.length>0)for(c.children=[],p=0;p<this.children.length;p++)c.children.push(this.children[p].toJSON(t).object);if(o){var _=I(t.geometries),E=I(t.materials),M=I(t.textures),S=I(t.images);f=I(t.shapes),_.length>0&&(s.geometries=_),E.length>0&&(s.materials=E),M.length>0&&(s.textures=M),S.length>0&&(s.images=S),f.length>0&&(s.shapes=f)}return s.object=c,s;function I(T){var O=[];for(var F in T){var N=T[F];delete N.metadata,O.push(N)}return O}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,o){if(void 0===o&&(o=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===o)for(var s=0;s<t.children.length;s++)this.add(t.children[s].clone());return this}});var yh=0;function st(){Object.defineProperty(this,"id",{value:yh+=2}),this.uuid=yt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function rt(t,o,s){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=o,this.count=void 0!==t?t.length/o:0,this.normalized=!0===s,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Rs(t,o,s){rt.call(this,new Int8Array(t),o,s)}function So(t,o,s){rt.call(this,new Uint8Array(t),o,s)}function Ko(t,o,s){rt.call(this,new Uint8ClampedArray(t),o,s)}function jn(t,o,s){rt.call(this,new Int16Array(t),o,s)}function lc(t,o,s){rt.call(this,new Uint16Array(t),o,s)}function fr(t,o,s){rt.call(this,new Int32Array(t),o,s)}function Wn(t,o,s){rt.call(this,new Uint32Array(t),o,s)}function Ce(t,o,s){rt.call(this,new Float32Array(t),o,s)}function no(t,o,s){rt.call(this,new Float64Array(t),o,s)}function _u(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Oi(t){if(0===t.length)return-1/0;for(var o=t[0],s=1,c=t.length;s<c;++s)t[s]>o&&(o=t[s]);return o}st.prototype=Object.assign(Object.create(Te.prototype),{constructor:st,isGeometry:!0,applyMatrix:function(t){for(var o=(new hr).getNormalMatrix(t),s=0,c=this.vertices.length;s<c;s++)this.vertices[s].applyMatrix4(t);for(s=0,c=this.faces.length;s<c;s++){var d=this.faces[s];d.normal.applyMatrix3(o).normalize();for(var f=0,p=d.vertexNormals.length;f<p;f++)d.vertexNormals[f].applyMatrix3(o).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new it;return function(s){return t.makeRotationX(s),this.applyMatrix(t),this}}(),rotateY:function(){var t=new it;return function(s){return t.makeRotationY(s),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new it;return function(s){return t.makeRotationZ(s),this.applyMatrix(t),this}}(),translate:function(){var t=new it;return function(s,c,l){return t.makeTranslation(s,c,l),this.applyMatrix(t),this}}(),scale:function(){var t=new it;return function(s,c,l){return t.makeScale(s,c,l),this.applyMatrix(t),this}}(),lookAt:function(){var t=new Le;return function(s){t.lookAt(s),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){var o=this,s=null!==t.index?t.index.array:void 0,c=t.attributes,l=c.position.array,d=void 0!==c.normal?c.normal.array:void 0,f=void 0!==c.color?c.color.array:void 0,p=void 0!==c.uv?c.uv.array:void 0,y=void 0!==c.uv2?c.uv2.array:void 0;void 0!==y&&(this.faceVertexUvs[1]=[]);for(var w=0;w<l.length;w+=3)o.vertices.push((new k).fromArray(l,w)),void 0!==f&&o.colors.push((new je).fromArray(f,w));function b(O,F,N,B){var U=void 0===f?[]:[o.colors[O].clone(),o.colors[F].clone(),o.colors[N].clone()],Z=new Qr(O,F,N,void 0===d?[]:[(new k).fromArray(d,3*O),(new k).fromArray(d,3*F),(new k).fromArray(d,3*N)],U,B);o.faces.push(Z),void 0!==p&&o.faceVertexUvs[0].push([(new pe).fromArray(p,2*O),(new pe).fromArray(p,2*F),(new pe).fromArray(p,2*N)]),void 0!==y&&o.faceVertexUvs[1].push([(new pe).fromArray(y,2*O),(new pe).fromArray(y,2*F),(new pe).fromArray(y,2*N)])}var _=t.groups;if(_.length>0)for(w=0;w<_.length;w++)for(var E=_[w],M=E.start,I=M,T=M+E.count;I<T;I+=3)void 0!==s?b(s[I],s[I+1],s[I+2],E.materialIndex):b(I,I+1,I+2,E.materialIndex);else if(void 0!==s)for(w=0;w<s.length;w+=3)b(s[w],s[w+1],s[w+2]);else for(w=0;w<l.length/3;w+=3)b(w,w+1,w+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new k;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,o=this.boundingSphere.radius,s=0===o?1:1/o,c=new it;return c.set(s,0,0,-s*t.x,0,s,0,-s*t.y,0,0,s,-s*t.z,0,0,0,1),this.applyMatrix(c),this},computeFaceNormals:function(){for(var t=new k,o=new k,s=0,c=this.faces.length;s<c;s++){var l=this.faces[s],d=this.vertices[l.a],f=this.vertices[l.b];t.subVectors(this.vertices[l.c],f),o.subVectors(d,f),t.cross(o),t.normalize(),l.normal.copy(t)}},computeVertexNormals:function(t){var o,s,c,l,d,f;for(void 0===t&&(t=!0),f=new Array(this.vertices.length),o=0,s=this.vertices.length;o<s;o++)f[o]=new k;if(t){var p,y,b=new k,_=new k;for(c=0,l=this.faces.length;c<l;c++)p=this.vertices[(d=this.faces[c]).a],b.subVectors(this.vertices[d.c],y=this.vertices[d.b]),_.subVectors(p,y),b.cross(_),f[d.a].add(b),f[d.b].add(b),f[d.c].add(b)}else for(this.computeFaceNormals(),c=0,l=this.faces.length;c<l;c++)f[(d=this.faces[c]).a].add(d.normal),f[d.b].add(d.normal),f[d.c].add(d.normal);for(o=0,s=this.vertices.length;o<s;o++)f[o].normalize();for(c=0,l=this.faces.length;c<l;c++){var E=(d=this.faces[c]).vertexNormals;3===E.length?(E[0].copy(f[d.a]),E[1].copy(f[d.b]),E[2].copy(f[d.c])):(E[0]=f[d.a].clone(),E[1]=f[d.b].clone(),E[2]=f[d.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,o,s;for(this.computeFaceNormals(),t=0,o=this.faces.length;t<o;t++){var c=(s=this.faces[t]).vertexNormals;3===c.length?(c[0].copy(s.normal),c[1].copy(s.normal),c[2].copy(s.normal)):(c[0]=s.normal.clone(),c[1]=s.normal.clone(),c[2]=s.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,o,s,c,l;for(s=0,c=this.faces.length;s<c;s++)for((l=this.faces[s]).__originalFaceNormal?l.__originalFaceNormal.copy(l.normal):l.__originalFaceNormal=l.normal.clone(),l.__originalVertexNormals||(l.__originalVertexNormals=[]),t=0,o=l.vertexNormals.length;t<o;t++)l.__originalVertexNormals[t]?l.__originalVertexNormals[t].copy(l.vertexNormals[t]):l.__originalVertexNormals[t]=l.vertexNormals[t].clone();var d=new st;for(d.faces=this.faces,t=0,o=this.morphTargets.length;t<o;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var f=this.morphNormals[t].faceNormals,p=this.morphNormals[t].vertexNormals;for(s=0,c=this.faces.length;s<c;s++)w=new k,b={a:new k,b:new k,c:new k},f.push(w),p.push(b)}var w,b,y=this.morphNormals[t];for(d.vertices=this.morphTargets[t].vertices,d.computeFaceNormals(),d.computeVertexNormals(),s=0,c=this.faces.length;s<c;s++)b=y.vertexNormals[s],(w=y.faceNormals[s]).copy((l=this.faces[s]).normal),b.a.copy(l.vertexNormals[0]),b.b.copy(l.vertexNormals[1]),b.c.copy(l.vertexNormals[2])}for(s=0,c=this.faces.length;s<c;s++)(l=this.faces[s]).normal=l.__originalFaceNormal,l.vertexNormals=l.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ao),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Hn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,o,s){if(t&&t.isGeometry){var c,l=this.vertices.length,d=this.vertices,f=t.vertices,p=this.faces,y=t.faces,w=this.faceVertexUvs[0],b=t.faceVertexUvs[0],_=this.colors,E=t.colors;void 0===s&&(s=0),void 0!==o&&(c=(new hr).getNormalMatrix(o));for(var M=0,S=f.length;M<S;M++){var T=f[M].clone();void 0!==o&&T.applyMatrix4(o),d.push(T)}for(M=0,S=E.length;M<S;M++)_.push(E[M].clone());for(M=0,S=y.length;M<S;M++){var F,N,O=y[M],U=O.vertexNormals,q=O.vertexColors;(F=new Qr(O.a+l,O.b+l,O.c+l)).normal.copy(O.normal),void 0!==c&&F.normal.applyMatrix3(c).normalize();for(var Z=0,re=U.length;Z<re;Z++)N=U[Z].clone(),void 0!==c&&N.applyMatrix3(c).normalize(),F.vertexNormals.push(N);for(F.color.copy(O.color),Z=0,re=q.length;Z<re;Z++)F.vertexColors.push(q[Z].clone());F.materialIndex=O.materialIndex+s,p.push(F)}for(M=0,S=b.length;M<S;M++){var ne=b[M],ue=[];if(void 0!==ne){for(Z=0,re=ne.length;Z<re;Z++)ue.push(ne[Z].clone());w.push(ue)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var c,l,p,y,w,b,_,E,t={},o=[],s=[],f=Math.pow(10,4);for(p=0,y=this.vertices.length;p<y;p++)c=this.vertices[p],void 0===t[l=Math.round(c.x*f)+"_"+Math.round(c.y*f)+"_"+Math.round(c.z*f)]?(t[l]=p,o.push(this.vertices[p]),s[p]=o.length-1):s[p]=s[t[l]];var M=[];for(p=0,y=this.faces.length;p<y;p++){(w=this.faces[p]).a=s[w.a],w.b=s[w.b],w.c=s[w.c],b=[w.a,w.b,w.c];for(var S=0;S<3;S++)if(b[S]===b[(S+1)%3]){M.push(p);break}}for(p=M.length-1;p>=0;p--){var I=M[p];for(this.faces.splice(I,1),_=0,E=this.faceVertexUvs.length;_<E;_++)this.faceVertexUvs[_].splice(I,1)}var T=this.vertices.length-o.length;return this.vertices=o,T},setFromPoints:function(t){this.vertices=[];for(var o=0,s=t.length;o<s;o++){var c=t[o];this.vertices.push(new k(c.x,c.y,c.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,o=t.length,s=0;s<o;s++)t[s]._id=s;t.sort(function c(w,b){return w.materialIndex-b.materialIndex});var f,p,l=this.faceVertexUvs[0],d=this.faceVertexUvs[1];for(l&&l.length===o&&(f=[]),d&&d.length===o&&(p=[]),s=0;s<o;s++){var y=t[s]._id;f&&f.push(l[y]),p&&p.push(d[y])}f&&(this.faceVertexUvs[0]=f),p&&(this.faceVertexUvs[1]=p)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(t[s]=o[s]);return t}for(var c=[],l=0;l<this.vertices.length;l++){var d=this.vertices[l];c.push(d.x,d.y,d.z)}var f=[],p=[],y={},w=[],b={},_=[],E={};for(l=0;l<this.faces.length;l++){var M=this.faces[l],T=void 0!==this.faceVertexUvs[0][l],O=M.normal.length()>0,F=M.vertexNormals.length>0,N=1!==M.color.r||1!==M.color.g||1!==M.color.b,B=M.vertexColors.length>0,U=0;if(U=ne(U,0,0),U=ne(U,1,!0),U=ne(U,2,!1),U=ne(U,3,T),U=ne(U,4,O),U=ne(U,5,F),U=ne(U,6,N),U=ne(U,7,B),f.push(U),f.push(M.a,M.b,M.c),f.push(M.materialIndex),T){var q=this.faceVertexUvs[0][l];f.push(Q(q[0]),Q(q[1]),Q(q[2]))}if(O&&f.push(ue(M.normal)),F){var Z=M.vertexNormals;f.push(ue(Z[0]),ue(Z[1]),ue(Z[2]))}if(N&&f.push($(M.color)),B){var re=M.vertexColors;f.push($(re[0]),$(re[1]),$(re[2]))}}function ne(ae,me,xe){return xe?ae|1<<me:ae&~(1<<me)}function ue(ae){var me=ae.x.toString()+ae.y.toString()+ae.z.toString();return void 0!==y[me]||(y[me]=p.length/3,p.push(ae.x,ae.y,ae.z)),y[me]}function $(ae){var me=ae.r.toString()+ae.g.toString()+ae.b.toString();return void 0!==b[me]||(b[me]=w.length,w.push(ae.getHex())),b[me]}function Q(ae){var me=ae.x.toString()+ae.y.toString();return void 0!==E[me]||(E[me]=_.length/2,_.push(ae.x,ae.y)),E[me]}return t.data={},t.data.vertices=c,t.data.normals=p,w.length>0&&(t.data.colors=w),_.length>0&&(t.data.uvs=[_]),t.data.faces=f,t},clone:function(){return(new st).copy(this)},copy:function(t){var o,s,c,l,d,f;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var p=t.vertices;for(o=0,s=p.length;o<s;o++)this.vertices.push(p[o].clone());var y=t.colors;for(o=0,s=y.length;o<s;o++)this.colors.push(y[o].clone());var w=t.faces;for(o=0,s=w.length;o<s;o++)this.faces.push(w[o].clone());for(o=0,s=t.faceVertexUvs.length;o<s;o++){var b=t.faceVertexUvs[o];for(void 0===this.faceVertexUvs[o]&&(this.faceVertexUvs[o]=[]),c=0,l=b.length;c<l;c++){var _=b[c],E=[];for(d=0,f=_.length;d<f;d++)E.push(_[d].clone());this.faceVertexUvs[o].push(E)}}var S=t.morphTargets;for(o=0,s=S.length;o<s;o++){var I={};if(I.name=S[o].name,void 0!==S[o].vertices)for(I.vertices=[],c=0,l=S[o].vertices.length;c<l;c++)I.vertices.push(S[o].vertices[c].clone());if(void 0!==S[o].normals)for(I.normals=[],c=0,l=S[o].normals.length;c<l;c++)I.normals.push(S[o].normals[c].clone());this.morphTargets.push(I)}var T=t.morphNormals;for(o=0,s=T.length;o<s;o++){var O={};if(void 0!==T[o].vertexNormals)for(O.vertexNormals=[],c=0,l=T[o].vertexNormals.length;c<l;c++){var F=T[o].vertexNormals[c],N={};N.a=F.a.clone(),N.b=F.b.clone(),N.c=F.c.clone(),O.vertexNormals.push(N)}if(void 0!==T[o].faceNormals)for(O.faceNormals=[],c=0,l=T[o].faceNormals.length;c<l;c++)O.faceNormals.push(T[o].faceNormals[c].clone());this.morphNormals.push(O)}var B=t.skinWeights;for(o=0,s=B.length;o<s;o++)this.skinWeights.push(B[o].clone());var U=t.skinIndices;for(o=0,s=U.length;o<s;o++)this.skinIndices.push(U[o].clone());var q=t.lineDistances;for(o=0,s=q.length;o<s;o++)this.lineDistances.push(q[o]);var Z=t.boundingBox;null!==Z&&(this.boundingBox=Z.clone());var re=t.boundingSphere;return null!==re&&(this.boundingSphere=re.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(rt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(rt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,o,s){t*=this.itemSize,s*=o.itemSize;for(var c=0,l=this.itemSize;c<l;c++)this.array[t+c]=o.array[s+c];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var o=this.array,s=0,c=0,l=t.length;c<l;c++){var d=t[c];void 0===d&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",c),d=new je),o[s++]=d.r,o[s++]=d.g,o[s++]=d.b}return this},copyVector2sArray:function(t){for(var o=this.array,s=0,c=0,l=t.length;c<l;c++){var d=t[c];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",c),d=new pe),o[s++]=d.x,o[s++]=d.y}return this},copyVector3sArray:function(t){for(var o=this.array,s=0,c=0,l=t.length;c<l;c++){var d=t[c];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",c),d=new k),o[s++]=d.x,o[s++]=d.y,o[s++]=d.z}return this},copyVector4sArray:function(t){for(var o=this.array,s=0,c=0,l=t.length;c<l;c++){var d=t[c];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",c),d=new un),o[s++]=d.x,o[s++]=d.y,o[s++]=d.z,o[s++]=d.w}return this},set:function(t,o){return void 0===o&&(o=0),this.array.set(t,o),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,o){return this.array[t*this.itemSize]=o,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,o){return this.array[t*this.itemSize+1]=o,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,o){return this.array[t*this.itemSize+2]=o,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,o){return this.array[t*this.itemSize+3]=o,this},setXY:function(t,o,s){return this.array[0+(t*=this.itemSize)]=o,this.array[t+1]=s,this},setXYZ:function(t,o,s,c){return this.array[0+(t*=this.itemSize)]=o,this.array[t+1]=s,this.array[t+2]=c,this},setXYZW:function(t,o,s,c,l){return this.array[0+(t*=this.itemSize)]=o,this.array[t+1]=s,this.array[t+2]=c,this.array[t+3]=l,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(Rs.prototype=Object.create(rt.prototype)).constructor=Rs,(So.prototype=Object.create(rt.prototype)).constructor=So,(Ko.prototype=Object.create(rt.prototype)).constructor=Ko,(jn.prototype=Object.create(rt.prototype)).constructor=jn,(lc.prototype=Object.create(rt.prototype)).constructor=lc,(fr.prototype=Object.create(rt.prototype)).constructor=fr,(Wn.prototype=Object.create(rt.prototype)).constructor=Wn,(Ce.prototype=Object.create(rt.prototype)).constructor=Ce,(no.prototype=Object.create(rt.prototype)).constructor=no,Object.assign(_u.prototype,{computeGroups:function(t){for(var o,s=[],c=void 0,l=t.faces,d=0;d<l.length;d++){var f=l[d];f.materialIndex!==c&&(c=f.materialIndex,void 0!==o&&(o.count=3*d-o.start,s.push(o)),o={start:3*d,materialIndex:c})}void 0!==o&&(o.count=3*d-o.start,s.push(o)),this.groups=s},fromGeometry:function(t){var y,o=t.faces,s=t.vertices,c=t.faceVertexUvs,l=c[0]&&c[0].length>0,d=c[1]&&c[1].length>0,f=t.morphTargets,p=f.length;if(p>0){y=[];for(var w=0;w<p;w++)y[w]={name:f[w].name,data:[]};this.morphTargets.position=y}var E,b=t.morphNormals,_=b.length;if(_>0){for(E=[],w=0;w<_;w++)E[w]={name:b[w].name,data:[]};this.morphTargets.normal=E}var M=t.skinIndices,S=t.skinWeights,I=M.length===s.length,T=S.length===s.length;for(s.length>0&&0===o.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),w=0;w<o.length;w++){var O=o[w];this.vertices.push(s[O.a],s[O.b],s[O.c]);var F=O.vertexNormals;if(3===F.length)this.normals.push(F[0],F[1],F[2]);else{var N=O.normal;this.normals.push(N,N,N)}var q,B=O.vertexColors;if(3===B.length)this.colors.push(B[0],B[1],B[2]);else{var U=O.color;this.colors.push(U,U,U)}!0===l&&(void 0!==(q=c[0][w])?this.uvs.push(q[0],q[1],q[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",w),this.uvs.push(new pe,new pe,new pe))),!0===d&&(void 0!==(q=c[1][w])?this.uvs2.push(q[0],q[1],q[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",w),this.uvs2.push(new pe,new pe,new pe)));for(var Z=0;Z<p;Z++){var re=f[Z].vertices;y[Z].data.push(re[O.a],re[O.b],re[O.c])}for(Z=0;Z<_;Z++){var ne=b[Z].vertexNormals[w];E[Z].data.push(ne.a,ne.b,ne.c)}I&&this.skinIndices.push(M[O.a],M[O.b],M[O.c]),T&&this.skinWeights.push(S[O.a],S[O.b],S[O.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var wh=1;function Pe(){Object.defineProperty(this,"id",{value:wh+=2}),this.uuid=yt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function dc(t,o,s,c,l,d){st.call(this),this.type="BoxGeometry",this.parameters={width:t,height:o,depth:s,widthSegments:c,heightSegments:l,depthSegments:d},this.fromBufferGeometry(new hc(t,o,s,c,l,d)),this.mergeVertices()}function hc(t,o,s,c,l,d){Pe.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:o,depth:s,widthSegments:c,heightSegments:l,depthSegments:d};var f=this;t=t||1,o=o||1,s=s||1,c=Math.floor(c)||1,l=Math.floor(l)||1,d=Math.floor(d)||1;var p=[],y=[],w=[],b=[],_=0,E=0;function M(S,I,T,O,F,N,B,U,q,Z,re){var he,_e,ne=N/q,ue=B/Z,$=N/2,Q=B/2,ae=U/2,me=q+1,xe=Z+1,Ae=0,De=0,Fe=new k;for(_e=0;_e<xe;_e++){var Xe=_e*ue-Q;for(he=0;he<me;he++)Fe[S]=(he*ne-$)*O,Fe[I]=Xe*F,Fe[T]=ae,y.push(Fe.x,Fe.y,Fe.z),Fe[S]=0,Fe[I]=0,Fe[T]=U>0?1:-1,w.push(Fe.x,Fe.y,Fe.z),b.push(he/q),b.push(1-_e/Z),Ae+=1}for(_e=0;_e<Z;_e++)for(he=0;he<q;he++){var se=_+he+me*(_e+1),Ue=_+(he+1)+me*(_e+1),Oe=_+(he+1)+me*_e;p.push(_+he+me*_e,se,Oe),p.push(se,Ue,Oe),De+=6}f.addGroup(E,De,re),E+=De,_+=Ae}M("z","y","x",-1,-1,s,o,t,d,l,0),M("z","y","x",1,-1,s,o,-t,d,l,1),M("x","z","y",1,1,t,s,o,c,d,2),M("x","z","y",1,-1,t,s,-o,c,d,3),M("x","y","z",1,-1,t,o,s,c,l,4),M("x","y","z",-1,-1,t,o,-s,c,l,5),this.setIndex(p),this.addAttribute("position",new Ce(y,3)),this.addAttribute("normal",new Ce(w,3)),this.addAttribute("uv",new Ce(b,2))}function xu(t,o,s,c){st.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:o,widthSegments:s,heightSegments:c},this.fromBufferGeometry(new va(t,o,s,c)),this.mergeVertices()}function va(t,o,s,c){Pe.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:o,widthSegments:s,heightSegments:c};var E,M,l=(t=t||1)/2,d=(o=o||1)/2,f=Math.floor(s)||1,p=Math.floor(c)||1,y=f+1,w=p+1,b=t/f,_=o/p,S=[],I=[],T=[],O=[];for(M=0;M<w;M++){var F=M*_-d;for(E=0;E<y;E++)I.push(E*b-l,-F,0),T.push(0,0,1),O.push(E/f),O.push(1-M/p)}for(M=0;M<p;M++)for(E=0;E<f;E++){var U=E+y*(M+1),q=E+1+y*(M+1),Z=E+1+y*M;S.push(E+y*M,U,Z),S.push(U,q,Z)}this.setIndex(S),this.addAttribute("position",new Ce(I,3)),this.addAttribute("normal",new Ce(T,3)),this.addAttribute("uv",new Ce(O,2))}Pe.prototype=Object.assign(Object.create(Te.prototype),{constructor:Pe,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=Array.isArray(t)?new(Oi(t)>65535?Wn:lc)(t,1):t},addAttribute:function(t,o){return o&&o.isBufferAttribute||o&&o.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(o),this):(this.attributes[t]=o,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new rt(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,o,s){this.groups.push({start:t,count:o,materialIndex:void 0!==s?s:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,o){this.drawRange.start=t,this.drawRange.count=o},applyMatrix:function(t){var o=this.attributes.position;void 0!==o&&(t.applyToBufferAttribute(o),o.needsUpdate=!0);var s=this.attributes.normal;void 0!==s&&((new hr).getNormalMatrix(t).applyToBufferAttribute(s),s.needsUpdate=!0);var l=this.attributes.tangent;return void 0!==l&&((new hr).getNormalMatrix(t).applyToBufferAttribute(l),l.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new it;return function(s){return t.makeRotationX(s),this.applyMatrix(t),this}}(),rotateY:function(){var t=new it;return function(s){return t.makeRotationY(s),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new it;return function(s){return t.makeRotationZ(s),this.applyMatrix(t),this}}(),translate:function(){var t=new it;return function(s,c,l){return t.makeTranslation(s,c,l),this.applyMatrix(t),this}}(),scale:function(){var t=new it;return function(s,c,l){return t.makeScale(s,c,l),this.applyMatrix(t),this}}(),lookAt:function(){var t=new Le;return function(s){t.lookAt(s),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new k;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var o=t.geometry;if(t.isPoints||t.isLine){var s=new Ce(3*o.vertices.length,3),c=new Ce(3*o.colors.length,3);if(this.addAttribute("position",s.copyVector3sArray(o.vertices)),this.addAttribute("color",c.copyColorsArray(o.colors)),o.lineDistances&&o.lineDistances.length===o.vertices.length){var l=new Ce(o.lineDistances.length,1);this.addAttribute("lineDistance",l.copyArray(o.lineDistances))}null!==o.boundingSphere&&(this.boundingSphere=o.boundingSphere.clone()),null!==o.boundingBox&&(this.boundingBox=o.boundingBox.clone())}else t.isMesh&&o&&o.isGeometry&&this.fromGeometry(o);return this},setFromPoints:function(t){for(var o=[],s=0,c=t.length;s<c;s++){var l=t[s];o.push(l.x,l.y,l.z||0)}return this.addAttribute("position",new Ce(o,3)),this},updateFromObject:function(t){var c,o=t.geometry;if(t.isMesh){var s=o.__directGeometry;if(!0===o.elementsNeedUpdate&&(s=void 0,o.elementsNeedUpdate=!1),void 0===s)return this.fromGeometry(o);s.verticesNeedUpdate=o.verticesNeedUpdate,s.normalsNeedUpdate=o.normalsNeedUpdate,s.colorsNeedUpdate=o.colorsNeedUpdate,s.uvsNeedUpdate=o.uvsNeedUpdate,s.groupsNeedUpdate=o.groupsNeedUpdate,o.verticesNeedUpdate=!1,o.normalsNeedUpdate=!1,o.colorsNeedUpdate=!1,o.uvsNeedUpdate=!1,o.groupsNeedUpdate=!1,o=s}return!0===o.verticesNeedUpdate&&(void 0!==(c=this.attributes.position)&&(c.copyVector3sArray(o.vertices),c.needsUpdate=!0),o.verticesNeedUpdate=!1),!0===o.normalsNeedUpdate&&(void 0!==(c=this.attributes.normal)&&(c.copyVector3sArray(o.normals),c.needsUpdate=!0),o.normalsNeedUpdate=!1),!0===o.colorsNeedUpdate&&(void 0!==(c=this.attributes.color)&&(c.copyColorsArray(o.colors),c.needsUpdate=!0),o.colorsNeedUpdate=!1),o.uvsNeedUpdate&&(void 0!==(c=this.attributes.uv)&&(c.copyVector2sArray(o.uvs),c.needsUpdate=!0),o.uvsNeedUpdate=!1),o.lineDistancesNeedUpdate&&(void 0!==(c=this.attributes.lineDistance)&&(c.copyArray(o.lineDistances),c.needsUpdate=!0),o.lineDistancesNeedUpdate=!1),o.groupsNeedUpdate&&(o.computeGroups(t.geometry),this.groups=o.groups,o.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new _u).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var o=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new rt(o,3).copyVector3sArray(t.vertices)),t.normals.length>0){var s=new Float32Array(3*t.normals.length);this.addAttribute("normal",new rt(s,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var c=new Float32Array(3*t.colors.length);this.addAttribute("color",new rt(c,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var l=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new rt(l,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var d=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new rt(d,2).copyVector2sArray(t.uvs2))}for(var f in this.groups=t.groups,t.morphTargets){for(var p=[],y=t.morphTargets[f],w=0,b=y.length;w<b;w++){var _=y[w],E=new Ce(3*_.data.length,3);E.name=_.name,p.push(E.copyVector3sArray(_.data))}this.morphAttributes[f]=p}if(t.skinIndices.length>0){var M=new Ce(4*t.skinIndices.length,4);this.addAttribute("skinIndex",M.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var S=new Ce(4*t.skinWeights.length,4);this.addAttribute("skinWeight",S.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new Ao;return function(){null===this.boundingBox&&(this.boundingBox=new Ao);var s=this.attributes.position,c=this.morphAttributes.position;if(void 0!==s){if(this.boundingBox.setFromBufferAttribute(s),c)for(var l=0,d=c.length;l<d;l++)t.setFromBufferAttribute(c[l]),this.boundingBox.expandByPoint(t.min),this.boundingBox.expandByPoint(t.max)}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new Ao,o=new Ao,s=new k;return function(){null===this.boundingSphere&&(this.boundingSphere=new Hn);var l=this.attributes.position,d=this.morphAttributes.position;if(l){var f=this.boundingSphere.center;if(t.setFromBufferAttribute(l),d)for(var p=0,y=d.length;p<y;p++)o.setFromBufferAttribute(w=d[p]),t.expandByPoint(o.min),t.expandByPoint(o.max);t.getCenter(f);var b=0;for(p=0,y=l.count;p<y;p++)s.fromBufferAttribute(l,p),b=Math.max(b,f.distanceToSquared(s));if(d)for(p=0,y=d.length;p<y;p++)for(var w,_=0,E=(w=d[p]).count;_<E;_++)s.fromBufferAttribute(w,_),b=Math.max(b,f.distanceToSquared(s));this.boundingSphere.radius=Math.sqrt(b),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,o=this.attributes;if(o.position){var s=o.position.array;if(void 0===o.normal)this.addAttribute("normal",new rt(new Float32Array(s.length),3));else for(var c=o.normal.array,l=0,d=c.length;l<d;l++)c[l]=0;var p,y,w,f=o.normal.array,b=new k,_=new k,E=new k,M=new k,S=new k;if(t){var I=t.array;for(l=0,d=t.count;l<d;l+=3)y=3*I[l+1],w=3*I[l+2],b.fromArray(s,p=3*I[l+0]),_.fromArray(s,y),E.fromArray(s,w),M.subVectors(E,_),S.subVectors(b,_),M.cross(S),f[p]+=M.x,f[p+1]+=M.y,f[p+2]+=M.z,f[y]+=M.x,f[y+1]+=M.y,f[y+2]+=M.z,f[w]+=M.x,f[w+1]+=M.y,f[w+2]+=M.z}else for(l=0,d=s.length;l<d;l+=9)b.fromArray(s,l),_.fromArray(s,l+3),E.fromArray(s,l+6),M.subVectors(E,_),S.subVectors(b,_),M.cross(S),f[l]=M.x,f[l+1]=M.y,f[l+2]=M.z,f[l+3]=M.x,f[l+4]=M.y,f[l+5]=M.z,f[l+6]=M.x,f[l+7]=M.y,f[l+8]=M.z;this.normalizeNormals(),o.normal.needsUpdate=!0}},merge:function(t,o){if(t&&t.isBufferGeometry){void 0===o&&(o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var s=this.attributes;for(var c in s)if(void 0!==t.attributes[c])for(var d=s[c].array,f=t.attributes[c],p=f.array,y=f.itemSize*o,w=Math.min(p.length,d.length-y),b=0,_=y;b<w;b++,_++)d[_]=p[b];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new k;return function(){for(var s=this.attributes.normal,c=0,l=s.count;c<l;c++)t.x=s.getX(c),t.y=s.getY(c),t.z=s.getZ(c),t.normalize(),s.setXYZ(c,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(I,T){for(var O=I.array,F=I.itemSize,N=new O.constructor(T.length*F),B=0,U=0,q=0,Z=T.length;q<Z;q++){B=T[q]*F;for(var re=0;re<F;re++)N[U++]=O[B++]}return new rt(N,F)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var o=new Pe,s=this.index.array,c=this.attributes;for(var l in c){var f=t(c[l],s);o.addAttribute(l,f)}var p=this.morphAttributes;for(l in p){for(var y=[],w=p[l],b=0,_=w.length;b<_;b++)f=t(w[b],s),y.push(f);o.morphAttributes[l]=y}for(var E=this.groups,M=(b=0,E.length);b<M;b++){var S=E[b];o.addGroup(S.start,S.count,S.materialIndex)}return o},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(t[s]=o[s]);return t}t.data={attributes:{}};var c=this.index;null!==c&&(t.data.index={type:c.array.constructor.name,array:Array.prototype.slice.call(c.array)});var l=this.attributes;for(var s in l){var f=(d=l[s]).toJSON();""!==d.name&&(f.name=d.name),t.data.attributes[s]=f}var p={},y=!1;for(var s in this.morphAttributes){for(var w=this.morphAttributes[s],b=[],_=0,E=w.length;_<E;_++){var d;f=(d=w[_]).toJSON(),""!==d.name&&(f.name=d.name),b.push(f)}b.length>0&&(p[s]=b,y=!0)}y&&(t.data.morphAttributes=p);var M=this.groups;M.length>0&&(t.data.groups=JSON.parse(JSON.stringify(M)));var S=this.boundingSphere;return null!==S&&(t.data.boundingSphere={center:S.center.toArray(),radius:S.radius}),t},clone:function(){return(new Pe).copy(this)},copy:function(t){var o,s,c;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var l=t.index;null!==l&&this.setIndex(l.clone());var d=t.attributes;for(o in d)this.addAttribute(o,d[o].clone());var p=t.morphAttributes;for(o in p){var y=[],w=p[o];for(s=0,c=w.length;s<c;s++)y.push(w[s].clone());this.morphAttributes[o]=y}var b=t.groups;for(s=0,c=b.length;s<c;s++){var _=b[s];this.addGroup(_.start,_.count,_.materialIndex)}var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var M=t.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(dc.prototype=Object.create(st.prototype)).constructor=dc,(hc.prototype=Object.create(Pe.prototype)).constructor=hc,(xu.prototype=Object.create(st.prototype)).constructor=xu,(va.prototype=Object.create(Pe.prototype)).constructor=va;var Qw=0;function _t(){Object.defineProperty(this,"id",{value:Qw++}),this.uuid=yt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=qi,this.side=Jn,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=bo,this.opacity=1,this.transparent=!1,this.blendSrc=z,this.blendDst=Y,this.blendEquation=jr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Kn,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}_t.prototype=Object.assign(Object.create(Te.prototype),{constructor:_t,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var o in t){var s=t[o];if(void 0!==s)if("shading"!==o){var c=this[o];void 0!==c?c&&c.isColor?c.set(s):c&&c.isVector3&&s&&s.isVector3?c.copy(s):this[o]=s:console.warn("THREE."+this.type+": '"+o+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=s===Tr;else console.warn("THREE.Material: '"+o+"' parameter is undefined.")}},toJSON:function(t){var o=void 0===t||"string"==typeof t;o&&(t={textures:{},images:{}});var s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function c(f){var p=[];for(var y in f){var w=f[y];delete w.metadata,p.push(w)}return p}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearCoat&&(s.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(s.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,s.reflectivity=this.reflectivity,void 0!==this.combine&&(s.combine=this.combine),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(s.size=this.size),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==qi&&(s.blending=this.blending),!0===this.flatShading&&(s.flatShading=this.flatShading),this.side!==Jn&&(s.side=this.side),this.vertexColors!==bo&&(s.vertexColors=this.vertexColors),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(s.morphTargets=!0),!0===this.skinning&&(s.skinning=!0),!1===this.visible&&(s.visible=!1),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),o){var l=c(t.textures),d=c(t.images);l.length>0&&(s.textures=l),d.length>0&&(s.images=d)}return s},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var o=t.clippingPlanes,s=null;if(null!==o){var c=o.length;s=new Array(c);for(var l=0;l!==c;++l)s[l]=o[l].clone()}return this.clippingPlanes=s,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Jw="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Kw="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function fi(t){_t.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Jw,this.fragmentShader=Kw,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function fc(t,o){this.origin=void 0!==t?t:new k,this.direction=void 0!==o?o:new k}function Lr(t,o,s){this.a=void 0!==t?t:new k,this.b=void 0!==o?o:new k,this.c=void 0!==s?s:new k}function Ni(t){_t.call(this),this.type="MeshBasicMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Pr(t,o){Le.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Pe,this.material=void 0!==o?o:new Ni({color:16777215*Math.random()}),this.drawMode=Nn,this.updateMorphTargets()}function eb(t,o,s,c){var f,p,l=new je(0),d=0,y=null,w=0;function _(E,M){o.buffers.color.setClear(E.r,E.g,E.b,M,c)}return{getClearColor:function(){return l},setClearColor:function(E,M){l.set(E),_(l,d=void 0!==M?M:1)},getClearAlpha:function(){return d},setClearAlpha:function(E){_(l,d=E)},render:function b(E,M,S,I){var T=M.background,O=t.vr,F=O.getSession&&O.getSession();if(F&&"additive"===F.environmentBlendMode&&(T=null),null===T?(_(l,d),y=null,w=0):T&&T.isColor&&(_(T,1),I=!0,y=null,w=0),(t.autoClear||I)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),T&&(T.isCubeTexture||T.isWebGLRenderTargetCube)){void 0===p&&((p=new Pr(new hc(1,1,1),new fi({type:"BackgroundCubeMaterial",uniforms:ma(Xr.cube.uniforms),vertexShader:Xr.cube.vertexShader,fragmentShader:Xr.cube.fragmentShader,side:bt,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),p.geometry.removeAttribute("uv"),p.onBeforeRender=function(B,U,q){this.matrixWorld.copyPosition(q.matrixWorld)},Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.tCube.value}}),s.update(p));var N=T.isWebGLRenderTargetCube?T.texture:T;p.material.uniforms.tCube.value=N,p.material.uniforms.tFlip.value=T.isWebGLRenderTargetCube?1:-1,(y!==T||w!==N.version)&&(p.material.needsUpdate=!0,y=T,w=N.version),E.unshift(p,p.geometry,p.material,0,0,null)}else T&&T.isTexture&&(void 0===f&&((f=new Pr(new va(2,2),new fi({type:"BackgroundMaterial",uniforms:ma(Xr.background.uniforms),vertexShader:Xr.background.vertexShader,fragmentShader:Xr.background.fragmentShader,side:Jn,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=T,!0===T.matrixAutoUpdate&&T.updateMatrix(),f.material.uniforms.uvTransform.value.copy(T.matrix),(y!==T||w!==T.version)&&(f.material.needsUpdate=!0,y=T,w=T.version),E.unshift(f,f.geometry,f.material,0,0,null))}}}function tb(t,o,s,c){var l;this.setMode=function d(y){l=y},this.render=function f(y,w){t.drawArrays(l,y,w),s.update(w,l)},this.renderInstances=function p(y,w,b){var _;if(c.isWebGL2)_=t;else if(null===(_=o.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[c.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](l,w,b,y.maxInstancedCount),s.update(b,l,y.maxInstancedCount)}}function nb(t,o,s){var c;function d(q){if("highp"===q){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";q="mediump"}return"mediump"===q&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var f=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext,p=void 0!==s.precision?s.precision:"highp",y=d(p);y!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",y,"instead."),p=y);var w=!0===s.logarithmicDepthBuffer,b=t.getParameter(34930),_=t.getParameter(35660),E=t.getParameter(3379),M=t.getParameter(34076),S=t.getParameter(34921),I=t.getParameter(36347),T=t.getParameter(36348),O=t.getParameter(36349),F=_>0,N=f||!!o.get("OES_texture_float");return{isWebGL2:f,getMaxAnisotropy:function l(){if(void 0!==c)return c;var q=o.get("EXT_texture_filter_anisotropic");return c=null!==q?t.getParameter(q.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:p,logarithmicDepthBuffer:w,maxTextures:b,maxVertexTextures:_,maxTextureSize:E,maxCubemapSize:M,maxAttributes:S,maxVertexUniforms:I,maxVaryings:T,maxFragmentUniforms:O,vertexTextures:F,floatFragmentTextures:N,floatVertexTextures:F&&N,maxSamples:f?t.getParameter(36183):0}}function Bp(){var t=this,o=null,s=0,c=!1,l=!1,d=new Qe,f=new hr,p={value:null,needsUpdate:!1};function y(){p.value!==o&&(p.value=o,p.needsUpdate=s>0),t.numPlanes=s,t.numIntersection=0}function w(b,_,E,M){var S=null!==b?b.length:0,I=null;if(0!==S){if(I=p.value,!0!==M||null===I){var T=E+4*S,O=_.matrixWorldInverse;f.getNormalMatrix(O),(null===I||I.length<T)&&(I=new Float32Array(T));for(var F=0,N=E;F!==S;++F,N+=4)d.copy(b[F]).applyMatrix4(O,f),d.normal.toArray(I,N),I[N+3]=d.constant}p.value=I,p.needsUpdate=!0}return t.numPlanes=S,I}this.uniform=p,this.numPlanes=0,this.numIntersection=0,this.init=function(b,_,E){var M=0!==b.length||_||0!==s||c;return c=_,o=w(b,E,0),s=b.length,M},this.beginShadows=function(){l=!0,w(null)},this.endShadows=function(){l=!1,y()},this.setState=function(b,_,E,M,S,I){if(!c||null===b||0===b.length||l&&!E)l?w(null):y();else{var T=l?0:s,O=4*T,F=S.clippingState||null;p.value=F,F=w(b,M,O,I);for(var N=0;N!==O;++N)F[N]=o[N];S.clippingState=F,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=T}}}function Up(t){var o={};return{get:function(s){if(void 0!==o[s])return o[s];var c;switch(s){case"WEBGL_depth_texture":c=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":c=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":c=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":c=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:c=t.getExtension(s)}return null===c&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),o[s]=c,c}}}function rb(t,o,s){var c={},l={};function d(w){var b=w.target,_=c[b.id];for(var E in null!==_.index&&o.remove(_.index),_.attributes)o.remove(_.attributes[E]);b.removeEventListener("dispose",d),delete c[b.id];var M=l[_.id];M&&(o.remove(M),delete l[_.id]),s.memory.geometries--}return{get:function f(w,b){var _=c[b.id];return _||(b.addEventListener("dispose",d),b.isBufferGeometry?_=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new Pe).setFromObject(w)),_=b._bufferGeometry),c[b.id]=_,s.memory.geometries++,_)},update:function p(w){var b=w.index,_=w.attributes;for(var E in null!==b&&o.update(b,34963),_)o.update(_[E],34962);var M=w.morphAttributes;for(var E in M)for(var S=M[E],I=0,T=S.length;I<T;I++)o.update(S[I],34962)},getWireframeAttribute:function y(w){var b=l[w.id];if(b)return b;var S,_=[],E=w.index,M=w.attributes;if(null!==E)for(var I=0,T=(S=E.array).length;I<T;I+=3)_.push(O=S[I+0],F=S[I+1],F,N=S[I+2],N,O);else for(I=0,T=(S=M.position.array).length/3-1;I<T;I+=3){var O,F,N;_.push(O=I+0,F=I+1,F,N=I+2,N,O)}return b=new(Oi(_)>65535?Wn:lc)(_,1),o.update(b,34963),l[w.id]=b,b}}}function ib(t,o,s,c){var l,f,p;this.setMode=function d(_){l=_},this.setIndex=function y(_){f=_.type,p=_.bytesPerElement},this.render=function w(_,E){t.drawElements(l,E,f,_*p),s.update(E,l)},this.renderInstances=function b(_,E,M){var S;if(c.isWebGL2)S=t;else if(null===(S=o.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");S[c.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](l,M,f,E*p,_.maxInstancedCount),s.update(M,l,_.maxInstancedCount)}}function ob(t){var s={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:s,programs:null,autoReset:!0,reset:function l(){s.frame++,s.calls=0,s.triangles=0,s.points=0,s.lines=0},update:function c(d,f,p){switch(p=p||1,s.calls++,f){case 4:s.triangles+=p*(d/3);break;case 5:case 6:s.triangles+=p*(d-2);break;case 1:s.lines+=p*(d/2);break;case 3:s.lines+=p*(d-1);break;case 2:s.lines+=p*d;break;case 0:s.points+=p*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",f)}}}}function ya(t,o){return Math.abs(o[1])-Math.abs(t[1])}function Ls(t){var o={},s=new Float32Array(8);return{update:function c(l,d,f,p){var y=l.morphTargetInfluences,w=y.length,b=o[d.id];if(void 0===b){b=[];for(var _=0;_<w;_++)b[_]=[_,0];o[d.id]=b}var E=f.morphTargets&&d.morphAttributes.position,M=f.morphNormals&&d.morphAttributes.normal;for(_=0;_<w;_++)0!==(S=b[_])[1]&&(E&&d.removeAttribute("morphTarget"+_),M&&d.removeAttribute("morphNormal"+_));for(_=0;_<w;_++)(S=b[_])[0]=_,S[1]=y[_];for(b.sort(ya),_=0;_<8;_++){var S;if(S=b[_]){var I=S[0],T=S[1];if(T){E&&d.addAttribute("morphTarget"+_,E[I]),M&&d.addAttribute("morphNormal"+_,M[I]),s[_]=T;continue}}s[_]=0}p.getUniforms().setValue(t,"morphTargetInfluences",s)}}}function sb(t,o){var s={};return{update:function c(d){var f=o.render.frame,p=d.geometry,y=t.get(d,p);return s[y.id]!==f&&(p.isGeometry&&y.updateFromObject(d),t.update(y),s[y.id]=f),y},dispose:function l(){s={}}}}function Ps(t,o,s,c,l,d,f,p,y,w){vn.call(this,t=void 0!==t?t:[],o=void 0!==o?o:qo,s,c,l,d,f=void 0!==f?f:rr,p,y,w),this.flipY=!1}function kn(t,o,s,c){vn.call(this,null),this.image={data:t,width:o,height:s,depth:c},this.magFilter=St,this.minFilter=St,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1}function es(t,o,s,c){vn.call(this,null),this.image={data:t,width:o,height:s,depth:c},this.magFilter=St,this.minFilter=St,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1}(fi.prototype=Object.create(_t.prototype)).constructor=fi,fi.prototype.isShaderMaterial=!0,fi.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ma(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},fi.prototype.toJSON=function(t){var o=_t.prototype.toJSON.call(this,t);for(var s in o.uniforms={},this.uniforms){var l=this.uniforms[s].value;o.uniforms[s]=l&&l.isTexture?{type:"t",value:l.toJSON(t).uuid}:l&&l.isColor?{type:"c",value:l.getHex()}:l&&l.isVector2?{type:"v2",value:l.toArray()}:l&&l.isVector3?{type:"v3",value:l.toArray()}:l&&l.isVector4?{type:"v4",value:l.toArray()}:l&&l.isMatrix3?{type:"m3",value:l.toArray()}:l&&l.isMatrix4?{type:"m4",value:l.toArray()}:{value:l}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;var d={};for(var f in this.extensions)!0===this.extensions[f]&&(d[f]=!0);return Object.keys(d).length>0&&(o.extensions=d),o},Object.assign(fc.prototype,{set:function(t,o){return this.origin.copy(t),this.direction.copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,o){return void 0===o&&(console.warn("THREE.Ray: .at() target is now required"),o=new k),o.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new k;return function(s){return this.origin.copy(this.at(s,t)),this}}(),closestPointToPoint:function(t,o){void 0===o&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),o=new k),o.subVectors(t,this.origin);var s=o.dot(this.direction);return s<0?o.copy(this.origin):o.copy(this.direction).multiplyScalar(s).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new k;return function(s){var c=t.subVectors(s,this.origin).dot(this.direction);return c<0?this.origin.distanceToSquared(s):(t.copy(this.direction).multiplyScalar(c).add(this.origin),t.distanceToSquared(s))}}(),distanceSqToSegment:function(){var t=new k,o=new k,s=new k;return function(l,d,f,p){t.copy(l).add(d).multiplyScalar(.5),o.copy(d).sub(l).normalize(),s.copy(this.origin).sub(t);var S,I,T,O,y=.5*l.distanceTo(d),w=-this.direction.dot(o),b=s.dot(this.direction),_=-s.dot(o),E=s.lengthSq(),M=Math.abs(1-w*w);if(M>0)if(I=w*b-_,O=y*M,(S=w*_-b)>=0)if(I>=-O)if(I<=O){var F=1/M;T=(S*=F)*(S+w*(I*=F)+2*b)+I*(w*S+I+2*_)+E}else I=y,T=-(S=Math.max(0,-(w*I+b)))*S+I*(I+2*_)+E;else I=-y,T=-(S=Math.max(0,-(w*I+b)))*S+I*(I+2*_)+E;else I<=-O?T=-(S=Math.max(0,-(-w*y+b)))*S+(I=S>0?-y:Math.min(Math.max(-y,-_),y))*(I+2*_)+E:I<=O?(S=0,T=(I=Math.min(Math.max(-y,-_),y))*(I+2*_)+E):T=-(S=Math.max(0,-(w*y+b)))*S+(I=S>0?y:Math.min(Math.max(-y,-_),y))*(I+2*_)+E;else I=w>0?-y:y,T=-(S=Math.max(0,-(w*I+b)))*S+I*(I+2*_)+E;return f&&f.copy(this.direction).multiplyScalar(S).add(this.origin),p&&p.copy(o).multiplyScalar(I).add(t),T}}(),intersectSphere:function(){var t=new k;return function(s,c){t.subVectors(s.center,this.origin);var l=t.dot(this.direction),d=t.dot(t)-l*l,f=s.radius*s.radius;if(d>f)return null;var p=Math.sqrt(f-d),y=l-p,w=l+p;return y<0&&w<0?null:this.at(y<0?w:y,c)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var o=t.normal.dot(this.direction);if(0===o)return 0===t.distanceToPoint(this.origin)?0:null;var s=-(this.origin.dot(t.normal)+t.constant)/o;return s>=0?s:null},intersectPlane:function(t,o){var s=this.distanceToPlane(t);return null===s?null:this.at(s,o)},intersectsPlane:function(t){var o=t.distanceToPoint(this.origin);return 0===o||t.normal.dot(this.direction)*o<0},intersectBox:function(t,o){var s,c,l,d,f,p,y=1/this.direction.x,w=1/this.direction.y,b=1/this.direction.z,_=this.origin;return y>=0?(s=(t.min.x-_.x)*y,c=(t.max.x-_.x)*y):(s=(t.max.x-_.x)*y,c=(t.min.x-_.x)*y),w>=0?(l=(t.min.y-_.y)*w,d=(t.max.y-_.y)*w):(l=(t.max.y-_.y)*w,d=(t.min.y-_.y)*w),s>d||l>c||((l>s||s!=s)&&(s=l),(d<c||c!=c)&&(c=d),b>=0?(f=(t.min.z-_.z)*b,p=(t.max.z-_.z)*b):(f=(t.max.z-_.z)*b,p=(t.min.z-_.z)*b),s>p||f>c)||((f>s||s!=s)&&(s=f),(p<c||c!=c)&&(c=p),c<0)?null:this.at(s>=0?s:c,o)},intersectsBox:function(){var t=new k;return function(s){return null!==this.intersectBox(s,t)}}(),intersectTriangle:function(){var t=new k,o=new k,s=new k,c=new k;return function(d,f,p,y,w){o.subVectors(f,d),s.subVectors(p,d),c.crossVectors(o,s);var _,b=this.direction.dot(c);if(b>0){if(y)return null;_=1}else{if(!(b<0))return null;_=-1,b=-b}t.subVectors(this.origin,d);var E=_*this.direction.dot(s.crossVectors(t,s));if(E<0)return null;var M=_*this.direction.dot(o.cross(t));if(M<0||E+M>b)return null;var S=-_*t.dot(c);return S<0?null:this.at(S/b,w)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(Lr,{getNormal:function(){var t=new k;return function(s,c,l,d){void 0===d&&(console.warn("THREE.Triangle: .getNormal() target is now required"),d=new k),d.subVectors(l,c),t.subVectors(s,c),d.cross(t);var f=d.lengthSq();return f>0?d.multiplyScalar(1/Math.sqrt(f)):d.set(0,0,0)}}(),getBarycoord:function(){var t=new k,o=new k,s=new k;return function(l,d,f,p,y){t.subVectors(p,d),o.subVectors(f,d),s.subVectors(l,d);var w=t.dot(t),b=t.dot(o),_=t.dot(s),E=o.dot(o),M=o.dot(s),S=w*E-b*b;if(void 0===y&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),y=new k),0===S)return y.set(-2,-1,-1);var I=1/S,T=(E*_-b*M)*I,O=(w*M-b*_)*I;return y.set(1-T-O,O,T)}}(),containsPoint:function(){var t=new k;return function(s,c,l,d){return Lr.getBarycoord(s,c,l,d,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:function(){var t=new k;return function(s,c,l,d,f,p,y,w){return this.getBarycoord(s,c,l,d,t),w.set(0,0),w.addScaledVector(f,t.x),w.addScaledVector(p,t.y),w.addScaledVector(y,t.z),w}}(),isFrontFacing:function(){var t=new k,o=new k;return function(c,l,d,f){return t.subVectors(d,l),o.subVectors(c,l),t.cross(o).dot(f)<0}}()}),Object.assign(Lr.prototype,{set:function(t,o,s){return this.a.copy(t),this.b.copy(o),this.c.copy(s),this},setFromPointsAndIndices:function(t,o,s,c){return this.a.copy(t[o]),this.b.copy(t[s]),this.c.copy(t[c]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new k,o=new k;return function(){return t.subVectors(this.c,this.b),o.subVectors(this.a,this.b),.5*t.cross(o).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new k),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Lr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new k),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,o){return Lr.getBarycoord(t,this.a,this.b,this.c,o)},getUV:function(t,o,s,c,l){return Lr.getUV(t,this.a,this.b,this.c,o,s,c,l)},containsPoint:function(t){return Lr.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Lr.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new k,o=new k,s=new k,c=new k,l=new k,d=new k;return function(p,y){void 0===y&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),y=new k);var E,M,w=this.a,b=this.b,_=this.c;t.subVectors(b,w),o.subVectors(_,w),c.subVectors(p,w);var S=t.dot(c),I=o.dot(c);if(S<=0&&I<=0)return y.copy(w);l.subVectors(p,b);var T=t.dot(l),O=o.dot(l);if(T>=0&&O<=T)return y.copy(b);var F=S*O-T*I;if(F<=0&&S>=0&&T<=0)return E=S/(S-T),y.copy(w).addScaledVector(t,E);d.subVectors(p,_);var N=t.dot(d),B=o.dot(d);if(B>=0&&N<=B)return y.copy(_);var U=N*I-S*B;if(U<=0&&I>=0&&B<=0)return M=I/(I-B),y.copy(w).addScaledVector(o,M);var q=T*B-N*O;if(q<=0&&O-T>=0&&N-B>=0)return s.subVectors(_,b),M=(O-T)/(O-T+(N-B)),y.copy(b).addScaledVector(s,M);var Z=1/(q+U+F);return E=U*Z,M=F*Z,y.copy(w).addScaledVector(t,E).addScaledVector(o,M)}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),(Ni.prototype=Object.create(_t.prototype)).constructor=Ni,Ni.prototype.isMeshBasicMaterial=!0,Ni.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Pr.prototype=Object.assign(Object.create(Le.prototype),{constructor:Pr,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return Le.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var o,s,c,t=this.geometry;if(t.isBufferGeometry){var l=t.morphAttributes,d=Object.keys(l);if(d.length>0){var f=l[d[0]];if(void 0!==f)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},o=0,s=f.length;o<s;o++)c=f[o].name||String(o),this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}else{var p=t.morphTargets;void 0!==p&&p.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var t=new it,o=new fc,s=new Hn,c=new k,l=new k,d=new k,f=new k,p=new k,y=new k,w=new k,b=new k,_=new k,E=new pe,M=new pe,S=new pe,I=new k,T=new k;function O(N,B,U,q,Z,re,ne,ue){if(null===(B.side===bt?q.intersectTriangle(ne,re,Z,!0,ue):q.intersectTriangle(Z,re,ne,B.side!==xn,ue)))return null;T.copy(ue),T.applyMatrix4(N.matrixWorld);var Q=U.ray.origin.distanceTo(T);return Q<U.near||Q>U.far?null:{distance:Q,point:T.clone(),object:N}}function F(N,B,U,q,Z,re,ne,ue,$,Q){c.fromBufferAttribute(Z,ue),l.fromBufferAttribute(Z,$),d.fromBufferAttribute(Z,Q);var ae=N.morphTargetInfluences;if(B.morphTargets&&re&&ae){w.set(0,0,0),b.set(0,0,0),_.set(0,0,0);for(var me=0,xe=re.length;me<xe;me++){var Ae=ae[me],De=re[me];0!==Ae&&(f.fromBufferAttribute(De,ue),p.fromBufferAttribute(De,$),y.fromBufferAttribute(De,Q),w.addScaledVector(f.sub(c),Ae),b.addScaledVector(p.sub(l),Ae),_.addScaledVector(y.sub(d),Ae))}c.add(w),l.add(b),d.add(_)}var he=O(N,B,U,q,c,l,d,I);if(he){ne&&(E.fromBufferAttribute(ne,ue),M.fromBufferAttribute(ne,$),S.fromBufferAttribute(ne,Q),he.uv=Lr.getUV(I,c,l,d,E,M,S,new pe));var _e=new Qr(ue,$,Q);Lr.getNormal(c,l,d,_e.normal),he.face=_e}return he}return function(B,U){var ne,q=this.geometry,Z=this.material,re=this.matrixWorld;if(void 0!==Z&&(null===q.boundingSphere&&q.computeBoundingSphere(),s.copy(q.boundingSphere),s.applyMatrix4(re),!1!==B.ray.intersectsSphere(s)&&(t.getInverse(re),o.copy(B.ray).applyMatrix4(t),null===q.boundingBox||!1!==o.intersectsBox(q.boundingBox))))if(q.isBufferGeometry){var ue,$,Q,_e,Fe,Xe,Ke,ut,se,ae=q.index,me=q.attributes.position,xe=q.morphAttributes.position,Ae=q.attributes.uv,De=q.groups,he=q.drawRange;if(null!==ae)if(Array.isArray(Z))for(_e=0,Xe=De.length;_e<Xe;_e++)for(se=Z[(ut=De[_e]).materialIndex],Fe=Math.max(ut.start,he.start),Ke=Math.min(ut.start+ut.count,he.start+he.count);Fe<Ke;Fe+=3)ue=ae.getX(Fe),$=ae.getX(Fe+1),Q=ae.getX(Fe+2),(ne=F(this,se,B,o,me,xe,Ae,ue,$,Q))&&(ne.faceIndex=Math.floor(Fe/3),ne.face.materialIndex=ut.materialIndex,U.push(ne));else for(_e=Math.max(0,he.start),Xe=Math.min(ae.count,he.start+he.count);_e<Xe;_e+=3)ue=ae.getX(_e),$=ae.getX(_e+1),Q=ae.getX(_e+2),(ne=F(this,Z,B,o,me,xe,Ae,ue,$,Q))&&(ne.faceIndex=Math.floor(_e/3),U.push(ne));else if(void 0!==me)if(Array.isArray(Z))for(_e=0,Xe=De.length;_e<Xe;_e++)for(se=Z[(ut=De[_e]).materialIndex],Fe=Math.max(ut.start,he.start),Ke=Math.min(ut.start+ut.count,he.start+he.count);Fe<Ke;Fe+=3)(ne=F(this,se,B,o,me,xe,Ae,ue=Fe,$=Fe+1,Q=Fe+2))&&(ne.faceIndex=Math.floor(Fe/3),ne.face.materialIndex=ut.materialIndex,U.push(ne));else for(_e=Math.max(0,he.start),Xe=Math.min(me.count,he.start+he.count);_e<Xe;_e+=3)(ne=F(this,Z,B,o,me,xe,Ae,ue=_e,$=_e+1,Q=_e+2))&&(ne.faceIndex=Math.floor(_e/3),U.push(ne))}else if(q.isGeometry){var et,lt,Gt,Se,j=Array.isArray(Z),V=q.vertices,ge=q.faces,pt=q.faceVertexUvs[0];pt.length>0&&(Se=pt);for(var $e=0,We=ge.length;$e<We;$e++){var Dt=ge[$e],Mt=j?Z[Dt.materialIndex]:Z;if(void 0!==Mt&&(ne=O(this,Mt,B,o,et=V[Dt.a],lt=V[Dt.b],Gt=V[Dt.c],I))){if(Se&&Se[$e]){var Pt=Se[$e];E.copy(Pt[0]),M.copy(Pt[1]),S.copy(Pt[2]),ne.uv=Lr.getUV(I,et,lt,Gt,E,M,S,new pe)}ne.face=Dt,ne.faceIndex=$e,U.push(ne)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Ps.prototype=Object.create(vn.prototype)).constructor=Ps,Ps.prototype.isCubeTexture=!0,Object.defineProperty(Ps.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),(kn.prototype=Object.create(vn.prototype)).constructor=kn,kn.prototype.isDataTexture2DArray=!0,(es.prototype=Object.create(vn.prototype)).constructor=es,es.prototype.isDataTexture3D=!0;var pi=new vn,Vp=new kn,Hp=new es,bh=new Ps,_h=[],Rl=[],xh=new Float32Array(16),Ll=new Float32Array(9),Pl=new Float32Array(4);function wa(t,o,s){var c=t[0];if(c<=0||c>0)return t;var l=o*s,d=_h[l];if(void 0===d&&(d=new Float32Array(l),_h[l]=d),0!==o){c.toArray(d,0);for(var f=1,p=0;f!==o;++f)t[f].toArray(d,p+=s)}return d}function mi(t,o){if(t.length!==o.length)return!1;for(var s=0,c=t.length;s<c;s++)if(t[s]!==o[s])return!1;return!0}function Jr(t,o){for(var s=0,c=o.length;s<c;s++)t[s]=o[s]}function Eu(t,o){var s=Rl[o];void 0===s&&(s=new Int32Array(o),Rl[o]=s);for(var c=0;c!==o;++c)s[c]=t.allocateTextureUnit();return s}function Mu(t,o){var s=this.cache;s[0]!==o&&(t.uniform1f(this.addr,o),s[0]=o)}function pc(t,o){var s=this.cache;if(void 0!==o.x)(s[0]!==o.x||s[1]!==o.y)&&(t.uniform2f(this.addr,o.x,o.y),s[0]=o.x,s[1]=o.y);else{if(mi(s,o))return;t.uniform2fv(this.addr,o),Jr(s,o)}}function zp(t,o){var s=this.cache;if(void 0!==o.x)(s[0]!==o.x||s[1]!==o.y||s[2]!==o.z)&&(t.uniform3f(this.addr,o.x,o.y,o.z),s[0]=o.x,s[1]=o.y,s[2]=o.z);else if(void 0!==o.r)(s[0]!==o.r||s[1]!==o.g||s[2]!==o.b)&&(t.uniform3f(this.addr,o.r,o.g,o.b),s[0]=o.r,s[1]=o.g,s[2]=o.b);else{if(mi(s,o))return;t.uniform3fv(this.addr,o),Jr(s,o)}}function ab(t,o){var s=this.cache;if(void 0!==o.x)(s[0]!==o.x||s[1]!==o.y||s[2]!==o.z||s[3]!==o.w)&&(t.uniform4f(this.addr,o.x,o.y,o.z,o.w),s[0]=o.x,s[1]=o.y,s[2]=o.z,s[3]=o.w);else{if(mi(s,o))return;t.uniform4fv(this.addr,o),Jr(s,o)}}function cb(t,o){var s=this.cache,c=o.elements;if(void 0===c){if(mi(s,o))return;t.uniformMatrix2fv(this.addr,!1,o),Jr(s,o)}else{if(mi(s,c))return;Pl.set(c),t.uniformMatrix2fv(this.addr,!1,Pl),Jr(s,c)}}function ub(t,o){var s=this.cache,c=o.elements;if(void 0===c){if(mi(s,o))return;t.uniformMatrix3fv(this.addr,!1,o),Jr(s,o)}else{if(mi(s,c))return;Ll.set(c),t.uniformMatrix3fv(this.addr,!1,Ll),Jr(s,c)}}function Mv(t,o){var s=this.cache,c=o.elements;if(void 0===c){if(mi(s,o))return;t.uniformMatrix4fv(this.addr,!1,o),Jr(s,o)}else{if(mi(s,c))return;xh.set(c),t.uniformMatrix4fv(this.addr,!1,xh),Jr(s,c)}}function Av(t,o,s){var c=this.cache,l=s.allocateTextureUnit();c[0]!==l&&(t.uniform1i(this.addr,l),c[0]=l),s.safeSetTexture2D(o||pi,l)}function lb(t,o,s){var c=this.cache,l=s.allocateTextureUnit();c[0]!==l&&(t.uniform1i(this.addr,l),c[0]=l),s.setTexture2DArray(o||Vp,l)}function Gp(t,o,s){var c=this.cache,l=s.allocateTextureUnit();c[0]!==l&&(t.uniform1i(this.addr,l),c[0]=l),s.setTexture3D(o||Hp,l)}function Eh(t,o,s){var c=this.cache,l=s.allocateTextureUnit();c[0]!==l&&(t.uniform1i(this.addr,l),c[0]=l),s.safeSetTextureCube(o||bh,l)}function Cv(t,o){var s=this.cache;s[0]!==o&&(t.uniform1i(this.addr,o),s[0]=o)}function Mh(t,o){var s=this.cache;mi(s,o)||(t.uniform2iv(this.addr,o),Jr(s,o))}function db(t,o){var s=this.cache;mi(s,o)||(t.uniform3iv(this.addr,o),Jr(s,o))}function hb(t,o){var s=this.cache;mi(s,o)||(t.uniform4iv(this.addr,o),Jr(s,o))}function jp(t,o){t.uniform1fv(this.addr,o)}function Wp(t,o){t.uniform1iv(this.addr,o)}function Dv(t,o){t.uniform2iv(this.addr,o)}function Tv(t,o){t.uniform3iv(this.addr,o)}function Iv(t,o){t.uniform4iv(this.addr,o)}function $p(t,o){var s=wa(o,this.size,2);t.uniform2fv(this.addr,s)}function Rv(t,o){var s=wa(o,this.size,3);t.uniform3fv(this.addr,s)}function qp(t,o){var s=wa(o,this.size,4);t.uniform4fv(this.addr,s)}function Lv(t,o){var s=wa(o,this.size,4);t.uniformMatrix2fv(this.addr,!1,s)}function fb(t,o){var s=wa(o,this.size,9);t.uniformMatrix3fv(this.addr,!1,s)}function Pv(t,o){var s=wa(o,this.size,16);t.uniformMatrix4fv(this.addr,!1,s)}function ba(t,o,s){var c=o.length,l=Eu(s,c);t.uniform1iv(this.addr,l);for(var d=0;d!==c;++d)s.safeSetTexture2D(o[d]||pi,l[d])}function Zp(t,o,s){var c=o.length,l=Eu(s,c);t.uniform1iv(this.addr,l);for(var d=0;d!==c;++d)s.safeSetTextureCube(o[d]||bh,l[d])}function Nv(t,o,s){this.id=t,this.addr=s,this.cache=[],this.setValue=function Sv(t){switch(t){case 5126:return Mu;case 35664:return pc;case 35665:return zp;case 35666:return ab;case 35674:return cb;case 35675:return ub;case 35676:return Mv;case 35678:case 36198:return Av;case 35679:return Gp;case 35680:return Eh;case 36289:return lb;case 5124:case 35670:return Cv;case 35667:case 35671:return Mh;case 35668:case 35672:return db;case 35669:case 35673:return hb}}(o.type)}function Ah(t,o,s){this.id=t,this.addr=s,this.cache=[],this.size=o.size,this.setValue=function Ov(t){switch(t){case 5126:return jp;case 35664:return $p;case 35665:return Rv;case 35666:return qp;case 35674:return Lv;case 35675:return fb;case 35676:return Pv;case 35678:return ba;case 35680:return Zp;case 5124:case 35670:return Wp;case 35667:case 35671:return Dv;case 35668:case 35672:return Tv;case 35669:case 35673:return Iv}}(o.type)}function Ch(t){this.id=t,this.seq=[],this.map={}}Ah.prototype.updateCache=function(t){var o=this.cache;t instanceof Float32Array&&o.length!==t.length&&(this.cache=new Float32Array(t.length)),Jr(o,t)},Ch.prototype.setValue=function(t,o,s){for(var c=this.seq,l=0,d=c.length;l!==d;++l){var f=c[l];f.setValue(t,o[f.id],s)}};var Sh=/([\w\d_]+)(\])?(\[|\.)?/g;function Ol(t,o){t.seq.push(o),t.map[o.id]=o}function Fv(t,o,s){var c=t.name,l=c.length;for(Sh.lastIndex=0;;){var d=Sh.exec(c),p=d[1],w=d[3];if("]"===d[2]&&(p|=0),void 0===w||"["===w&&Sh.lastIndex+2===l){Ol(s,void 0===w?new Nv(p,t,o):new Ah(p,t,o));break}var _=s.map[p];void 0===_&&Ol(s,_=new Ch(p)),s=_}}function xr(t,o){this.seq=[],this.map={};for(var s=t.getProgramParameter(o,35718),c=0;c<s;++c){var l=t.getActiveUniform(o,c);Fv(l,t.getUniformLocation(o,l.name),this)}}function Dh(t,o,s,c){var l=t.createShader(o);return t.shaderSource(l,s),t.compileShader(l),!0===c&&(!1===t.getShaderParameter(l,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(l)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===o?"vertex":"fragment",t.getShaderInfoLog(l),function Yp(t){for(var o=t.split("\n"),s=0;s<o.length;s++)o[s]=s+1+": "+o[s];return o.join("\n")}(s))),l}xr.prototype.setValue=function(t,o,s,c){var l=this.map[o];void 0!==l&&l.setValue(t,s,c)},xr.prototype.setOptional=function(t,o,s){var c=o[s];void 0!==c&&this.setValue(t,s,c)},xr.upload=function(t,o,s,c){for(var l=0,d=o.length;l!==d;++l){var f=o[l],p=s[f.id];!1!==p.needsUpdate&&f.setValue(t,p.value,c)}},xr.seqWithValue=function(t,o){for(var s=[],c=0,l=t.length;c!==l;++c){var d=t[c];d.id in o&&s.push(d)}return s};var bn=0;function Nl(t){switch(t){case ha:return["Linear","( value )"];case dt:return["sRGB","( value )"];case bl:return["RGBE","( value )"];case ih:return["RGBM","( value, 7.0 )"];case Me:return["RGBM","( value, 16.0 )"];case hu:return["RGBD","( value, 256.0 )"];case du:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function _a(t,o){var s=Nl(o);return"vec4 "+t+"( vec4 value ) { return "+s[0]+"ToLinear"+s[1]+"; }"}function Kr(t,o){var s=Nl(o);return"vec4 "+t+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"}function kv(t,o){var s;switch(o){case ci:s="Linear";break;case On:s="Reinhard";break;case oa:s="Uncharted2";break;case $o:s="OptimizedCineon";break;case sa:s="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+o)}return"vec3 "+t+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}function Au(t){return""!==t}function Qp(t,o){return t.replace(/NUM_DIR_LIGHTS/g,o.numDirLights).replace(/NUM_SPOT_LIGHTS/g,o.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,o.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,o.numPointLights).replace(/NUM_HEMI_LIGHTS/g,o.numHemiLights)}function Jp(t,o){return t.replace(/NUM_CLIPPING_PLANES/g,o.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,o.numClippingPlanes-o.numClipIntersection)}function Do(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function s(c,l){var d=It[l];if(void 0===d)throw new Error("Can not resolve #include <"+l+">");return Do(d)})}function Th(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function s(c,l,d,f){for(var p="",y=parseInt(l);y<parseInt(d);y++)p+=f.replace(/\[ i \]/g,"[ "+y+" ]");return p})}function Bv(t,o,s,c,l,d,f,p){var y=t.context,w=c.defines,b=l.vertexShader,_=l.fragmentShader,E="SHADOWMAP_TYPE_BASIC";d.shadowMapType===Wi?E="SHADOWMAP_TYPE_PCF":d.shadowMapType===Dr&&(E="SHADOWMAP_TYPE_PCF_SOFT");var M="ENVMAP_TYPE_CUBE",S="ENVMAP_MODE_REFLECTION",I="ENVMAP_BLENDING_MULTIPLY";if(d.envMap){switch(c.envMap.mapping){case qo:case xs:M="ENVMAP_TYPE_CUBE";break;case li:case Zo:M="ENVMAP_TYPE_CUBE_UV";break;case ui:case Wr:M="ENVMAP_TYPE_EQUIREC";break;case Vn:M="ENVMAP_TYPE_SPHERE"}switch(c.envMap.mapping){case xs:case Wr:S="ENVMAP_MODE_REFRACTION"}switch(c.combine){case Rn:I="ENVMAP_BLENDING_MULTIPLY";break;case xo:I="ENVMAP_BLENDING_MIX";break;case Ri:I="ENVMAP_BLENDING_ADD"}}var B,U,T=t.gammaFactor>0?t.gammaFactor:1,O=f.isWebGL2?"":function Xp(t,o,s){return[(t=t||{}).derivatives||o.envMapCubeUV||o.bumpMap||o.normalMap&&!o.objectSpaceNormalMap||o.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||o.logarithmicDepthBuffer)&&s.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&s.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||o.envMap)&&s.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Au).join("\n")}(c.extensions,d,o),F=function mc(t){var o=[];for(var s in t){var c=t[s];!1!==c&&o.push("#define "+s+" "+c)}return o.join("\n")}(w),N=y.createProgram();if(c.isRawShaderMaterial?((B=[F].filter(Au).join("\n")).length>0&&(B+="\n"),(U=[O,F].filter(Au).join("\n")).length>0&&(U+="\n")):(B=["precision "+d.precision+" float;","precision "+d.precision+" int;","#define SHADER_NAME "+l.name,F,d.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+T,"#define MAX_BONES "+d.maxBones,d.useFog&&d.fog?"#define USE_FOG":"",d.useFog&&d.fogExp?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.envMap?"#define "+S:"",d.lightMap?"#define USE_LIGHTMAP":"",d.aoMap?"#define USE_AOMAP":"",d.emissiveMap?"#define USE_EMISSIVEMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.normalMap&&d.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",d.displacementMap&&d.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.roughnessMap?"#define USE_ROUGHNESSMAP":"",d.metalnessMap?"#define USE_METALNESSMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexTangents?"#define USE_TANGENT":"",d.vertexColors?"#define USE_COLOR":"",d.flatShading?"#define FLAT_SHADED":"",d.skinning?"#define USE_SKINNING":"",d.useVertexTexture?"#define BONE_TEXTURE":"",d.morphTargets?"#define USE_MORPHTARGETS":"",d.morphNormals&&!1===d.flatShading?"#define USE_MORPHNORMALS":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+E:"",d.sizeAttenuation?"#define USE_SIZEATTENUATION":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",d.logarithmicDepthBuffer&&(f.isWebGL2||o.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Au).join("\n"),U=[O,"precision "+d.precision+" float;","precision "+d.precision+" int;","#define SHADER_NAME "+l.name,F,d.alphaTest?"#define ALPHATEST "+d.alphaTest+(d.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+T,d.useFog&&d.fog?"#define USE_FOG":"",d.useFog&&d.fogExp?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.matcap?"#define USE_MATCAP":"",d.envMap?"#define USE_ENVMAP":"",d.envMap?"#define "+M:"",d.envMap?"#define "+S:"",d.envMap?"#define "+I:"",d.lightMap?"#define USE_LIGHTMAP":"",d.aoMap?"#define USE_AOMAP":"",d.emissiveMap?"#define USE_EMISSIVEMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.normalMap&&d.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.roughnessMap?"#define USE_ROUGHNESSMAP":"",d.metalnessMap?"#define USE_METALNESSMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexTangents?"#define USE_TANGENT":"",d.vertexColors?"#define USE_COLOR":"",d.gradientMap?"#define USE_GRADIENTMAP":"",d.flatShading?"#define FLAT_SHADED":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+E:"",d.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",d.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",d.logarithmicDepthBuffer&&(f.isWebGL2||o.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",d.envMap&&(f.isWebGL2||o.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",d.toneMapping!==Ir?"#define TONE_MAPPING":"",d.toneMapping!==Ir?It.tonemapping_pars_fragment:"",d.toneMapping!==Ir?kv("toneMapping",d.toneMapping):"",d.dithering?"#define DITHERING":"",d.outputEncoding||d.mapEncoding||d.matcapEncoding||d.envMapEncoding||d.emissiveMapEncoding?It.encodings_pars_fragment:"",d.mapEncoding?_a("mapTexelToLinear",d.mapEncoding):"",d.matcapEncoding?_a("matcapTexelToLinear",d.matcapEncoding):"",d.envMapEncoding?_a("envMapTexelToLinear",d.envMapEncoding):"",d.emissiveMapEncoding?_a("emissiveMapTexelToLinear",d.emissiveMapEncoding):"",d.outputEncoding?Kr("linearToOutputTexel",d.outputEncoding):"",d.depthPacking?"#define DEPTH_PACKING "+c.depthPacking:"","\n"].filter(Au).join("\n")),b=Jp(b=Qp(b=Do(b),d),d),_=Jp(_=Qp(_=Do(_),d),d),b=Th(b),_=Th(_),f.isWebGL2&&!c.isRawShaderMaterial){var q=!1,Z=/^\s*#version\s+300\s+es\s*\n/;c.isShaderMaterial&&null!==b.match(Z)&&null!==_.match(Z)&&(q=!0,b=b.replace(Z,""),_=_.replace(Z,"")),B=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+B,U=["#version 300 es\n","#define varying in",q?"":"out highp vec4 pc_fragColor;",q?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+U}var De,he,ne=U+_,ue=Dh(y,35633,B+b,t.debug.checkShaderErrors),$=Dh(y,35632,ne,t.debug.checkShaderErrors);if(y.attachShader(N,ue),y.attachShader(N,$),void 0!==c.index0AttributeName?y.bindAttribLocation(N,0,c.index0AttributeName):!0===d.morphTargets&&y.bindAttribLocation(N,0,"position"),y.linkProgram(N),t.debug.checkShaderErrors){var Q=y.getProgramInfoLog(N).trim(),ae=y.getShaderInfoLog(ue).trim(),me=y.getShaderInfoLog($).trim(),xe=!0,Ae=!0;!1===y.getProgramParameter(N,35714)?(xe=!1,console.error("THREE.WebGLProgram: shader error: ",y.getError(),"35715",y.getProgramParameter(N,35715),"gl.getProgramInfoLog",Q,ae,me)):""!==Q?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Q):(""===ae||""===me)&&(Ae=!1),Ae&&(this.diagnostics={runnable:xe,material:c,programLog:Q,vertexShader:{log:ae,prefix:B},fragmentShader:{log:me,prefix:U}})}return y.deleteShader(ue),y.deleteShader($),this.getUniforms=function(){return void 0===De&&(De=new xr(y,N,p)),De},this.getAttributes=function(){return void 0===he&&(he=function gi(t,o){for(var s={},c=t.getProgramParameter(o,35721),l=0;l<c;l++){var f=t.getActiveAttrib(o,l).name;s[f]=t.getAttribLocation(o,f)}return s}(y,N)),he},this.destroy=function(){y.deleteProgram(N),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=l.name,this.id=bn++,this.code=s,this.usedTimes=1,this.program=N,this.vertexShader=ue,this.fragmentShader=$,this}function Kp(t,o,s,c){var l=[],d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function y(w,b){var _;return w?w.isTexture?_=w.encoding:w.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),_=w.texture.encoding):_=ha,_===ha&&b&&(_=du),_}this.getParameters=function(w,b,_,E,M,S,I){var T=d[w.type],O=I.isSkinnedMesh?function p(w){var _=w.skeleton.bones;if(s.floatVertexTextures)return 1024;var M=Math.floor((s.maxVertexUniforms-20)/4),S=Math.min(M,_.length);return S<_.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+_.length+" bones. This GPU supports "+S+"."),0):S}(I):0,F=s.precision;null!==w.precision&&(F=s.getMaxPrecision(w.precision))!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",F,"instead.");var N=t.getRenderTarget();return{shaderID:T,precision:F,supportsVertexTextures:s.vertexTextures,outputEncoding:y(N?N.texture:null,t.gammaOutput),map:!!w.map,mapEncoding:y(w.map,t.gammaInput),matcap:!!w.matcap,matcapEncoding:y(w.matcap,t.gammaInput),envMap:!!w.envMap,envMapMode:w.envMap&&w.envMap.mapping,envMapEncoding:y(w.envMap,t.gammaInput),envMapCubeUV:!!w.envMap&&(w.envMap.mapping===li||w.envMap.mapping===Zo),lightMap:!!w.lightMap,aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,emissiveMapEncoding:y(w.emissiveMap,t.gammaInput),bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:w.normalMapType===Zg,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,alphaMap:!!w.alphaMap,gradientMap:!!w.gradientMap,combine:w.combine,vertexTangents:w.normalMap&&w.vertexTangents,vertexColors:w.vertexColors,fog:!!E,useFog:w.fog,fogExp:E&&E.isFogExp2,flatShading:w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:s.logarithmicDepthBuffer,skinning:w.skinning&&O>0,maxBones:O,useVertexTexture:s.floatVertexTextures,morphTargets:w.morphTargets,morphNormals:w.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numClippingPlanes:M,numClipIntersection:S,dithering:w.dithering,shadowMapEnabled:t.shadowMap.enabled&&I.receiveShadow&&_.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,alphaTest:w.alphaTest,doubleSided:w.side===xn,flipSided:w.side===bt,depthPacking:void 0!==w.depthPacking&&w.depthPacking}},this.getProgramCode=function(w,b){var _=[];if(b.shaderID?_.push(b.shaderID):(_.push(w.fragmentShader),_.push(w.vertexShader)),void 0!==w.defines)for(var E in w.defines)_.push(E),_.push(w.defines[E]);for(var M=0;M<f.length;M++)_.push(b[f[M]]);return _.push(w.onBeforeCompile.toString()),_.push(t.gammaOutput),_.push(t.gammaFactor),_.join()},this.acquireProgram=function(w,b,_,E){for(var M,S=0,I=l.length;S<I;S++){var T=l[S];if(T.code===E){++(M=T).usedTimes;break}}return void 0===M&&(M=new Bv(t,o,E,w,b,_,s,c),l.push(M)),M},this.releaseProgram=function(w){if(0==--w.usedTimes){var b=l.indexOf(w);l[b]=l[l.length-1],l.pop(),w.destroy()}},this.programs=l}function em(){var t=new WeakMap;return{get:function o(d){var f=t.get(d);return void 0===f&&t.set(d,f={}),f},remove:function s(d){t.delete(d)},update:function c(d,f,p){t.get(d)[f]=p},dispose:function l(){t=new WeakMap}}}function tm(t,o){return t.groupOrder!==o.groupOrder?t.groupOrder-o.groupOrder:t.renderOrder!==o.renderOrder?t.renderOrder-o.renderOrder:t.program!==o.program?t.program.id-o.program.id:t.material.id!==o.material.id?t.material.id-o.material.id:t.z!==o.z?t.z-o.z:t.id-o.id}function Uv(t,o){return t.groupOrder!==o.groupOrder?t.groupOrder-o.groupOrder:t.renderOrder!==o.renderOrder?t.renderOrder-o.renderOrder:t.z!==o.z?o.z-t.z:t.id-o.id}function ct(){var t=[],o=0,s=[],c=[],l={id:-1};function f(b,_,E,M,S,I){var T=t[o];return void 0===T?t[o]=T={id:b.id,object:b,geometry:_,material:E,program:E.program||l,groupOrder:M,renderOrder:b.renderOrder,z:S,group:I}:(T.id=b.id,T.object=b,T.geometry=_,T.material=E,T.program=E.program||l,T.groupOrder=M,T.renderOrder=b.renderOrder,T.z=S,T.group=I),o++,T}return{opaque:s,transparent:c,init:function d(){o=0,s.length=0,c.length=0},push:function p(b,_,E,M,S,I){var T=f(b,_,E,M,S,I);(!0===E.transparent?c:s).push(T)},unshift:function y(b,_,E,M,S,I){var T=f(b,_,E,M,S,I);(!0===E.transparent?c:s).unshift(T)},sort:function w(){s.length>1&&s.sort(tm),c.length>1&&c.sort(Uv)}}}function nm(){var t={};function o(l){var d=l.target;d.removeEventListener("dispose",o),delete t[d.id]}return{get:function s(l,d){var p,f=t[l.id];return void 0===f?(p=new ct,t[l.id]={},t[l.id][d.id]=p,l.addEventListener("dispose",o)):void 0===(p=f[d.id])&&(p=new ct,f[d.id]=p),p},dispose:function c(){t={}}}}function pb(){var t={};return{get:function(o){if(void 0!==t[o.id])return t[o.id];var s;switch(o.type){case"DirectionalLight":s={direction:new k,color:new je,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"SpotLight":s={position:new k,direction:new k,color:new je,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"PointLight":s={position:new k,color:new je,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new pe,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":s={direction:new k,skyColor:new je,groundColor:new je};break;case"RectAreaLight":s={color:new je,position:new k,halfWidth:new k,halfHeight:new k}}return t[o.id]=s,s}}}var Vv=0;function Hv(){for(var t=new pb,o={id:Vv++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},s=0;s<9;s++)o.probe.push(new k);var c=new k,l=new it,d=new it;return{setup:function f(p,y,w){for(var b=0,_=0,E=0,M=0;M<9;M++)o.probe[M].set(0,0,0);for(var S=0,I=0,T=0,O=0,F=0,N=w.matrixWorldInverse,B=(M=0,p.length);M<B;M++){var U=p[M],q=U.color,Z=U.intensity,re=U.distance,ne=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)b+=q.r*Z,_+=q.g*Z,E+=q.b*Z;else if(U.isLightProbe)for(var ue=0;ue<9;ue++)o.probe[ue].addScaledVector(U.sh.coefficients[ue],Z);else if(U.isDirectionalLight)($=t.get(U)).color.copy(U.color).multiplyScalar(U.intensity),$.direction.setFromMatrixPosition(U.matrixWorld),c.setFromMatrixPosition(U.target.matrixWorld),$.direction.sub(c),$.direction.transformDirection(N),$.shadow=U.castShadow,U.castShadow&&($.shadowBias=(Q=U.shadow).bias,$.shadowRadius=Q.radius,$.shadowMapSize=Q.mapSize),o.directionalShadowMap[S]=ne,o.directionalShadowMatrix[S]=U.shadow.matrix,o.directional[S]=$,S++;else if(U.isSpotLight)($=t.get(U)).position.setFromMatrixPosition(U.matrixWorld),$.position.applyMatrix4(N),$.color.copy(q).multiplyScalar(Z),$.distance=re,$.direction.setFromMatrixPosition(U.matrixWorld),c.setFromMatrixPosition(U.target.matrixWorld),$.direction.sub(c),$.direction.transformDirection(N),$.coneCos=Math.cos(U.angle),$.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),$.decay=U.decay,$.shadow=U.castShadow,U.castShadow&&($.shadowBias=(Q=U.shadow).bias,$.shadowRadius=Q.radius,$.shadowMapSize=Q.mapSize),o.spotShadowMap[T]=ne,o.spotShadowMatrix[T]=U.shadow.matrix,o.spot[T]=$,T++;else if(U.isRectAreaLight)($=t.get(U)).color.copy(q).multiplyScalar(Z),$.position.setFromMatrixPosition(U.matrixWorld),$.position.applyMatrix4(N),d.identity(),l.copy(U.matrixWorld),l.premultiply(N),d.extractRotation(l),$.halfWidth.set(.5*U.width,0,0),$.halfHeight.set(0,.5*U.height,0),$.halfWidth.applyMatrix4(d),$.halfHeight.applyMatrix4(d),o.rectArea[O]=$,O++;else if(U.isPointLight){var Q;($=t.get(U)).position.setFromMatrixPosition(U.matrixWorld),$.position.applyMatrix4(N),$.color.copy(U.color).multiplyScalar(U.intensity),$.distance=U.distance,$.decay=U.decay,$.shadow=U.castShadow,U.castShadow&&($.shadowBias=(Q=U.shadow).bias,$.shadowRadius=Q.radius,$.shadowMapSize=Q.mapSize,$.shadowCameraNear=Q.camera.near,$.shadowCameraFar=Q.camera.far),o.pointShadowMap[I]=ne,o.pointShadowMatrix[I]=U.shadow.matrix,o.point[I]=$,I++}else if(U.isHemisphereLight){var $;($=t.get(U)).direction.setFromMatrixPosition(U.matrixWorld),$.direction.transformDirection(N),$.direction.normalize(),$.skyColor.copy(U.color).multiplyScalar(Z),$.groundColor.copy(U.groundColor).multiplyScalar(Z),o.hemi[F]=$,F++}}o.ambient[0]=b,o.ambient[1]=_,o.ambient[2]=E,o.directional.length=S,o.spot.length=T,o.rectArea.length=O,o.point.length=I,o.hemi.length=F,o.hash.stateID=o.id,o.hash.directionalLength=S,o.hash.pointLength=I,o.hash.spotLength=T,o.hash.rectAreaLength=O,o.hash.hemiLength=F,o.hash.shadowsLength=y.length},state:o}}function rm(){var t=new Hv,o=[],s=[];return{init:function c(){o.length=0,s.length=0},state:{lightsArray:o,shadowsArray:s,lights:t},setupLights:function f(y){t.setup(o,s,y)},pushLight:function l(y){o.push(y)},pushShadow:function d(y){s.push(y)}}}function im(){var t={};function o(l){var d=l.target;d.removeEventListener("dispose",o),delete t[d.id]}return{get:function s(l,d){var f;return void 0===t[l.id]?(f=new rm,t[l.id]={},t[l.id][d.id]=f,l.addEventListener("dispose",o)):void 0===t[l.id][d.id]?(f=new rm,t[l.id][d.id]=f):f=t[l.id][d.id],f},dispose:function c(){t={}}}}function vi(t){_t.call(this),this.type="MeshDepthMaterial",this.depthPacking=gt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Os(t){_t.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new k,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function om(t,o,s){for(var c=new sh,l=new it,d=new pe,f=new pe(s,s),p=new k,y=new k,w=1,b=2,_=1+(w|b),E=new Array(_),M=new Array(_),S={},I={0:bt,1:Jn,2:xn},T=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],O=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)],F=[new un,new un,new un,new un,new un,new un],N=0;N!==_;++N){var B=0!=(N&w),U=0!=(N&b),q=new vi({depthPacking:Kt,morphTargets:B,skinning:U});E[N]=q;var Z=new Os({morphTargets:B,skinning:U});M[N]=Z}var re=this;function ne($,Q,ae,me,xe,Ae){var De=$.geometry,he=null,_e=E,Fe=$.customDepthMaterial;if(ae&&(_e=M,Fe=$.customDistanceMaterial),Fe)he=Fe;else{var Xe=!1;Q.morphTargets&&(De&&De.isBufferGeometry?Xe=De.morphAttributes&&De.morphAttributes.position&&De.morphAttributes.position.length>0:De&&De.isGeometry&&(Xe=De.morphTargets&&De.morphTargets.length>0)),$.isSkinnedMesh&&!1===Q.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",$);var ut=0;Xe&&(ut|=w),$.isSkinnedMesh&&Q.skinning&&(ut|=b),he=_e[ut]}if(t.localClippingEnabled&&!0===Q.clipShadows&&0!==Q.clippingPlanes.length){var se=he.uuid,Ue=Q.uuid,Oe=S[se];void 0===Oe&&(S[se]=Oe={});var et=Oe[Ue];void 0===et&&(et=he.clone(),Oe[Ue]=et),he=et}return he.visible=Q.visible,he.wireframe=Q.wireframe,he.side=null!=Q.shadowSide?Q.shadowSide:I[Q.side],he.clipShadows=Q.clipShadows,he.clippingPlanes=Q.clippingPlanes,he.clipIntersection=Q.clipIntersection,he.wireframeLinewidth=Q.wireframeLinewidth,he.linewidth=Q.linewidth,ae&&he.isMeshDistanceMaterial&&(he.referencePosition.copy(me),he.nearDistance=xe,he.farDistance=Ae),he}function ue($,Q,ae,me){if(!1!==$.visible){if($.layers.test(Q.layers)&&($.isMesh||$.isLine||$.isPoints)&&$.castShadow&&(!$.frustumCulled||c.intersectsObject($))){$.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,$.matrixWorld);var Ae=o.update($),De=$.material;if(Array.isArray(De))for(var he=Ae.groups,_e=0,Fe=he.length;_e<Fe;_e++){var Xe=he[_e],Ke=De[Xe.materialIndex];if(Ke&&Ke.visible){var ut=ne($,Ke,me,y,ae.near,ae.far);t.renderBufferDirect(ae,null,Ae,ut,$,Xe)}}else De.visible&&(ut=ne($,De,me,y,ae.near,ae.far),t.renderBufferDirect(ae,null,Ae,ut,$,null))}for(var se=$.children,Ue=0,Oe=se.length;Ue<Oe;Ue++)ue(se[Ue],Q,ae,me)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Wi,this.render=function($,Q,ae){if(!1!==re.enabled&&(!1!==re.autoUpdate||!1!==re.needsUpdate)&&0!==$.length){var me=t.getRenderTarget(),xe=t.getActiveCubeFace(),Ae=t.getActiveMipMapLevel(),De=t.state;De.setBlending(_o),De.buffers.color.setClear(1,1,1,1),De.buffers.depth.setTest(!0),De.setScissorTest(!1);for(var he,_e=0,Fe=$.length;_e<Fe;_e++){var Xe=$[_e],Ke=Xe.shadow,ut=Xe&&Xe.isPointLight;if(void 0!==Ke){var se=Ke.camera;if(d.copy(Ke.mapSize),d.min(f),ut){var Ue=d.x,Oe=d.y;F[0].set(2*Ue,Oe,Ue,Oe),F[1].set(0,Oe,Ue,Oe),F[2].set(3*Ue,Oe,Ue,Oe),F[3].set(Ue,Oe,Ue,Oe),F[4].set(3*Ue,0,Ue,Oe),F[5].set(Ue,0,Ue,Oe),d.x*=4,d.y*=2}null===Ke.map&&(Ke.map=new Xo(d.x,d.y,{minFilter:St,magFilter:St,format:Mo}),Ke.map.texture.name=Xe.name+".shadowMap",se.updateProjectionMatrix()),Ke.isSpotLightShadow&&Ke.update(Xe);var lt=Ke.map,Gt=Ke.matrix;y.setFromMatrixPosition(Xe.matrixWorld),se.position.copy(y),ut?(he=6,Gt.makeTranslation(-y.x,-y.y,-y.z)):(he=1,p.setFromMatrixPosition(Xe.target.matrixWorld),se.lookAt(p),se.updateMatrixWorld(),Gt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Gt.multiply(se.projectionMatrix),Gt.multiply(se.matrixWorldInverse)),t.setRenderTarget(lt),t.clear();for(var j=0;j<he;j++)ut&&(p.copy(se.position),p.add(T[j]),se.up.copy(O[j]),se.lookAt(p),se.updateMatrixWorld(),De.viewport(F[j])),l.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),c.setFromMatrix(l),ue(Q,ae,se,ut)}else console.warn("THREE.WebGLShadowMap:",Xe,"has no shadow.")}re.needsUpdate=!1,t.setRenderTarget(me,xe,Ae)}}}function zv(t,o,s,c){var p=new function l(){var K=!1,Ve=new un,qe=null,At=new un(0,0,0,0);return{setMask:function(Ze){qe!==Ze&&!K&&(t.colorMask(Ze,Ze,Ze,Ze),qe=Ze)},setLocked:function(Ze){K=Ze},setClear:function(Ze,kt,sn,Vt,gr){!0===gr&&(Ze*=Vt,kt*=Vt,sn*=Vt),Ve.set(Ze,kt,sn,Vt),!1===At.equals(Ve)&&(t.clearColor(Ze,kt,sn,Vt),At.copy(Ve))},reset:function(){K=!1,qe=null,At.set(-1,0,0,0)}}},y=new function d(){var K=!1,Ve=null,qe=null,At=null;return{setTest:function(Ze){Ze?Gt(2929):j(2929)},setMask:function(Ze){Ve!==Ze&&!K&&(t.depthMask(Ze),Ve=Ze)},setFunc:function(Ze){if(qe!==Ze){if(Ze)switch(Ze){case J:t.depthFunc(512);break;case be:t.depthFunc(519);break;case on:t.depthFunc(513);break;case Kn:t.depthFunc(515);break;case Pn:t.depthFunc(514);break;case En:t.depthFunc(518);break;case Un:t.depthFunc(516);break;case Yi:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);qe=Ze}},setLocked:function(Ze){K=Ze},setClear:function(Ze){At!==Ze&&(t.clearDepth(Ze),At=Ze)},reset:function(){K=!1,Ve=null,qe=null,At=null}}},w=new function f(){var K=!1,Ve=null,qe=null,At=null,Ze=null,kt=null,sn=null,Vt=null,gr=null;return{setTest:function(Xt){Xt?Gt(2960):j(2960)},setMask:function(Xt){Ve!==Xt&&!K&&(t.stencilMask(Xt),Ve=Xt)},setFunc:function(Xt,Ar,ri){(qe!==Xt||At!==Ar||Ze!==ri)&&(t.stencilFunc(Xt,Ar,ri),qe=Xt,At=Ar,Ze=ri)},setOp:function(Xt,Ar,ri){(kt!==Xt||sn!==Ar||Vt!==ri)&&(t.stencilOp(Xt,Ar,ri),kt=Xt,sn=Ar,Vt=ri)},setLocked:function(Xt){K=Xt},setClear:function(Xt){gr!==Xt&&(t.clearStencil(Xt),gr=Xt)},reset:function(){K=!1,Ve=null,qe=null,At=null,Ze=null,kt=null,sn=null,Vt=null,gr=null}}},b=t.getParameter(34921),_=new Uint8Array(b),E=new Uint8Array(b),M=new Uint8Array(b),S={},I=null,T=null,O=null,F=null,N=null,B=null,U=null,q=null,Z=null,re=null,ne=!1,ue=null,$=null,Q=null,ae=null,me=null,xe=t.getParameter(35661),Ae=!1,De=0,he=t.getParameter(7938);-1!==he.indexOf("WebGL")?(De=parseFloat(/^WebGL\ ([0-9])/.exec(he)[1]),Ae=De>=1):-1!==he.indexOf("OpenGL ES")&&(De=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(he)[1]),Ae=De>=2);var _e=null,Fe={},Xe=new un,Ke=new un;function ut(K,Ve,qe){var At=new Uint8Array(4),Ze=t.createTexture();t.bindTexture(K,Ze),t.texParameteri(K,10241,9728),t.texParameteri(K,10240,9728);for(var kt=0;kt<qe;kt++)t.texImage2D(Ve+kt,0,6408,1,1,0,6408,5121,At);return Ze}var se={};function et(K,Ve){_[K]=1,0===E[K]&&(t.enableVertexAttribArray(K),E[K]=1),M[K]!==Ve&&((c.isWebGL2?t:o.get("ANGLE_instanced_arrays"))[c.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](K,Ve),M[K]=Ve)}function Gt(K){!0!==S[K]&&(t.enable(K),S[K]=!0)}function j(K){!1!==S[K]&&(t.disable(K),S[K]=!1)}function Se(K,Ve,qe,At,Ze,kt,sn,Vt){if(K!==_o){if(O||(Gt(3042),O=!0),K===ia)Ze=Ze||Ve,kt=kt||qe,sn=sn||At,(Ve!==N||Ze!==q)&&(t.blendEquationSeparate(s.convert(Ve),s.convert(Ze)),N=Ve,q=Ze),(qe!==B||At!==U||kt!==Z||sn!==re)&&(t.blendFuncSeparate(s.convert(qe),s.convert(At),s.convert(kt),s.convert(sn)),B=qe,U=At,Z=kt,re=sn),F=K,ne=null;else if(K!==F||Vt!==ne){if((N!==jr||q!==jr)&&(t.blendEquation(32774),N=jr,q=jr),Vt)switch(K){case qi:t.blendFuncSeparate(1,771,1,771);break;case Zi:t.blendFunc(1,1);break;case rn:t.blendFuncSeparate(0,0,769,771);break;case mn:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",K)}else switch(K){case qi:t.blendFuncSeparate(770,771,1,771);break;case Zi:t.blendFunc(770,1);break;case rn:t.blendFunc(0,769);break;case mn:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",K)}B=null,U=null,Z=null,re=null,F=K,ne=Vt}}else O&&(j(3042),O=!1)}function $e(K){ue!==K&&(t.frontFace(K?2304:2305),ue=K)}function We(K){K!==Di?(Gt(2884),K!==$&&t.cullFace(K===nn?1029:K===ur?1028:1032)):j(2884),$=K}function Mt(K,Ve,qe){K?(Gt(32823),(ae!==Ve||me!==qe)&&(t.polygonOffset(Ve,qe),ae=Ve,me=qe)):j(32823)}function Yt(K){void 0===K&&(K=33984+xe-1),_e!==K&&(t.activeTexture(K),_e=K)}return se[3553]=ut(3553,3553,1),se[34067]=ut(34067,34069,6),p.setClear(0,0,0,1),y.setClear(1),w.setClear(0),Gt(2929),y.setFunc(Kn),$e(!1),We(nn),Gt(2884),Se(_o),{buffers:{color:p,depth:y,stencil:w},initAttributes:function Ue(){for(var K=0,Ve=_.length;K<Ve;K++)_[K]=0},enableAttribute:function Oe(K){et(K,0)},enableAttributeAndDivisor:et,disableUnusedAttributes:function lt(){for(var K=0,Ve=E.length;K!==Ve;++K)E[K]!==_[K]&&(t.disableVertexAttribArray(K),E[K]=0)},enable:Gt,disable:j,getCompressedTextureFormats:function V(){if(null===I&&(I=[],o.get("WEBGL_compressed_texture_pvrtc")||o.get("WEBGL_compressed_texture_s3tc")||o.get("WEBGL_compressed_texture_etc1")||o.get("WEBGL_compressed_texture_astc")))for(var K=t.getParameter(34467),Ve=0;Ve<K.length;Ve++)I.push(K[Ve]);return I},useProgram:function ge(K){return T!==K&&(t.useProgram(K),T=K,!0)},setBlending:Se,setMaterial:function pt(K,Ve){K.side===xn?j(2884):Gt(2884);var qe=K.side===bt;Ve&&(qe=!qe),$e(qe),K.blending===qi&&!1===K.transparent?Se(_o):Se(K.blending,K.blendEquation,K.blendSrc,K.blendDst,K.blendEquationAlpha,K.blendSrcAlpha,K.blendDstAlpha,K.premultipliedAlpha),y.setFunc(K.depthFunc),y.setTest(K.depthTest),y.setMask(K.depthWrite),p.setMask(K.colorWrite),Mt(K.polygonOffset,K.polygonOffsetFactor,K.polygonOffsetUnits)},setFlipSided:$e,setCullFace:We,setLineWidth:function Dt(K){K!==Q&&(Ae&&t.lineWidth(K),Q=K)},setPolygonOffset:Mt,setScissorTest:function Pt(K){K?Gt(3089):j(3089)},activeTexture:Yt,bindTexture:function Mn(K,Ve){null===_e&&Yt();var qe=Fe[_e];void 0===qe&&(Fe[_e]=qe={type:void 0,texture:void 0}),(qe.type!==K||qe.texture!==Ve)&&(t.bindTexture(K,Ve||se[K]),qe.type=K,qe.texture=Ve)},compressedTexImage2D:function mt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}},texImage2D:function Xn(){try{t.texImage2D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}},texImage3D:function tr(){try{t.texImage3D.apply(t,arguments)}catch(K){console.error("THREE.WebGLState:",K)}},scissor:function kr(K){!1===Xe.equals(K)&&(t.scissor(K.x,K.y,K.z,K.w),Xe.copy(K))},viewport:function zr(K){!1===Ke.equals(K)&&(t.viewport(K.x,K.y,K.z,K.w),Ke.copy(K))},reset:function Ft(){for(var K=0;K<E.length;K++)1===E[K]&&(t.disableVertexAttribArray(K),E[K]=0);S={},I=null,_e=null,Fe={},T=null,F=null,ue=null,$=null,p.reset(),y.reset(),w.reset()}}}function Gv(t,o,s,c,l,d,f){var y,p={},w=typeof OffscreenCanvas<"u";function b(j,V){return w?new OffscreenCanvas(j,V):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function _(j,V,ge,Se){var pt=1;if((j.width>Se||j.height>Se)&&(pt=Se/Math.max(j.width,j.height)),pt<1||!0===V){if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){var $e=V?yt.floorPowerOfTwo:Math.floor,We=$e(pt*j.width),Dt=$e(pt*j.height);void 0===y&&(y=b(We,Dt));var Mt=ge?b(We,Dt):y;return Mt.width=We,Mt.height=Dt,Mt.getContext("2d").drawImage(j,0,0,We,Dt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+We+"x"+Dt+")."),Mt}return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j}return j}function E(j){return yt.isPowerOfTwo(j.width)&&yt.isPowerOfTwo(j.height)}function S(j,V){return j.generateMipmaps&&V&&j.minFilter!==St&&j.minFilter!==lr}function I(j,V,ge,Se){t.generateMipmap(j),c.get(V).__maxMipLevel=Math.log(Math.max(ge,Se))*Math.LOG2E}function T(j,V){if(!l.isWebGL2)return j;var ge=j;return 6403===j&&(5126===V&&(ge=33326),5131===V&&(ge=33325),5121===V&&(ge=33321)),6407===j&&(5126===V&&(ge=34837),5131===V&&(ge=34843),5121===V&&(ge=32849)),6408===j&&(5126===V&&(ge=34836),5131===V&&(ge=34842),5121===V&&(ge=32856)),33325===ge||33326===ge||34842===ge||34836===ge?o.get("EXT_color_buffer_float"):(34843===ge||34837===ge)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),ge}function O(j){return j===St||j===gn||j===aa?9728:9729}function F(j){var V=j.target;V.removeEventListener("dispose",F),function B(j){var V=c.get(j);void 0!==V.__webglInit&&(t.deleteTexture(V.__webglTexture),c.remove(j))}(V),V.isVideoTexture&&delete p[V.id],f.memory.textures--}function N(j){var V=j.target;V.removeEventListener("dispose",N),function U(j){var V=c.get(j),ge=c.get(j.texture);if(j){if(void 0!==ge.__webglTexture&&t.deleteTexture(ge.__webglTexture),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLRenderTargetCube)for(var Se=0;Se<6;Se++)t.deleteFramebuffer(V.__webglFramebuffer[Se]),V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer[Se]);else t.deleteFramebuffer(V.__webglFramebuffer),V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer);c.remove(j.texture),c.remove(j)}}(V),f.memory.textures--}var q=0;function ne(j,V){var ge=c.get(j);if(j.isVideoTexture&&function Ue(j){var V=j.id,ge=f.render.frame;p[V]!==ge&&(p[V]=ge,j.update())}(j),j.version>0&&ge.__version!==j.version){var Se=j.image;if(void 0===Se)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==Se.complete)return void Ae(ge,j,V);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}s.activeTexture(33984+V),s.bindTexture(3553,ge.__webglTexture)}function Q(j,V){var ge=c.get(j);if(6===j.image.length)if(j.version>0&&ge.__version!==j.version){xe(ge,j),s.activeTexture(33984+V),s.bindTexture(34067,ge.__webglTexture),t.pixelStorei(37440,j.flipY);for(var Se=j&&j.isCompressedTexture,pt=j.image[0]&&j.image[0].isDataTexture,$e=[],We=0;We<6;We++)$e[We]=Se||pt?pt?j.image[We].image:j.image[We]:_(j.image[We],!1,!0,l.maxCubemapSize);var Dt=$e[0],Mt=E(Dt)||l.isWebGL2,Pt=d.convert(j.format),Yt=d.convert(j.type),Mn=T(Pt,Yt);for(me(34067,j,Mt),We=0;We<6;We++)if(Se)for(var mt,Xn=$e[We].mipmaps,tr=0,kr=Xn.length;tr<kr;tr++)mt=Xn[tr],j.format!==Mo&&j.format!==rr?s.getCompressedTextureFormats().indexOf(Pt)>-1?s.compressedTexImage2D(34069+We,tr,Mn,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):s.texImage2D(34069+We,tr,Mn,mt.width,mt.height,0,Pt,Yt,mt.data);else pt?s.texImage2D(34069+We,0,Mn,$e[We].width,$e[We].height,0,Pt,Yt,$e[We].data):s.texImage2D(34069+We,0,Mn,Pt,Yt,$e[We]);ge.__maxMipLevel=Se?Xn.length-1:0,S(j,Mt)&&I(34067,j,Dt.width,Dt.height),ge.__version=j.version,j.onUpdate&&j.onUpdate(j)}else s.activeTexture(33984+V),s.bindTexture(34067,ge.__webglTexture)}function ae(j,V){s.activeTexture(33984+V),s.bindTexture(34067,c.get(j).__webglTexture)}function me(j,V,ge){var Se;if(ge?(t.texParameteri(j,10242,d.convert(V.wrapS)),t.texParameteri(j,10243,d.convert(V.wrapT)),(32879===j||35866===j)&&t.texParameteri(j,32882,d.convert(V.wrapR)),t.texParameteri(j,10240,d.convert(V.magFilter)),t.texParameteri(j,10241,d.convert(V.minFilter))):(t.texParameteri(j,10242,33071),t.texParameteri(j,10243,33071),(32879===j||35866===j)&&t.texParameteri(j,32882,33071),(V.wrapS!==er||V.wrapT!==er)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(j,10240,O(V.magFilter)),t.texParameteri(j,10241,O(V.minFilter)),V.minFilter!==St&&V.minFilter!==lr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Se=o.get("EXT_texture_filter_anisotropic")){if(V.type===ua&&null===o.get("OES_texture_float_linear")||V.type===lu&&null===(l.isWebGL2||o.get("OES_texture_half_float_linear")))return;(V.anisotropy>1||c.get(V).__currentAnisotropy)&&(t.texParameterf(j,Se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,l.getMaxAnisotropy())),c.get(V).__currentAnisotropy=V.anisotropy)}}function xe(j,V){void 0===j.__webglInit&&(j.__webglInit=!0,V.addEventListener("dispose",F),j.__webglTexture=t.createTexture(),f.memory.textures++)}function Ae(j,V,ge){var Se=3553;V.isDataTexture2DArray&&(Se=35866),V.isDataTexture3D&&(Se=32879),xe(j,V),s.activeTexture(33984+ge),s.bindTexture(Se,j.__webglTexture),t.pixelStorei(37440,V.flipY),t.pixelStorei(37441,V.premultiplyAlpha),t.pixelStorei(3317,V.unpackAlignment);var pt=function M(j){return!l.isWebGL2&&(j.wrapS!==er||j.wrapT!==er||j.minFilter!==St&&j.minFilter!==lr)}(V)&&!1===E(V.image),$e=_(V.image,pt,!1,l.maxTextureSize),We=E($e)||l.isWebGL2,Dt=d.convert(V.format),Mt=d.convert(V.type),Pt=T(Dt,Mt);me(Se,V,We);var Yt,Mn=V.mipmaps;if(V.isDepthTexture){if(Pt=6402,V.type===ua){if(!l.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");Pt=36012}else l.isWebGL2&&(Pt=33189);V.format===Ms&&6402===Pt&&V.type!==br&&V.type!==gl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),V.type=br,Mt=d.convert(V.type)),V.format===rc&&(Pt=34041,V.type!==nc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),V.type=nc,Mt=d.convert(V.type))),s.texImage2D(3553,0,Pt,$e.width,$e.height,0,Dt,Mt,null)}else if(V.isDataTexture)if(Mn.length>0&&We){for(var mt=0,Xn=Mn.length;mt<Xn;mt++)s.texImage2D(3553,mt,Pt,(Yt=Mn[mt]).width,Yt.height,0,Dt,Mt,Yt.data);V.generateMipmaps=!1,j.__maxMipLevel=Mn.length-1}else s.texImage2D(3553,0,Pt,$e.width,$e.height,0,Dt,Mt,$e.data),j.__maxMipLevel=0;else if(V.isCompressedTexture){for(mt=0,Xn=Mn.length;mt<Xn;mt++)Yt=Mn[mt],V.format!==Mo&&V.format!==rr?s.getCompressedTextureFormats().indexOf(Dt)>-1?s.compressedTexImage2D(3553,mt,Pt,Yt.width,Yt.height,0,Yt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):s.texImage2D(3553,mt,Pt,Yt.width,Yt.height,0,Dt,Mt,Yt.data);j.__maxMipLevel=Mn.length-1}else if(V.isDataTexture2DArray)s.texImage3D(35866,0,Pt,$e.width,$e.height,$e.depth,0,Dt,Mt,$e.data),j.__maxMipLevel=0;else if(V.isDataTexture3D)s.texImage3D(32879,0,Pt,$e.width,$e.height,$e.depth,0,Dt,Mt,$e.data),j.__maxMipLevel=0;else if(Mn.length>0&&We){for(mt=0,Xn=Mn.length;mt<Xn;mt++)s.texImage2D(3553,mt,Pt,Dt,Mt,Yt=Mn[mt]);V.generateMipmaps=!1,j.__maxMipLevel=Mn.length-1}else s.texImage2D(3553,0,Pt,Dt,Mt,$e),j.__maxMipLevel=0;S(V,We)&&I(3553,V,$e.width,$e.height),j.__version=V.version,V.onUpdate&&V.onUpdate(V)}function De(j,V,ge,Se){var pt=d.convert(V.texture.format),$e=d.convert(V.texture.type),We=T(pt,$e);s.texImage2D(Se,0,We,V.width,V.height,0,pt,$e,null),t.bindFramebuffer(36160,j),t.framebufferTexture2D(36160,ge,Se,c.get(V.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function he(j,V,ge){if(t.bindRenderbuffer(36161,j),V.depthBuffer&&!V.stencilBuffer){if(ge){var Se=se(V);t.renderbufferStorageMultisample(36161,Se,33189,V.width,V.height)}else t.renderbufferStorage(36161,33189,V.width,V.height);t.framebufferRenderbuffer(36160,36096,36161,j)}else if(V.depthBuffer&&V.stencilBuffer)ge?(Se=se(V),t.renderbufferStorageMultisample(36161,Se,34041,V.width,V.height)):t.renderbufferStorage(36161,34041,V.width,V.height),t.framebufferRenderbuffer(36160,33306,36161,j);else{var We=T(d.convert(V.texture.format),d.convert(V.texture.type));ge?(Se=se(V),t.renderbufferStorageMultisample(36161,Se,We,V.width,V.height)):t.renderbufferStorage(36161,We,V.width,V.height)}t.bindRenderbuffer(36161,null)}function se(j){return l.isWebGL2&&j.isWebGLMultisampleRenderTarget?Math.min(l.maxSamples,j.samples):0}var Oe=!1,et=!1;this.allocateTextureUnit=function re(){var j=q;return j>=l.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+l.maxTextures),q+=1,j},this.resetTextureUnits=function Z(){q=0},this.setTexture2D=ne,this.setTexture2DArray=function ue(j,V){var ge=c.get(j);j.version>0&&ge.__version!==j.version?Ae(ge,j,V):(s.activeTexture(33984+V),s.bindTexture(35866,ge.__webglTexture))},this.setTexture3D=function $(j,V){var ge=c.get(j);j.version>0&&ge.__version!==j.version?Ae(ge,j,V):(s.activeTexture(33984+V),s.bindTexture(32879,ge.__webglTexture))},this.setTextureCube=Q,this.setTextureCubeDynamic=ae,this.setupRenderTarget=function Xe(j){var V=c.get(j),ge=c.get(j.texture);j.addEventListener("dispose",N),ge.__webglTexture=t.createTexture(),f.memory.textures++;var Se=!0===j.isWebGLRenderTargetCube,pt=!0===j.isWebGLMultisampleRenderTarget,$e=E(j)||l.isWebGL2;if(Se){V.__webglFramebuffer=[];for(var We=0;We<6;We++)V.__webglFramebuffer[We]=t.createFramebuffer()}else if(V.__webglFramebuffer=t.createFramebuffer(),pt)if(l.isWebGL2){V.__webglMultisampledFramebuffer=t.createFramebuffer(),V.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,V.__webglColorRenderbuffer);var Pt=T(d.convert(j.texture.format),d.convert(j.texture.type)),Yt=se(j);t.renderbufferStorageMultisample(36161,Yt,Pt,j.width,j.height),t.bindFramebuffer(36160,V.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,V.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),j.depthBuffer&&(V.__webglDepthRenderbuffer=t.createRenderbuffer(),he(V.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Se){for(s.bindTexture(34067,ge.__webglTexture),me(34067,j.texture,$e),We=0;We<6;We++)De(V.__webglFramebuffer[We],j,36064,34069+We);S(j.texture,$e)&&I(34067,j.texture,j.width,j.height),s.bindTexture(34067,null)}else s.bindTexture(3553,ge.__webglTexture),me(3553,j.texture,$e),De(V.__webglFramebuffer,j,36064,3553),S(j.texture,$e)&&I(3553,j.texture,j.width,j.height),s.bindTexture(3553,null);j.depthBuffer&&function Fe(j){var V=c.get(j),ge=!0===j.isWebGLRenderTargetCube;if(j.depthTexture){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");!function _e(j,V){if(V&&V.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,j),!V.depthTexture||!V.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!c.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),ne(V.depthTexture,0);var Se=c.get(V.depthTexture).__webglTexture;if(V.depthTexture.format===Ms)t.framebufferTexture2D(36160,36096,3553,Se,0);else{if(V.depthTexture.format!==rc)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,Se,0)}}(V.__webglFramebuffer,j)}else if(ge){V.__webglDepthbuffer=[];for(var Se=0;Se<6;Se++)t.bindFramebuffer(36160,V.__webglFramebuffer[Se]),V.__webglDepthbuffer[Se]=t.createRenderbuffer(),he(V.__webglDepthbuffer[Se],j)}else t.bindFramebuffer(36160,V.__webglFramebuffer),V.__webglDepthbuffer=t.createRenderbuffer(),he(V.__webglDepthbuffer,j);t.bindFramebuffer(36160,null)}(j)},this.updateRenderTargetMipmap=function Ke(j){var V=j.texture;if(S(V,E(j)||l.isWebGL2)){var Se=j.isWebGLRenderTargetCube?34067:3553,pt=c.get(V).__webglTexture;s.bindTexture(Se,pt),I(Se,V,j.width,j.height),s.bindTexture(Se,null)}},this.updateMultisampleRenderTarget=function ut(j){if(j.isWebGLMultisampleRenderTarget)if(l.isWebGL2){var V=c.get(j);t.bindFramebuffer(36008,V.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,V.__webglFramebuffer);var ge=j.width,Se=j.height,pt=16384;j.depthBuffer&&(pt|=256),j.stencilBuffer&&(pt|=1024),t.blitFramebuffer(0,0,ge,Se,0,0,ge,Se,pt,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function lt(j,V){j&&j.isWebGLRenderTarget&&(!1===Oe&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Oe=!0),j=j.texture),ne(j,V)},this.safeSetTextureCube=function Gt(j,V){j&&j.isWebGLRenderTargetCube&&(!1===et&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),et=!0),j=j.texture),j&&j.isCubeTexture||Array.isArray(j.image)&&6===j.image.length?Q(j,V):ae(j,V)}}function sm(t,o,s){return{convert:function c(l){var d;if(l===Br)return 10497;if(l===er)return 33071;if(l===Li)return 33648;if(l===St)return 9728;if(l===gn)return 9984;if(l===aa)return 9986;if(l===lr)return 9729;if(l===Eo)return 9985;if(l===Yo)return 9987;if(l===Es)return 5121;if(l===rp)return 32819;if(l===Zd)return 32820;if(l===Yd)return 33635;if(l===ve)return 5120;if(l===qt)return 5122;if(l===br)return 5123;if(l===ca)return 5124;if(l===gl)return 5125;if(l===ua)return 5126;if(l===lu){if(s.isWebGL2)return 5131;if(null!==(d=o.get("OES_texture_half_float")))return d.HALF_FLOAT_OES}if(l===Xd)return 6406;if(l===rr)return 6407;if(l===Mo)return 6408;if(l===ip)return 6409;if(l===op)return 6410;if(l===Ms)return 6402;if(l===rc)return 34041;if(l===sp)return 6403;if(l===jr)return 32774;if(l===uu)return 32778;if(l===Jt)return 32779;if(l===v)return 0;if(l===C)return 1;if(l===R)return 768;if(l===A)return 769;if(l===z)return 770;if(l===Y)return 771;if(l===ce)return 772;if(l===de)return 773;if(l===ye)return 774;if(l===Be)return 775;if(l===Ne)return 776;if((l===Qi||l===Qd||l===ir||l===As)&&null!==(d=o.get("WEBGL_compressed_texture_s3tc"))){if(l===Qi)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===Qd)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===ir)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===As)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((l===Pi||l===ap||l===Jd||l===Kd)&&null!==(d=o.get("WEBGL_compressed_texture_pvrtc"))){if(l===Pi)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===ap)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===Jd)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===Kd)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(l===vl&&null!==(d=o.get("WEBGL_compressed_texture_etc1")))return d.COMPRESSED_RGB_ETC1_WEBGL;if((l===cp||l===ic||l===up||l===eh||l===th||l===lp||l===dp||l===hp||l===fp||l===nh||l===pp||l===mp||l===dr||l===gp)&&null!==(d=o.get("WEBGL_compressed_texture_astc")))return l;if(l===ai||l===tc){if(s.isWebGL2){if(l===ai)return 32775;if(l===tc)return 32776}if(null!==(d=o.get("EXT_blend_minmax"))){if(l===ai)return d.MIN_EXT;if(l===tc)return d.MAX_EXT}}if(l===nc){if(s.isWebGL2)return 34042;if(null!==(d=o.get("WEBGL_depth_texture")))return d.UNSIGNED_INT_24_8_WEBGL}return 0}}}function le(){Le.call(this),this.type="Group"}function Et(){Le.call(this),this.type="Camera",this.matrixWorldInverse=new it,this.projectionMatrix=new it,this.projectionMatrixInverse=new it}function $n(t,o,s,c){Et.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==s?s:.1,this.far=void 0!==c?c:2e3,this.focus=10,this.aspect=void 0!==o?o:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Cu(t){$n.call(this),this.cameras=t||[]}(vi.prototype=Object.create(_t.prototype)).constructor=vi,vi.prototype.isMeshDepthMaterial=!0,vi.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(Os.prototype=Object.create(_t.prototype)).constructor=Os,Os.prototype.isMeshDistanceMaterial=!0,Os.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},le.prototype=Object.assign(Object.create(Le.prototype),{constructor:le,isGroup:!0}),Et.prototype=Object.assign(Object.create(Le.prototype),{constructor:Et,isCamera:!0,copy:function(t,o){return Le.prototype.copy.call(this,t,o),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new k),this.updateMatrixWorld(!0);var o=this.matrixWorld.elements;return t.set(-o[8],-o[9],-o[10]).normalize()},updateMatrixWorld:function(t){Le.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),$n.prototype=Object.assign(Object.create(Et.prototype),{constructor:$n,isPerspectiveCamera:!0,copy:function(t,o){return Et.prototype.copy.call(this,t,o),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var o=.5*this.getFilmHeight()/t;this.fov=2*yt.RAD2DEG*Math.atan(o),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*yt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*yt.RAD2DEG*Math.atan(Math.tan(.5*yt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,o,s,c,l,d){this.aspect=t/o,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=o,this.view.offsetX=s,this.view.offsetY=c,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,o=t*Math.tan(.5*yt.DEG2RAD*this.fov)/this.zoom,s=2*o,c=this.aspect*s,l=-.5*c,d=this.view;if(null!==this.view&&this.view.enabled){var f=d.fullWidth,p=d.fullHeight;l+=d.offsetX*c/f,o-=d.offsetY*s/p,c*=d.width/f,s*=d.height/p}var y=this.filmOffset;0!==y&&(l+=t*y/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+c,o,o-s,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var o=Le.prototype.toJSON.call(this,t);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,null!==this.view&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}),Cu.prototype=Object.assign(Object.create($n.prototype),{constructor:Cu,isArrayCamera:!0});var io,pr=new k,Ih=new k;function gc(t,o,s){pr.setFromMatrixPosition(o.matrixWorld),Ih.setFromMatrixPosition(s.matrixWorld);var c=pr.distanceTo(Ih),l=o.projectionMatrix.elements,d=s.projectionMatrix.elements,f=l[14]/(l[10]-1),p=l[14]/(l[10]+1),y=(l[9]+1)/l[5],w=(l[9]-1)/l[5],b=(l[8]-1)/l[0],_=(d[8]+1)/d[0],E=f*b,M=f*_,S=c/(-b+_),I=S*-b;o.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(I),t.translateZ(S),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var T=f+S,O=p+S;t.projectionMatrix.makePerspective(E-I,M+(c-I),y*p/O*T,w*p/O*T,T,O)}function ro(t){var o,s,c=this,l=null,d=null,f=null,p=[],y=new it,w=new it,b=1,_="local-floor";typeof window<"u"&&"VRFrameData"in window&&(d=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",U,!1));var E=new it,M=new en,S=new k,I=new $n;I.viewport=new un,I.layers.enable(1);var T=new $n;T.viewport=new un,T.layers.enable(2);var O=new Cu([I,T]);function F(){return null!==l&&!0===l.isPresenting}O.layers.enable(1),O.layers.enable(2);var B,N=new pe;function U(){if(F()){var $=l.getEyeParameters("left");o=2*$.renderWidth*b,s=$.renderHeight*b,B=t.getPixelRatio(),t.getSize(N),t.setDrawingBufferSize(o,s,1),I.viewport.set(0,0,o/2,s),T.viewport.set(o/2,0,o/2,s),ue.start()}else c.enabled&&t.setDrawingBufferSize(N.width,N.height,B),ue.stop()}var q=[];function Z($){for(var Q=navigator.getGamepads&&navigator.getGamepads(),ae=0,me=0,xe=Q.length;ae<xe;ae++){var Ae=Q[ae];if(Ae&&("Daydream Controller"===Ae.id||"Gear VR Controller"===Ae.id||"Oculus Go Controller"===Ae.id||"OpenVR Gamepad"===Ae.id||Ae.id.startsWith("Oculus Touch")||Ae.id.startsWith("Spatial Controller"))){if(me===$)return Ae;me++}}}function ne($,Q){null!==Q&&4===Q.length&&$.set(Q[0]*o,Q[1]*s,Q[2]*o,Q[3]*s)}this.enabled=!1,this.getController=function($){var Q=p[$];return void 0===Q&&((Q=new le).matrixAutoUpdate=!1,Q.visible=!1,p[$]=Q),Q},this.getDevice=function(){return l},this.setDevice=function($){void 0!==$&&(l=$),ue.setContext($)},this.setFramebufferScaleFactor=function($){b=$},this.setReferenceSpaceType=function($){_=$},this.setPoseTarget=function($){void 0!==$&&(f=$)},this.getCamera=function($){var Q="local-floor"===_?1.6:0;if(!1===F())return $.position.set(0,Q,0),$.rotation.set(0,0,0),$;if(l.depthNear=$.near,l.depthFar=$.far,l.getFrameData(d),"local-floor"===_){var ae=l.stageParameters;ae?y.fromArray(ae.sittingToStandingTransform):y.makeTranslation(0,Q,0)}var me=d.pose,xe=null!==f?f:$;xe.matrix.copy(y),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),null!==me.orientation&&(M.fromArray(me.orientation),xe.quaternion.multiply(M)),null!==me.position&&(M.setFromRotationMatrix(y),S.fromArray(me.position),S.applyQuaternion(M),xe.position.add(S)),xe.updateMatrixWorld(),I.near=$.near,T.near=$.near,I.far=$.far,T.far=$.far,I.matrixWorldInverse.fromArray(d.leftViewMatrix),T.matrixWorldInverse.fromArray(d.rightViewMatrix),w.getInverse(y),"local-floor"===_&&(I.matrixWorldInverse.multiply(w),T.matrixWorldInverse.multiply(w));var Ae=xe.parent;null!==Ae&&(E.getInverse(Ae.matrixWorld),I.matrixWorldInverse.multiply(E),T.matrixWorldInverse.multiply(E)),I.matrixWorld.getInverse(I.matrixWorldInverse),T.matrixWorld.getInverse(T.matrixWorldInverse),I.projectionMatrix.fromArray(d.leftProjectionMatrix),T.projectionMatrix.fromArray(d.rightProjectionMatrix),gc(O,I,T);var De=l.getLayers();if(De.length){var he=De[0];ne(I.viewport,he.leftBounds),ne(T.viewport,he.rightBounds)}return function re(){for(var $=0;$<p.length;$++){var Q=p[$],ae=Z($);if(void 0!==ae&&void 0!==ae.pose){if(null===ae.pose)return;var me=ae.pose;!1===me.hasPosition&&Q.position.set(.2,-.6,-.05),null!==me.position&&Q.position.fromArray(me.position),null!==me.orientation&&Q.quaternion.fromArray(me.orientation),Q.matrix.compose(Q.position,Q.quaternion,Q.scale),Q.matrix.premultiply(y),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldNeedsUpdate=!0,Q.visible=!0;var xe="Daydream Controller"===ae.id?0:1;void 0===q[$]&&(q[$]=!1),q[$]!==ae.buttons[xe].pressed&&(q[$]=ae.buttons[xe].pressed,!0===q[$]?Q.dispatchEvent({type:"selectstart"}):(Q.dispatchEvent({type:"selectend"}),Q.dispatchEvent({type:"select"})))}else Q.visible=!1}}(),O},this.getStandingMatrix=function(){return y},this.isPresenting=F;var ue=new Il;this.setAnimationLoop=function($){ue.setAnimationLoop($),F()&&ue.start()},this.submitFrame=function(){F()&&l.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",U)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Rh(t){var o=t.context,s=null,c=null,l="local-floor",d=null,f=[],p=[];function y(){return null!==s&&null!==c}var w=new $n;w.layers.enable(1),w.viewport=new un;var b=new $n;b.layers.enable(2),b.viewport=new un;var _=new Cu([w,b]);function E(N){for(var B=0;B<f.length;B++)p[B]===N.inputSource&&f[B].dispatchEvent({type:N.type})}function M(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),F.stop()}function S(N){c=N,F.setContext(s),F.start()}function I(N,B){null===B?N.matrixWorld.copy(N.matrix):N.matrixWorld.multiplyMatrices(B.matrixWorld,N.matrix),N.matrixWorldInverse.getInverse(N.matrixWorld)}_.layers.enable(1),_.layers.enable(2),this.enabled=!1,this.getController=function(N){var B=f[N];return void 0===B&&((B=new le).matrixAutoUpdate=!1,B.visible=!1,f[N]=B),B},this.setFramebufferScaleFactor=function(N){},this.setReferenceSpaceType=function(N){l=N},this.getSession=function(){return s},this.setSession=function(N){null!==(s=N)&&(s.addEventListener("select",E),s.addEventListener("selectstart",E),s.addEventListener("selectend",E),s.addEventListener("end",M),s.updateRenderState({baseLayer:new XRWebGLLayer(s,o)}),s.requestReferenceSpace(l).then(S),p=s.inputSources,s.addEventListener("inputsourceschange",function(){p=s.inputSources,console.log(p);for(var B=0;B<f.length;B++)f[B].userData.inputSource=p[B]}))},this.getCamera=function(N){if(y()){var B=N.parent,U=_.cameras;I(_,B);for(var q=0;q<U.length;q++)I(U[q],B);N.matrixWorld.copy(_.matrixWorld);for(var Z=N.children,re=(q=0,Z.length);q<re;q++)Z[q].updateMatrixWorld(!0);return gc(_,w,b),_}return N},this.isPresenting=y;var T=null,F=new Il;F.setAnimationLoop(function O(N,B){if(null!==(d=B.getViewerPose(c))){var U=d.views,q=s.renderState.baseLayer;t.setFramebuffer(q.framebuffer);for(var Z=0;Z<U.length;Z++){var re=U[Z],ne=q.getViewport(re),$=_.cameras[Z];$.matrix.fromArray(re.transform.inverse.matrix).getInverse($.matrix),$.projectionMatrix.fromArray(re.projectionMatrix),$.viewport.set(ne.x,ne.y,ne.width,ne.height),0===Z&&_.matrix.copy($.matrix)}}for(Z=0;Z<f.length;Z++){var Q=f[Z],ae=p[Z];if(ae){var me=B.getPose(ae.targetRaySpace,c);if(null!==me){Q.matrix.fromArray(me.transform.matrix),Q.matrix.decompose(Q.position,Q.rotation,Q.scale),Q.visible=!0;continue}}Q.visible=!1}T&&T(N)}),this.setAnimationLoop=function(N){T=N},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new it},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Su(t){console.log("THREE.WebGLRenderer",te);var o=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),s=void 0!==t.context?t.context:null,c=void 0!==t.alpha&&t.alpha,l=void 0===t.depth||t.depth,d=void 0===t.stencil||t.stencil,f=void 0!==t.antialias&&t.antialias,p=void 0===t.premultipliedAlpha||t.premultipliedAlpha,y=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,w=void 0!==t.powerPreference?t.powerPreference:"default",b=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,_=null,E=null;this.domElement=o,this.context=null,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ci,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var se,Oe,et,lt,Gt,j,V,ge,Se,pt,$e,We,Dt,Mt,Pt,Yt,Mn,mt,M=this,S=!1,I=null,T=0,O=0,F=null,N=null,B=-1,U={geometry:null,program:null,wireframe:!1},q=null,Z=null,re=new un,ne=new un,ue=null,$=o.width,Q=o.height,ae=1,me=new un(0,0,$,Q),xe=new un(0,0,$,Q),Ae=!1,De=new sh,he=new Bp,_e=!1,Fe=!1,Xe=new it,Ke=new k;function ut(){return null===F?ae:1}try{var Ue={alpha:c,depth:l,stencil:d,antialias:f,premultipliedAlpha:p,preserveDrawingBuffer:y,powerPreference:w,failIfMajorPerformanceCaveat:b,xrCompatible:!0};if(o.addEventListener("webglcontextlost",zr,!1),o.addEventListener("webglcontextrestored",Ft,!1),null===(se=s||o.getContext("webgl",Ue)||o.getContext("experimental-webgl",Ue)))throw null!==o.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===se.getShaderPrecisionFormat&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(P){throw console.error("THREE.WebGLRenderer: "+P.message),P}function Xn(){Oe=new Up(se),(et=new nb(se,Oe,t)).isWebGL2||(Oe.get("WEBGL_depth_texture"),Oe.get("OES_texture_float"),Oe.get("OES_texture_half_float"),Oe.get("OES_texture_half_float_linear"),Oe.get("OES_standard_derivatives"),Oe.get("OES_element_index_uint"),Oe.get("ANGLE_instanced_arrays")),Oe.get("OES_texture_float_linear"),mt=new sm(se,Oe,et),(lt=new zv(se,Oe,mt,et)).scissor(ne.copy(xe).multiplyScalar(ae)),lt.viewport(re.copy(me).multiplyScalar(ae)),Gt=new ob(se),j=new em,V=new Gv(se,Oe,lt,j,et,mt,Gt),ge=new Is(se),Se=new rb(se,ge,Gt),pt=new sb(Se,Gt),Pt=new Ls(se),$e=new Kp(M,Oe,et,V),We=new nm,Dt=new im,Mt=new eb(M,lt,pt,p),Yt=new tb(se,Oe,Gt,et),Mn=new ib(se,Oe,Gt,et),Gt.programs=$e.programs,M.context=se,M.capabilities=et,M.extensions=Oe,M.properties=j,M.renderLists=We,M.state=lt,M.info=Gt}Xn();var tr=typeof navigator<"u"&&"xr"in navigator&&"supportsSession"in navigator.xr?new Rh(M):new ro(M);this.vr=tr;var kr=new om(M,pt,et.maxTextureSize);function zr(P){P.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Ft(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1,Xn()}function K(P){var G=P.target;G.removeEventListener("dispose",K),function Ve(P){qe(P),j.remove(P)}(G)}function qe(P){var G=j.get(P).program;P.program=void 0,void 0!==G&&$e.releaseProgram(G)}this.shadowMap=kr,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){var P=Oe.get("WEBGL_lose_context");P&&P.loseContext()},this.forceContextRestore=function(){var P=Oe.get("WEBGL_lose_context");P&&P.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(P){void 0!==P&&(ae=P,this.setSize($,Q,!1))},this.getSize=function(P){return void 0===P&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),P=new pe),P.set($,Q)},this.setSize=function(P,G,X){tr.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):($=P,Q=G,o.width=P*ae,o.height=G*ae,!1!==X&&(o.style.width=P+"px",o.style.height=G+"px"),this.setViewport(0,0,P,G))},this.getDrawingBufferSize=function(P){return void 0===P&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),P=new pe),P.set($*ae,Q*ae)},this.setDrawingBufferSize=function(P,G,X){$=P,Q=G,ae=X,o.width=P*X,o.height=G*X,this.setViewport(0,0,P,G)},this.getCurrentViewport=function(P){return void 0===P&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),P=new un),P.copy(re)},this.getViewport=function(P){return P.copy(me)},this.setViewport=function(P,G,X,Ee){P.isVector4?me.set(P.x,P.y,P.z,P.w):me.set(P,G,X,Ee),lt.viewport(re.copy(me).multiplyScalar(ae))},this.getScissor=function(P){return P.copy(xe)},this.setScissor=function(P,G,X,Ee){P.isVector4?xe.set(P.x,P.y,P.z,P.w):xe.set(P,G,X,Ee),lt.scissor(ne.copy(xe).multiplyScalar(ae))},this.getScissorTest=function(){return Ae},this.setScissorTest=function(P){lt.setScissorTest(Ae=P)},this.getClearColor=function(){return Mt.getClearColor()},this.setClearColor=function(){Mt.setClearColor.apply(Mt,arguments)},this.getClearAlpha=function(){return Mt.getClearAlpha()},this.setClearAlpha=function(){Mt.setClearAlpha.apply(Mt,arguments)},this.clear=function(P,G,X){var Ee=0;(void 0===P||P)&&(Ee|=16384),(void 0===G||G)&&(Ee|=256),(void 0===X||X)&&(Ee|=1024),se.clear(Ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",zr,!1),o.removeEventListener("webglcontextrestored",Ft,!1),We.dispose(),Dt.dispose(),j.dispose(),pt.dispose(),tr.dispose(),Vt.stop()},this.renderBufferImmediate=function(P,G){lt.initAttributes();var X=j.get(P);P.hasPositions&&!X.position&&(X.position=se.createBuffer()),P.hasNormals&&!X.normal&&(X.normal=se.createBuffer()),P.hasUvs&&!X.uv&&(X.uv=se.createBuffer()),P.hasColors&&!X.color&&(X.color=se.createBuffer());var Ee=G.getAttributes();P.hasPositions&&(se.bindBuffer(34962,X.position),se.bufferData(34962,P.positionArray,35048),lt.enableAttribute(Ee.position),se.vertexAttribPointer(Ee.position,3,5126,!1,0,0)),P.hasNormals&&(se.bindBuffer(34962,X.normal),se.bufferData(34962,P.normalArray,35048),lt.enableAttribute(Ee.normal),se.vertexAttribPointer(Ee.normal,3,5126,!1,0,0)),P.hasUvs&&(se.bindBuffer(34962,X.uv),se.bufferData(34962,P.uvArray,35048),lt.enableAttribute(Ee.uv),se.vertexAttribPointer(Ee.uv,2,5126,!1,0,0)),P.hasColors&&(se.bindBuffer(34962,X.color),se.bufferData(34962,P.colorArray,35048),lt.enableAttribute(Ee.color),se.vertexAttribPointer(Ee.color,3,5126,!1,0,0)),lt.disableUnusedAttributes(),se.drawArrays(4,0,P.count),P.count=0},this.renderBufferDirect=function(P,G,X,Ee,He,Bt){var ke=He.isMesh&&He.matrixWorld.determinant()<0;lt.setMaterial(Ee,ke);var ze=Va(P,G,Ee,He),Rt=!1;(U.geometry!==X.id||U.program!==ze.id||U.wireframe!==(!0===Ee.wireframe))&&(U.geometry=X.id,U.program=ze.id,U.wireframe=!0===Ee.wireframe,Rt=!0),He.morphTargetInfluences&&(Pt.update(He,X,Ee,ze),Rt=!0);var fn=X.index,Qt=X.attributes.position,jt=1;!0===Ee.wireframe&&(fn=Se.getWireframeAttribute(X),jt=2);var Ln,Tt=Yt;null!==fn&&(Ln=ge.get(fn),(Tt=Mn).setIndex(Ln)),Rt&&(function Ze(P,G,X){if(X&&X.isInstancedBufferGeometry&&!et.isWebGL2&&null===Oe.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{lt.initAttributes();var Ee=X.attributes,He=G.getAttributes(),Bt=P.defaultAttributeValues;for(var ke in He){var ze=He[ke];if(ze>=0){var Rt=Ee[ke];if(void 0!==Rt){var fn=Rt.normalized,Qt=Rt.itemSize,jt=ge.get(Rt);if(void 0===jt)continue;var Ln=jt.buffer,Tt=jt.type,tt=jt.bytesPerElement;if(Rt.isInterleavedBufferAttribute){var Wt=Rt.data,vr=Wt.stride,Uo=Rt.offset;Wt&&Wt.isInstancedInterleavedBuffer?(lt.enableAttributeAndDivisor(ze,Wt.meshPerAttribute),void 0===X.maxInstancedCount&&(X.maxInstancedCount=Wt.meshPerAttribute*Wt.count)):lt.enableAttribute(ze),se.bindBuffer(34962,Ln),se.vertexAttribPointer(ze,Qt,Tt,fn,vr*tt,Uo*tt)}else Rt.isInstancedBufferAttribute?(lt.enableAttributeAndDivisor(ze,Rt.meshPerAttribute),void 0===X.maxInstancedCount&&(X.maxInstancedCount=Rt.meshPerAttribute*Rt.count)):lt.enableAttribute(ze),se.bindBuffer(34962,Ln),se.vertexAttribPointer(ze,Qt,Tt,fn,0,0)}else if(void 0!==Bt){var Qn=Bt[ke];if(void 0!==Qn)switch(Qn.length){case 2:se.vertexAttrib2fv(ze,Qn);break;case 3:se.vertexAttrib3fv(ze,Qn);break;case 4:se.vertexAttrib4fv(ze,Qn);break;default:se.vertexAttrib1fv(ze,Qn)}}}}lt.disableUnusedAttributes()}}(Ee,ze,X),null!==fn&&se.bindBuffer(34963,Ln.buffer));var tt=1/0;null!==fn?tt=fn.count:void 0!==Qt&&(tt=Qt.count);var Wt=X.drawRange.start*jt,vr=X.drawRange.count*jt,Uo=null!==Bt?Bt.start*jt:0,Qn=null!==Bt?Bt.count*jt:1/0,Kc=Math.max(Wt,Uo),eu=Math.min(tt,Wt+vr,Uo+Qn)-1,Ga=Math.max(0,eu-Kc+1);if(0!==Ga){if(He.isMesh)if(!0===Ee.wireframe)lt.setLineWidth(Ee.wireframeLinewidth*ut()),Tt.setMode(1);else switch(He.drawMode){case Nn:Tt.setMode(4);break;case wl:Tt.setMode(5);break;case vp:Tt.setMode(6)}else if(He.isLine){var hf=Ee.linewidth;void 0===hf&&(hf=1),lt.setLineWidth(hf*ut()),Tt.setMode(He.isLineSegments?1:He.isLineLoop?2:3)}else He.isPoints?Tt.setMode(0):He.isSprite&&Tt.setMode(4);X&&X.isInstancedBufferGeometry?X.maxInstancedCount>0&&Tt.renderInstances(X,Kc,Ga):Tt.render(Kc,Ga)}},this.compile=function(P,G){(E=Dt.get(P,G)).init(),P.traverse(function(X){X.isLight&&(E.pushLight(X),X.castShadow&&E.pushShadow(X))}),E.setupLights(G),P.traverse(function(X){if(X.material)if(Array.isArray(X.material))for(var Ee=0;Ee<X.material.length;Ee++)ri(X.material[Ee],P.fog,X);else ri(X.material,P.fog,X)})};var kt=null,Vt=new Il;function gr(P,G,X,Ee){if(!1!==P.visible){if(P.layers.test(G.layers))if(P.isGroup)X=P.renderOrder;else if(P.isLight)E.pushLight(P),P.castShadow&&E.pushShadow(P);else if(P.isSprite){if(!P.frustumCulled||De.intersectsSprite(P)){Ee&&Ke.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Xe);var Bt=pt.update(P);(ke=P.material).visible&&_.push(P,Bt,ke,X,Ke.z,null)}}else if(P.isImmediateRenderObject)Ee&&Ke.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Xe),_.push(P,null,P.material,X,Ke.z,null);else if((P.isMesh||P.isLine||P.isPoints)&&(P.isSkinnedMesh&&P.skeleton.update(),!P.frustumCulled||De.intersectsObject(P))){Ee&&Ke.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Xe),Bt=pt.update(P);var ke=P.material;if(Array.isArray(ke))for(var ze=Bt.groups,Rt=0,fn=ze.length;Rt<fn;Rt++){var Qt=ze[Rt],jt=ke[Qt.materialIndex];jt&&jt.visible&&_.push(P,Bt,jt,X,Ke.z,Qt)}else ke.visible&&_.push(P,Bt,ke,X,Ke.z,null)}var Ln=P.children;for(Rt=0,fn=Ln.length;Rt<fn;Rt++)gr(Ln[Rt],G,X,Ee)}}function Xt(P,G,X,Ee){for(var He=0,Bt=P.length;He<Bt;He++){var ke=P[He],ze=ke.object,Rt=ke.geometry,fn=void 0===Ee?ke.material:Ee,Qt=ke.group;if(X.isArrayCamera){Z=X;for(var jt=X.cameras,Ln=0,Tt=jt.length;Ln<Tt;Ln++){var tt=jt[Ln];ze.layers.test(tt.layers)&&(lt.viewport(re.copy(tt.viewport)),E.setupLights(tt),Ar(ze,G,tt,Rt,fn,Qt))}}else Z=null,Ar(ze,G,X,Rt,fn,Qt)}}function Ar(P,G,X,Ee,He,Bt){if(P.onBeforeRender(M,G,X,Ee,He,Bt),E=Dt.get(G,Z||X),P.modelViewMatrix.multiplyMatrices(X.matrixWorldInverse,P.matrixWorld),P.normalMatrix.getNormalMatrix(P.modelViewMatrix),P.isImmediateRenderObject){lt.setMaterial(He);var ke=Va(X,G.fog,He,P);U.geometry=null,U.program=null,U.wireframe=!1,function At(P,G){P.render(function(X){M.renderBufferImmediate(X,G)})}(P,ke)}else M.renderBufferDirect(X,G.fog,Ee,He,P,Bt);P.onAfterRender(M,G,X,Ee,He,Bt),E=Dt.get(G,Z||X)}function ri(P,G,X){var Ee=j.get(P),He=E.state.lights,ke=Ee.lightsHash,ze=He.state.hash,Rt=$e.getParameters(P,He.state,E.state.shadowsArray,G,he.numPlanes,he.numIntersection,X),fn=$e.getProgramCode(P,Rt),Qt=Ee.program,jt=!0;if(void 0===Qt)P.addEventListener("dispose",K);else if(Qt.code!==fn)qe(P);else if(ke.stateID!==ze.stateID||ke.directionalLength!==ze.directionalLength||ke.pointLength!==ze.pointLength||ke.spotLength!==ze.spotLength||ke.rectAreaLength!==ze.rectAreaLength||ke.hemiLength!==ze.hemiLength||ke.shadowsLength!==ze.shadowsLength)ke.stateID=ze.stateID,ke.directionalLength=ze.directionalLength,ke.pointLength=ze.pointLength,ke.spotLength=ze.spotLength,ke.rectAreaLength=ze.rectAreaLength,ke.hemiLength=ze.hemiLength,ke.shadowsLength=ze.shadowsLength,jt=!1;else{if(void 0!==Rt.shaderID)return;jt=!1}if(jt){if(Rt.shaderID){var Ln=Xr[Rt.shaderID];Ee.shader={name:P.type,uniforms:ma(Ln.uniforms),vertexShader:Ln.vertexShader,fragmentShader:Ln.fragmentShader}}else Ee.shader={name:P.type,uniforms:P.uniforms,vertexShader:P.vertexShader,fragmentShader:P.fragmentShader};P.onBeforeCompile(Ee.shader,M),fn=$e.getProgramCode(P,Rt),Qt=$e.acquireProgram(P,Ee.shader,Rt,fn),Ee.program=Qt,P.program=Qt}var Tt=Qt.getAttributes();if(P.morphTargets){P.numSupportedMorphTargets=0;for(var tt=0;tt<M.maxMorphTargets;tt++)Tt["morphTarget"+tt]>=0&&P.numSupportedMorphTargets++}if(P.morphNormals)for(P.numSupportedMorphNormals=0,tt=0;tt<M.maxMorphNormals;tt++)Tt["morphNormal"+tt]>=0&&P.numSupportedMorphNormals++;var Wt=Ee.shader.uniforms;(!P.isShaderMaterial&&!P.isRawShaderMaterial||!0===P.clipping)&&(Ee.numClippingPlanes=he.numPlanes,Ee.numIntersection=he.numIntersection,Wt.clippingPlanes=he.uniform),Ee.fog=G,void 0===ke&&(Ee.lightsHash=ke={}),ke.stateID=ze.stateID,ke.directionalLength=ze.directionalLength,ke.pointLength=ze.pointLength,ke.spotLength=ze.spotLength,ke.rectAreaLength=ze.rectAreaLength,ke.hemiLength=ze.hemiLength,ke.shadowsLength=ze.shadowsLength,P.lights&&(Wt.ambientLightColor.value=He.state.ambient,Wt.lightProbe.value=He.state.probe,Wt.directionalLights.value=He.state.directional,Wt.spotLights.value=He.state.spot,Wt.rectAreaLights.value=He.state.rectArea,Wt.pointLights.value=He.state.point,Wt.hemisphereLights.value=He.state.hemi,Wt.directionalShadowMap.value=He.state.directionalShadowMap,Wt.directionalShadowMatrix.value=He.state.directionalShadowMatrix,Wt.spotShadowMap.value=He.state.spotShadowMap,Wt.spotShadowMatrix.value=He.state.spotShadowMatrix,Wt.pointShadowMap.value=He.state.pointShadowMap,Wt.pointShadowMatrix.value=He.state.pointShadowMatrix);var vr=Ee.program.getUniforms(),Uo=xr.seqWithValue(vr.seq,Wt);Ee.uniformsList=Uo}function Va(P,G,X,Ee){V.resetTextureUnits();var He=j.get(X),ke=He.lightsHash,ze=E.state.lights.state.hash;_e&&(Fe||P!==q)&&he.setState(X.clippingPlanes,X.clipIntersection,X.clipShadows,P,He,P===q&&X.id===B),!1===X.needsUpdate&&(void 0===He.program||X.fog&&He.fog!==G||X.lights&&(ke.stateID!==ze.stateID||ke.directionalLength!==ze.directionalLength||ke.pointLength!==ze.pointLength||ke.spotLength!==ze.spotLength||ke.rectAreaLength!==ze.rectAreaLength||ke.hemiLength!==ze.hemiLength||ke.shadowsLength!==ze.shadowsLength)||void 0!==He.numClippingPlanes&&(He.numClippingPlanes!==he.numPlanes||He.numIntersection!==he.numIntersection))&&(X.needsUpdate=!0),X.needsUpdate&&(ri(X,G,Ee),X.needsUpdate=!1);var fn=!1,Qt=!1,jt=!1,Ln=He.program,Tt=Ln.getUniforms(),tt=He.shader.uniforms;if(lt.useProgram(Ln.program)&&(fn=!0,Qt=!0,jt=!0),X.id!==B&&(B=X.id,Qt=!0),fn||q!==P){if(Tt.setValue(se,"projectionMatrix",P.projectionMatrix),et.logarithmicDepthBuffer&&Tt.setValue(se,"logDepthBufFC",2/(Math.log(P.far+1)/Math.LN2)),q!==P&&(q=P,Qt=!0,jt=!0),X.isShaderMaterial||X.isMeshPhongMaterial||X.isMeshStandardMaterial||X.envMap){var Wt=Tt.map.cameraPosition;void 0!==Wt&&Wt.setValue(se,Ke.setFromMatrixPosition(P.matrixWorld))}(X.isMeshPhongMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial||X.skinning)&&Tt.setValue(se,"viewMatrix",P.matrixWorldInverse)}if(X.skinning){Tt.setOptional(se,Ee,"bindMatrix"),Tt.setOptional(se,Ee,"bindMatrixInverse");var vr=Ee.skeleton;if(vr)if(et.floatVertexTextures){if(void 0===vr.boneTexture){var Qn=Math.sqrt(4*vr.bones.length);Qn=yt.ceilPowerOfTwo(Qn),Qn=Math.max(Qn,4);var Kc=new Float32Array(Qn*Qn*4);Kc.set(vr.boneMatrices);var eu=new fa(Kc,Qn,Qn,Mo,ua);eu.needsUpdate=!0,vr.boneMatrices=Kc,vr.boneTexture=eu,vr.boneTextureSize=Qn}Tt.setValue(se,"boneTexture",vr.boneTexture,V),Tt.setValue(se,"boneTextureSize",vr.boneTextureSize)}else Tt.setOptional(se,vr,"boneMatrices")}return Qt&&(Tt.setValue(se,"toneMappingExposure",M.toneMappingExposure),Tt.setValue(se,"toneMappingWhitePoint",M.toneMappingWhitePoint),X.lights&&function Jc(P,G){P.ambientLightColor.needsUpdate=G,P.lightProbe.needsUpdate=G,P.directionalLights.needsUpdate=G,P.pointLights.needsUpdate=G,P.spotLights.needsUpdate=G,P.rectAreaLights.needsUpdate=G,P.hemisphereLights.needsUpdate=G}(tt,jt),G&&X.fog&&function hd(P,G){P.fogColor.value.copy(G.color),G.isFog?(P.fogNear.value=G.near,P.fogFar.value=G.far):G.isFogExp2&&(P.fogDensity.value=G.density)}(tt,G),X.isMeshBasicMaterial?ii(tt,X):X.isMeshLambertMaterial?(ii(tt,X),function Ha(P,G){G.emissiveMap&&(P.emissiveMap.value=G.emissiveMap)}(tt,X)):X.isMeshPhongMaterial?(ii(tt,X),X.isMeshToonMaterial?function uy(P,G){za(P,G),G.gradientMap&&(P.gradientMap.value=G.gradientMap)}(tt,X):za(tt,X)):X.isMeshStandardMaterial?(ii(tt,X),X.isMeshPhysicalMaterial?function ly(P,G){Pm(P,G),P.reflectivity.value=G.reflectivity,P.clearCoat.value=G.clearCoat,P.clearCoatRoughness.value=G.clearCoatRoughness}(tt,X):Pm(tt,X)):X.isMeshMatcapMaterial?(ii(tt,X),function df(P,G){G.matcap&&(P.matcap.value=G.matcap),G.bumpMap&&(P.bumpMap.value=G.bumpMap,P.bumpScale.value=G.bumpScale,G.side===bt&&(P.bumpScale.value*=-1)),G.normalMap&&(P.normalMap.value=G.normalMap,P.normalScale.value.copy(G.normalScale),G.side===bt&&P.normalScale.value.negate()),G.displacementMap&&(P.displacementMap.value=G.displacementMap,P.displacementScale.value=G.displacementScale,P.displacementBias.value=G.displacementBias)}(tt,X)):X.isMeshDepthMaterial?(ii(tt,X),function fd(P,G){G.displacementMap&&(P.displacementMap.value=G.displacementMap,P.displacementScale.value=G.displacementScale,P.displacementBias.value=G.displacementBias)}(tt,X)):X.isMeshDistanceMaterial?(ii(tt,X),function dy(P,G){G.displacementMap&&(P.displacementMap.value=G.displacementMap,P.displacementScale.value=G.displacementScale,P.displacementBias.value=G.displacementBias),P.referencePosition.value.copy(G.referencePosition),P.nearDistance.value=G.nearDistance,P.farDistance.value=G.farDistance}(tt,X)):X.isMeshNormalMaterial?(ii(tt,X),function Om(P,G){G.bumpMap&&(P.bumpMap.value=G.bumpMap,P.bumpScale.value=G.bumpScale,G.side===bt&&(P.bumpScale.value*=-1)),G.normalMap&&(P.normalMap.value=G.normalMap,P.normalScale.value.copy(G.normalScale),G.side===bt&&P.normalScale.value.negate()),G.displacementMap&&(P.displacementMap.value=G.displacementMap,P.displacementScale.value=G.displacementScale,P.displacementBias.value=G.displacementBias)}(tt,X)):X.isLineBasicMaterial?(function Gr(P,G){P.diffuse.value.copy(G.color),P.opacity.value=G.opacity}(tt,X),X.isLineDashedMaterial&&function Xs(P,G){P.dashSize.value=G.dashSize,P.totalSize.value=G.dashSize+G.gapSize,P.scale.value=G.scale}(tt,X)):X.isPointsMaterial?function ol(P,G){P.diffuse.value.copy(G.color),P.opacity.value=G.opacity,P.size.value=G.size*ae,P.scale.value=.5*Q,P.map.value=G.map,null!==G.map&&(!0===G.map.matrixAutoUpdate&&G.map.updateMatrix(),P.uvTransform.value.copy(G.map.matrix))}(tt,X):X.isSpriteMaterial?function dd(P,G){P.diffuse.value.copy(G.color),P.opacity.value=G.opacity,P.rotation.value=G.rotation,P.map.value=G.map,null!==G.map&&(!0===G.map.matrixAutoUpdate&&G.map.updateMatrix(),P.uvTransform.value.copy(G.map.matrix))}(tt,X):X.isShadowMaterial&&(tt.color.value.copy(X.color),tt.opacity.value=X.opacity),void 0!==tt.ltc_1&&(tt.ltc_1.value=Re.LTC_1),void 0!==tt.ltc_2&&(tt.ltc_2.value=Re.LTC_2),xr.upload(se,He.uniformsList,tt,V)),X.isShaderMaterial&&!0===X.uniformsNeedUpdate&&(xr.upload(se,He.uniformsList,tt,V),X.uniformsNeedUpdate=!1),X.isSpriteMaterial&&Tt.setValue(se,"center",Ee.center),Tt.setValue(se,"modelViewMatrix",Ee.modelViewMatrix),Tt.setValue(se,"normalMatrix",Ee.normalMatrix),Tt.setValue(se,"modelMatrix",Ee.matrixWorld),Ln}function ii(P,G){var X;P.opacity.value=G.opacity,G.color&&P.diffuse.value.copy(G.color),G.emissive&&P.emissive.value.copy(G.emissive).multiplyScalar(G.emissiveIntensity),G.map&&(P.map.value=G.map),G.alphaMap&&(P.alphaMap.value=G.alphaMap),G.specularMap&&(P.specularMap.value=G.specularMap),G.envMap&&(P.envMap.value=G.envMap,P.flipEnvMap.value=G.envMap.isCubeTexture?-1:1,P.reflectivity.value=G.reflectivity,P.refractionRatio.value=G.refractionRatio,P.maxMipLevel.value=j.get(G.envMap).__maxMipLevel),G.lightMap&&(P.lightMap.value=G.lightMap,P.lightMapIntensity.value=G.lightMapIntensity),G.aoMap&&(P.aoMap.value=G.aoMap,P.aoMapIntensity.value=G.aoMapIntensity),G.map?X=G.map:G.specularMap?X=G.specularMap:G.displacementMap?X=G.displacementMap:G.normalMap?X=G.normalMap:G.bumpMap?X=G.bumpMap:G.roughnessMap?X=G.roughnessMap:G.metalnessMap?X=G.metalnessMap:G.alphaMap?X=G.alphaMap:G.emissiveMap&&(X=G.emissiveMap),void 0!==X&&(X.isWebGLRenderTarget&&(X=X.texture),!0===X.matrixAutoUpdate&&X.updateMatrix(),P.uvTransform.value.copy(X.matrix))}function za(P,G){P.specular.value.copy(G.specular),P.shininess.value=Math.max(G.shininess,1e-4),G.emissiveMap&&(P.emissiveMap.value=G.emissiveMap),G.bumpMap&&(P.bumpMap.value=G.bumpMap,P.bumpScale.value=G.bumpScale,G.side===bt&&(P.bumpScale.value*=-1)),G.normalMap&&(P.normalMap.value=G.normalMap,P.normalScale.value.copy(G.normalScale),G.side===bt&&P.normalScale.value.negate()),G.displacementMap&&(P.displacementMap.value=G.displacementMap,P.displacementScale.value=G.displacementScale,P.displacementBias.value=G.displacementBias)}function Pm(P,G){P.roughness.value=G.roughness,P.metalness.value=G.metalness,G.roughnessMap&&(P.roughnessMap.value=G.roughnessMap),G.metalnessMap&&(P.metalnessMap.value=G.metalnessMap),G.emissiveMap&&(P.emissiveMap.value=G.emissiveMap),G.bumpMap&&(P.bumpMap.value=G.bumpMap,P.bumpScale.value=G.bumpScale,G.side===bt&&(P.bumpScale.value*=-1)),G.normalMap&&(P.normalMap.value=G.normalMap,P.normalScale.value.copy(G.normalScale),G.side===bt&&P.normalScale.value.negate()),G.displacementMap&&(P.displacementMap.value=G.displacementMap,P.displacementScale.value=G.displacementScale,P.displacementBias.value=G.displacementBias),G.envMap&&(P.envMapIntensity.value=G.envMapIntensity)}Vt.setAnimationLoop(function sn(P){tr.isPresenting()||kt&&kt(P)}),typeof window<"u"&&Vt.setContext(window),this.setAnimationLoop=function(P){kt=P,tr.setAnimationLoop(P),Vt.start()},this.render=function(P,G){var X,Ee;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),X=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Ee=arguments[3]),G&&G.isCamera){if(!S){U.geometry=null,U.program=null,U.wireframe=!1,B=-1,q=null,!0===P.autoUpdate&&P.updateMatrixWorld(),null===G.parent&&G.updateMatrixWorld(),tr.enabled&&(G=tr.getCamera(G)),(E=Dt.get(P,G)).init(),P.onBeforeRender(M,P,G,X||F),Xe.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),De.setFromMatrix(Xe),_e=he.init(this.clippingPlanes,Fe=this.localClippingEnabled,G),(_=We.get(P,G)).init(),gr(P,G,0,M.sortObjects),!0===M.sortObjects&&_.sort(),_e&&he.beginShadows(),kr.render(E.state.shadowsArray,P,G),E.setupLights(G),_e&&he.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==X&&this.setRenderTarget(X),Mt.render(_,P,G,Ee);var Bt=_.opaque,ke=_.transparent;if(P.overrideMaterial){var ze=P.overrideMaterial;Bt.length&&Xt(Bt,P,G,ze),ke.length&&Xt(ke,P,G,ze)}else Bt.length&&Xt(Bt,P,G),ke.length&&Xt(ke,P,G);P.onAfterRender(M,P,G),null!==F&&(V.updateRenderTargetMipmap(F),V.updateMultisampleRenderTarget(F)),lt.buffers.depth.setTest(!0),lt.buffers.depth.setMask(!0),lt.buffers.color.setMask(!0),lt.setPolygonOffset(!1),tr.enabled&&tr.submitFrame(),_=null,E=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(P){I!==P&&se.bindFramebuffer(36160,P),I=P},this.getActiveCubeFace=function(){return T},this.getActiveMipMapLevel=function(){return O},this.getRenderTarget=function(){return F},this.setRenderTarget=function(P,G,X){F=P,T=G,O=X,P&&void 0===j.get(P).__webglFramebuffer&&V.setupRenderTarget(P);var Ee=I,He=!1;if(P){var Bt=j.get(P).__webglFramebuffer;P.isWebGLRenderTargetCube?(Ee=Bt[G||0],He=!0):Ee=P.isWebGLMultisampleRenderTarget?j.get(P).__webglMultisampledFramebuffer:Bt,re.copy(P.viewport),ne.copy(P.scissor),ue=P.scissorTest}else re.copy(me).multiplyScalar(ae),ne.copy(xe).multiplyScalar(ae),ue=Ae;if(N!==Ee&&(se.bindFramebuffer(36160,Ee),N=Ee),lt.viewport(re),lt.scissor(ne),lt.setScissorTest(ue),He){var ke=j.get(P.texture);se.framebufferTexture2D(36160,36064,34069+(G||0),ke.__webglTexture,X||0)}},this.readRenderTargetPixels=function(P,G,X,Ee,He,Bt,ke){if(P&&P.isWebGLRenderTarget){var ze=j.get(P).__webglFramebuffer;if(P.isWebGLRenderTargetCube&&void 0!==ke&&(ze=ze[ke]),ze){var Rt=!1;ze!==N&&(se.bindFramebuffer(36160,ze),Rt=!0);try{var fn=P.texture,Qt=fn.format,jt=fn.type;if(Qt!==Mo&&mt.convert(Qt)!==se.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(jt===Es||mt.convert(jt)===se.getParameter(35738)||jt===ua&&(et.isWebGL2||Oe.get("OES_texture_float")||Oe.get("WEBGL_color_buffer_float"))||jt===lu&&Oe.get(et.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===se.checkFramebufferStatus(36160)?G>=0&&G<=P.width-Ee&&X>=0&&X<=P.height-He&&se.readPixels(G,X,Ee,He,mt.convert(Qt),mt.convert(jt),Bt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Rt&&se.bindFramebuffer(36160,N)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(P,G,X){var Ee=G.image.width,He=G.image.height,Bt=mt.convert(G.format);V.setTexture2D(G,0),se.copyTexImage2D(3553,X||0,Bt,P.x,P.y,Ee,He,0)},this.copyTextureToTexture=function(P,G,X,Ee){var He=G.image.width,Bt=G.image.height,ke=mt.convert(X.format),ze=mt.convert(X.type);V.setTexture2D(X,0),G.isDataTexture?se.texSubImage2D(3553,Ee||0,P.x,P.y,He,Bt,ke,ze,G.image.data):se.texSubImage2D(3553,Ee||0,P.x,P.y,ke,ze,G.image)}}function Fl(t,o){this.name="",this.color=new je(t),this.density=void 0!==o?o:25e-5}function Lh(t,o,s){this.name="",this.color=new je(t),this.near=void 0!==o?o:1,this.far=void 0!==s?s:1e3}function Du(){Le.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function qn(t,o){this.array=t,this.stride=o,this.count=void 0!==t?t.length/o:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function yi(t,o,s,c){this.data=t,this.itemSize=o,this.offset=s,this.normalized=!0===c}function ts(t){_t.call(this),this.type="SpriteMaterial",this.color=new je(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function wi(t){if(Le.call(this),this.type="Sprite",void 0===io){io=new Pe;var s=new qn(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);io.setIndex([0,1,2,0,2,3]),io.addAttribute("position",new yi(s,3,0,!1)),io.addAttribute("uv",new yi(s,2,3,!1))}this.geometry=io,this.material=void 0!==t?t:new ts,this.center=new pe(.5,.5)}function Tu(){Le.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function vc(t,o){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Pr.call(this,t,o),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new it,this.bindMatrixInverse=new it}function kl(t,o){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===o)this.calculateInverses();else if(this.bones.length===o.length)this.boneInverses=o.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var s=0,c=this.bones.length;s<c;s++)this.boneInverses.push(new it)}}function Ph(){Le.call(this),this.type="Bone"}function tn(t){_t.call(this),this.type="LineBasicMaterial",this.color=new je(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function sr(t,o,s){1===s&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Le.call(this),this.type="Line",this.geometry=void 0!==t?t:new Pe,this.material=void 0!==o?o:new tn({color:16777215*Math.random()})}function ln(t,o){sr.call(this,t,o),this.type="LineSegments"}function yc(t,o){sr.call(this,t,o),this.type="LineLoop"}function oo(t){_t.call(this),this.type="PointsMaterial",this.color=new je(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function xa(t,o){Le.call(this),this.type="Points",this.geometry=void 0!==t?t:new Pe,this.material=void 0!==o?o:new oo({color:16777215*Math.random()})}function Iu(t,o,s,c,l,d,f,p,y){vn.call(this,t,o,s,c,l,d,f,p,y),this.format=void 0!==f?f:rr,this.minFilter=void 0!==d?d:lr,this.magFilter=void 0!==l?l:lr,this.generateMipmaps=!1}function Ea(t,o,s,c,l,d,f,p,y,w,b,_){vn.call(this,null,d,f,p,y,w,c,l,b,_),this.image={width:o,height:s},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function wc(t,o,s,c,l,d,f,p,y){vn.call(this,t,o,s,c,l,d,f,p,y),this.needsUpdate=!0}function bc(t,o,s,c,l,d,f,p,y,w){if((w=void 0!==w?w:Ms)!==Ms&&w!==rc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&w===Ms&&(s=br),void 0===s&&w===rc&&(s=nc),vn.call(this,null,c,l,d,f,p,w,s,y),this.image={width:t,height:o},this.magFilter=void 0!==f?f:St,this.minFilter=void 0!==p?p:St,this.flipY=!1,this.generateMipmaps=!1}function Ma(t){Pe.call(this),this.type="WireframeGeometry";var s,c,l,d,f,w,b,_,E,S,o=[],p=[0,0],y={},M=["a","b","c"];if(t&&t.isGeometry){var I=t.faces;for(s=0,l=I.length;s<l;s++){var T=I[s];for(c=0;c<3;c++)b=T[M[c]],_=T[M[(c+1)%3]],p[0]=Math.min(b,_),p[1]=Math.max(b,_),void 0===y[E=p[0]+","+p[1]]&&(y[E]={index1:p[0],index2:p[1]})}for(E in y)o.push((S=t.vertices[(w=y[E]).index1]).x,S.y,S.z),o.push((S=t.vertices[w.index2]).x,S.y,S.z)}else if(t&&t.isBufferGeometry){var O,F,N,B,U;if(S=new k,null!==t.index){for(O=t.attributes.position,F=t.index,0===(N=t.groups).length&&(N=[{start:0,count:F.count,materialIndex:0}]),d=0,f=N.length;d<f;++d)for(s=U=(B=N[d]).start,l=U+B.count;s<l;s+=3)for(c=0;c<3;c++)b=F.getX(s+c),_=F.getX(s+(c+1)%3),p[0]=Math.min(b,_),p[1]=Math.max(b,_),void 0===y[E=p[0]+","+p[1]]&&(y[E]={index1:p[0],index2:p[1]});for(E in y)S.fromBufferAttribute(O,(w=y[E]).index1),o.push(S.x,S.y,S.z),S.fromBufferAttribute(O,w.index2),o.push(S.x,S.y,S.z)}else for(s=0,l=(O=t.attributes.position).count/3;s<l;s++)for(c=0;c<3;c++)S.fromBufferAttribute(O,3*s+c),o.push(S.x,S.y,S.z),S.fromBufferAttribute(O,3*s+(c+1)%3),o.push(S.x,S.y,S.z)}this.addAttribute("position",new Ce(o,3))}function Aa(t,o,s){st.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:o,stacks:s},this.fromBufferGeometry(new _c(t,o,s)),this.mergeVertices()}function _c(t,o,s){Pe.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:o,stacks:s};var M,S,c=[],l=[],d=[],f=[],p=1e-5,y=new k,w=new k,b=new k,_=new k,E=new k;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var I=o+1;for(M=0;M<=s;M++){var T=M/s;for(S=0;S<=o;S++){var O=S/o;t(O,T,w),l.push(w.x,w.y,w.z),O-p>=0?(t(O-p,T,b),_.subVectors(w,b)):(t(O+p,T,b),_.subVectors(b,w)),T-p>=0?(t(O,T-p,b),E.subVectors(w,b)):(t(O,T+p,b),E.subVectors(b,w)),y.crossVectors(_,E).normalize(),d.push(y.x,y.y,y.z),f.push(O,T)}}for(M=0;M<s;M++)for(S=0;S<o;S++){var N=M*I+S+1,B=(M+1)*I+S+1,U=(M+1)*I+S;c.push(M*I+S,N,U),c.push(N,B,U)}this.setIndex(c),this.addAttribute("position",new Ce(l,3)),this.addAttribute("normal",new Ce(d,3)),this.addAttribute("uv",new Ce(f,2))}function Ru(t,o,s,c){st.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:o,radius:s,detail:c},this.fromBufferGeometry(new dn(t,o,s,c)),this.mergeVertices()}function dn(t,o,s,c){Pe.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:o,radius:s,detail:c},s=s||1;var l=[],d=[];function p(O,F,N,B){var Z,re,U=Math.pow(2,B),q=[];for(Z=0;Z<=U;Z++){q[Z]=[];var ne=O.clone().lerp(N,Z/U),ue=F.clone().lerp(N,Z/U),$=U-Z;for(re=0;re<=$;re++)q[Z][re]=0===re&&Z===U?ne:ne.clone().lerp(ue,re/$)}for(Z=0;Z<U;Z++)for(re=0;re<2*(U-Z)-1;re++){var Q=Math.floor(re/2);re%2==0?(_(q[Z][Q+1]),_(q[Z+1][Q]),_(q[Z][Q])):(_(q[Z][Q+1]),_(q[Z+1][Q+1]),_(q[Z+1][Q]))}}function _(O){l.push(O.x,O.y,O.z)}function E(O,F){var N=3*O;F.x=t[N+0],F.y=t[N+1],F.z=t[N+2]}function S(O,F,N,B){B<0&&1===O.x&&(d[F]=O.x-1),0===N.x&&0===N.z&&(d[F]=B/2/Math.PI+.5)}function I(O){return Math.atan2(O.z,-O.x)}function T(O){return Math.atan2(-O.y,Math.sqrt(O.x*O.x+O.z*O.z))}(function f(O){for(var F=new k,N=new k,B=new k,U=0;U<o.length;U+=3)E(o[U+0],F),E(o[U+1],N),E(o[U+2],B),p(F,N,B,O)})(c=c||0),function y(O){for(var F=new k,N=0;N<l.length;N+=3)F.x=l[N+0],F.y=l[N+1],F.z=l[N+2],F.normalize().multiplyScalar(O),l[N+0]=F.x,l[N+1]=F.y,l[N+2]=F.z}(s),function w(){for(var O=new k,F=0;F<l.length;F+=3){O.x=l[F+0],O.y=l[F+1],O.z=l[F+2];var N=I(O)/2/Math.PI+.5,B=T(O)/Math.PI+.5;d.push(N,1-B)}(function M(){for(var O=new k,F=new k,N=new k,B=new k,U=new pe,q=new pe,Z=new pe,re=0,ne=0;re<l.length;re+=9,ne+=6){O.set(l[re+0],l[re+1],l[re+2]),F.set(l[re+3],l[re+4],l[re+5]),N.set(l[re+6],l[re+7],l[re+8]),U.set(d[ne+0],d[ne+1]),q.set(d[ne+2],d[ne+3]),Z.set(d[ne+4],d[ne+5]),B.copy(O).add(F).add(N).divideScalar(3);var ue=I(B);S(U,ne+0,O,ue),S(q,ne+2,F,ue),S(Z,ne+4,N,ue)}})(),function b(){for(var O=0;O<d.length;O+=6){var F=d[O+0],N=d[O+2],B=d[O+4],U=Math.max(F,N,B),q=Math.min(F,N,B);U>.9&&q<.1&&(F<.2&&(d[O+0]+=1),N<.2&&(d[O+2]+=1),B<.2&&(d[O+4]+=1))}}()}(),this.addAttribute("position",new Ce(l,3)),this.addAttribute("normal",new Ce(l.slice(),3)),this.addAttribute("uv",new Ce(d,2)),0===c?this.computeVertexNormals():this.normalizeNormals()}function so(t,o){st.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:o},this.fromBufferGeometry(new hn(t,o)),this.mergeVertices()}function hn(t,o){dn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,o),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:o}}function Lu(t,o){st.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:o},this.fromBufferGeometry(new Ca(t,o)),this.mergeVertices()}function Ca(t,o){dn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,o),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:o}}function Pu(t,o){st.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:o},this.fromBufferGeometry(new xc(t,o)),this.mergeVertices()}function xc(t,o){var s=(1+Math.sqrt(5))/2;dn.call(this,[-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,o),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:o}}function Ec(t,o){st.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:o},this.fromBufferGeometry(new Sa(t,o)),this.mergeVertices()}function Sa(t,o){var s=(1+Math.sqrt(5))/2,c=1/s;dn.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-c,-s,0,-c,s,0,c,-s,0,c,s,-c,-s,0,-c,s,0,c,-s,0,c,s,0,-s,0,-c,s,0,-c,-s,0,c,s,0,c],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,o),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:o}}function Ns(t,o,s,c,l,d){st.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:o,radius:s,radialSegments:c,closed:l},void 0!==d&&console.warn("THREE.TubeGeometry: taper has been removed.");var f=new ei(t,o,s,c,l);this.tangents=f.tangents,this.normals=f.normals,this.binormals=f.binormals,this.fromBufferGeometry(f),this.mergeVertices()}function ei(t,o,s,c,l){Pe.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:o,radius:s,radialSegments:c,closed:l},s=s||1,c=c||8;var d=t.computeFrenetFrames(o=o||64,l=l||!1);this.tangents=d.tangents,this.normals=d.normals,this.binormals=d.binormals;var b,_,f=new k,p=new k,y=new pe,w=new k,E=[],M=[],S=[],I=[];function O(B){w=t.getPointAt(B/o,w);var U=d.normals[B],q=d.binormals[B];for(_=0;_<=c;_++){var Z=_/c*Math.PI*2,re=Math.sin(Z),ne=-Math.cos(Z);p.x=ne*U.x+re*q.x,p.y=ne*U.y+re*q.y,p.z=ne*U.z+re*q.z,p.normalize(),M.push(p.x,p.y,p.z),f.x=w.x+s*p.x,f.y=w.y+s*p.y,f.z=w.z+s*p.z,E.push(f.x,f.y,f.z)}}(function T(){for(b=0;b<o;b++)O(b);O(!1===l?o:0),function N(){for(b=0;b<=o;b++)for(_=0;_<=c;_++)y.x=b/o,y.y=_/c,S.push(y.x,y.y)}(),function F(){for(_=1;_<=o;_++)for(b=1;b<=c;b++){var U=(c+1)*_+(b-1),q=(c+1)*_+b,Z=(c+1)*(_-1)+b;I.push((c+1)*(_-1)+(b-1),U,Z),I.push(U,q,Z)}}()})(),this.setIndex(I),this.addAttribute("position",new Ce(E,3)),this.addAttribute("normal",new Ce(M,3)),this.addAttribute("uv",new Ce(S,2))}function Ou(t,o,s,c,l,d,f){st.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:o,tubularSegments:s,radialSegments:c,p:l,q:d},void 0!==f&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ns(t,o,s,c,l,d)),this.mergeVertices()}function ns(t,o,s,c,l,d){Pe.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:o,tubularSegments:s,radialSegments:c,p:l,q:d},t=t||1,o=o||.4,s=Math.floor(s)||64,c=Math.floor(c)||8,l=l||2,d=d||3;var b,_,f=[],p=[],y=[],w=[],E=new k,M=new k,S=new k,I=new k,T=new k,O=new k,F=new k;for(b=0;b<=s;++b){var N=b/s*l*Math.PI*2;for($(N,l,d,t,S),$(N+.01,l,d,t,I),O.subVectors(I,S),F.addVectors(I,S),T.crossVectors(O,F),F.crossVectors(T,O),T.normalize(),F.normalize(),_=0;_<=c;++_){var B=_/c*Math.PI*2,U=-o*Math.cos(B),q=o*Math.sin(B);E.x=S.x+(U*F.x+q*T.x),E.y=S.y+(U*F.y+q*T.y),E.z=S.z+(U*F.z+q*T.z),p.push(E.x,E.y,E.z),M.subVectors(E,S).normalize(),y.push(M.x,M.y,M.z),w.push(b/s),w.push(_/c)}}for(_=1;_<=s;_++)for(b=1;b<=c;b++){var re=(c+1)*_+(b-1),ne=(c+1)*_+b,ue=(c+1)*(_-1)+b;f.push((c+1)*(_-1)+(b-1),re,ue),f.push(re,ne,ue)}function $(Q,ae,me,xe,Ae){var De=Math.cos(Q),he=Math.sin(Q),_e=me/ae*Q,Fe=Math.cos(_e);Ae.x=xe*(2+Fe)*.5*De,Ae.y=xe*(2+Fe)*he*.5,Ae.z=xe*Math.sin(_e)*.5}this.setIndex(f),this.addAttribute("position",new Ce(p,3)),this.addAttribute("normal",new Ce(y,3)),this.addAttribute("uv",new Ce(w,2))}function Fs(t,o,s,c,l){st.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:o,radialSegments:s,tubularSegments:c,arc:l},this.fromBufferGeometry(new rs(t,o,s,c,l)),this.mergeVertices()}function rs(t,o,s,c,l){Pe.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:o,radialSegments:s,tubularSegments:c,arc:l},t=t||1,o=o||.4,s=Math.floor(s)||8,c=Math.floor(c)||6,l=l||2*Math.PI;var E,M,d=[],f=[],p=[],y=[],w=new k,b=new k,_=new k;for(E=0;E<=s;E++)for(M=0;M<=c;M++){var S=M/c*l,I=E/s*Math.PI*2;b.x=(t+o*Math.cos(I))*Math.cos(S),b.y=(t+o*Math.cos(I))*Math.sin(S),b.z=o*Math.sin(I),f.push(b.x,b.y,b.z),w.x=t*Math.cos(S),w.y=t*Math.sin(S),_.subVectors(b,w).normalize(),p.push(_.x,_.y,_.z),y.push(M/c),y.push(E/s)}for(E=1;E<=s;E++)for(M=1;M<=c;M++){var O=(c+1)*(E-1)+M-1,F=(c+1)*(E-1)+M,N=(c+1)*E+M;d.push((c+1)*E+M-1,O,N),d.push(O,F,N)}this.setIndex(d),this.addAttribute("position",new Ce(f,3)),this.addAttribute("normal",new Ce(p,3)),this.addAttribute("uv",new Ce(y,2))}Object.assign(Fl.prototype,{isFogExp2:!0,clone:function(){return new Fl(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Lh.prototype,{isFog:!0,clone:function(){return new Lh(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Du.prototype=Object.assign(Object.create(Le.prototype),{constructor:Du,isScene:!0,copy:function(t,o){return Le.prototype.copy.call(this,t,o),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var o=Le.prototype.toJSON.call(this,t);return null!==this.background&&(o.object.background=this.background.toJSON(t)),null!==this.fog&&(o.object.fog=this.fog.toJSON()),o},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(qn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(qn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,o,s){t*=this.stride,s*=o.stride;for(var c=0,l=this.stride;c<l;c++)this.array[t+c]=o.array[s+c];return this},set:function(t,o){return void 0===o&&(o=0),this.array.set(t,o),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(yi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(yi.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,o){return this.data.array[t*this.data.stride+this.offset]=o,this},setY:function(t,o){return this.data.array[t*this.data.stride+this.offset+1]=o,this},setZ:function(t,o){return this.data.array[t*this.data.stride+this.offset+2]=o,this},setW:function(t,o){return this.data.array[t*this.data.stride+this.offset+3]=o,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,o,s){return this.data.array[(t=t*this.data.stride+this.offset)+0]=o,this.data.array[t+1]=s,this},setXYZ:function(t,o,s,c){return this.data.array[(t=t*this.data.stride+this.offset)+0]=o,this.data.array[t+1]=s,this.data.array[t+2]=c,this},setXYZW:function(t,o,s,c,l){return this.data.array[(t=t*this.data.stride+this.offset)+0]=o,this.data.array[t+1]=s,this.data.array[t+2]=c,this.data.array[t+3]=l,this}}),(ts.prototype=Object.create(_t.prototype)).constructor=ts,ts.prototype.isSpriteMaterial=!0,ts.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},wi.prototype=Object.assign(Object.create(Le.prototype),{constructor:wi,isSprite:!0,raycast:function(){var t=new k,o=new k,s=new k,c=new pe,l=new pe,d=new it,f=new k,p=new k,y=new k,w=new pe,b=new pe,_=new pe;function E(M,S,I,T,O,F){c.subVectors(M,I).addScalar(.5).multiply(T),void 0!==O?(l.x=F*c.x-O*c.y,l.y=O*c.x+F*c.y):l.copy(c),M.copy(S),M.x+=l.x,M.y+=l.y,M.applyMatrix4(d)}return function(S,I){o.setFromMatrixScale(this.matrixWorld),d.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),s.setFromMatrixPosition(this.modelViewMatrix);var O,F,T=this.material.rotation;0!==T&&(F=Math.cos(T),O=Math.sin(T));var N=this.center;E(f.set(-.5,-.5,0),s,N,o,O,F),E(p.set(.5,-.5,0),s,N,o,O,F),E(y.set(.5,.5,0),s,N,o,O,F),w.set(0,0),b.set(1,0),_.set(1,1);var B=S.ray.intersectTriangle(f,p,y,!1,t);if(null!==B||(E(p.set(-.5,.5,0),s,N,o,O,F),b.set(0,1),null!==(B=S.ray.intersectTriangle(f,y,p,!1,t)))){var U=S.ray.origin.distanceTo(t);U<S.near||U>S.far||I.push({distance:U,point:t.clone(),uv:Lr.getUV(t,f,p,y,w,b,_,new pe),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Le.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Tu.prototype=Object.assign(Object.create(Le.prototype),{constructor:Tu,isLOD:!0,copy:function(t){Le.prototype.copy.call(this,t,!1);for(var o=t.levels,s=0,c=o.length;s<c;s++){var l=o[s];this.addLevel(l.object.clone(),l.distance)}return this},addLevel:function(t,o){void 0===o&&(o=0),o=Math.abs(o);for(var s=this.levels,c=0;c<s.length&&!(o<s[c].distance);c++);return s.splice(c,0,{distance:o,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var o=this.levels,s=1,c=o.length;s<c&&!(t<o[s].distance);s++);return o[s-1].object},raycast:function(){var t=new k;return function(s,c){t.setFromMatrixPosition(this.matrixWorld);var l=s.ray.origin.distanceTo(t);this.getObjectForDistance(l).raycast(s,c)}}(),update:function(){var t=new k,o=new k;return function(c){var l=this.levels;if(l.length>1){t.setFromMatrixPosition(c.matrixWorld),o.setFromMatrixPosition(this.matrixWorld);var d=t.distanceTo(o);l[0].object.visible=!0;for(var f=1,p=l.length;f<p&&d>=l[f].distance;f++)l[f-1].object.visible=!1,l[f].object.visible=!0;for(;f<p;f++)l[f].object.visible=!1}}}(),toJSON:function(t){var o=Le.prototype.toJSON.call(this,t);o.object.levels=[];for(var s=this.levels,c=0,l=s.length;c<l;c++){var d=s[c];o.object.levels.push({object:d.object.uuid,distance:d.distance})}return o}}),vc.prototype=Object.assign(Object.create(Pr.prototype),{constructor:vc,isSkinnedMesh:!0,bind:function(t,o){this.skeleton=t,void 0===o&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.getInverse(o)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new un,o=this.geometry.attributes.skinWeight,s=0,c=o.count;s<c;s++){t.x=o.getX(s),t.y=o.getY(s),t.z=o.getZ(s),t.w=o.getW(s);var l=1/t.manhattanLength();l!==1/0?t.multiplyScalar(l):t.set(1,0,0,0),o.setXYZW(s,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Pr.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(kl.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,o=this.bones.length;t<o;t++){var s=new it;this.bones[t]&&s.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(s)}},pose:function(){var t,o,s;for(o=0,s=this.bones.length;o<s;o++)(t=this.bones[o])&&t.matrixWorld.getInverse(this.boneInverses[o]);for(o=0,s=this.bones.length;o<s;o++)(t=this.bones[o])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new it,o=new it;return function(){for(var c=this.bones,l=this.boneInverses,d=this.boneMatrices,f=this.boneTexture,p=0,y=c.length;p<y;p++)t.multiplyMatrices(c[p]?c[p].matrixWorld:o,l[p]),t.toArray(d,16*p);void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new kl(this.bones,this.boneInverses)},getBoneByName:function(t){for(var o=0,s=this.bones.length;o<s;o++){var c=this.bones[o];if(c.name===t)return c}}}),Ph.prototype=Object.assign(Object.create(Le.prototype),{constructor:Ph,isBone:!0}),(tn.prototype=Object.create(_t.prototype)).constructor=tn,tn.prototype.isLineBasicMaterial=!0,tn.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},sr.prototype=Object.assign(Object.create(Le.prototype),{constructor:sr,isLine:!0,computeLineDistances:function(){var t=new k,o=new k;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var l=c.attributes.position,d=[0],f=1,p=l.count;f<p;f++)t.fromBufferAttribute(l,f-1),o.fromBufferAttribute(l,f),d[f]=d[f-1],d[f]+=t.distanceTo(o);c.addAttribute("lineDistance",new Ce(d,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(c.isGeometry){var y=c.vertices;for((d=c.lineDistances)[0]=0,f=1,p=y.length;f<p;f++)d[f]=d[f-1],d[f]+=y[f-1].distanceTo(y[f])}return this}}(),raycast:function(){var t=new it,o=new fc,s=new Hn;return function(l,d){var f=l.linePrecision,p=this.geometry,y=this.matrixWorld;if(null===p.boundingSphere&&p.computeBoundingSphere(),s.copy(p.boundingSphere),s.applyMatrix4(y),s.radius+=f,!1!==l.ray.intersectsSphere(s)){t.getInverse(y),o.copy(l.ray).applyMatrix4(t);var w=f/((this.scale.x+this.scale.y+this.scale.z)/3),b=w*w,_=new k,E=new k,M=new k,S=new k,I=this&&this.isLineSegments?2:1;if(p.isBufferGeometry){var T=p.index,F=p.attributes.position.array;if(null!==T)for(var N=T.array,B=0,U=N.length-1;B<U;B+=I){var Z=N[B+1];_.fromArray(F,3*N[B]),E.fromArray(F,3*Z),o.distanceSqToSegment(_,E,S,M)>b||(S.applyMatrix4(this.matrixWorld),(ne=l.ray.origin.distanceTo(S))<l.near||ne>l.far||d.push({distance:ne,point:M.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this}))}else for(B=0,U=F.length/3-1;B<U;B+=I)_.fromArray(F,3*B),E.fromArray(F,3*B+3),o.distanceSqToSegment(_,E,S,M)>b||(S.applyMatrix4(this.matrixWorld),(ne=l.ray.origin.distanceTo(S))<l.near||ne>l.far||d.push({distance:ne,point:M.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this}))}else if(p.isGeometry){var ue=p.vertices,$=ue.length;for(B=0;B<$-1;B+=I){var ne;o.distanceSqToSegment(ue[B],ue[B+1],S,M)>b||(S.applyMatrix4(this.matrixWorld),(ne=l.ray.origin.distanceTo(S))<l.near||ne>l.far||d.push({distance:ne,point:M.clone().applyMatrix4(this.matrixWorld),index:B,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ln.prototype=Object.assign(Object.create(sr.prototype),{constructor:ln,isLineSegments:!0,computeLineDistances:function(){var t=new k,o=new k;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var l=c.attributes.position,d=[],f=0,p=l.count;f<p;f+=2)t.fromBufferAttribute(l,f),o.fromBufferAttribute(l,f+1),d[f]=0===f?0:d[f-1],d[f+1]=d[f]+t.distanceTo(o);c.addAttribute("lineDistance",new Ce(d,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(c.isGeometry){var y=c.vertices;for(d=c.lineDistances,f=0,p=y.length;f<p;f+=2)t.copy(y[f]),o.copy(y[f+1]),d[f]=0===f?0:d[f-1],d[f+1]=d[f]+t.distanceTo(o)}return this}}()}),yc.prototype=Object.assign(Object.create(sr.prototype),{constructor:yc,isLineLoop:!0}),(oo.prototype=Object.create(_t.prototype)).constructor=oo,oo.prototype.isPointsMaterial=!0,oo.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},xa.prototype=Object.assign(Object.create(Le.prototype),{constructor:xa,isPoints:!0,raycast:function(){var t=new it,o=new fc,s=new Hn;return function(l,d){var f=this,p=this.geometry,y=this.matrixWorld,w=l.params.Points.threshold;if(null===p.boundingSphere&&p.computeBoundingSphere(),s.copy(p.boundingSphere),s.applyMatrix4(y),s.radius+=w,!1!==l.ray.intersectsSphere(s)){t.getInverse(y),o.copy(l.ray).applyMatrix4(t);var b=w/((this.scale.x+this.scale.y+this.scale.z)/3),_=b*b,E=new k,M=new k;if(p.isBufferGeometry){var I=p.index,O=p.attributes.position.array;if(null!==I)for(var F=I.array,N=0,B=F.length;N<B;N++){var U=F[N];E.fromArray(O,3*U),S(E,U)}else{N=0;for(var q=O.length/3;N<q;N++)E.fromArray(O,3*N),S(E,N)}}else{var Z=p.vertices;for(N=0,q=Z.length;N<q;N++)S(Z[N],N)}}function S(re,ne){var ue=o.distanceSqToPoint(re);if(ue<_){o.closestPointToPoint(re,M),M.applyMatrix4(y);var $=l.ray.origin.distanceTo(M);if($<l.near||$>l.far)return;d.push({distance:$,distanceToRay:Math.sqrt(ue),point:M.clone(),index:ne,face:null,object:f})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Iu.prototype=Object.assign(Object.create(vn.prototype),{constructor:Iu,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(Ea.prototype=Object.create(vn.prototype)).constructor=Ea,Ea.prototype.isCompressedTexture=!0,(wc.prototype=Object.create(vn.prototype)).constructor=wc,wc.prototype.isCanvasTexture=!0,(bc.prototype=Object.create(vn.prototype)).constructor=bc,bc.prototype.isDepthTexture=!0,(Ma.prototype=Object.create(Pe.prototype)).constructor=Ma,(Aa.prototype=Object.create(st.prototype)).constructor=Aa,(_c.prototype=Object.create(Pe.prototype)).constructor=_c,(Ru.prototype=Object.create(st.prototype)).constructor=Ru,(dn.prototype=Object.create(Pe.prototype)).constructor=dn,(so.prototype=Object.create(st.prototype)).constructor=so,(hn.prototype=Object.create(dn.prototype)).constructor=hn,(Lu.prototype=Object.create(st.prototype)).constructor=Lu,(Ca.prototype=Object.create(dn.prototype)).constructor=Ca,(Pu.prototype=Object.create(st.prototype)).constructor=Pu,(xc.prototype=Object.create(dn.prototype)).constructor=xc,(Ec.prototype=Object.create(st.prototype)).constructor=Ec,(Sa.prototype=Object.create(dn.prototype)).constructor=Sa,(Ns.prototype=Object.create(st.prototype)).constructor=Ns,(ei.prototype=Object.create(Pe.prototype)).constructor=ei,ei.prototype.toJSON=function(){var t=Pe.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},(Ou.prototype=Object.create(st.prototype)).constructor=Ou,(ns.prototype=Object.create(Pe.prototype)).constructor=ns,(Fs.prototype=Object.create(st.prototype)).constructor=Fs,(rs.prototype=Object.create(Pe.prototype)).constructor=rs;function Nh(t,o,s,c,l){var d,f;if(l===function um(t,o,s,c){for(var l=0,d=o,f=s-c;d<s;d+=c)l+=(t[f]-t[d])*(t[d+1]+t[f+1]),f=d;return l}(t,o,s,c)>0)for(d=o;d<s;d+=c)f=cm(d,t[d],t[d+1],f);else for(d=s-c;d>=o;d-=c)f=cm(d,t[d],t[d+1],f);return f&&To(f,f.next)&&(ks(f),f=f.next),f}function Mc(t,o){if(!t)return t;o||(o=t);var c,s=t;do{if(c=!1,s.steiner||!To(s,s.next)&&0!==Er(s.prev,s,s.next))s=s.next;else{if(ks(s),(s=o=s.prev)===s.next)break;c=!0}}while(c||s!==o);return o}function Nu(t,o,s,c,l,d,f){if(t){!f&&d&&function vb(t,o,s,c){var l=t;do{null===l.z&&(l.z=ku(l.x,l.y,o,s,c)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next}while(l!==t);l.prevZ.nextZ=null,l.prevZ=null,function yb(t){var o,s,c,l,d,f,p,y,w=1;do{for(s=t,t=null,d=null,f=0;s;){for(f++,c=s,p=0,o=0;o<w&&(p++,c=c.nextZ);o++);for(y=w;p>0||y>0&&c;)0!==p&&(0===y||!c||s.z<=c.z)?(l=s,s=s.nextZ,p--):(l=c,c=c.nextZ,y--),d?d.nextZ=l:t=l,l.prevZ=d,d=l;s=c}d.nextZ=null,w*=2}while(f>1)}(l)}(t,c,l,d);for(var y,w,p=t;t.prev!==t.next;)if(y=t.prev,w=t.next,d?Fu(t,c,l,d):Ac(t))o.push(y.i/s),o.push(t.i/s),o.push(w.i/s),ks(t),t=w.next,p=w.next;else if((t=w)===p){f?1===f?Nu(t=jv(t,o,s),o,s,c,l,d,2):2===f&&mb(t,o,s,c,l,d):Nu(Mc(t),o,s,c,l,d,1);break}}}function Ac(t){var o=t.prev,s=t,c=t.next;if(Er(o,s,c)>=0)return!1;for(var l=t.next.next;l!==t.prev;){if(Bl(o.x,o.y,s.x,s.y,c.x,c.y,l.x,l.y)&&Er(l.prev,l,l.next)>=0)return!1;l=l.next}return!0}function Fu(t,o,s,c){var l=t.prev,d=t,f=t.next;if(Er(l,d,f)>=0)return!1;for(var w=l.x>d.x?l.x>f.x?l.x:f.x:d.x>f.x?d.x:f.x,b=l.y>d.y?l.y>f.y?l.y:f.y:d.y>f.y?d.y:f.y,_=ku(l.x<d.x?l.x<f.x?l.x:f.x:d.x<f.x?d.x:f.x,l.y<d.y?l.y<f.y?l.y:f.y:d.y<f.y?d.y:f.y,o,s,c),E=ku(w,b,o,s,c),M=t.nextZ;M&&M.z<=E;){if(M!==t.prev&&M!==t.next&&Bl(l.x,l.y,d.x,d.y,f.x,f.y,M.x,M.y)&&Er(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(M=t.prevZ;M&&M.z>=_;){if(M!==t.prev&&M!==t.next&&Bl(l.x,l.y,d.x,d.y,f.x,f.y,M.x,M.y)&&Er(M.prev,M,M.next)>=0)return!1;M=M.prevZ}return!0}function jv(t,o,s){var c=t;do{var l=c.prev,d=c.next.next;!To(l,d)&&qv(l,c,c.next,d)&&Cc(l,d)&&Cc(d,l)&&(o.push(l.i/s),o.push(c.i/s),o.push(d.i/s),ks(c),ks(c.next),c=t=d),c=c.next}while(c!==t);return c}function mb(t,o,s,c,l,d){var f=t;do{for(var p=f.next.next;p!==f.prev;){if(f.i!==p.i&&Uu(f,p)){var y=ao(f,p);return f=Mc(f,f.next),y=Mc(y,y.next),Nu(f,o,s,c,l,d),void Nu(y,o,s,c,l,d)}p=p.next}f=f.next}while(f!==t)}function gb(t,o){return t.x-o.x}function Wv(t,o){if(o=function $v(t,o){var f,s=o,c=t.x,l=t.y,d=-1/0;do{if(l<=s.y&&l>=s.next.y&&s.next.y!==s.y){var p=s.x+(l-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(p<=c&&p>d){if(d=p,p===c){if(l===s.y)return s;if(l===s.next.y)return s.next}f=s.x<s.next.x?s:s.next}}s=s.next}while(s!==o);if(!f)return null;if(c===d)return f.prev;var E,y=f,w=f.x,b=f.y,_=1/0;for(s=f.next;s!==y;)c>=s.x&&s.x>=w&&c!==s.x&&Bl(l<b?c:d,l,w,b,l<b?d:c,l,s.x,s.y)&&((E=Math.abs(l-s.y)/(c-s.x))<_||E===_&&s.x>f.x)&&Cc(s,t)&&(f=s,_=E),s=s.next;return f}(t,o),o){var s=ao(o,t);Mc(s,s.next)}}function ku(t,o,s,c,l){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-s)*l)|t<<8))|t<<4))|t<<2))|t<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-c)*l)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function Bu(t){var o=t,s=t;do{o.x<s.x&&(s=o),o=o.next}while(o!==t);return s}function Bl(t,o,s,c,l,d,f,p){return(l-f)*(o-p)-(t-f)*(d-p)>=0&&(t-f)*(c-p)-(s-f)*(o-p)>=0&&(s-f)*(d-p)-(l-f)*(c-p)>=0}function Uu(t,o){return t.next.i!==o.i&&t.prev.i!==o.i&&!function am(t,o){var s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==o.i&&s.next.i!==o.i&&qv(s,s.next,t,o))return!0;s=s.next}while(s!==t);return!1}(t,o)&&Cc(t,o)&&Cc(o,t)&&function Zv(t,o){var s=t,c=!1,l=(t.x+o.x)/2,d=(t.y+o.y)/2;do{s.y>d!=s.next.y>d&&s.next.y!==s.y&&l<(s.next.x-s.x)*(d-s.y)/(s.next.y-s.y)+s.x&&(c=!c),s=s.next}while(s!==t);return c}(t,o)}function Er(t,o,s){return(o.y-t.y)*(s.x-o.x)-(o.x-t.x)*(s.y-o.y)}function To(t,o){return t.x===o.x&&t.y===o.y}function qv(t,o,s,c){return!!(To(t,o)&&To(s,c)||To(t,c)&&To(s,o))||Er(t,o,s)>0!=Er(t,o,c)>0&&Er(s,c,t)>0!=Er(s,c,o)>0}function Cc(t,o){return Er(t.prev,t,t.next)<0?Er(t,o,t.next)>=0&&Er(t,t.prev,o)>=0:Er(t,o,t.prev)<0||Er(t,t.next,o)<0}function ao(t,o){var s=new Vu(t.i,t.x,t.y),c=new Vu(o.i,o.x,o.y),l=t.next,d=o.prev;return t.next=o,o.prev=t,s.next=l,l.prev=s,c.next=s,s.prev=c,d.next=c,c.prev=d,c}function cm(t,o,s,c){var l=new Vu(t,o,s);return c?(l.next=c.next,l.prev=c,c.next.prev=l,c.next=l):(l.prev=l,l.next=l),l}function ks(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Vu(t,o,s){this.i=t,this.x=o,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Fi={area:function(t){for(var o=t.length,s=0,c=o-1,l=0;l<o;c=l++)s+=t[c].x*t[l].y-t[l].x*t[c].y;return.5*s},isClockWise:function(t){return Fi.area(t)<0},triangulateShape:function(t,o){var s=[],c=[],l=[];Ul(t),lm(s,t);var d=t.length;o.forEach(Ul);for(var f=0;f<o.length;f++)c.push(d),d+=o[f].length,lm(s,o[f]);var p=function(t,o,s){s=s||2;var p,y,w,b,_,E,M,c=o&&o.length,l=c?o[0]*s:t.length,d=Nh(t,0,l,s,!0),f=[];if(!d)return f;if(c&&(d=function Fh(t,o,s,c){var d,f,w,l=[];for(d=0,f=o.length;d<f;d++)(w=Nh(t,o[d]*c,d<f-1?o[d+1]*c:t.length,c,!1))===w.next&&(w.steiner=!0),l.push(Bu(w));for(l.sort(gb),d=0;d<l.length;d++)Wv(l[d],s),s=Mc(s,s.next);return s}(t,o,d,s)),t.length>80*s){p=w=t[0],y=b=t[1];for(var S=s;S<l;S+=s)(_=t[S])<p&&(p=_),(E=t[S+1])<y&&(y=E),_>w&&(w=_),E>b&&(b=E);M=0!==(M=Math.max(w-p,b-y))?1/M:0}return Nu(d,f,s,p,y,M),f}(s,c);for(f=0;f<p.length;f+=3)l.push(p.slice(f,f+3));return l}};function Ul(t){var o=t.length;o>2&&t[o-1].equals(t[0])&&t.pop()}function lm(t,o){for(var s=0;s<o.length;s++)t.push(o[s].x),t.push(o[s].y)}function Bs(t,o){st.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:o},this.fromBufferGeometry(new co(t,o)),this.mergeVertices()}function co(t,o){Pe.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:o},t=Array.isArray(t)?t:[t];for(var s=this,c=[],l=[],d=0,f=t.length;d<f;d++)y(t[d]);function y(w){var b=[],_=void 0!==o.curveSegments?o.curveSegments:12,E=void 0!==o.steps?o.steps:1,M=void 0!==o.depth?o.depth:100,S=void 0===o.bevelEnabled||o.bevelEnabled,I=void 0!==o.bevelThickness?o.bevelThickness:6,T=void 0!==o.bevelSize?o.bevelSize:I-2,O=void 0!==o.bevelOffset?o.bevelOffset:0,F=void 0!==o.bevelSegments?o.bevelSegments:3,N=o.extrudePath,B=void 0!==o.UVGenerator?o.UVGenerator:dm;void 0!==o.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),M=o.amount);var U,Z,re,ne,ue,q=!1;N&&(U=N.getSpacedPoints(E),q=!0,S=!1,Z=N.computeFrenetFrames(E,!1),re=new k,ne=new k,ue=new k),S||(F=0,I=0,T=0,O=0);var $,Q,ae,me=w.extractPoints(_),xe=me.shape,Ae=me.holes;if(!Fi.isClockWise(xe))for(xe=xe.reverse(),Q=0,ae=Ae.length;Q<ae;Q++)Fi.isClockWise($=Ae[Q])&&(Ae[Q]=$.reverse());var he=Fi.triangulateShape(xe,Ae),_e=xe;for(Q=0,ae=Ae.length;Q<ae;Q++)xe=xe.concat($=Ae[Q]);function Fe(Ft,K,Ve){return K||console.error("THREE.ExtrudeGeometry: vec does not exist"),K.clone().multiplyScalar(Ve).add(Ft)}var Xe,Ke,ut,se,Ue,et,Oe=xe.length,lt=he.length;function Gt(Ft,K,Ve){var qe,At,Ze,kt=Ft.x-K.x,sn=Ft.y-K.y,Vt=Ve.x-Ft.x,gr=Ve.y-Ft.y,Xt=kt*kt+sn*sn;if(Math.abs(kt*gr-sn*Vt)>Number.EPSILON){var ri=Math.sqrt(Xt),Va=Math.sqrt(Vt*Vt+gr*gr),ii=K.x-sn/ri,Gr=K.y+kt/ri,dd=((Ve.x-gr/Va-ii)*gr-(Ve.y+Vt/Va-Gr)*Vt)/(kt*gr-sn*Vt),hd=(qe=ii+kt*dd-Ft.x)*qe+(At=Gr+sn*dd-Ft.y)*At;if(hd<=2)return new pe(qe,At);Ze=Math.sqrt(hd/2)}else{var Ha=!1;kt>Number.EPSILON?Vt>Number.EPSILON&&(Ha=!0):kt<-Number.EPSILON?Vt<-Number.EPSILON&&(Ha=!0):Math.sign(sn)===Math.sign(gr)&&(Ha=!0),Ha?(qe=-sn,At=kt,Ze=Math.sqrt(Xt)):(qe=kt,At=sn,Ze=Math.sqrt(Xt/2))}return new pe(qe/Ze,At/Ze)}for(var j=[],V=0,ge=_e.length,Se=ge-1,pt=V+1;V<ge;V++,Se++,pt++)Se===ge&&(Se=0),pt===ge&&(pt=0),j[V]=Gt(_e[V],_e[Se],_e[pt]);var We,Mt,$e=[],Dt=j.concat();for(Q=0,ae=Ae.length;Q<ae;Q++){for(We=[],Se=(ge=($=Ae[Q]).length)-1,pt=1+(V=0);V<ge;V++,Se++,pt++)Se===ge&&(Se=0),pt===ge&&(pt=0),We[V]=Gt($[V],$[Se],$[pt]);$e.push(We),Dt=Dt.concat(We)}for(Xe=0;Xe<F;Xe++){for(ut=Xe/F,se=I*Math.cos(ut*Math.PI/2),Ke=T*Math.sin(ut*Math.PI/2)+O,V=0,ge=_e.length;V<ge;V++)mt((Ue=Fe(_e[V],j[V],Ke)).x,Ue.y,-se);for(Q=0,ae=Ae.length;Q<ae;Q++)for(We=$e[Q],V=0,ge=($=Ae[Q]).length;V<ge;V++)mt((Ue=Fe($[V],We[V],Ke)).x,Ue.y,-se)}for(Ke=T+O,V=0;V<Oe;V++)Ue=S?Fe(xe[V],Dt[V],Ke):xe[V],q?(ne.copy(Z.normals[0]).multiplyScalar(Ue.x),re.copy(Z.binormals[0]).multiplyScalar(Ue.y),ue.copy(U[0]).add(ne).add(re),mt(ue.x,ue.y,ue.z)):mt(Ue.x,Ue.y,0);for(Mt=1;Mt<=E;Mt++)for(V=0;V<Oe;V++)Ue=S?Fe(xe[V],Dt[V],Ke):xe[V],q?(ne.copy(Z.normals[Mt]).multiplyScalar(Ue.x),re.copy(Z.binormals[Mt]).multiplyScalar(Ue.y),ue.copy(U[Mt]).add(ne).add(re),mt(ue.x,ue.y,ue.z)):mt(Ue.x,Ue.y,M/E*Mt);for(Xe=F-1;Xe>=0;Xe--){for(ut=Xe/F,se=I*Math.cos(ut*Math.PI/2),Ke=T*Math.sin(ut*Math.PI/2)+O,V=0,ge=_e.length;V<ge;V++)mt((Ue=Fe(_e[V],j[V],Ke)).x,Ue.y,M+se);for(Q=0,ae=Ae.length;Q<ae;Q++)for(We=$e[Q],V=0,ge=($=Ae[Q]).length;V<ge;V++)Ue=Fe($[V],We[V],Ke),q?mt(Ue.x,Ue.y+U[E-1].y,U[E-1].x+se):mt(Ue.x,Ue.y,M+se)}function Mn(Ft,K){var Ve,qe;for(V=Ft.length;--V>=0;){Ve=V,(qe=V-1)<0&&(qe=Ft.length-1);var At=0,Ze=E+2*F;for(At=0;At<Ze;At++){var kt=Oe*At,sn=Oe*(At+1);tr(K+Ve+kt,K+qe+kt,K+qe+sn,K+Ve+sn)}}}function mt(Ft,K,Ve){b.push(Ft),b.push(K),b.push(Ve)}function Xn(Ft,K,Ve){kr(Ft),kr(K),kr(Ve);var qe=c.length/3,At=B.generateTopUV(s,c,qe-3,qe-2,qe-1);zr(At[0]),zr(At[1]),zr(At[2])}function tr(Ft,K,Ve,qe){kr(Ft),kr(K),kr(qe),kr(K),kr(Ve),kr(qe);var At=c.length/3,Ze=B.generateSideWallUV(s,c,At-6,At-3,At-2,At-1);zr(Ze[0]),zr(Ze[1]),zr(Ze[3]),zr(Ze[1]),zr(Ze[2]),zr(Ze[3])}function kr(Ft){c.push(b[3*Ft+0]),c.push(b[3*Ft+1]),c.push(b[3*Ft+2])}function zr(Ft){l.push(Ft.x),l.push(Ft.y)}(function Pt(){var Ft=c.length/3;if(S){var K=0,Ve=Oe*K;for(V=0;V<lt;V++)Xn((et=he[V])[2]+Ve,et[1]+Ve,et[0]+Ve);for(Ve=Oe*(K=E+2*F),V=0;V<lt;V++)Xn((et=he[V])[0]+Ve,et[1]+Ve,et[2]+Ve)}else{for(V=0;V<lt;V++)Xn((et=he[V])[2],et[1],et[0]);for(V=0;V<lt;V++)Xn((et=he[V])[0]+Oe*E,et[1]+Oe*E,et[2]+Oe*E)}s.addGroup(Ft,c.length/3-Ft,0)})(),function Yt(){var Ft=c.length/3,K=0;for(Mn(_e,K),K+=_e.length,Q=0,ae=Ae.length;Q<ae;Q++)Mn($=Ae[Q],K),K+=$.length;s.addGroup(Ft,c.length/3-Ft,1)}()}this.addAttribute("position",new Ce(c,3)),this.addAttribute("uv",new Ce(l,2)),this.computeVertexNormals()}(Bs.prototype=Object.create(st.prototype)).constructor=Bs,Bs.prototype.toJSON=function(){var t=st.prototype.toJSON.call(this);return kh(this.parameters.shapes,this.parameters.options,t)},(co.prototype=Object.create(Pe.prototype)).constructor=co,co.prototype.toJSON=function(){var t=Pe.prototype.toJSON.call(this);return kh(this.parameters.shapes,this.parameters.options,t)};var dm={generateTopUV:function(t,o,s,c,l){var p=o[3*c],y=o[3*c+1],w=o[3*l],b=o[3*l+1];return[new pe(o[3*s],o[3*s+1]),new pe(p,y),new pe(w,b)]},generateSideWallUV:function(t,o,s,c,l,d){var f=o[3*s],p=o[3*s+1],y=o[3*s+2],w=o[3*c],b=o[3*c+1],_=o[3*c+2],E=o[3*l],M=o[3*l+1],S=o[3*l+2],I=o[3*d],T=o[3*d+1],O=o[3*d+2];return Math.abs(p-b)<.01?[new pe(f,1-y),new pe(w,1-_),new pe(E,1-S),new pe(I,1-O)]:[new pe(p,1-y),new pe(b,1-_),new pe(M,1-S),new pe(T,1-O)]}};function kh(t,o,s){if(s.shapes=[],Array.isArray(t))for(var c=0,l=t.length;c<l;c++)s.shapes.push(t[c].uuid);else s.shapes.push(t.uuid);return void 0!==o.extrudePath&&(s.options.extrudePath=o.extrudePath.toJSON()),s}function Hu(t,o){st.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:o},this.fromBufferGeometry(new is(t,o)),this.mergeVertices()}function is(t,o){var s=(o=o||{}).font;if(!s||!s.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new st;var c=s.generateShapes(t,o.size);o.depth=void 0!==o.height?o.height:50,void 0===o.bevelThickness&&(o.bevelThickness=10),void 0===o.bevelSize&&(o.bevelSize=8),void 0===o.bevelEnabled&&(o.bevelEnabled=!1),co.call(this,c,o),this.type="TextBufferGeometry"}function uo(t,o,s,c,l,d,f){st.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:o,heightSegments:s,phiStart:c,phiLength:l,thetaStart:d,thetaLength:f},this.fromBufferGeometry(new Us(t,o,s,c,l,d,f)),this.mergeVertices()}function Us(t,o,s,c,l,d,f){Pe.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:o,heightSegments:s,phiStart:c,phiLength:l,thetaStart:d,thetaLength:f},t=t||1,o=Math.max(3,Math.floor(o)||8),s=Math.max(2,Math.floor(s)||6),c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI,d=void 0!==d?d:0,f=void 0!==f?f:Math.PI;var y,w,p=Math.min(d+f,Math.PI),b=0,_=[],E=new k,M=new k,S=[],I=[],T=[],O=[];for(w=0;w<=s;w++){var F=[],N=w/s,B=0;for(0==w&&0==d?B=.5/o:w==s&&p==Math.PI&&(B=-.5/o),y=0;y<=o;y++){var U=y/o;E.x=-t*Math.cos(c+U*l)*Math.sin(d+N*f),E.y=t*Math.cos(d+N*f),E.z=t*Math.sin(c+U*l)*Math.sin(d+N*f),I.push(E.x,E.y,E.z),M.copy(E).normalize(),T.push(M.x,M.y,M.z),O.push(U+B,1-N),F.push(b++)}_.push(F)}for(w=0;w<s;w++)for(y=0;y<o;y++){var Z=_[w][y],re=_[w+1][y],ne=_[w+1][y+1];(0!==w||d>0)&&S.push(_[w][y+1],Z,ne),(w!==s-1||p<Math.PI)&&S.push(Z,re,ne)}this.setIndex(S),this.addAttribute("position",new Ce(I,3)),this.addAttribute("normal",new Ce(T,3)),this.addAttribute("uv",new Ce(O,2))}function Sc(t,o,s,c,l,d){st.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:o,thetaSegments:s,phiSegments:c,thetaStart:l,thetaLength:d},this.fromBufferGeometry(new Da(t,o,s,c,l,d)),this.mergeVertices()}function Da(t,o,s,c,l,d){Pe.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:o,thetaSegments:s,phiSegments:c,thetaStart:l,thetaLength:d},t=t||.5,o=o||1,l=void 0!==l?l:0,d=void 0!==d?d:2*Math.PI,s=void 0!==s?Math.max(3,s):8;var b,I,T,f=[],p=[],y=[],w=[],_=t,E=(o-t)/(c=void 0!==c?Math.max(1,c):1),M=new k,S=new pe;for(I=0;I<=c;I++){for(T=0;T<=s;T++)b=l+T/s*d,M.x=_*Math.cos(b),M.y=_*Math.sin(b),p.push(M.x,M.y,M.z),y.push(0,0,1),S.x=(M.x/o+1)/2,S.y=(M.y/o+1)/2,w.push(S.x,S.y);_+=E}for(I=0;I<c;I++){var O=I*(s+1);for(T=0;T<s;T++){var N=(b=T+O)+s+1,B=b+s+2,U=b+1;f.push(b,N,U),f.push(N,B,U)}}this.setIndex(f),this.addAttribute("position",new Ce(p,3)),this.addAttribute("normal",new Ce(y,3)),this.addAttribute("uv",new Ce(w,2))}function os(t,o,s,c){st.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:o,phiStart:s,phiLength:c},this.fromBufferGeometry(new Dc(t,o,s,c)),this.mergeVertices()}function Dc(t,o,s,c){Pe.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:o,phiStart:s,phiLength:c},o=Math.floor(o)||12,s=s||0,c=c||2*Math.PI,c=yt.clamp(c,0,2*Math.PI);var p,_,E,l=[],d=[],f=[],y=1/o,w=new k,b=new pe;for(_=0;_<=o;_++){var M=s+_*y*c,S=Math.sin(M),I=Math.cos(M);for(E=0;E<=t.length-1;E++)w.x=t[E].x*S,w.y=t[E].y,w.z=t[E].x*I,d.push(w.x,w.y,w.z),b.x=_/o,b.y=E/(t.length-1),f.push(b.x,b.y)}for(_=0;_<o;_++)for(E=0;E<t.length-1;E++){var O=(p=E+_*t.length)+t.length,F=p+t.length+1,N=p+1;l.push(p,O,N),l.push(O,F,N)}if(this.setIndex(l),this.addAttribute("position",new Ce(d,3)),this.addAttribute("uv",new Ce(f,2)),this.computeVertexNormals(),c===2*Math.PI){var B=this.attributes.normal.array,U=new k,q=new k,Z=new k;for(p=o*t.length*3,_=0,E=0;_<t.length;_++,E+=3)U.x=B[E+0],U.y=B[E+1],U.z=B[E+2],q.x=B[p+E+0],q.y=B[p+E+1],q.z=B[p+E+2],Z.addVectors(U,q).normalize(),B[E+0]=B[p+E+0]=Z.x,B[E+1]=B[p+E+1]=Z.y,B[E+2]=B[p+E+2]=Z.z}}function Zn(t,o){st.call(this),this.type="ShapeGeometry","object"==typeof o&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),o=o.curveSegments),this.parameters={shapes:t,curveSegments:o},this.fromBufferGeometry(new Ta(t,o)),this.mergeVertices()}function Ta(t,o){Pe.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:o},o=o||12;var s=[],c=[],l=[],d=[],f=0,p=0;if(!1===Array.isArray(t))w(t);else for(var y=0;y<t.length;y++)w(t[y]),this.addGroup(f,p,y),f+=p,p=0;function w(b){var _,E,M,S=c.length/3,I=b.extractPoints(o),T=I.shape,O=I.holes;for(!1===Fi.isClockWise(T)&&(T=T.reverse()),_=0,E=O.length;_<E;_++)!0===Fi.isClockWise(M=O[_])&&(O[_]=M.reverse());var F=Fi.triangulateShape(T,O);for(_=0,E=O.length;_<E;_++)T=T.concat(M=O[_]);for(_=0,E=T.length;_<E;_++){var N=T[_];c.push(N.x,N.y,0),l.push(0,0,1),d.push(N.x,N.y)}for(_=0,E=F.length;_<E;_++){var B=F[_];s.push(B[0]+S,B[1]+S,B[2]+S),p+=3}}this.setIndex(s),this.addAttribute("position",new Ce(c,3)),this.addAttribute("normal",new Ce(l,3)),this.addAttribute("uv",new Ce(d,2))}function Bh(t,o){if(o.shapes=[],Array.isArray(t))for(var s=0,c=t.length;s<c;s++)o.shapes.push(t[s].uuid);else o.shapes.push(t.uuid);return o}function Vs(t,o){Pe.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:o},o=void 0!==o?o:1;var f,p,y,b,s=[],c=Math.cos(yt.DEG2RAD*o),l=[0,0],d={},w=["a","b","c"];t.isBufferGeometry?(b=new st).fromBufferGeometry(t):b=t.clone(),b.mergeVertices(),b.computeFaceNormals();for(var _=b.vertices,E=b.faces,M=0,S=E.length;M<S;M++)for(var I=E[M],T=0;T<3;T++)f=I[w[T]],p=I[w[(T+1)%3]],l[0]=Math.min(f,p),l[1]=Math.max(f,p),void 0===d[y=l[0]+","+l[1]]?d[y]={index1:l[0],index2:l[1],face1:M,face2:void 0}:d[y].face2=M;for(y in d){var O=d[y];if(void 0===O.face2||E[O.face1].normal.dot(E[O.face2].normal)<=c){var F=_[O.index1];s.push(F.x,F.y,F.z),s.push((F=_[O.index2]).x,F.y,F.z)}}this.addAttribute("position",new Ce(s,3))}function Ia(t,o,s,c,l,d,f,p){st.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:o,height:s,radialSegments:c,heightSegments:l,openEnded:d,thetaStart:f,thetaLength:p},this.fromBufferGeometry(new Io(t,o,s,c,l,d,f,p)),this.mergeVertices()}function Io(t,o,s,c,l,d,f,p){Pe.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:o,height:s,radialSegments:c,heightSegments:l,openEnded:d,thetaStart:f,thetaLength:p};var y=this;t=void 0!==t?t:1,o=void 0!==o?o:1,s=s||1,c=Math.floor(c)||8,l=Math.floor(l)||1,d=void 0!==d&&d,f=void 0!==f?f:0,p=void 0!==p?p:2*Math.PI;var w=[],b=[],_=[],E=[],M=0,S=[],I=s/2,T=0;function F(N){var B,U,q,Z=new pe,re=new k,ne=0,ue=!0===N?t:o,$=!0===N?1:-1;for(U=M,B=1;B<=c;B++)b.push(0,I*$,0),_.push(0,$,0),E.push(.5,.5),M++;for(q=M,B=0;B<=c;B++){var ae=B/c*p+f,me=Math.cos(ae),xe=Math.sin(ae);re.x=ue*xe,re.y=I*$,re.z=ue*me,b.push(re.x,re.y,re.z),_.push(0,$,0),Z.x=.5*me+.5,Z.y=.5*xe*$+.5,E.push(Z.x,Z.y),M++}for(B=0;B<c;B++){var Ae=U+B,De=q+B;!0===N?w.push(De,De+1,Ae):w.push(De+1,De,Ae),ne+=3}y.addGroup(T,ne,!0===N?1:2),T+=ne}(function O(){var N,B,U=new k,q=new k,Z=0,re=(o-t)/s;for(B=0;B<=l;B++){var ne=[],ue=B/l,$=ue*(o-t)+t;for(N=0;N<=c;N++){var Q=N/c,ae=Q*p+f,me=Math.sin(ae),xe=Math.cos(ae);q.x=$*me,q.y=-ue*s+I,q.z=$*xe,b.push(q.x,q.y,q.z),U.set(me,re,xe).normalize(),_.push(U.x,U.y,U.z),E.push(Q,1-ue),ne.push(M++)}S.push(ne)}for(N=0;N<c;N++)for(B=0;B<l;B++){var De=S[B+1][N],he=S[B+1][N+1],_e=S[B][N+1];w.push(S[B][N],De,_e),w.push(De,he,_e),Z+=6}y.addGroup(T,Z,0),T+=Z})(),!1===d&&(t>0&&F(!0),o>0&&F(!1)),this.setIndex(w),this.addAttribute("position",new Ce(b,3)),this.addAttribute("normal",new Ce(_,3)),this.addAttribute("uv",new Ce(E,2))}function Hs(t,o,s,c,l,d,f){Ia.call(this,0,t,o,s,c,l,d,f),this.type="ConeGeometry",this.parameters={radius:t,height:o,radialSegments:s,heightSegments:c,openEnded:l,thetaStart:d,thetaLength:f}}function Ro(t,o,s,c,l,d,f){Io.call(this,0,t,o,s,c,l,d,f),this.type="ConeBufferGeometry",this.parameters={radius:t,height:o,radialSegments:s,heightSegments:c,openEnded:l,thetaStart:d,thetaLength:f}}function Lo(t,o,s,c){st.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:o,thetaStart:s,thetaLength:c},this.fromBufferGeometry(new lo(t,o,s,c)),this.mergeVertices()}function lo(t,o,s,c){Pe.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:o,thetaStart:s,thetaLength:c},t=t||1,o=void 0!==o?Math.max(3,o):8,s=void 0!==s?s:0,c=void 0!==c?c:2*Math.PI;var y,w,l=[],d=[],f=[],p=[],b=new k,_=new pe;for(d.push(0,0,0),f.push(0,0,1),p.push(.5,.5),w=0,y=3;w<=o;w++,y+=3){var E=s+w/o*c;b.x=t*Math.cos(E),b.y=t*Math.sin(E),d.push(b.x,b.y,b.z),f.push(0,0,1),_.x=(d[y]/t+1)/2,_.y=(d[y+1]/t+1)/2,p.push(_.x,_.y)}for(y=1;y<=o;y++)l.push(y,y+1,0);this.setIndex(l),this.addAttribute("position",new Ce(d,3)),this.addAttribute("normal",new Ce(f,3)),this.addAttribute("uv",new Ce(p,2))}(Hu.prototype=Object.create(st.prototype)).constructor=Hu,(is.prototype=Object.create(co.prototype)).constructor=is,(uo.prototype=Object.create(st.prototype)).constructor=uo,(Us.prototype=Object.create(Pe.prototype)).constructor=Us,(Sc.prototype=Object.create(st.prototype)).constructor=Sc,(Da.prototype=Object.create(Pe.prototype)).constructor=Da,(os.prototype=Object.create(st.prototype)).constructor=os,(Dc.prototype=Object.create(Pe.prototype)).constructor=Dc,(Zn.prototype=Object.create(st.prototype)).constructor=Zn,Zn.prototype.toJSON=function(){var t=st.prototype.toJSON.call(this);return Bh(this.parameters.shapes,t)},(Ta.prototype=Object.create(Pe.prototype)).constructor=Ta,Ta.prototype.toJSON=function(){var t=Pe.prototype.toJSON.call(this);return Bh(this.parameters.shapes,t)},(Vs.prototype=Object.create(Pe.prototype)).constructor=Vs,(Ia.prototype=Object.create(st.prototype)).constructor=Ia,(Io.prototype=Object.create(Pe.prototype)).constructor=Io,(Hs.prototype=Object.create(Ia.prototype)).constructor=Hs,(Ro.prototype=Object.create(Io.prototype)).constructor=Ro,(Lo.prototype=Object.create(st.prototype)).constructor=Lo,(lo.prototype=Object.create(Pe.prototype)).constructor=lo;var Or=Object.freeze({WireframeGeometry:Ma,ParametricGeometry:Aa,ParametricBufferGeometry:_c,TetrahedronGeometry:so,TetrahedronBufferGeometry:hn,OctahedronGeometry:Lu,OctahedronBufferGeometry:Ca,IcosahedronGeometry:Pu,IcosahedronBufferGeometry:xc,DodecahedronGeometry:Ec,DodecahedronBufferGeometry:Sa,PolyhedronGeometry:Ru,PolyhedronBufferGeometry:dn,TubeGeometry:Ns,TubeBufferGeometry:ei,TorusKnotGeometry:Ou,TorusKnotBufferGeometry:ns,TorusGeometry:Fs,TorusBufferGeometry:rs,TextGeometry:Hu,TextBufferGeometry:is,SphereGeometry:uo,SphereBufferGeometry:Us,RingGeometry:Sc,RingBufferGeometry:Da,PlaneGeometry:xu,PlaneBufferGeometry:va,LatheGeometry:os,LatheBufferGeometry:Dc,ShapeGeometry:Zn,ShapeBufferGeometry:Ta,ExtrudeGeometry:Bs,ExtrudeBufferGeometry:co,EdgesGeometry:Vs,ConeGeometry:Hs,ConeBufferGeometry:Ro,CylinderGeometry:Ia,CylinderBufferGeometry:Io,CircleGeometry:Lo,CircleBufferGeometry:lo,BoxGeometry:dc,BoxBufferGeometry:hc});function ss(t){_t.call(this),this.type="ShadowMaterial",this.color=new je(0),this.transparent=!0,this.setValues(t)}function ho(t){fi.call(this,t),this.type="RawShaderMaterial"}function as(t){_t.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new je(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ra(t){as.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Po(t){_t.call(this),this.type="MeshPhongMaterial",this.color=new je(16777215),this.specular=new je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Tc(t){Po.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Ic(t){_t.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Rc(t){_t.call(this),this.type="MeshLambertMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Lc(t){_t.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fu,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Pc(t){tn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}(ss.prototype=Object.create(_t.prototype)).constructor=ss,ss.prototype.isShadowMaterial=!0,ss.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.color.copy(t.color),this},(ho.prototype=Object.create(fi.prototype)).constructor=ho,ho.prototype.isRawShaderMaterial=!0,(as.prototype=Object.create(_t.prototype)).constructor=as,as.prototype.isMeshStandardMaterial=!0,as.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Ra.prototype=Object.create(as.prototype)).constructor=Ra,Ra.prototype.isMeshPhysicalMaterial=!0,Ra.prototype.copy=function(t){return as.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},(Po.prototype=Object.create(_t.prototype)).constructor=Po,Po.prototype.isMeshPhongMaterial=!0,Po.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Tc.prototype=Object.create(Po.prototype)).constructor=Tc,Tc.prototype.isMeshToonMaterial=!0,Tc.prototype.copy=function(t){return Po.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},(Ic.prototype=Object.create(_t.prototype)).constructor=Ic,Ic.prototype.isMeshNormalMaterial=!0,Ic.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Rc.prototype=Object.create(_t.prototype)).constructor=Rc,Rc.prototype.isMeshLambertMaterial=!0,Rc.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Lc.prototype=Object.create(_t.prototype)).constructor=Lc,Lc.prototype.isMeshMatcapMaterial=!0,Lc.prototype.copy=function(t){return _t.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Pc.prototype=Object.create(tn.prototype)).constructor=Pc,Pc.prototype.isLineDashedMaterial=!0,Pc.prototype.copy=function(t){return tn.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Oc=Object.freeze({ShadowMaterial:ss,SpriteMaterial:ts,RawShaderMaterial:ho,ShaderMaterial:fi,PointsMaterial:oo,MeshPhysicalMaterial:Ra,MeshStandardMaterial:as,MeshPhongMaterial:Po,MeshToonMaterial:Tc,MeshNormalMaterial:Ic,MeshLambertMaterial:Rc,MeshDepthMaterial:vi,MeshDistanceMaterial:Os,MeshBasicMaterial:Ni,MeshMatcapMaterial:Lc,LineDashedMaterial:Pc,LineBasicMaterial:tn,Material:_t}),mr={arraySlice:function(t,o,s){return mr.isTypedArray(t)?new t.constructor(t.subarray(o,void 0!==s?s:t.length)):t.slice(o,s)},convertArray:function(t,o,s){return!t||!s&&t.constructor===o?t:"number"==typeof o.BYTES_PER_ELEMENT?new o(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var s=t.length,c=new Array(s),l=0;l!==s;++l)c[l]=l;return c.sort(function o(d,f){return t[d]-t[f]}),c},sortedArray:function(t,o,s){for(var c=t.length,l=new t.constructor(c),d=0,f=0;f!==c;++d)for(var p=s[d]*o,y=0;y!==o;++y)l[f++]=t[p+y];return l},flattenJSON:function(t,o,s,c){for(var l=1,d=t[0];void 0!==d&&void 0===d[c];)d=t[l++];if(void 0!==d){var f=d[c];if(void 0!==f)if(Array.isArray(f))do{void 0!==(f=d[c])&&(o.push(d.time),s.push.apply(s,f)),d=t[l++]}while(void 0!==d);else if(void 0!==f.toArray)do{void 0!==(f=d[c])&&(o.push(d.time),f.toArray(s,s.length)),d=t[l++]}while(void 0!==d);else do{void 0!==(f=d[c])&&(o.push(d.time),s.push(f)),d=t[l++]}while(void 0!==d)}}};function bi(t,o,s,c){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==c?c:new o.constructor(s),this.sampleValues=o,this.valueSize=s}function Bn(t,o,s,c){bi.call(this,t,o,s,c),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function zu(t,o,s,c){bi.call(this,t,o,s,c)}function zs(t,o,s,c){bi.call(this,t,o,s,c)}function Mr(t,o,s,c){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===o||0===o.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=mr.convertArray(o,this.TimeBufferType),this.values=mr.convertArray(s,this.ValueBufferType),this.setInterpolation(c||this.DefaultInterpolation)}function Hr(t,o,s){Mr.call(this,t,o,s)}function cs(t,o,s,c){Mr.call(this,t,o,s,c)}function La(t,o,s,c){Mr.call(this,t,o,s,c)}function Pa(t,o,s,c){bi.call(this,t,o,s,c)}function us(t,o,s,c){Mr.call(this,t,o,s,c)}function Vl(t,o,s,c){Mr.call(this,t,o,s,c)}function Gu(t,o,s,c){Mr.call(this,t,o,s,c)}function ki(t,o,s){this.name=t,this.tracks=s,this.duration=void 0!==o?o:-1,this.uuid=yt.generateUUID(),this.duration<0&&this.resetDuration()}function _i(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var o=function wb(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return La;case"vector":case"vector2":case"vector3":case"vector4":return Gu;case"color":return cs;case"quaternion":return us;case"bool":case"boolean":return Hr;case"string":return Vl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var s=[],c=[];mr.flattenJSON(t.keys,s,c,"value"),t.times=s,t.values=c}return void 0!==o.parse?o.parse(t):new o(t.name,t.times,t.values,t.interpolation)}Object.assign(bi.prototype,{evaluate:function(t){var o=this.parameterPositions,s=this._cachedIndex,c=o[s],l=o[s-1];e:{t:{var d;n:{r:if(!(t<c)){for(var f=s+2;;){if(void 0===c){if(t<l)break r;return this._cachedIndex=s=o.length,this.afterEnd_(s-1,t,l)}if(s===f)break;if(l=c,t<(c=o[++s]))break t}d=o.length;break n}if(t>=l)break e;var p=o[1];for(t<p&&(s=2,l=p),f=s-2;;){if(void 0===l)return this._cachedIndex=0,this.beforeStart_(0,t,c);if(s===f)break;if(c=l,t>=(l=o[--s-1]))break t}d=s,s=0}for(;s<d;){var y=s+d>>>1;t<o[y]?d=y:s=y+1}if(c=o[s],void 0===(l=o[s-1]))return this._cachedIndex=0,this.beforeStart_(0,t,c);if(void 0===c)return this._cachedIndex=s=o.length,this.afterEnd_(s-1,l,t)}this._cachedIndex=s,this.intervalChanged_(s,l,c)}return this.interpolate_(s,l,t,c)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var o=this.resultBuffer,s=this.sampleValues,c=this.valueSize,l=t*c,d=0;d!==c;++d)o[d]=s[l+d];return o},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(bi.prototype,{beforeStart_:bi.prototype.copySampleValue_,afterEnd_:bi.prototype.copySampleValue_}),Bn.prototype=Object.assign(Object.create(bi.prototype),{constructor:Bn,DefaultSettings_:{endingStart:da,endingEnd:da},intervalChanged_:function(t,o,s){var c=this.parameterPositions,l=t-2,d=t+1,f=c[l],p=c[d];if(void 0===f)switch(this.getSettings_().endingStart){case Ut:l=t,f=2*o-s;break;case Cs:f=o+c[l=c.length-2]-c[l+1];break;default:l=t,f=s}if(void 0===p)switch(this.getSettings_().endingEnd){case Ut:d=t,p=2*s-o;break;case Cs:d=1,p=s+c[1]-c[0];break;default:d=t-1,p=o}var y=.5*(s-o),w=this.valueSize;this._weightPrev=y/(o-f),this._weightNext=y/(p-s),this._offsetPrev=l*w,this._offsetNext=d*w},interpolate_:function(t,o,s,c){for(var l=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=t*f,y=p-f,w=this._offsetPrev,b=this._offsetNext,_=this._weightPrev,E=this._weightNext,M=(s-o)/(c-o),S=M*M,I=S*M,T=-_*I+2*_*S-_*M,O=(1+_)*I+(-1.5-2*_)*S+(-.5+_)*M+1,F=(-1-E)*I+(1.5+E)*S+.5*M,N=E*I-E*S,B=0;B!==f;++B)l[B]=T*d[w+B]+O*d[y+B]+F*d[p+B]+N*d[b+B];return l}}),zu.prototype=Object.assign(Object.create(bi.prototype),{constructor:zu,interpolate_:function(t,o,s,c){for(var l=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=t*f,y=p-f,w=(s-o)/(c-o),b=1-w,_=0;_!==f;++_)l[_]=d[y+_]*b+d[p+_]*w;return l}}),zs.prototype=Object.assign(Object.create(bi.prototype),{constructor:zs,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Mr,{toJSON:function(t){var s,o=t.constructor;if(void 0!==o.toJSON)s=o.toJSON(t);else{s={name:t.name,times:mr.convertArray(t.times,Array),values:mr.convertArray(t.values,Array)};var c=t.getInterpolation();c!==t.DefaultInterpolation&&(s.interpolation=c)}return s.type=t.ValueTypeName,s}}),Object.assign(Mr.prototype,{constructor:Mr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:$r,InterpolantFactoryMethodDiscrete:function(t){return new zs(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new zu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Bn(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var o;switch(t){case la:o=this.InterpolantFactoryMethodDiscrete;break;case $r:o=this.InterpolantFactoryMethodLinear;break;case yl:o=this.InterpolantFactoryMethodSmooth}if(void 0===o){var s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=o,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return la;case this.InterpolantFactoryMethodLinear:return $r;case this.InterpolantFactoryMethodSmooth:return yl}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var o=this.times,s=0,c=o.length;s!==c;++s)o[s]+=t;return this},scale:function(t){if(1!==t)for(var o=this.times,s=0,c=o.length;s!==c;++s)o[s]*=t;return this},trim:function(t,o){for(var s=this.times,c=s.length,l=0,d=c-1;l!==c&&s[l]<t;)++l;for(;-1!==d&&s[d]>o;)--d;if(++d,0!==l||d!==c){l>=d&&(l=(d=Math.max(d,1))-1);var f=this.getValueSize();this.times=mr.arraySlice(s,l,d),this.values=mr.arraySlice(this.values,l*f,d*f)}return this},validate:function(){var t=!0,o=this.getValueSize();o-Math.floor(o)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var s=this.times,c=this.values,l=s.length;0===l&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var d=null,f=0;f!==l;f++){var p=s[f];if("number"==typeof p&&isNaN(p)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,p),t=!1;break}if(null!==d&&d>p){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,p,d),t=!1;break}d=p}if(void 0!==c&&mr.isTypedArray(c)){f=0;for(var y=c.length;f!==y;++f){var w=c[f];if(isNaN(w)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,w),t=!1;break}}}return t},optimize:function(){for(var t=this.times,o=this.values,s=this.getValueSize(),c=this.getInterpolation()===yl,l=1,d=t.length-1,f=1;f<d;++f){var p=!1,y=t[f];if(y!==t[f+1]&&(1!==f||y!==y[0]))if(c)p=!0;else for(var b=f*s,_=b-s,E=b+s,M=0;M!==s;++M){var S=o[b+M];if(S!==o[_+M]||S!==o[E+M]){p=!0;break}}if(p){if(f!==l){t[l]=t[f];var I=f*s,T=l*s;for(M=0;M!==s;++M)o[T+M]=o[I+M]}++l}}if(d>0){for(t[l]=t[d],I=d*s,T=l*s,M=0;M!==s;++M)o[T+M]=o[I+M];++l}return l!==t.length&&(this.times=mr.arraySlice(t,0,l),this.values=mr.arraySlice(o,0,l*s)),this},clone:function(){var t=mr.arraySlice(this.times,0),o=mr.arraySlice(this.values,0),c=new(0,this.constructor)(this.name,t,o);return c.createInterpolant=this.createInterpolant,c}}),Hr.prototype=Object.assign(Object.create(Mr.prototype),{constructor:Hr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:la,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),cs.prototype=Object.assign(Object.create(Mr.prototype),{constructor:cs,ValueTypeName:"color"}),La.prototype=Object.assign(Object.create(Mr.prototype),{constructor:La,ValueTypeName:"number"}),Pa.prototype=Object.assign(Object.create(bi.prototype),{constructor:Pa,interpolate_:function(t,o,s,c){for(var l=this.resultBuffer,d=this.sampleValues,f=this.valueSize,p=t*f,y=(s-o)/(c-o),w=p+f;p!==w;p+=4)en.slerpFlat(l,0,d,p-f,d,p,y);return l}}),us.prototype=Object.assign(Object.create(Mr.prototype),{constructor:us,ValueTypeName:"quaternion",DefaultInterpolation:$r,InterpolantFactoryMethodLinear:function(t){return new Pa(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Vl.prototype=Object.assign(Object.create(Mr.prototype),{constructor:Vl,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:la,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Gu.prototype=Object.assign(Object.create(Mr.prototype),{constructor:Gu,ValueTypeName:"vector"}),Object.assign(ki,{parse:function(t){for(var o=[],s=t.tracks,c=1/(t.fps||1),l=0,d=s.length;l!==d;++l)o.push(_i(s[l]).scale(c));return new ki(t.name,t.duration,o)},toJSON:function(t){for(var o=[],s=t.tracks,c={name:t.name,duration:t.duration,tracks:o,uuid:t.uuid},l=0,d=s.length;l!==d;++l)o.push(Mr.toJSON(s[l]));return c},CreateFromMorphTargetSequence:function(t,o,s,c){for(var l=o.length,d=[],f=0;f<l;f++){var p=[],y=[];p.push((f+l-1)%l,f,(f+1)%l),y.push(0,1,0);var w=mr.getKeyframeOrder(p);p=mr.sortedArray(p,1,w),y=mr.sortedArray(y,1,w),!c&&0===p[0]&&(p.push(l),y.push(y[0])),d.push(new La(".morphTargetInfluences["+o[f].name+"]",p,y).scale(1/s))}return new ki(t,-1,d)},findByName:function(t,o){var s=t;Array.isArray(t)||(s=t.geometry&&t.geometry.animations||t.animations);for(var l=0;l<s.length;l++)if(s[l].name===o)return s[l];return null},CreateClipsFromMorphTargetSequences:function(t,o,s){for(var c={},l=/^([\w-]*?)([\d]+)$/,d=0,f=t.length;d<f;d++){var p=t[d],y=p.name.match(l);if(y&&y.length>1){var b=c[w=y[1]];b||(c[w]=b=[]),b.push(p)}}var _=[];for(var w in c)_.push(ki.CreateFromMorphTargetSequence(w,c[w],o,s));return _},parseAnimation:function(t,o){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var s=function(N,B,U,q,Z){if(0!==U.length){var re=[],ne=[];mr.flattenJSON(U,re,ne,q),0!==re.length&&Z.push(new N(B,re,ne))}},c=[],l=t.name||"default",d=t.length||-1,f=t.fps||30,p=t.hierarchy||[],y=0;y<p.length;y++){var w=p[y].keys;if(w&&0!==w.length)if(w[0].morphTargets){for(var b={},_=0;_<w.length;_++)if(w[_].morphTargets)for(var E=0;E<w[_].morphTargets.length;E++)b[w[_].morphTargets[E]]=-1;for(var M in b){var S=[],I=[];for(E=0;E!==w[_].morphTargets.length;++E){var T=w[_];S.push(T.time),I.push(T.morphTarget===M?1:0)}c.push(new La(".morphTargetInfluence["+M+"]",S,I))}d=b.length*(f||1)}else{var O=".bones["+o[y].name+"]";s(Gu,O+".position",w,"pos",c),s(us,O+".quaternion",w,"rot",c),s(Gu,O+".scale",w,"scl",c)}}return 0===c.length?null:new ki(l,d,c)}}),Object.assign(ki.prototype,{resetDuration:function(){for(var o=0,s=0,c=this.tracks.length;s!==c;++s){var l=this.tracks[s];o=Math.max(o,l.times[l.times.length-1])}return this.duration=o,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,o=0;o<this.tracks.length;o++)t=t&&this.tracks[o].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],o=0;o<this.tracks.length;o++)t.push(this.tracks[o].clone());return new ki(this.name,this.duration,t)}});var ls={enabled:!1,files:{},add:function(t,o){!1!==this.enabled&&(this.files[t]=o)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Gs(t,o,s){var c=this,l=!1,d=0,f=0,p=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=o,this.onError=s,this.itemStart=function(y){f++,!1===l&&void 0!==c.onStart&&c.onStart(y,d,f),l=!0},this.itemEnd=function(y){d++,void 0!==c.onProgress&&c.onProgress(y,d,f),d===f&&(l=!1,void 0!==c.onLoad&&c.onLoad())},this.itemError=function(y){void 0!==c.onError&&c.onError(y)},this.resolveURL=function(y){return p?p(y):y},this.setURLModifier=function(y){return p=y,this}}var xi=new Gs,Bi={};function fo(t){this.manager=void 0!==t?t:xi}function hm(t){this.manager=void 0!==t?t:xi}function fm(t){this.manager=void 0!==t?t:xi,this._parser=null}function Uh(t){this.manager=void 0!==t?t:xi,this._parser=null}function ju(t){this.manager=void 0!==t?t:xi}function Vh(t){this.manager=void 0!==t?t:xi}function Nc(t){this.manager=void 0!==t?t:xi}function Ye(){this.type="Curve",this.arcLengthDivisions=200}function Ei(t,o,s,c,l,d,f,p){Ye.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=o||0,this.xRadius=s||1,this.yRadius=c||1,this.aStartAngle=l||0,this.aEndAngle=d||2*Math.PI,this.aClockwise=f||!1,this.aRotation=p||0}function ds(t,o,s,c,l,d){Ei.call(this,t,o,s,s,c,l,d),this.type="ArcCurve"}function Hh(){var t=0,o=0,s=0,c=0;function l(d,f,p,y){t=d,o=p,s=-3*d+3*f-2*p-y,c=2*d-2*f+p+y}return{initCatmullRom:function(d,f,p,y,w){l(f,p,w*(p-d),w*(y-f))},initNonuniformCatmullRom:function(d,f,p,y,w,b,_){var E=(f-d)/w-(p-d)/(w+b)+(p-f)/b,M=(p-f)/b-(y-f)/(b+_)+(y-p)/_;l(f,p,E*=b,M*=b)},calc:function(d){var f=d*d;return t+o*d+s*f+c*(f*d)}}}Object.assign(fo.prototype,{load:function(t,o,s,c){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var l=this,d=ls.get(t);if(void 0!==d)return l.manager.itemStart(t),setTimeout(function(){o&&o(d),l.manager.itemEnd(t)},0),d;if(void 0===Bi[t]){var p=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(p){var y=p[1],w=!!p[2],b=p[3];b=decodeURIComponent(b),w&&(b=atob(b));try{var _,E=(this.responseType||"").toLowerCase();switch(E){case"arraybuffer":case"blob":for(var M=new Uint8Array(b.length),S=0;S<b.length;S++)M[S]=b.charCodeAt(S);_="blob"===E?new Blob([M.buffer],{type:y}):M.buffer;break;case"document":var I=new DOMParser;_=I.parseFromString(b,y);break;case"json":_=JSON.parse(b);break;default:_=b}setTimeout(function(){o&&o(_),l.manager.itemEnd(t)},0)}catch(F){setTimeout(function(){c&&c(F),l.manager.itemError(t),l.manager.itemEnd(t)},0)}}else{Bi[t]=[],Bi[t].push({onLoad:o,onProgress:s,onError:c});var T=new XMLHttpRequest;for(var O in T.open("GET",t,!0),T.addEventListener("load",function(F){var N=this.response;ls.add(t,N);var B=Bi[t];if(delete Bi[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var U=0,q=B.length;U<q;U++)(Z=B[U]).onLoad&&Z.onLoad(N);l.manager.itemEnd(t)}else{for(U=0,q=B.length;U<q;U++){var Z;(Z=B[U]).onError&&Z.onError(F)}l.manager.itemError(t),l.manager.itemEnd(t)}},!1),T.addEventListener("progress",function(F){for(var N=Bi[t],B=0,U=N.length;B<U;B++){var q=N[B];q.onProgress&&q.onProgress(F)}},!1),T.addEventListener("error",function(F){var N=Bi[t];delete Bi[t];for(var B=0,U=N.length;B<U;B++){var q=N[B];q.onError&&q.onError(F)}l.manager.itemError(t),l.manager.itemEnd(t)},!1),T.addEventListener("abort",function(F){var N=Bi[t];delete Bi[t];for(var B=0,U=N.length;B<U;B++){var q=N[B];q.onError&&q.onError(F)}l.manager.itemError(t),l.manager.itemEnd(t)},!1),void 0!==this.responseType&&(T.responseType=this.responseType),void 0!==this.withCredentials&&(T.withCredentials=this.withCredentials),T.overrideMimeType&&T.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)T.setRequestHeader(O,this.requestHeader[O]);T.send(null)}return l.manager.itemStart(t),T}Bi[t].push({onLoad:o,onProgress:s,onError:c})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(hm.prototype,{load:function(t,o,s,c){var l=this,d=new fo(l.manager);d.setPath(l.path),d.load(t,function(f){o(l.parse(JSON.parse(f)))},s,c)},parse:function(t){for(var o=[],s=0;s<t.length;s++){var c=ki.parse(t[s]);o.push(c)}return o},setPath:function(t){return this.path=t,this}}),Object.assign(fm.prototype,{load:function(t,o,s,c){var l=this,d=[],f=new Ea;f.image=d;var p=new fo(this.manager);function y(E){p.load(t[E],function(M){var S=l._parser(M,!0);d[E]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},6===(w+=1)&&(1===S.mipmapCount&&(f.minFilter=lr),f.format=S.format,f.needsUpdate=!0,o&&o(f))},s,c)}if(p.setPath(this.path),p.setResponseType("arraybuffer"),Array.isArray(t))for(var w=0,b=0,_=t.length;b<_;++b)y(b);else p.load(t,function(E){var M=l._parser(E,!0);if(M.isCubemap)for(var S=M.mipmaps.length/M.mipmapCount,I=0;I<S;I++){d[I]={mipmaps:[]};for(var T=0;T<M.mipmapCount;T++)d[I].mipmaps.push(M.mipmaps[I*M.mipmapCount+T]),d[I].format=M.format,d[I].width=M.width,d[I].height=M.height}else f.image.width=M.width,f.image.height=M.height,f.mipmaps=M.mipmaps;1===M.mipmapCount&&(f.minFilter=lr),f.format=M.format,f.needsUpdate=!0,o&&o(f)},s,c);return f},setPath:function(t){return this.path=t,this}}),Object.assign(Uh.prototype,{load:function(t,o,s,c){var l=this,d=new fa,f=new fo(this.manager);return f.setResponseType("arraybuffer"),f.setPath(this.path),f.load(t,function(p){var y=l._parser(p);y&&(void 0!==y.image?d.image=y.image:void 0!==y.data&&(d.image.width=y.width,d.image.height=y.height,d.image.data=y.data),d.wrapS=void 0!==y.wrapS?y.wrapS:er,d.wrapT=void 0!==y.wrapT?y.wrapT:er,d.magFilter=void 0!==y.magFilter?y.magFilter:lr,d.minFilter=void 0!==y.minFilter?y.minFilter:Yo,d.anisotropy=void 0!==y.anisotropy?y.anisotropy:1,void 0!==y.format&&(d.format=y.format),void 0!==y.type&&(d.type=y.type),void 0!==y.mipmaps&&(d.mipmaps=y.mipmaps),1===y.mipmapCount&&(d.minFilter=lr),d.needsUpdate=!0,o&&o(d,y))},s,c),d},setPath:function(t){return this.path=t,this}}),Object.assign(ju.prototype,{crossOrigin:"anonymous",load:function(t,o,s,c){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var l=this,d=ls.get(t);if(void 0!==d)return l.manager.itemStart(t),setTimeout(function(){o&&o(d),l.manager.itemEnd(t)},0),d;var f=document.createElementNS("http://www.w3.org/1999/xhtml","img");function p(){f.removeEventListener("load",p,!1),f.removeEventListener("error",y,!1),ls.add(t,this),o&&o(this),l.manager.itemEnd(t)}function y(w){f.removeEventListener("load",p,!1),f.removeEventListener("error",y,!1),c&&c(w),l.manager.itemError(t),l.manager.itemEnd(t)}return f.addEventListener("load",p,!1),f.addEventListener("error",y,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),l.manager.itemStart(t),f.src=t,f},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Vh.prototype,{crossOrigin:"anonymous",load:function(t,o,s,c){var l=new Ps,d=new ju(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);var f=0;function p(w){d.load(t[w],function(b){l.images[w]=b,6==++f&&(l.needsUpdate=!0,o&&o(l))},void 0,c)}for(var y=0;y<t.length;++y)p(y);return l},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Nc.prototype,{crossOrigin:"anonymous",load:function(t,o,s,c){var l=new vn,d=new ju(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(t,function(f){l.image=f;var p=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);l.format=p?rr:Mo,l.needsUpdate=!0,void 0!==o&&o(l)},s,c),l},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ye.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,o){var s=this.getUtoTmapping(t);return this.getPoint(s,o)},getPoints:function(t){void 0===t&&(t=5);for(var o=[],s=0;s<=t;s++)o.push(this.getPoint(s/t));return o},getSpacedPoints:function(t){void 0===t&&(t=5);for(var o=[],s=0;s<=t;s++)o.push(this.getPointAt(s/t));return o},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var s,l,o=[],c=this.getPoint(0),d=0;for(o.push(0),l=1;l<=t;l++)d+=(s=this.getPoint(l/t)).distanceTo(c),o.push(d),c=s;return this.cacheArcLengths=o,o},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,o){var d,s=this.getLengths(),c=0,l=s.length;d=o||t*s[l-1];for(var y,f=0,p=l-1;f<=p;)if((y=s[c=Math.floor(f+(p-f)/2)]-d)<0)f=c+1;else{if(!(y>0)){p=c;break}p=c-1}if(s[c=p]===d)return c/(l-1);var w=s[c];return(c+(d-w)/(s[c+1]-w))/(l-1)},getTangent:function(t){var o=1e-4,s=t-o,c=t+o;s<0&&(s=0),c>1&&(c=1);var l=this.getPoint(s);return this.getPoint(c).clone().sub(l).normalize()},getTangentAt:function(t){var o=this.getUtoTmapping(t);return this.getTangent(o)},computeFrenetFrames:function(t,o){var y,b,s=new k,c=[],l=[],d=[],f=new k,p=new it;for(y=0;y<=t;y++)c[y]=this.getTangentAt(y/t),c[y].normalize();l[0]=new k,d[0]=new k;var _=Number.MAX_VALUE,E=Math.abs(c[0].x),M=Math.abs(c[0].y),S=Math.abs(c[0].z);for(E<=_&&(_=E,s.set(1,0,0)),M<=_&&(_=M,s.set(0,1,0)),S<=_&&s.set(0,0,1),f.crossVectors(c[0],s).normalize(),l[0].crossVectors(c[0],f),d[0].crossVectors(c[0],l[0]),y=1;y<=t;y++)l[y]=l[y-1].clone(),d[y]=d[y-1].clone(),f.crossVectors(c[y-1],c[y]),f.length()>Number.EPSILON&&(f.normalize(),b=Math.acos(yt.clamp(c[y-1].dot(c[y]),-1,1)),l[y].applyMatrix4(p.makeRotationAxis(f,b))),d[y].crossVectors(c[y],l[y]);if(!0===o)for(b=Math.acos(yt.clamp(l[0].dot(l[t]),-1,1)),b/=t,c[0].dot(f.crossVectors(l[0],l[t]))>0&&(b=-b),y=1;y<=t;y++)l[y].applyMatrix4(p.makeRotationAxis(c[y],b*y)),d[y].crossVectors(c[y],l[y]);return{tangents:c,normals:l,binormals:d}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(Ei.prototype=Object.create(Ye.prototype)).constructor=Ei,Ei.prototype.isEllipseCurve=!0,Ei.prototype.getPoint=function(t,o){for(var s=o||new pe,c=2*Math.PI,l=this.aEndAngle-this.aStartAngle,d=Math.abs(l)<Number.EPSILON;l<0;)l+=c;for(;l>c;)l-=c;l<Number.EPSILON&&(l=d?0:c),!0===this.aClockwise&&!d&&(l===c?l=-c:l-=c);var f=this.aStartAngle+t*l,p=this.aX+this.xRadius*Math.cos(f),y=this.aY+this.yRadius*Math.sin(f);if(0!==this.aRotation){var w=Math.cos(this.aRotation),b=Math.sin(this.aRotation),_=p-this.aX,E=y-this.aY;p=_*w-E*b+this.aX,y=_*b+E*w+this.aY}return s.set(p,y)},Ei.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ei.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ei.prototype.fromJSON=function(t){return Ye.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(ds.prototype=Object.create(Ei.prototype)).constructor=ds,ds.prototype.isArcCurve=!0;var Oa=new k,zh=new Hh,Hl=new Hh,Wu=new Hh;function ar(t,o,s,c){Ye.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=o||!1,this.curveType=s||"centripetal",this.tension=c||.5}function Gh(t,o,s,c,l){var d=.5*(c-o),f=.5*(l-s),p=t*t;return(2*s-2*c+d+f)*(t*p)+(-3*s+3*c-2*d-f)*p+d*t+s}function hs(t,o,s,c){return function Yv(t,o){var s=1-t;return s*s*o}(t,o)+function Xv(t,o){return 2*(1-t)*t*o}(t,s)+function Fc(t,o){return t*t*o}(t,c)}function zl(t,o,s,c,l){return function Qv(t,o){var s=1-t;return s*s*s*o}(t,o)+function bb(t,o){var s=1-t;return 3*s*s*t*o}(t,s)+function pm(t,o){return 3*(1-t)*t*t*o}(t,c)+function Jv(t,o){return t*t*t*o}(t,l)}function po(t,o,s,c){Ye.call(this),this.type="CubicBezierCurve",this.v0=t||new pe,this.v1=o||new pe,this.v2=s||new pe,this.v3=c||new pe}function Oo(t,o,s,c){Ye.call(this),this.type="CubicBezierCurve3",this.v0=t||new k,this.v1=o||new k,this.v2=s||new k,this.v3=c||new k}function ti(t,o){Ye.call(this),this.type="LineCurve",this.v1=t||new pe,this.v2=o||new pe}function ni(t,o){Ye.call(this),this.type="LineCurve3",this.v1=t||new k,this.v2=o||new k}function Ui(t,o,s){Ye.call(this),this.type="QuadraticBezierCurve",this.v0=t||new pe,this.v1=o||new pe,this.v2=s||new pe}function No(t,o,s){Ye.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new k,this.v1=o||new k,this.v2=s||new k}function Vi(t){Ye.call(this),this.type="SplineCurve",this.points=t||[]}(ar.prototype=Object.create(Ye.prototype)).constructor=ar,ar.prototype.isCatmullRomCurve3=!0,ar.prototype.getPoint=function(t,o){var y,w,b,_,s=o||new k,c=this.points,l=c.length,d=(l-(this.closed?0:1))*t,f=Math.floor(d),p=d-f;if(this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/l)+1)*l:0===p&&f===l-1&&(f=l-2,p=1),this.closed||f>0?y=c[(f-1)%l]:(Oa.subVectors(c[0],c[1]).add(c[0]),y=Oa),w=c[f%l],b=c[(f+1)%l],this.closed||f+2<l?_=c[(f+2)%l]:(Oa.subVectors(c[l-1],c[l-2]).add(c[l-1]),_=Oa),"centripetal"===this.curveType||"chordal"===this.curveType){var E="chordal"===this.curveType?.5:.25,M=Math.pow(y.distanceToSquared(w),E),S=Math.pow(w.distanceToSquared(b),E),I=Math.pow(b.distanceToSquared(_),E);S<1e-4&&(S=1),M<1e-4&&(M=S),I<1e-4&&(I=S),zh.initNonuniformCatmullRom(y.x,w.x,b.x,_.x,M,S,I),Hl.initNonuniformCatmullRom(y.y,w.y,b.y,_.y,M,S,I),Wu.initNonuniformCatmullRom(y.z,w.z,b.z,_.z,M,S,I)}else"catmullrom"===this.curveType&&(zh.initCatmullRom(y.x,w.x,b.x,_.x,this.tension),Hl.initCatmullRom(y.y,w.y,b.y,_.y,this.tension),Wu.initCatmullRom(y.z,w.z,b.z,_.z,this.tension));return s.set(zh.calc(p),Hl.calc(p),Wu.calc(p)),s},ar.prototype.copy=function(t){Ye.prototype.copy.call(this,t),this.points=[];for(var o=0,s=t.points.length;o<s;o++)this.points.push(t.points[o].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},ar.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);t.points=[];for(var o=0,s=this.points.length;o<s;o++)t.points.push(this.points[o].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},ar.prototype.fromJSON=function(t){Ye.prototype.fromJSON.call(this,t),this.points=[];for(var o=0,s=t.points.length;o<s;o++){var c=t.points[o];this.points.push((new k).fromArray(c))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(po.prototype=Object.create(Ye.prototype)).constructor=po,po.prototype.isCubicBezierCurve=!0,po.prototype.getPoint=function(t,o){var s=o||new pe,c=this.v0,l=this.v1,d=this.v2,f=this.v3;return s.set(zl(t,c.x,l.x,d.x,f.x),zl(t,c.y,l.y,d.y,f.y)),s},po.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},po.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},po.prototype.fromJSON=function(t){return Ye.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Oo.prototype=Object.create(Ye.prototype)).constructor=Oo,Oo.prototype.isCubicBezierCurve3=!0,Oo.prototype.getPoint=function(t,o){var s=o||new k,c=this.v0,l=this.v1,d=this.v2,f=this.v3;return s.set(zl(t,c.x,l.x,d.x,f.x),zl(t,c.y,l.y,d.y,f.y),zl(t,c.z,l.z,d.z,f.z)),s},Oo.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Oo.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Oo.prototype.fromJSON=function(t){return Ye.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(ti.prototype=Object.create(Ye.prototype)).constructor=ti,ti.prototype.isLineCurve=!0,ti.prototype.getPoint=function(t,o){var s=o||new pe;return 1===t?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(t).add(this.v1)),s},ti.prototype.getPointAt=function(t,o){return this.getPoint(t,o)},ti.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},ti.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ti.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ti.prototype.fromJSON=function(t){return Ye.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(ni.prototype=Object.create(Ye.prototype)).constructor=ni,ni.prototype.isLineCurve3=!0,ni.prototype.getPoint=function(t,o){var s=o||new k;return 1===t?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(t).add(this.v1)),s},ni.prototype.getPointAt=function(t,o){return this.getPoint(t,o)},ni.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ni.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ni.prototype.fromJSON=function(t){return Ye.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Ui.prototype=Object.create(Ye.prototype)).constructor=Ui,Ui.prototype.isQuadraticBezierCurve=!0,Ui.prototype.getPoint=function(t,o){var s=o||new pe,c=this.v0,l=this.v1,d=this.v2;return s.set(hs(t,c.x,l.x,d.x),hs(t,c.y,l.y,d.y)),s},Ui.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ui.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ui.prototype.fromJSON=function(t){return Ye.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(No.prototype=Object.create(Ye.prototype)).constructor=No,No.prototype.isQuadraticBezierCurve3=!0,No.prototype.getPoint=function(t,o){var s=o||new k,c=this.v0,l=this.v1,d=this.v2;return s.set(hs(t,c.x,l.x,d.x),hs(t,c.y,l.y,d.y),hs(t,c.z,l.z,d.z)),s},No.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},No.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},No.prototype.fromJSON=function(t){return Ye.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Vi.prototype=Object.create(Ye.prototype)).constructor=Vi,Vi.prototype.isSplineCurve=!0,Vi.prototype.getPoint=function(t,o){var s=o||new pe,c=this.points,l=(c.length-1)*t,d=Math.floor(l),f=l-d,p=c[0===d?d:d-1],y=c[d],w=c[d>c.length-2?c.length-1:d+1],b=c[d>c.length-3?c.length-1:d+2];return s.set(Gh(f,p.x,y.x,w.x,b.x),Gh(f,p.y,y.y,w.y,b.y)),s},Vi.prototype.copy=function(t){Ye.prototype.copy.call(this,t),this.points=[];for(var o=0,s=t.points.length;o<s;o++)this.points.push(t.points[o].clone());return this},Vi.prototype.toJSON=function(){var t=Ye.prototype.toJSON.call(this);t.points=[];for(var o=0,s=this.points.length;o<s;o++)t.points.push(this.points[o].toArray());return t},Vi.prototype.fromJSON=function(t){Ye.prototype.fromJSON.call(this,t),this.points=[];for(var o=0,s=t.points.length;o<s;o++){var c=t.points[o];this.points.push((new pe).fromArray(c))}return this};var mm=Object.freeze({ArcCurve:ds,CatmullRomCurve3:ar,CubicBezierCurve:po,CubicBezierCurve3:Oo,EllipseCurve:Ei,LineCurve:ti,LineCurve3:ni,QuadraticBezierCurve:Ui,QuadraticBezierCurve3:No,SplineCurve:Vi});function Fo(){Ye.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ko(t){Fo.call(this),this.type="Path",this.currentPoint=new pe,t&&this.setFromPoints(t)}function js(t){ko.call(this,t),this.uuid=yt.generateUUID(),this.type="Shape",this.holes=[]}function _n(t,o){Le.call(this),this.type="Light",this.color=new je(t),this.intensity=void 0!==o?o:1,this.receiveShadow=void 0}function kc(t,o,s){_n.call(this,t,s),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Le.DefaultUp),this.updateMatrix(),this.groundColor=new je(o)}function Bc(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new pe(512,512),this.map=null,this.matrix=new it}function jh(){Bc.call(this,new $n(50,1,.5,500))}function Uc(t,o,s,c,l,d){_n.call(this,t,o),this.type="SpotLight",this.position.copy(Le.DefaultUp),this.updateMatrix(),this.target=new Le,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(f){this.intensity=f/Math.PI}}),this.distance=void 0!==s?s:0,this.angle=void 0!==c?c:Math.PI/3,this.penumbra=void 0!==l?l:0,this.decay=void 0!==d?d:1,this.shadow=new jh}function Wh(t,o,s,c){_n.call(this,t,o),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(l){this.intensity=l/(4*Math.PI)}}),this.distance=void 0!==s?s:0,this.decay=void 0!==c?c:1,this.shadow=new Bc(new $n(90,1,.5,500))}function Gl(t,o,s,c,l,d){Et.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==o?o:1,this.top=void 0!==s?s:1,this.bottom=void 0!==c?c:-1,this.near=void 0!==l?l:.1,this.far=void 0!==d?d:2e3,this.updateProjectionMatrix()}function $h(){Bc.call(this,new Gl(-5,5,5,-5,.5,500))}function qh(t,o){_n.call(this,t,o),this.type="DirectionalLight",this.position.copy(Le.DefaultUp),this.updateMatrix(),this.target=new Le,this.shadow=new $h}function Zh(t,o){_n.call(this,t,o),this.type="AmbientLight",this.castShadow=void 0}function jl(t,o,s,c){_n.call(this,t,o),this.type="RectAreaLight",this.width=void 0!==s?s:10,this.height=void 0!==c?c:10}function Na(t){this.manager=void 0!==t?t:xi,this.textures={}}Fo.prototype=Object.assign(Object.create(Ye.prototype),{constructor:Fo,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);t.equals(o)||this.curves.push(new ti(o,t))},getPoint:function(t){for(var o=t*this.getLength(),s=this.getCurveLengths(),c=0;c<s.length;){if(s[c]>=o){var l=s[c]-o,d=this.curves[c],f=d.getLength();return d.getPointAt(0===f?0:1-l/f)}c++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],o=0,s=0,c=this.curves.length;s<c;s++)o+=this.curves[s].getLength(),t.push(o);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var o=[],s=0;s<=t;s++)o.push(this.getPoint(s/t));return this.autoClose&&o.push(o[0]),o},getPoints:function(t){t=t||12;for(var s,o=[],c=0,l=this.curves;c<l.length;c++)for(var d=l[c],p=d.getPoints(d&&d.isEllipseCurve?2*t:d&&(d.isLineCurve||d.isLineCurve3)?1:d&&d.isSplineCurve?t*d.points.length:t),y=0;y<p.length;y++){var w=p[y];s&&s.equals(w)||(o.push(w),s=w)}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o},copy:function(t){Ye.prototype.copy.call(this,t),this.curves=[];for(var o=0,s=t.curves.length;o<s;o++)this.curves.push(t.curves[o].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ye.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var o=0,s=this.curves.length;o<s;o++)t.curves.push(this.curves[o].toJSON());return t},fromJSON:function(t){Ye.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var o=0,s=t.curves.length;o<s;o++){var c=t.curves[o];this.curves.push((new mm[c.type]).fromJSON(c))}return this}}),ko.prototype=Object.assign(Object.create(Fo.prototype),{constructor:ko,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var o=1,s=t.length;o<s;o++)this.lineTo(t[o].x,t[o].y)},moveTo:function(t,o){this.currentPoint.set(t,o)},lineTo:function(t,o){var s=new ti(this.currentPoint.clone(),new pe(t,o));this.curves.push(s),this.currentPoint.set(t,o)},quadraticCurveTo:function(t,o,s,c){var l=new Ui(this.currentPoint.clone(),new pe(t,o),new pe(s,c));this.curves.push(l),this.currentPoint.set(s,c)},bezierCurveTo:function(t,o,s,c,l,d){var f=new po(this.currentPoint.clone(),new pe(t,o),new pe(s,c),new pe(l,d));this.curves.push(f),this.currentPoint.set(l,d)},splineThru:function(t){var s=new Vi([this.currentPoint.clone()].concat(t));this.curves.push(s),this.currentPoint.copy(t[t.length-1])},arc:function(t,o,s,c,l,d){this.absarc(t+this.currentPoint.x,o+this.currentPoint.y,s,c,l,d)},absarc:function(t,o,s,c,l,d){this.absellipse(t,o,s,s,c,l,d)},ellipse:function(t,o,s,c,l,d,f,p){this.absellipse(t+this.currentPoint.x,o+this.currentPoint.y,s,c,l,d,f,p)},absellipse:function(t,o,s,c,l,d,f,p){var y=new Ei(t,o,s,c,l,d,f,p);if(this.curves.length>0){var w=y.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(y);var b=y.getPoint(1);this.currentPoint.copy(b)},copy:function(t){return Fo.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Fo.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Fo.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),js.prototype=Object.assign(Object.create(ko.prototype),{constructor:js,getPointsHoles:function(t){for(var o=[],s=0,c=this.holes.length;s<c;s++)o[s]=this.holes[s].getPoints(t);return o},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){ko.prototype.copy.call(this,t),this.holes=[];for(var o=0,s=t.holes.length;o<s;o++)this.holes.push(t.holes[o].clone());return this},toJSON:function(){var t=ko.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var o=0,s=this.holes.length;o<s;o++)t.holes.push(this.holes[o].toJSON());return t},fromJSON:function(t){ko.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var o=0,s=t.holes.length;o<s;o++){var c=t.holes[o];this.holes.push((new ko).fromJSON(c))}return this}}),_n.prototype=Object.assign(Object.create(Le.prototype),{constructor:_n,isLight:!0,copy:function(t){return Le.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var o=Le.prototype.toJSON.call(this,t);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,void 0!==this.groundColor&&(o.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(o.object.distance=this.distance),void 0!==this.angle&&(o.object.angle=this.angle),void 0!==this.decay&&(o.object.decay=this.decay),void 0!==this.penumbra&&(o.object.penumbra=this.penumbra),void 0!==this.shadow&&(o.object.shadow=this.shadow.toJSON()),o}}),kc.prototype=Object.assign(Object.create(_n.prototype),{constructor:kc,isHemisphereLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Bc.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),jh.prototype=Object.assign(Object.create(Bc.prototype),{constructor:jh,isSpotLightShadow:!0,update:function(t){var o=this.camera,s=2*yt.RAD2DEG*t.angle,c=this.mapSize.width/this.mapSize.height,l=t.distance||o.far;(s!==o.fov||c!==o.aspect||l!==o.far)&&(o.fov=s,o.aspect=c,o.far=l,o.updateProjectionMatrix())}}),Uc.prototype=Object.assign(Object.create(_n.prototype),{constructor:Uc,isSpotLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Wh.prototype=Object.assign(Object.create(_n.prototype),{constructor:Wh,isPointLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Gl.prototype=Object.assign(Object.create(Et.prototype),{constructor:Gl,isOrthographicCamera:!0,copy:function(t,o){return Et.prototype.copy.call(this,t,o),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,o,s,c,l,d){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=o,this.view.offsetX=s,this.view.offsetY=c,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,c=(this.top+this.bottom)/2,l=s-t,d=s+t,f=c+o,p=c-o;if(null!==this.view&&this.view.enabled){var y=this.zoom/(this.view.width/this.view.fullWidth),w=this.zoom/(this.view.height/this.view.fullHeight),b=(this.right-this.left)/this.view.width,_=(this.top-this.bottom)/this.view.height;d=(l+=b*(this.view.offsetX/y))+b*(this.view.width/y),p=(f-=_*(this.view.offsetY/w))-_*(this.view.height/w)}this.projectionMatrix.makeOrthographic(l,d,f,p,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var o=Le.prototype.toJSON.call(this,t);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,null!==this.view&&(o.object.view=Object.assign({},this.view)),o}}),$h.prototype=Object.assign(Object.create(Bc.prototype),{constructor:$h}),qh.prototype=Object.assign(Object.create(_n.prototype),{constructor:qh,isDirectionalLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Zh.prototype=Object.assign(Object.create(_n.prototype),{constructor:Zh,isAmbientLight:!0}),jl.prototype=Object.assign(Object.create(_n.prototype),{constructor:jl,isRectAreaLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var o=_n.prototype.toJSON.call(this,t);return o.object.width=this.width,o.object.height=this.height,o}}),Object.assign(Na.prototype,{load:function(t,o,s,c){var l=this,d=new fo(l.manager);d.setPath(l.path),d.load(t,function(f){o(l.parse(JSON.parse(f)))},s,c)},parse:function(t){var o=this.textures;function s(y){return void 0===o[y]&&console.warn("THREE.MaterialLoader: Undefined texture",y),o[y]}var c=new Oc[t.type];if(void 0!==t.uuid&&(c.uuid=t.uuid),void 0!==t.name&&(c.name=t.name),void 0!==t.color&&c.color.setHex(t.color),void 0!==t.roughness&&(c.roughness=t.roughness),void 0!==t.metalness&&(c.metalness=t.metalness),void 0!==t.emissive&&c.emissive.setHex(t.emissive),void 0!==t.specular&&c.specular.setHex(t.specular),void 0!==t.shininess&&(c.shininess=t.shininess),void 0!==t.clearCoat&&(c.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(c.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(c.vertexColors=t.vertexColors),void 0!==t.fog&&(c.fog=t.fog),void 0!==t.flatShading&&(c.flatShading=t.flatShading),void 0!==t.blending&&(c.blending=t.blending),void 0!==t.combine&&(c.combine=t.combine),void 0!==t.side&&(c.side=t.side),void 0!==t.opacity&&(c.opacity=t.opacity),void 0!==t.transparent&&(c.transparent=t.transparent),void 0!==t.alphaTest&&(c.alphaTest=t.alphaTest),void 0!==t.depthTest&&(c.depthTest=t.depthTest),void 0!==t.depthWrite&&(c.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(c.colorWrite=t.colorWrite),void 0!==t.wireframe&&(c.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(c.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(c.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(c.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(c.rotation=t.rotation),1!==t.linewidth&&(c.linewidth=t.linewidth),void 0!==t.dashSize&&(c.dashSize=t.dashSize),void 0!==t.gapSize&&(c.gapSize=t.gapSize),void 0!==t.scale&&(c.scale=t.scale),void 0!==t.polygonOffset&&(c.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(c.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(c.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(c.skinning=t.skinning),void 0!==t.morphTargets&&(c.morphTargets=t.morphTargets),void 0!==t.dithering&&(c.dithering=t.dithering),void 0!==t.visible&&(c.visible=t.visible),void 0!==t.userData&&(c.userData=t.userData),void 0!==t.uniforms)for(var l in t.uniforms){var d=t.uniforms[l];switch(c.uniforms[l]={},d.type){case"t":c.uniforms[l].value=s(d.value);break;case"c":c.uniforms[l].value=(new je).setHex(d.value);break;case"v2":c.uniforms[l].value=(new pe).fromArray(d.value);break;case"v3":c.uniforms[l].value=(new k).fromArray(d.value);break;case"v4":c.uniforms[l].value=(new un).fromArray(d.value);break;case"m3":c.uniforms[l].value=(new hr).fromArray(d.value);case"m4":c.uniforms[l].value=(new it).fromArray(d.value);break;default:c.uniforms[l].value=d.value}}if(void 0!==t.defines&&(c.defines=t.defines),void 0!==t.vertexShader&&(c.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(c.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var f in t.extensions)c.extensions[f]=t.extensions[f];if(void 0!==t.shading&&(c.flatShading=1===t.shading),void 0!==t.size&&(c.size=t.size),void 0!==t.sizeAttenuation&&(c.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(c.map=s(t.map)),void 0!==t.matcap&&(c.matcap=s(t.matcap)),void 0!==t.alphaMap&&(c.alphaMap=s(t.alphaMap),c.transparent=!0),void 0!==t.bumpMap&&(c.bumpMap=s(t.bumpMap)),void 0!==t.bumpScale&&(c.bumpScale=t.bumpScale),void 0!==t.normalMap&&(c.normalMap=s(t.normalMap)),void 0!==t.normalMapType&&(c.normalMapType=t.normalMapType),void 0!==t.normalScale){var p=t.normalScale;!1===Array.isArray(p)&&(p=[p,p]),c.normalScale=(new pe).fromArray(p)}return void 0!==t.displacementMap&&(c.displacementMap=s(t.displacementMap)),void 0!==t.displacementScale&&(c.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(c.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(c.roughnessMap=s(t.roughnessMap)),void 0!==t.metalnessMap&&(c.metalnessMap=s(t.metalnessMap)),void 0!==t.emissiveMap&&(c.emissiveMap=s(t.emissiveMap)),void 0!==t.emissiveIntensity&&(c.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(c.specularMap=s(t.specularMap)),void 0!==t.envMap&&(c.envMap=s(t.envMap)),void 0!==t.envMapIntensity&&(c.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(c.reflectivity=t.reflectivity),void 0!==t.lightMap&&(c.lightMap=s(t.lightMap)),void 0!==t.lightMapIntensity&&(c.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(c.aoMap=s(t.aoMap)),void 0!==t.aoMapIntensity&&(c.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(c.gradientMap=s(t.gradientMap)),c},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var Vc={decodeText:function(t){if(typeof TextDecoder<"u")return(new TextDecoder).decode(t);for(var o="",s=0,c=t.length;s<c;s++)o+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(o))}catch{return o}},extractUrlBase:function(t){var o=t.lastIndexOf("/");return-1===o?"./":t.substr(0,o+1)}};function $u(){Pe.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function qu(t,o,s,c){"number"==typeof s&&(c=s,s=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),rt.call(this,t,o,s),this.meshPerAttribute=c||1}function Wl(t){this.manager=void 0!==t?t:xi}$u.prototype=Object.assign(Object.create(Pe.prototype),{constructor:$u,isInstancedBufferGeometry:!0,copy:function(t){return Pe.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Pe.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),qu.prototype=Object.assign(Object.create(rt.prototype),{constructor:qu,isInstancedBufferAttribute:!0,copy:function(t){return rt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=rt.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Object.assign(Wl.prototype,{load:function(t,o,s,c){var l=this,d=new fo(l.manager);d.setPath(l.path),d.load(t,function(f){o(l.parse(JSON.parse(f)))},s,c)},parse:function(t){var o=t.isInstancedBufferGeometry?new $u:new Pe,s=t.data.index;if(void 0!==s){var c=new Ws[s.type](s.array);o.setIndex(new rt(c,1))}var l=t.data.attributes;for(var d in l){c=new Ws[(f=l[d]).type](f.array);var y=new(f.isInstancedBufferAttribute?qu:rt)(c,f.itemSize,f.normalized);void 0!==f.name&&(y.name=f.name),o.addAttribute(d,y)}var w=t.data.morphAttributes;if(w)for(var d in w){for(var b=w[d],_=[],E=0,M=b.length;E<M;E++){var f;y=new rt(c=new Ws[(f=b[E]).type](f.array),f.itemSize,f.normalized),void 0!==f.name&&(y.name=f.name),_.push(y)}o.morphAttributes[d]=_}var S=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==S){E=0;for(var I=S.length;E!==I;++E){var T=S[E];o.addGroup(T.start,T.count,T.materialIndex)}}var O=t.data.boundingSphere;if(void 0!==O){var F=new k;void 0!==O.center&&F.fromArray(O.center),o.boundingSphere=new Hn(F,O.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o},setPath:function(t){return this.path=t,this}});var Ws={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function $l(t){this.manager=void 0!==t?t:xi,this.resourcePath=""}Object.assign($l.prototype,{crossOrigin:"anonymous",load:function(t,o,s,c){var l=this,d=void 0===this.path?Vc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||d;var f=new fo(l.manager);f.setPath(this.path),f.load(t,function(p){var y=null;try{y=JSON.parse(p)}catch(b){return void 0!==c&&c(b),void console.error("THREE:ObjectLoader: Can't parse "+t+".",b.message)}var w=y.metadata;void 0!==w&&void 0!==w.type&&"geometry"!==w.type.toLowerCase()?l.parse(y,o):console.error("THREE.ObjectLoader: Can't load "+t)},s,c)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,o){var s=this.parseShape(t.shapes),c=this.parseGeometries(t.geometries,s),l=this.parseImages(t.images,function(){void 0!==o&&o(p)}),d=this.parseTextures(t.textures,l),f=this.parseMaterials(t.materials,d),p=this.parseObject(t.object,c,f);return t.animations&&(p.animations=this.parseAnimations(t.animations)),(void 0===t.images||0===t.images.length)&&void 0!==o&&o(p),p},parseShape:function(t){var o={};if(void 0!==t)for(var s=0,c=t.length;s<c;s++){var l=(new js).fromJSON(t[s]);o[l.uuid]=l}return o},parseGeometries:function(t,o){var s={};if(void 0!==t)for(var c=new Wl,l=0,d=t.length;l<d;l++){var f,p=t[l];switch(p.type){case"PlaneGeometry":case"PlaneBufferGeometry":f=new Or[p.type](p.width,p.height,p.widthSegments,p.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":f=new Or[p.type](p.width,p.height,p.depth,p.widthSegments,p.heightSegments,p.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":f=new Or[p.type](p.radius,p.segments,p.thetaStart,p.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":f=new Or[p.type](p.radiusTop,p.radiusBottom,p.height,p.radialSegments,p.heightSegments,p.openEnded,p.thetaStart,p.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":f=new Or[p.type](p.radius,p.height,p.radialSegments,p.heightSegments,p.openEnded,p.thetaStart,p.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":f=new Or[p.type](p.radius,p.widthSegments,p.heightSegments,p.phiStart,p.phiLength,p.thetaStart,p.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":f=new Or[p.type](p.radius,p.detail);break;case"RingGeometry":case"RingBufferGeometry":f=new Or[p.type](p.innerRadius,p.outerRadius,p.thetaSegments,p.phiSegments,p.thetaStart,p.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":f=new Or[p.type](p.radius,p.tube,p.radialSegments,p.tubularSegments,p.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":f=new Or[p.type](p.radius,p.tube,p.tubularSegments,p.radialSegments,p.p,p.q);break;case"TubeGeometry":case"TubeBufferGeometry":f=new Or[p.type]((new mm[p.path.type]).fromJSON(p.path),p.tubularSegments,p.radius,p.radialSegments,p.closed);break;case"LatheGeometry":case"LatheBufferGeometry":f=new Or[p.type](p.points,p.segments,p.phiStart,p.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":f=new Or[p.type](p.vertices,p.indices,p.radius,p.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var _=[],y=0,w=p.shapes.length;y<w;y++)_.push(o[p.shapes[y]]);f=new Or[p.type](_,p.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(_=[],y=0,w=p.shapes.length;y<w;y++)_.push(o[p.shapes[y]]);var E=p.options.extrudePath;void 0!==E&&(p.options.extrudePath=(new mm[E.type]).fromJSON(E)),f=new Or[p.type](_,p.options);break;case"BufferGeometry":case"InstancedBufferGeometry":f=c.parse(p);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?f=(new THREE.LegacyJSONLoader).parse(p,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+p.type+'"');continue}f.uuid=p.uuid,void 0!==p.name&&(f.name=p.name),!0===f.isBufferGeometry&&void 0!==p.userData&&(f.userData=p.userData),s[p.uuid]=f}return s},parseMaterials:function(t,o){var s={},c={};if(void 0!==t){var l=new Na;l.setTextures(o);for(var d=0,f=t.length;d<f;d++){var p=t[d];if("MultiMaterial"===p.type){for(var y=[],w=0;w<p.materials.length;w++){var b=p.materials[w];void 0===s[b.uuid]&&(s[b.uuid]=l.parse(b)),y.push(s[b.uuid])}c[p.uuid]=y}else void 0===s[p.uuid]&&(s[p.uuid]=l.parse(p)),c[p.uuid]=s[p.uuid]}}return c},parseAnimations:function(t){for(var o=[],s=0;s<t.length;s++){var c=t[s],l=ki.parse(c);void 0!==c.uuid&&(l.uuid=c.uuid),o.push(l)}return o},parseImages:function(t,o){var s=this,c={};function l(I){return s.manager.itemStart(I),f.load(I,function(){s.manager.itemEnd(I)},void 0,function(){s.manager.itemError(I),s.manager.itemEnd(I)})}if(void 0!==t&&t.length>0){var f=new ju(new Gs(o));f.setCrossOrigin(this.crossOrigin);for(var p=0,y=t.length;p<y;p++){var w=t[p],b=w.url;if(Array.isArray(b)){c[w.uuid]=[];for(var _=0,E=b.length;_<E;_++){var M=b[_],S=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(M)?M:s.resourcePath+M;c[w.uuid].push(l(S))}}else S=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(w.url)?w.url:s.resourcePath+w.url,c[w.uuid]=l(S)}}return c},parseTextures:function(t,o){function s(y,w){return"number"==typeof y?y:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",y),w[y])}var c={};if(void 0!==t)for(var l=0,d=t.length;l<d;l++){var p,f=t[l];void 0===f.image&&console.warn('THREE.ObjectLoader: No "image" specified for',f.uuid),void 0===o[f.image]&&console.warn("THREE.ObjectLoader: Undefined image",f.image),(p=Array.isArray(o[f.image])?new Ps(o[f.image]):new vn(o[f.image])).needsUpdate=!0,p.uuid=f.uuid,void 0!==f.name&&(p.name=f.name),void 0!==f.mapping&&(p.mapping=s(f.mapping,gm)),void 0!==f.offset&&p.offset.fromArray(f.offset),void 0!==f.repeat&&p.repeat.fromArray(f.repeat),void 0!==f.center&&p.center.fromArray(f.center),void 0!==f.rotation&&(p.rotation=f.rotation),void 0!==f.wrap&&(p.wrapS=s(f.wrap[0],Zu),p.wrapT=s(f.wrap[1],Zu)),void 0!==f.format&&(p.format=f.format),void 0!==f.type&&(p.type=f.type),void 0!==f.encoding&&(p.encoding=f.encoding),void 0!==f.minFilter&&(p.minFilter=s(f.minFilter,Yu)),void 0!==f.magFilter&&(p.magFilter=s(f.magFilter,Yu)),void 0!==f.anisotropy&&(p.anisotropy=f.anisotropy),void 0!==f.flipY&&(p.flipY=f.flipY),void 0!==f.premultiplyAlpha&&(p.premultiplyAlpha=f.premultiplyAlpha),void 0!==f.unpackAlignment&&(p.unpackAlignment=f.unpackAlignment),c[f.uuid]=p}return c},parseObject:function(t,o,s){var c;function l(S){return void 0===o[S]&&console.warn("THREE.ObjectLoader: Undefined geometry",S),o[S]}function d(S){if(void 0!==S){if(Array.isArray(S)){for(var I=[],T=0,O=S.length;T<O;T++){var F=S[T];void 0===s[F]&&console.warn("THREE.ObjectLoader: Undefined material",F),I.push(s[F])}return I}return void 0===s[S]&&console.warn("THREE.ObjectLoader: Undefined material",S),s[S]}}switch(t.type){case"Scene":c=new Du,void 0!==t.background&&Number.isInteger(t.background)&&(c.background=new je(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?c.fog=new Lh(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(c.fog=new Fl(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":c=new $n(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(c.focus=t.focus),void 0!==t.zoom&&(c.zoom=t.zoom),void 0!==t.filmGauge&&(c.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(c.filmOffset=t.filmOffset),void 0!==t.view&&(c.view=Object.assign({},t.view));break;case"OrthographicCamera":c=new Gl(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(c.zoom=t.zoom),void 0!==t.view&&(c.view=Object.assign({},t.view));break;case"AmbientLight":c=new Zh(t.color,t.intensity);break;case"DirectionalLight":c=new qh(t.color,t.intensity);break;case"PointLight":c=new Wh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":c=new jl(t.color,t.intensity,t.width,t.height);break;case"SpotLight":c=new Uc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":c=new kc(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var f=l(t.geometry),p=d(t.material);c=f.bones&&f.bones.length>0?new vc(f,p):new Pr(f,p),void 0!==t.drawMode&&c.setDrawMode(t.drawMode);break;case"LOD":c=new Tu;break;case"Line":c=new sr(l(t.geometry),d(t.material),t.mode);break;case"LineLoop":c=new yc(l(t.geometry),d(t.material));break;case"LineSegments":c=new ln(l(t.geometry),d(t.material));break;case"PointCloud":case"Points":c=new xa(l(t.geometry),d(t.material));break;case"Sprite":c=new wi(d(t.material));break;case"Group":c=new le;break;default:c=new Le}if(c.uuid=t.uuid,void 0!==t.name&&(c.name=t.name),void 0!==t.matrix?(c.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(c.matrixAutoUpdate=t.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(void 0!==t.position&&c.position.fromArray(t.position),void 0!==t.rotation&&c.rotation.fromArray(t.rotation),void 0!==t.quaternion&&c.quaternion.fromArray(t.quaternion),void 0!==t.scale&&c.scale.fromArray(t.scale)),void 0!==t.castShadow&&(c.castShadow=t.castShadow),void 0!==t.receiveShadow&&(c.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(c.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(c.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&c.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(c.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(c.visible=t.visible),void 0!==t.frustumCulled&&(c.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(c.renderOrder=t.renderOrder),void 0!==t.userData&&(c.userData=t.userData),void 0!==t.layers&&(c.layers.mask=t.layers),void 0!==t.children)for(var y=t.children,w=0;w<y.length;w++)c.add(this.parseObject(y[w],o,s));if("LOD"===t.type)for(var b=t.levels,_=0;_<b.length;_++){var E=b[_],M=c.getObjectByProperty("uuid",E.object);void 0!==M&&c.addLevel(M,E.distance)}return c}});var gm={UVMapping:Xi,CubeReflectionMapping:qo,CubeRefractionMapping:xs,EquirectangularReflectionMapping:ui,EquirectangularRefractionMapping:Wr,SphericalReflectionMapping:Vn,CubeUVReflectionMapping:li,CubeUVRefractionMapping:Zo},Zu={RepeatWrapping:Br,ClampToEdgeWrapping:er,MirroredRepeatWrapping:Li},Yu={NearestFilter:St,NearestMipMapNearestFilter:gn,NearestMipMapLinearFilter:aa,LinearFilter:lr,LinearMipMapNearestFilter:Eo,LinearMipMapLinearFilter:Yo};function Bo(t){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:xi,this.options=void 0}function Yh(){this.type="ShapePath",this.color=new je,this.subPaths=[],this.currentPath=null}function Xh(t){this.type="Font",this.data=t}function vm(t,o,s,c,l){var d=l.glyphs[t]||l.glyphs["?"];if(d){var p,y,w,b,_,E,M,S,f=new Yh;if(d.o)for(var I=d._cachedOutline||(d._cachedOutline=d.o.split(" ")),T=0,O=I.length;T<O;)switch(I[T++]){case"m":p=I[T++]*o+s,y=I[T++]*o+c,f.moveTo(p,y);break;case"l":p=I[T++]*o+s,y=I[T++]*o+c,f.lineTo(p,y);break;case"q":w=I[T++]*o+s,b=I[T++]*o+c,_=I[T++]*o+s,E=I[T++]*o+c,f.quadraticCurveTo(_,E,w,b);break;case"b":w=I[T++]*o+s,b=I[T++]*o+c,_=I[T++]*o+s,E=I[T++]*o+c,M=I[T++]*o+s,S=I[T++]*o+c,f.bezierCurveTo(_,E,M,S,w,b)}return{offsetX:d.ha*o,path:f}}}function ql(t){this.manager=void 0!==t?t:xi}function Xu(){}Bo.prototype={constructor:Bo,setOptions:function(o){return this.options=o,this},load:function(t,o,s,c){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var l=this,d=ls.get(t);if(void 0!==d)return l.manager.itemStart(t),setTimeout(function(){o&&o(d),l.manager.itemEnd(t)},0),d;fetch(t).then(function(f){return f.blob()}).then(function(f){return void 0===l.options?createImageBitmap(f):createImageBitmap(f,l.options)}).then(function(f){ls.add(t,f),o&&o(f),l.manager.itemEnd(t)}).catch(function(f){c&&c(f),l.manager.itemError(t),l.manager.itemEnd(t)}),l.manager.itemStart(t)},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Yh.prototype,{moveTo:function(t,o){this.currentPath=new ko,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,o)},lineTo:function(t,o){this.currentPath.lineTo(t,o)},quadraticCurveTo:function(t,o,s,c){this.currentPath.quadraticCurveTo(t,o,s,c)},bezierCurveTo:function(t,o,s,c,l,d){this.currentPath.bezierCurveTo(t,o,s,c,l,d)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,o){function s(xe){for(var Ae=[],De=0,he=xe.length;De<he;De++){var _e=xe[De],Fe=new js;Fe.curves=_e.curves,Ae.push(Fe)}return Ae}function c(xe,Ae){for(var De=Ae.length,he=!1,_e=De-1,Fe=0;Fe<De;_e=Fe++){var Xe=Ae[_e],Ke=Ae[Fe],ut=Ke.x-Xe.x,se=Ke.y-Xe.y;if(Math.abs(se)>Number.EPSILON){if(se<0&&(Xe=Ae[Fe],ut=-ut,Ke=Ae[_e],se=-se),xe.y<Xe.y||xe.y>Ke.y)continue;if(xe.y===Xe.y){if(xe.x===Xe.x)return!0}else{var Ue=se*(xe.x-Xe.x)-ut*(xe.y-Xe.y);if(0===Ue)return!0;if(Ue<0)continue;he=!he}}else{if(xe.y!==Xe.y)continue;if(Ke.x<=xe.x&&xe.x<=Xe.x||Xe.x<=xe.x&&xe.x<=Ke.x)return!0}}return he}var l=Fi.isClockWise,d=this.subPaths;if(0===d.length)return[];if(!0===o)return s(d);var f,p,y,w=[];if(1===d.length)return p=d[0],(y=new js).curves=p.curves,w.push(y),w;var b=!l(d[0].getPoints());b=t?!b:b;var I,_=[],E=[],M=[],S=0;E[S]=void 0,M[S]=[];for(var T=0,O=d.length;T<O;T++)f=l(I=(p=d[T]).getPoints()),(f=t?!f:f)?(!b&&E[S]&&S++,E[S]={s:new js,p:I},E[S].s.curves=p.curves,b&&S++,M[S]=[]):M[S].push({h:p,p:I[0]});if(!E[0])return s(d);if(E.length>1){for(var F=!1,N=[],B=0,U=E.length;B<U;B++)_[B]=[];for(B=0,U=E.length;B<U;B++)for(var q=M[B],Z=0;Z<q.length;Z++){for(var re=q[Z],ne=!0,ue=0;ue<E.length;ue++)c(re.p,E[ue].p)&&(B!==ue&&N.push({froms:B,tos:ue,hole:Z}),ne?(ne=!1,_[ue].push(re)):F=!0);ne&&_[B].push(re)}N.length>0&&(F||(M=_))}T=0;for(var $,Q=E.length;T<Q;T++){w.push(y=E[T].s);for(var ae=0,me=($=M[T]).length;ae<me;ae++)y.holes.push($[ae].h)}return w}}),Object.assign(Xh.prototype,{isFont:!0,generateShapes:function(t,o){void 0===o&&(o=100);for(var s=[],c=function Kv(t,o,s){for(var c=Array.from?Array.from(t):String(t).split(""),l=o/s.resolution,d=(s.boundingBox.yMax-s.boundingBox.yMin+s.underlineThickness)*l,f=[],p=0,y=0,w=0;w<c.length;w++){var b=c[w];if("\n"===b)p=0,y-=d;else{var _=vm(b,l,p,y,s);p+=_.offsetX,f.push(_.path)}}return f}(t,o,this.data),l=0,d=c.length;l<d;l++)Array.prototype.push.apply(s,c[l].toShapes());return s}}),Object.assign(ql.prototype,{load:function(t,o,s,c){var l=this,d=new fo(this.manager);d.setPath(this.path),d.load(t,function(f){var p;try{p=JSON.parse(f)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),p=JSON.parse(f.substring(65,f.length-2))}var y=l.parse(p);o&&o(y)},s,c)},parse:function(t){return new Xh(t)},setPath:function(t){return this.path=t,this}}),Xu.Handlers={handlers:[],add:function(t,o){this.handlers.push(t,o)},get:function(t){for(var o=this.handlers,s=0,c=o.length;s<c;s+=2){var d=o[s+1];if(o[s].test(t))return d}return null}},Object.assign(Xu.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,o,s){for(var c=[],l=0;l<t.length;++l)c[l]=this.createMaterial(t[l],o,s);return c},createMaterial:function(){var t={NoBlending:_o,NormalBlending:qi,AdditiveBlending:Zi,SubtractiveBlending:rn,MultiplyBlending:mn,CustomBlending:ia},o=new je,s=new Nc,c=new Na;return function(d,f,p){var y={};function w(M,S,I,T,O){var B,F=f+M,N=Xu.Handlers.get(F);null!==N?B=N.load(F):(s.setCrossOrigin(p),B=s.load(F)),void 0!==S&&(B.repeat.fromArray(S),1!==S[0]&&(B.wrapS=Br),1!==S[1]&&(B.wrapT=Br)),void 0!==I&&B.offset.fromArray(I),void 0!==T&&("repeat"===T[0]&&(B.wrapS=Br),"mirror"===T[0]&&(B.wrapS=Li),"repeat"===T[1]&&(B.wrapT=Br),"mirror"===T[1]&&(B.wrapT=Li)),void 0!==O&&(B.anisotropy=O);var U=yt.generateUUID();return y[U]=B,U}var b={uuid:yt.generateUUID(),type:"MeshLambertMaterial"};for(var _ in d){var E=d[_];switch(_){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":b.name=E;break;case"blending":b.blending=t[E];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",_,"is no longer supported.");break;case"colorDiffuse":b.color=o.fromArray(E).getHex();break;case"colorSpecular":b.specular=o.fromArray(E).getHex();break;case"colorEmissive":b.emissive=o.fromArray(E).getHex();break;case"specularCoef":b.shininess=E;break;case"shading":"basic"===E.toLowerCase()&&(b.type="MeshBasicMaterial"),"phong"===E.toLowerCase()&&(b.type="MeshPhongMaterial"),"standard"===E.toLowerCase()&&(b.type="MeshStandardMaterial");break;case"mapDiffuse":b.map=w(E,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case"mapEmissive":b.emissiveMap=w(E,d.mapEmissiveRepeat,d.mapEmissiveOffset,d.mapEmissiveWrap,d.mapEmissiveAnisotropy);break;case"mapLight":b.lightMap=w(E,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case"mapAO":b.aoMap=w(E,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case"mapBump":b.bumpMap=w(E,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case"mapBumpScale":b.bumpScale=E;break;case"mapNormal":b.normalMap=w(E,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);break;case"mapNormalFactor":b.normalScale=E;break;case"mapSpecular":b.specularMap=w(E,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case"mapMetalness":b.metalnessMap=w(E,d.mapMetalnessRepeat,d.mapMetalnessOffset,d.mapMetalnessWrap,d.mapMetalnessAnisotropy);break;case"mapRoughness":b.roughnessMap=w(E,d.mapRoughnessRepeat,d.mapRoughnessOffset,d.mapRoughnessWrap,d.mapRoughnessAnisotropy);break;case"mapAlpha":b.alphaMap=w(E,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case"flipSided":b.side=bt;break;case"doubleSided":b.side=xn;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),b.opacity=E;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":b[_]=E;break;case"vertexColors":!0===E&&(b.vertexColors=$i),"face"===E&&(b.vertexColors=ra);break;default:console.error("THREE.Loader.createMaterial: Unsupported",_,E)}}return"MeshBasicMaterial"===b.type&&delete b.emissive,"MeshPhongMaterial"!==b.type&&delete b.specular,b.opacity<1&&(b.transparent=!0),c.setTextures(y),c.parse(b)}}()});var Zl,Qh={getContext:function(){return void 0===Zl&&(Zl=new(window.AudioContext||window.webkitAudioContext)),Zl},setContext:function(t){Zl=t}};function Yl(t){this.manager=void 0!==t?t:xi}function Xl(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new k)}function mo(t,o){_n.call(this,void 0,o),this.sh=void 0!==t?t:new Xl}function Nr(t,o,s){mo.call(this,void 0,s);var c=(new je).set(t),l=(new je).set(o),d=new k(c.r,c.g,c.b),f=new k(l.r,l.g,l.b),p=Math.sqrt(Math.PI),y=p*Math.sqrt(.75);this.sh.coefficients[0].copy(d).add(f).multiplyScalar(p),this.sh.coefficients[1].copy(d).sub(f).multiplyScalar(y)}function Qu(t,o){mo.call(this,void 0,o);var s=(new je).set(t);this.sh.coefficients[0].set(s.r,s.g,s.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Jh(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new $n,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new $n,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(Yl.prototype,{load:function(t,o,s,c){var l=new fo(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.load(t,function(d){var f=d.slice(0);Qh.getContext().decodeAudioData(f,function(y){o(y)})},s,c)},setPath:function(t){return this.path=t,this}}),Object.assign(Xl.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var o=0;o<9;o++)this.coefficients[o].copy(t[o]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,o){var s=t.x,c=t.y,l=t.z,d=this.coefficients;return o=.282095*d[0],o+=.488603*d[1]*c,o+=.488603*d[2]*l,o+=.488603*d[3]*s,o+=1.092548*d[4]*(s*c),o+=1.092548*d[5]*(c*l),o+=.315392*d[6]*(3*l*l-1),(o+=1.092548*d[7]*(s*l))+.546274*d[8]*(s*s-c*c)},getIrradianceAt:function(t,o){var s=t.x,c=t.y,l=t.z,d=this.coefficients;return o=.886227*d[0],o+=2*d[1]*.511664*c,o+=2*d[2]*.511664*l,o+=2*d[3]*.511664*s,o+=2*d[4]*.429043*s*c,o+=2*d[5]*.429043*c*l,o+=d[6]*(.743125*l*l-.247708),(o+=2*d[7]*.429043*s*l)+.429043*d[8]*(s*s-c*c)},add:function(t){for(var o=0;o<9;o++)this.coefficients[o].add(t.coefficients[o]);return this},scale:function(t){for(var o=0;o<9;o++)this.coefficients[o].multiplyScalar(t);return this},lerp:function(t,o){for(var s=0;s<9;s++)this.coefficients[s].lerp(t.coefficients[s],o);return this},equals:function(t){for(var o=0;o<9;o++)if(!this.coefficients[o].equals(t.coefficients[o]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t){for(var o=this.coefficients,s=0;s<9;s++)o[s].fromArray(t,3*s);return this},toArray:function(){for(var t=[],o=this.coefficients,s=0;s<9;s++)o[s].toArray(t,3*s);return t}}),Object.assign(Xl,{getBasisAt:function(t,o){var s=t.x,c=t.y,l=t.z;o[0]=.282095,o[1]=.488603*c,o[2]=.488603*l,o[3]=.488603*s,o[4]=1.092548*s*c,o[5]=1.092548*c*l,o[6]=.315392*(3*l*l-1),o[7]=1.092548*s*l,o[8]=.546274*(s*s-c*c)}}),mo.prototype=Object.assign(Object.create(_n.prototype),{constructor:mo,isLightProbe:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return _n.prototype.toJSON.call(this,t)}}),Nr.prototype=Object.assign(Object.create(mo.prototype),{constructor:Nr,isHemisphereLightProbe:!0,copy:function(t){return mo.prototype.copy.call(this,t),this},toJSON:function(t){return mo.prototype.toJSON.call(this,t)}}),Qu.prototype=Object.assign(Object.create(mo.prototype),{constructor:Qu,isAmbientLightProbe:!0,copy:function(t){return mo.prototype.copy.call(this,t),this},toJSON:function(t){return mo.prototype.toJSON.call(this,t)}}),Object.assign(Jh.prototype,{update:function(){var t,o,s,c,l,d,f,p,y=new it,w=new it;return function(_){if(t!==this||o!==_.focus||s!==_.fov||c!==_.aspect*this.aspect||l!==_.near||d!==_.far||f!==_.zoom||p!==this.eyeSep){t=this,o=_.focus,s=_.fov,c=_.aspect*this.aspect,l=_.near,d=_.far,f=_.zoom;var T,O,M=_.projectionMatrix.clone(),S=(p=this.eyeSep/2)*l/o,I=l*Math.tan(yt.DEG2RAD*s*.5)/f;w.elements[12]=-p,y.elements[12]=p,M.elements[0]=2*l/((O=I*c+S)-(T=-I*c+S)),M.elements[8]=(O+T)/(O-T),this.cameraL.projectionMatrix.copy(M),M.elements[0]=2*l/((O=I*c-S)-(T=-I*c-S)),M.elements[8]=(O+T)/(O-T),this.cameraR.projectionMatrix.copy(M)}this.cameraL.matrixWorld.copy(_.matrixWorld).multiply(w),this.cameraR.matrixWorld.copy(_.matrixWorld).multiply(y)}}()});var $s=90,Yn=1;function fs(t,o,s,c){Le.call(this),this.type="CubeCamera";var l=new $n($s,Yn,t,o);l.up.set(0,-1,0),l.lookAt(new k(1,0,0)),this.add(l);var d=new $n($s,Yn,t,o);d.up.set(0,-1,0),d.lookAt(new k(-1,0,0)),this.add(d);var f=new $n($s,Yn,t,o);f.up.set(0,0,1),f.lookAt(new k(0,1,0)),this.add(f);var p=new $n($s,Yn,t,o);p.up.set(0,0,-1),p.lookAt(new k(0,-1,0)),this.add(p);var y=new $n($s,Yn,t,o);y.up.set(0,-1,0),y.lookAt(new k(0,0,1)),this.add(y);var w=new $n($s,Yn,t,o);w.up.set(0,-1,0),w.lookAt(new k(0,0,-1)),this.add(w),this.renderTarget=new oc(s,s,c=c||{format:rr,magFilter:lr,minFilter:lr}),this.renderTarget.texture.name="CubeCamera",this.update=function(b,_){null===this.parent&&this.updateMatrixWorld();var E=b.getRenderTarget(),M=this.renderTarget,S=M.texture.generateMipmaps;M.texture.generateMipmaps=!1,b.setRenderTarget(M,0),b.render(_,l),b.setRenderTarget(M,1),b.render(_,d),b.setRenderTarget(M,2),b.render(_,f),b.setRenderTarget(M,3),b.render(_,p),b.setRenderTarget(M,4),b.render(_,y),M.texture.generateMipmaps=S,b.setRenderTarget(M,5),b.render(_,w),b.setRenderTarget(E)},this.clear=function(b,_,E,M){for(var S=b.getRenderTarget(),I=this.renderTarget,T=0;T<6;T++)b.setRenderTarget(I,T),b.clear(_,E,M);b.setRenderTarget(S)}}function Ql(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Jl(){Le.call(this),this.type="AudioListener",this.context=Qh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Hc(t){Le.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Kl(t){Hc.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Kh(t,o){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==o?o:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function ed(t,o,s){this.binding=t,this.valueSize=s;var l,c=Float64Array;switch(o){case"quaternion":l=this._slerp;break;case"string":case"bool":c=Array,l=this._select;break;default:l=this._lerp}this.buffer=new c(4*s),this._mixBufferRegion=l,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}(fs.prototype=Object.create(Le.prototype)).constructor=fs,Object.assign(Ql.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var o=(typeof performance>"u"?Date:performance).now();t=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=t}return t}}),Jl.prototype=Object.assign(Object.create(Le.prototype),{constructor:Jl,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new k,o=new en,s=new k,c=new k,l=new Ql;return function(f){Le.prototype.updateMatrixWorld.call(this,f);var p=this.context.listener,y=this.up;if(this.timeDelta=l.getDelta(),this.matrixWorld.decompose(t,o,s),c.set(0,0,-1).applyQuaternion(o),p.positionX){var w=this.context.currentTime+this.timeDelta;p.positionX.linearRampToValueAtTime(t.x,w),p.positionY.linearRampToValueAtTime(t.y,w),p.positionZ.linearRampToValueAtTime(t.z,w),p.forwardX.linearRampToValueAtTime(c.x,w),p.forwardY.linearRampToValueAtTime(c.y,w),p.forwardZ.linearRampToValueAtTime(c.z,w),p.upX.linearRampToValueAtTime(y.x,w),p.upY.linearRampToValueAtTime(y.y,w),p.upZ.linearRampToValueAtTime(y.z,w)}else p.setPosition(t.x,t.y,t.z),p.setOrientation(c.x,c.y,c.z,y.x,y.y,y.z)}}()}),Hc.prototype=Object.assign(Object.create(Le.prototype),{constructor:Hc,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,o=this.filters.length;t<o;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,o=this.filters.length;t<o;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Kl.prototype=Object.assign(Object.create(Hc.prototype),{constructor:Kl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,o,s){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=o,this.panner.coneOuterGain=s,this},updateMatrixWorld:function(){var t=new k,o=new en,s=new k,c=new k;return function(d){if(Le.prototype.updateMatrixWorld.call(this,d),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(t,o,s),c.set(0,0,1).applyQuaternion(o);var f=this.panner;if(f.positionX){var p=this.context.currentTime+this.listener.timeDelta;f.positionX.linearRampToValueAtTime(t.x,p),f.positionY.linearRampToValueAtTime(t.y,p),f.positionZ.linearRampToValueAtTime(t.z,p),f.orientationX.linearRampToValueAtTime(c.x,p),f.orientationY.linearRampToValueAtTime(c.y,p),f.orientationZ.linearRampToValueAtTime(c.z,p)}else f.setPosition(t.x,t.y,t.z),f.setOrientation(c.x,c.y,c.z)}}}()}),Object.assign(Kh.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,o=this.getFrequencyData(),s=0;s<o.length;s++)t+=o[s];return t/o.length}}),Object.assign(ed.prototype,{accumulate:function(t,o){var s=this.buffer,c=this.valueSize,l=t*c+c,d=this.cumulativeWeight;if(0===d){for(var f=0;f!==c;++f)s[l+f]=s[f];d=o}else this._mixBufferRegion(s,l,0,o/(d+=o),c);this.cumulativeWeight=d},apply:function(t){var o=this.valueSize,s=this.buffer,c=t*o+o,l=this.cumulativeWeight,d=this.binding;this.cumulativeWeight=0,l<1&&this._mixBufferRegion(s,c,3*o,1-l,o);for(var p=o,y=o+o;p!==y;++p)if(s[p]!==s[p+o]){d.setValue(s,c);break}},saveOriginalState:function(){var o=this.buffer,s=this.valueSize,c=3*s;this.binding.getValue(o,c);for(var l=s,d=c;l!==d;++l)o[l]=o[c+l%s];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,o,s,c,l){if(c>=.5)for(var d=0;d!==l;++d)t[o+d]=t[s+d]},_slerp:function(t,o,s,c){en.slerpFlat(t,o,t,o,t,s,c)},_lerp:function(t,o,s,c,l){for(var d=1-c,f=0;f!==l;++f){var p=o+f;t[p]=t[p]*d+t[s+f]*c}}});var tl,id,ef="\\[\\]\\.:\\/";function tf(t,o,s){var c=s||Fr.parseTrackName(o);this._targetGroup=t,this._bindings=t.subscribe_(o,c)}function Fr(t,o,s){this.path=o,this.parsedPath=s||Fr.parseTrackName(o),this.node=Fr.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function ym(){this.uuid=yt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var o=0,s=arguments.length;o!==s;++o)t[arguments[o].uuid]=o;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var c=this;this.stats={objects:{get total(){return c._objects.length},get inUse(){return this.total-c.nCachedObjects_}},get bindingsPerObject(){return c._bindings.length}}}function td(t,o,s){this._mixer=t,this._clip=o,this._localRoot=s||null;for(var c=o.tracks,l=c.length,d=new Array(l),f={endingStart:da,endingEnd:da},p=0;p!==l;++p){var y=c[p].createInterpolant(null);d[p]=y,y.settings=f}this._interpolantSettings=f,this._interpolants=d,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ft,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ju(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function nd(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Fa(t,o,s){qn.call(this,t,o),this.meshPerAttribute=s||1}function wm(t,o,s,c){this.ray=new fc(t,o),this.near=s||0,this.far=c||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function bm(t,o){return t.distance-o.distance}function rd(t,o,s,c){if(!1!==t.visible&&(t.raycast(o,s),!0===c))for(var l=t.children,d=0,f=l.length;d<f;d++)rd(l[d],o,s,!0)}function nf(t,o,s){return this.radius=void 0!==t?t:1,this.phi=void 0!==o?o:0,this.theta=void 0!==s?s:0,this}function rf(t,o,s){return this.radius=void 0!==t?t:1,this.theta=void 0!==o?o:0,this.y=void 0!==s?s:0,this}function qs(t,o){this.min=void 0!==t?t:new pe(1/0,1/0),this.max=void 0!==o?o:new pe(-1/0,-1/0)}function zc(t,o){this.start=void 0!==t?t:new k,this.end=void 0!==o?o:new k}function Gc(t){Le.call(this),this.material=t,this.render=function(){}}function ka(t,o,s,c){this.object=t,this.size=void 0!==o?o:1;var l=void 0!==s?s:16711680,d=void 0!==c?c:1,f=0,p=this.object.geometry;p&&p.isGeometry?f=3*p.faces.length:p&&p.isBufferGeometry&&(f=p.attributes.normal.count);var y=new Pe,w=new Ce(2*f*3,3);y.addAttribute("position",w),ln.call(this,y,new tn({color:l,linewidth:d})),this.matrixAutoUpdate=!1,this.update()}function ps(t,o){Le.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=o;for(var s=new Pe,c=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],l=0,d=1;l<32;l++,d++){var p=l/32*Math.PI*2,y=d/32*Math.PI*2;c.push(Math.cos(p),Math.sin(p),1,Math.cos(y),Math.sin(y),1)}s.addAttribute("position",new Ce(c,3));var w=new tn({fog:!1});this.cone=new ln(s,w),this.add(this.cone),this.update()}function _m(t){var o=[];t&&t.isBone&&o.push(t);for(var s=0;s<t.children.length;s++)o.push.apply(o,_m(t.children[s]));return o}function jc(t){for(var o=_m(t),s=new Pe,c=[],l=[],d=new je(0,0,1),f=new je(0,1,0),p=0;p<o.length;p++){var y=o[p];y.parent&&y.parent.isBone&&(c.push(0,0,0),c.push(0,0,0),l.push(d.r,d.g,d.b),l.push(f.r,f.g,f.b))}s.addAttribute("position",new Ce(c,3)),s.addAttribute("color",new Ce(l,3));var w=new tn({vertexColors:$i,depthTest:!1,depthWrite:!1,transparent:!0});ln.call(this,s,w),this.root=t,this.bones=o,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Wc(t,o,s){this.light=t,this.light.updateMatrixWorld(),this.color=s;var c=new Us(o,4,2),l=new Ni({wireframe:!0,fog:!1});Pr.call(this,c,l),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function $c(t,o){this.type="RectAreaLightHelper",this.light=t,this.color=o;var c=new Pe;c.addAttribute("position",new Ce([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),c.computeBoundingSphere();var l=new tn({fog:!1});sr.call(this,c,l);var f=new Pe;f.addAttribute("position",new Ce([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),f.computeBoundingSphere(),this.add(new Pr(f,new Ni({side:bt,fog:!1}))),this.update()}function qc(t,o,s){Le.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s;var c=new Ca(o);c.rotateY(.5*Math.PI),this.material=new Ni({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=$i);var l=c.getAttribute("position"),d=new Float32Array(3*l.count);c.addAttribute("color",new rt(d,3)),this.add(new Pr(c,this.material)),this.update()}function Zc(t,o){this.lightProbe=t,this.size=o;var c=new fi({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),l=new Us(1,32,16);Pr.call(this,l,c),this.onBeforeRender()}function Ku(t,o,s,c){t=t||10,o=o||10,s=new je(void 0!==s?s:4473924),c=new je(void 0!==c?c:8947848);for(var l=o/2,d=t/o,f=t/2,p=[],y=[],w=0,b=0,_=-f;w<=o;w++,_+=d){p.push(-f,0,_,f,0,_),p.push(_,0,-f,_,0,f);var E=w===l?s:c;E.toArray(y,b),E.toArray(y,b+=3),E.toArray(y,b+=3),E.toArray(y,b+=3),b+=3}var M=new Pe;M.addAttribute("position",new Ce(p,3)),M.addAttribute("color",new Ce(y,3));var S=new tn({vertexColors:$i});ln.call(this,M,S)}function Ba(t,o,s,c,l,d){t=t||10,o=o||16,s=s||8,c=c||64,l=new je(void 0!==l?l:4473924),d=new je(void 0!==d?d:8947848);var y,w,b,_,E,M,S,f=[],p=[];for(_=0;_<=o;_++)b=_/o*(2*Math.PI),y=Math.sin(b)*t,w=Math.cos(b)*t,f.push(0,0,0),f.push(y,0,w),p.push((S=1&_?l:d).r,S.g,S.b),p.push(S.r,S.g,S.b);for(_=0;_<=s;_++)for(S=1&_?l:d,M=t-t/s*_,E=0;E<c;E++)b=E/c*(2*Math.PI),y=Math.sin(b)*M,w=Math.cos(b)*M,f.push(y,0,w),p.push(S.r,S.g,S.b),b=(E+1)/c*(2*Math.PI),y=Math.sin(b)*M,w=Math.cos(b)*M,f.push(y,0,w),p.push(S.r,S.g,S.b);var I=new Pe;I.addAttribute("position",new Ce(f,3)),I.addAttribute("color",new Ce(p,3));var T=new tn({vertexColors:$i});ln.call(this,I,T)}function Zs(t,o,s,c){this.audio=t,this.range=o||1,this.divisionsInnerAngle=s||16,this.divisionsOuterAngle=c||2;var l=new Pe,f=new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3));l.addAttribute("position",new rt(f,3));var p=new tn({color:65280}),y=new tn({color:16776960});sr.call(this,l,[y,p]),this.update()}function Ua(t,o,s,c){this.object=t,this.size=void 0!==o?o:1;var l=void 0!==s?s:16776960,d=void 0!==c?c:1,f=0,p=this.object.geometry;p&&p.isGeometry?f=p.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var y=new Pe,w=new Ce(2*f*3,3);y.addAttribute("position",w),ln.call(this,y,new tn({color:l,linewidth:d})),this.matrixAutoUpdate=!1,this.update()}function Yc(t,o,s){Le.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,void 0===o&&(o=1);var c=new Pe;c.addAttribute("position",new Ce([-o,o,0,o,o,0,o,-o,0,-o,-o,0,-o,o,0],3));var l=new tn({fog:!1});this.lightPlane=new sr(c,l),this.add(this.lightPlane),(c=new Pe).addAttribute("position",new Ce([0,0,0,0,0,1],3)),this.targetLine=new sr(c,l),this.add(this.targetLine),this.update()}function el(t){var o=new Pe,s=new tn({color:16777215,vertexColors:ra}),c=[],l=[],d={},f=new je(16755200),p=new je(16711680),y=new je(43775),w=new je(16777215),b=new je(3355443);function _(M,S,I){E(M,I),E(S,I)}function E(M,S){c.push(0,0,0),l.push(S.r,S.g,S.b),void 0===d[M]&&(d[M]=[]),d[M].push(c.length/3-1)}_("n1","n2",f),_("n2","n4",f),_("n4","n3",f),_("n3","n1",f),_("f1","f2",f),_("f2","f4",f),_("f4","f3",f),_("f3","f1",f),_("n1","f1",f),_("n2","f2",f),_("n3","f3",f),_("n4","f4",f),_("p","n1",p),_("p","n2",p),_("p","n3",p),_("p","n4",p),_("u1","u2",y),_("u2","u3",y),_("u3","u1",y),_("c","t",w),_("p","c",b),_("cn1","cn2",b),_("cn3","cn4",b),_("cf1","cf2",b),_("cf3","cf4",b),o.addAttribute("position",new Ce(c,3)),o.addAttribute("color",new Ce(l,3)),ln.call(this,o,s),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update()}function go(t,o){this.object=t,void 0===o&&(o=16776960);var s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(24),l=new Pe;l.setIndex(new rt(s,1)),l.addAttribute("position",new rt(c,3)),ln.call(this,l,new tn({color:o})),this.matrixAutoUpdate=!1,this.update()}function Xc(t,o){this.type="Box3Helper",this.box=t;var s=void 0!==o?o:16776960,c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Pe;d.setIndex(new rt(c,1)),d.addAttribute("position",new Ce([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ln.call(this,d,new tn({color:s})),this.geometry.computeBoundingSphere()}function vo(t,o,s){this.type="PlaneHelper",this.plane=t,this.size=void 0===o?1:o;var c=void 0!==s?s:16776960,d=new Pe;d.addAttribute("position",new Ce([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),d.computeBoundingSphere(),sr.call(this,d,new tn({color:c}));var p=new Pe;p.addAttribute("position",new Ce([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),p.computeBoundingSphere(),this.add(new Pr(p,new Ni({color:c,opacity:.2,transparent:!0,depthWrite:!1})))}function ms(t,o,s,c,l,d){Le.call(this),void 0===t&&(t=new k(0,0,1)),void 0===o&&(o=new k(0,0,0)),void 0===s&&(s=1),void 0===c&&(c=16776960),void 0===l&&(l=.2*s),void 0===d&&(d=.2*l),void 0===tl&&((tl=new Pe).addAttribute("position",new Ce([0,0,0,0,1,0],3)),(id=new Io(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(o),this.line=new sr(tl,new tn({color:c})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pr(id,new Ni({color:c})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(s,l,d)}function od(t){var o=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],c=new Pe;c.addAttribute("position",new Ce(o,3)),c.addAttribute("color",new Ce([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var l=new tn({vertexColors:$i});ln.call(this,c,l)}function sd(t,o,s,c,l,d,f){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Qr(t,o,s,l,d,f)}Object.assign(tf.prototype,{getValue:function(t,o){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(t,o)},setValue:function(t,o){for(var s=this._bindings,c=this._targetGroup.nCachedObjects_,l=s.length;c!==l;++c)s[c].setValue(t,o)},bind:function(){for(var t=this._bindings,o=this._targetGroup.nCachedObjects_,s=t.length;o!==s;++o)t[o].bind()},unbind:function(){for(var t=this._bindings,o=this._targetGroup.nCachedObjects_,s=t.length;o!==s;++o)t[o].unbind()}}),Object.assign(Fr,{Composite:tf,create:function(t,o,s){return t&&t.isAnimationObjectGroup?new Fr.Composite(t,o,s):new Fr(t,o,s)},sanitizeNodeName:function(){var t=new RegExp("["+ef+"]","g");return function(s){return s.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+ef+"]",o="[^"+ef.replace("\\.","")+"]",s=/((?:WC+[\/:])*)/.source.replace("WC",t),c=/(WCOD+)?/.source.replace("WCOD",o),l=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),d=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),f=new RegExp("^"+s+c+l+d+"$"),p=["material","materials","bones"];return function(w){var b=f.exec(w);if(!b)throw new Error("PropertyBinding: Cannot parse trackName: "+w);var _={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]},E=_.nodeName&&_.nodeName.lastIndexOf(".");if(void 0!==E&&-1!==E){var M=_.nodeName.substring(E+1);-1!==p.indexOf(M)&&(_.nodeName=_.nodeName.substring(0,E),_.objectName=M)}if(null===_.propertyName||0===_.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+w);return _}}(),findNode:function(t,o){if(!o||""===o||"root"===o||"."===o||-1===o||o===t.name||o===t.uuid)return t;if(t.skeleton){var s=t.skeleton.getBoneByName(o);if(void 0!==s)return s}if(t.children){var c=function(d){for(var f=0;f<d.length;f++){var p=d[f];if(p.name===o||p.uuid===o)return p;var y=c(p.children);if(y)return y}return null},l=c(t.children);if(l)return l}return null}}),Object.assign(Fr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(o,s){o[s]=this.node[this.propertyName]},function(o,s){for(var c=this.resolvedProperty,l=0,d=c.length;l!==d;++l)o[s++]=c[l]},function(o,s){o[s]=this.resolvedProperty[this.propertyIndex]},function(o,s){this.resolvedProperty.toArray(o,s)}],SetterByBindingTypeAndVersioning:[[function(o,s){this.targetObject[this.propertyName]=o[s]},function(o,s){this.targetObject[this.propertyName]=o[s],this.targetObject.needsUpdate=!0},function(o,s){this.targetObject[this.propertyName]=o[s],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(o,s){for(var c=this.resolvedProperty,l=0,d=c.length;l!==d;++l)c[l]=o[s++]},function(o,s){for(var c=this.resolvedProperty,l=0,d=c.length;l!==d;++l)c[l]=o[s++];this.targetObject.needsUpdate=!0},function(o,s){for(var c=this.resolvedProperty,l=0,d=c.length;l!==d;++l)c[l]=o[s++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(o,s){this.resolvedProperty[this.propertyIndex]=o[s]},function(o,s){this.resolvedProperty[this.propertyIndex]=o[s],this.targetObject.needsUpdate=!0},function(o,s){this.resolvedProperty[this.propertyIndex]=o[s],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(o,s){this.resolvedProperty.fromArray(o,s)},function(o,s){this.resolvedProperty.fromArray(o,s),this.targetObject.needsUpdate=!0},function(o,s){this.resolvedProperty.fromArray(o,s),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(o,s){this.bind(),this.getValue(o,s)},setValue:function(o,s){this.bind(),this.setValue(o,s)},bind:function(){var t=this.node,o=this.parsedPath,s=o.objectName,c=o.propertyName,l=o.propertyIndex;if(t||(t=Fr.findNode(this.rootNode,o.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(s){var d=o.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var f=0;f<t.length;f++)if(t[f].name===d){d=f;break}break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==d){if(void 0===t[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[d]}}var p=t[c];if(void 0!==p){var w=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?w=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(w=this.Versioning.MatrixWorldNeedsUpdate);var b=this.BindingType.Direct;if(void 0!==l){if("morphTargetInfluences"===c){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(f=0;f<this.node.geometry.morphAttributes.position.length;f++)if(t.geometry.morphAttributes.position[f].name===l){l=f;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(f=0;f<this.node.geometry.morphTargets.length;f++)if(t.geometry.morphTargets[f].name===l){l=f;break}}}b=this.BindingType.ArrayElement,this.resolvedProperty=p,this.propertyIndex=l}else void 0!==p.fromArray&&void 0!==p.toArray?(b=this.BindingType.HasFromToArray,this.resolvedProperty=p):Array.isArray(p)?(b=this.BindingType.EntireArray,this.resolvedProperty=p):this.propertyName=c;this.getValue=this.GetterByBindingType[b],this.setValue=this.SetterByBindingTypeAndVersioning[b][w]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+o.nodeName+"."+c+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Fr.prototype,{_getValue_unbound:Fr.prototype.getValue,_setValue_unbound:Fr.prototype.setValue}),Object.assign(ym.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,o=t.length,s=this.nCachedObjects_,c=this._indicesByUUID,l=this._paths,d=this._parsedPaths,f=this._bindings,p=f.length,y=void 0,w=0,b=arguments.length;w!==b;++w){var _=arguments[w],E=_.uuid,M=c[E];if(void 0===M){M=o++,c[E]=M,t.push(_);for(var S=0,I=p;S!==I;++S)f[S].push(new Fr(_,l[S],d[S]))}else if(M<s){y=t[M];var T=--s,O=t[T];for(c[O.uuid]=M,t[M]=O,c[E]=T,t[T]=_,S=0,I=p;S!==I;++S){var F=f[S],B=F[M];F[M]=F[T],void 0===B&&(B=new Fr(_,l[S],d[S])),F[T]=B}}else t[M]!==y&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=s},remove:function(){for(var t=this._objects,o=this.nCachedObjects_,s=this._indicesByUUID,c=this._bindings,l=c.length,d=0,f=arguments.length;d!==f;++d){var p=arguments[d],y=p.uuid,w=s[y];if(void 0!==w&&w>=o){var b=o++,_=t[b];s[_.uuid]=w,t[w]=_,s[y]=b,t[b]=p;for(var E=0,M=l;E!==M;++E){var S=c[E],T=S[w];S[w]=S[b],S[b]=T}}}this.nCachedObjects_=o},uncache:function(){for(var t=this._objects,o=t.length,s=this.nCachedObjects_,c=this._indicesByUUID,l=this._bindings,d=l.length,f=0,p=arguments.length;f!==p;++f){var w=arguments[f].uuid,b=c[w];if(void 0!==b)if(delete c[w],b<s){var _=--s,E=t[_],S=t[M=--o];c[E.uuid]=b,t[b]=E,c[S.uuid]=_,t[_]=S,t.pop();for(var I=0,T=d;I!==T;++I){var N=(O=l[I])[M];O[b]=O[_],O[_]=N,O.pop()}}else{var M;for(c[(S=t[M=--o]).uuid]=b,t[b]=S,t.pop(),I=0,T=d;I!==T;++I){var O;(O=l[I])[b]=O[M],O.pop()}}}this.nCachedObjects_=s},subscribe_:function(t,o){var s=this._bindingsIndicesByPath,c=s[t],l=this._bindings;if(void 0!==c)return l[c];var d=this._paths,f=this._parsedPaths,p=this._objects,w=this.nCachedObjects_,b=new Array(p.length);s[t]=c=l.length,d.push(t),f.push(o),l.push(b);for(var _=w,E=p.length;_!==E;++_)b[_]=new Fr(p[_],t,o);return b},unsubscribe_:function(t){var o=this._bindingsIndicesByPath,s=o[t];if(void 0!==s){var c=this._paths,l=this._parsedPaths,d=this._bindings,f=d.length-1,p=d[f];o[t[f]]=s,d[s]=p,d.pop(),l[s]=l[f],l.pop(),c[s]=c[f],c.pop()}}}),Object.assign(td.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,o){return this.loop=t,this.repetitions=o,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,o,s){if(t.fadeOut(o),this.fadeIn(o),s){var c=this._clip.duration,l=t._clip.duration,f=c/l;t.warp(1,l/c,o),this.warp(f,1,o)}return this},crossFadeTo:function(t,o,s){return t.crossFadeFrom(this,o,s)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,o,s){var c=this._mixer,l=c.time,d=this._timeScaleInterpolant,f=this.timeScale;null===d&&(d=c._lendControlInterpolant(),this._timeScaleInterpolant=d);var p=d.parameterPositions,y=d.sampleValues;return p[0]=l,p[1]=l+s,y[0]=t/f,y[1]=o/f,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,o,s,c){if(this.enabled){var l=this._startTime;if(null!==l){var d=(t-l)*s;if(d<0||0===s)return;this._startTime=null,o=s*d}o*=this._updateTimeScale(t);var f=this._updateTime(o),p=this._updateWeight(t);if(p>0)for(var y=this._interpolants,w=this._propertyBindings,b=0,_=y.length;b!==_;++b)y[b].evaluate(f),w[b].accumulate(c,p)}else this._updateWeight(t)},_updateWeight:function(t){var o=0;if(this.enabled){o=this.weight;var s=this._weightInterpolant;if(null!==s){var c=s.evaluate(t)[0];o*=c,t>s.parameterPositions[1]&&(this.stopFading(),0===c&&(this.enabled=!1))}}return this._effectiveWeight=o,o},_updateTimeScale:function(t){var o=0;if(!this.paused){o=this.timeScale;var s=this._timeScaleInterpolant;null!==s&&(o*=s.evaluate(t)[0],t>s.parameterPositions[1]&&(this.stopWarping(),0===o?this.paused=!0:this.timeScale=o))}return this._effectiveTimeScale=o,o},_updateTime:function(t){var o=this.time+t,s=this._clip.duration,c=this.loop,l=this._loopCount,d=c===rh;if(0===t)return-1===l?o:d&&1==(1&l)?s-o:o;if(c===di){-1===l&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=s)o=s;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===l&&(t>=0?(l=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d)),o>=s||o<0){var f=Math.floor(o/s);o-=s*f,l+=Math.abs(f);var p=this.repetitions-l;if(p<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o=t>0?s:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===p){var y=t<0;this._setEndings(y,!y,d)}else this._setEndings(!1,!1,d);this._loopCount=l,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=o;if(d&&1==(1&l))return s-o}return o},_setEndings:function(t,o,s){var c=this._interpolantSettings;s?(c.endingStart=Ut,c.endingEnd=Ut):(c.endingStart=t?this.zeroSlopeAtStart?Ut:da:Cs,c.endingEnd=o?this.zeroSlopeAtEnd?Ut:da:Cs)},_scheduleFading:function(t,o,s){var c=this._mixer,l=c.time,d=this._weightInterpolant;null===d&&(d=c._lendControlInterpolant(),this._weightInterpolant=d);var f=d.parameterPositions,p=d.sampleValues;return f[0]=l,p[0]=o,f[1]=l+t,p[1]=s,this}}),Ju.prototype=Object.assign(Object.create(Te.prototype),{constructor:Ju,_bindAction:function(t,o){var s=t._localRoot||this._root,c=t._clip.tracks,l=c.length,d=t._propertyBindings,f=t._interpolants,p=s.uuid,y=this._bindingsByRootAndName,w=y[p];void 0===w&&(y[p]=w={});for(var b=0;b!==l;++b){var _=c[b],E=_.name,M=w[E];if(void 0!==M)d[b]=M;else{if(void 0!==(M=d[b])){null===M._cacheIndex&&(++M.referenceCount,this._addInactiveBinding(M,p,E));continue}++(M=new ed(Fr.create(s,E,o&&o._propertyBindings[b].binding.parsedPath),_.ValueTypeName,_.getValueSize())).referenceCount,this._addInactiveBinding(M,p,E),d[b]=M}f[b].resultBuffer=M.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var o=(t._localRoot||this._root).uuid,s=t._clip.uuid,c=this._actionsByClip[s];this._bindAction(t,c&&c.knownActions[0]),this._addInactiveAction(t,s,o)}for(var l=t._propertyBindings,d=0,f=l.length;d!==f;++d){var p=l[d];0==p.useCount++&&(this._lendBinding(p),p.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var o=t._propertyBindings,s=0,c=o.length;s!==c;++s){var l=o[s];0==--l.useCount&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var o=t._cacheIndex;return null!==o&&o<this._nActiveActions},_addInactiveAction:function(t,o,s){var c=this._actions,l=this._actionsByClip,d=l[o];if(void 0===d)d={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,l[o]=d;else{var f=d.knownActions;t._byClipCacheIndex=f.length,f.push(t)}t._cacheIndex=c.length,c.push(t),d.actionByRoot[s]=t},_removeInactiveAction:function(t){var o=this._actions,s=o[o.length-1],c=t._cacheIndex;s._cacheIndex=c,o[c]=s,o.pop(),t._cacheIndex=null;var l=t._clip.uuid,d=this._actionsByClip,f=d[l],p=f.knownActions,y=p[p.length-1],w=t._byClipCacheIndex;y._byClipCacheIndex=w,p[w]=y,p.pop(),t._byClipCacheIndex=null,delete f.actionByRoot[(t._localRoot||this._root).uuid],0===p.length&&delete d[l],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var o=t._propertyBindings,s=0,c=o.length;s!==c;++s){var l=o[s];0==--l.referenceCount&&this._removeInactiveBinding(l)}},_lendAction:function(t){var o=this._actions,s=t._cacheIndex,c=this._nActiveActions++,l=o[c];t._cacheIndex=c,o[c]=t,l._cacheIndex=s,o[s]=l},_takeBackAction:function(t){var o=this._actions,s=t._cacheIndex,c=--this._nActiveActions,l=o[c];t._cacheIndex=c,o[c]=t,l._cacheIndex=s,o[s]=l},_addInactiveBinding:function(t,o,s){var c=this._bindingsByRootAndName,l=c[o],d=this._bindings;void 0===l&&(c[o]=l={}),l[s]=t,t._cacheIndex=d.length,d.push(t)},_removeInactiveBinding:function(t){var o=this._bindings,s=t.binding,c=s.rootNode.uuid,l=s.path,d=this._bindingsByRootAndName,f=d[c],p=o[o.length-1],y=t._cacheIndex;p._cacheIndex=y,o[y]=p,o.pop(),delete f[l];e:{for(var w in f)break e;delete d[c]}},_lendBinding:function(t){var o=this._bindings,s=t._cacheIndex,c=this._nActiveBindings++,l=o[c];t._cacheIndex=c,o[c]=t,l._cacheIndex=s,o[s]=l},_takeBackBinding:function(t){var o=this._bindings,s=t._cacheIndex,c=--this._nActiveBindings,l=o[c];t._cacheIndex=c,o[c]=t,l._cacheIndex=s,o[s]=l},_lendControlInterpolant:function(){var t=this._controlInterpolants,o=this._nActiveControlInterpolants++,s=t[o];return void 0===s&&((s=new zu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=o,t[o]=s),s},_takeBackControlInterpolant:function(t){var o=this._controlInterpolants,s=t.__cacheIndex,c=--this._nActiveControlInterpolants,l=o[c];t.__cacheIndex=c,o[c]=t,l.__cacheIndex=s,o[s]=l},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,o){var s=o||this._root,c=s.uuid,l="string"==typeof t?ki.findByName(s,t):t,d=null!==l?l.uuid:t,f=this._actionsByClip[d],p=null;if(void 0!==f){var y=f.actionByRoot[c];if(void 0!==y)return y;p=f.knownActions[0],null===l&&(l=p._clip)}if(null===l)return null;var w=new td(this,l,o);return this._bindAction(w,p),this._addInactiveAction(w,d,c),w},existingAction:function(t,o){var s=o||this._root,c=s.uuid,l="string"==typeof t?ki.findByName(s,t):t,f=this._actionsByClip[l?l.uuid:t];return void 0!==f&&f.actionByRoot[c]||null},stopAllAction:function(){var t=this._actions,o=this._nActiveActions,s=this._bindings,c=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var l=0;l!==o;++l)t[l].reset();for(l=0;l!==c;++l)s[l].useCount=0;return this},update:function(t){for(var o=this._actions,s=this._nActiveActions,c=this.time+=t*=this.timeScale,l=Math.sign(t),d=this._accuIndex^=1,f=0;f!==s;++f)o[f]._update(c,t,l,d);var y=this._bindings,w=this._nActiveBindings;for(f=0;f!==w;++f)y[f].apply(d);return this},getRoot:function(){return this._root},uncacheClip:function(t){var o=this._actions,s=t.uuid,c=this._actionsByClip,l=c[s];if(void 0!==l){for(var d=l.knownActions,f=0,p=d.length;f!==p;++f){var y=d[f];this._deactivateAction(y);var w=y._cacheIndex,b=o[o.length-1];y._cacheIndex=null,y._byClipCacheIndex=null,b._cacheIndex=w,o[w]=b,o.pop(),this._removeInactiveBindingsForAction(y)}delete c[s]}},uncacheRoot:function(t){var o=t.uuid,s=this._actionsByClip;for(var c in s){var d=s[c].actionByRoot[o];void 0!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}var p=this._bindingsByRootAndName[o];if(void 0!==p)for(var y in p){var w=p[y];w.restoreOriginalState(),this._removeInactiveBinding(w)}},uncacheAction:function(t,o){var s=this.existingAction(t,o);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}),nd.prototype.clone=function(){return new nd(void 0===this.value.clone?this.value:this.value.clone())},Fa.prototype=Object.assign(Object.create(qn.prototype),{constructor:Fa,isInstancedInterleavedBuffer:!0,copy:function(t){return qn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(wm.prototype,{linePrecision:1,set:function(t,o){this.ray.set(t,o)},setFromCamera:function(t,o){o&&o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(o).sub(this.ray.origin).normalize()):o&&o.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(o.near+o.far)/(o.near-o.far)).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,o,s){var c=s||[];return rd(t,this,c,o),c.sort(bm),c},intersectObjects:function(t,o,s){var c=s||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),c;for(var l=0,d=t.length;l<d;l++)rd(t[l],this,c,o);return c.sort(bm),c}}),Object.assign(nf.prototype,{set:function(t,o,s){return this.radius=t,this.phi=o,this.theta=s,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,o,s){return this.radius=Math.sqrt(t*t+o*o+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,s),this.phi=Math.acos(yt.clamp(o/this.radius,-1,1))),this}}),Object.assign(rf.prototype,{set:function(t,o,s){return this.radius=t,this.theta=o,this.y=s,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,o,s){return this.radius=Math.sqrt(t*t+s*s),this.theta=Math.atan2(t,s),this.y=o,this}}),Object.assign(qs.prototype,{set:function(t,o){return this.min.copy(t),this.max.copy(o),this},setFromPoints:function(t){this.makeEmpty();for(var o=0,s=t.length;o<s;o++)this.expandByPoint(t[o]);return this},setFromCenterAndSize:function(){var t=new pe;return function(s,c){var l=t.copy(c).multiplyScalar(.5);return this.min.copy(s).sub(l),this.max.copy(s).add(l),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new pe),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new pe),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,o){return void 0===o&&(console.warn("THREE.Box2: .getParameter() target is now required"),o=new pe),o.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,o){return void 0===o&&(console.warn("THREE.Box2: .clampPoint() target is now required"),o=new pe),o.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new pe;return function(s){return t.copy(s).clamp(this.min,this.max).sub(s).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(zc.prototype,{set:function(t,o){return this.start.copy(t),this.end.copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new k),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new k),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,o){return void 0===o&&(console.warn("THREE.Line3: .at() target is now required"),o=new k),this.delta(o).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new k,o=new k;return function(c,l){t.subVectors(c,this.start),o.subVectors(this.end,this.start);var d=o.dot(o),p=o.dot(t)/d;return l&&(p=yt.clamp(p,0,1)),p}}(),closestPointToPoint:function(t,o,s){var c=this.closestPointToPointParameter(t,o);return void 0===s&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),s=new k),this.delta(s).multiplyScalar(c).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),(Gc.prototype=Object.create(Le.prototype)).constructor=Gc,Gc.prototype.isImmediateRenderObject=!0,(ka.prototype=Object.create(ln.prototype)).constructor=ka,ka.prototype.update=function(){var t=new k,o=new k,s=new hr;return function(){var l=["a","b","c"];this.object.updateMatrixWorld(!0),s.getNormalMatrix(this.object.matrixWorld);var d=this.object.matrixWorld,f=this.geometry.attributes.position,p=this.object.geometry;if(p&&p.isGeometry)for(var y=p.vertices,w=p.faces,b=0,_=0,E=w.length;_<E;_++)for(var M=w[_],S=0,I=M.vertexNormals.length;S<I;S++){var O=M.vertexNormals[S];t.copy(y[M[l[S]]]).applyMatrix4(d),o.copy(O).applyMatrix3(s).normalize().multiplyScalar(this.size).add(t),f.setXYZ(b,t.x,t.y,t.z),f.setXYZ(b+=1,o.x,o.y,o.z),b+=1}else if(p&&p.isBufferGeometry){var F=p.attributes.position,N=p.attributes.normal;for(b=0,S=0,I=F.count;S<I;S++)t.set(F.getX(S),F.getY(S),F.getZ(S)).applyMatrix4(d),o.set(N.getX(S),N.getY(S),N.getZ(S)),o.applyMatrix3(s).normalize().multiplyScalar(this.size).add(t),f.setXYZ(b,t.x,t.y,t.z),f.setXYZ(b+=1,o.x,o.y,o.z),b+=1}f.needsUpdate=!0}}(),(ps.prototype=Object.create(Le.prototype)).constructor=ps,ps.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ps.prototype.update=function(){var t=new k;return function(){this.light.updateMatrixWorld();var s=this.light.distance?this.light.distance:1e3,c=s*Math.tan(this.light.angle);this.cone.scale.set(c,c,s),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),(jc.prototype=Object.create(ln.prototype)).constructor=jc,jc.prototype.updateMatrixWorld=function(){var t=new k,o=new it,s=new it;return function(l){var d=this.bones,f=this.geometry,p=f.getAttribute("position");s.getInverse(this.root.matrixWorld);for(var y=0,w=0;y<d.length;y++){var b=d[y];b.parent&&b.parent.isBone&&(o.multiplyMatrices(s,b.matrixWorld),t.setFromMatrixPosition(o),p.setXYZ(w,t.x,t.y,t.z),o.multiplyMatrices(s,b.parent.matrixWorld),t.setFromMatrixPosition(o),p.setXYZ(w+1,t.x,t.y,t.z),w+=2)}f.getAttribute("position").needsUpdate=!0,Le.prototype.updateMatrixWorld.call(this,l)}}(),(Wc.prototype=Object.create(Pr.prototype)).constructor=Wc,Wc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Wc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},($c.prototype=Object.create(sr.prototype)).constructor=$c,$c.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,o=Math.max(t.r,t.g,t.b);o>1&&t.multiplyScalar(1/o),this.children[0].material.color.copy(this.material.color)}},$c.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},(qc.prototype=Object.create(Le.prototype)).constructor=qc,qc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},qc.prototype.update=function(){var t=new k,o=new je,s=new je;return function(){var l=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var d=l.geometry.getAttribute("color");o.copy(this.light.color),s.copy(this.light.groundColor);for(var f=0,p=d.count;f<p;f++){var y=f<p/2?o:s;d.setXYZ(f,y.r,y.g,y.b)}d.needsUpdate=!0}l.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),(Zc.prototype=Object.create(Pr.prototype)).constructor=Zc,Zc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Zc.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},Ku.prototype=Object.assign(Object.create(ln.prototype),{constructor:Ku,copy:function(t){return ln.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),(Ba.prototype=Object.create(ln.prototype)).constructor=Ba,(Zs.prototype=Object.create(sr.prototype)).constructor=Zs,Zs.prototype.update=function(){var b,_,t=this.audio,o=this.range,s=this.divisionsInnerAngle,c=this.divisionsOuterAngle,l=yt.degToRad(t.panner.coneInnerAngle),d=yt.degToRad(t.panner.coneOuterAngle),f=l/2,p=d/2,y=0,w=0,E=this.geometry,M=E.attributes.position;function S(I,T,O,F){var N=(T-I)/O;for(M.setXYZ(y,0,0,0),w++,b=I;b<T;b+=N)M.setXYZ(_=y+w,Math.sin(b)*o,0,Math.cos(b)*o),M.setXYZ(_+1,Math.sin(Math.min(b+N,T))*o,0,Math.cos(Math.min(b+N,T))*o),M.setXYZ(_+2,0,0,0),w+=3;E.addGroup(y,w,F),y+=w,w=0}E.clearGroups(),S(-p,-f,c,0),S(-f,f,s,1),S(f,p,c,0),M.needsUpdate=!0,l===d&&(this.material[0].visible=!1)},Zs.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},(Ua.prototype=Object.create(ln.prototype)).constructor=Ua,Ua.prototype.update=function(){var t=new k,o=new k,s=new hr;return function(){this.object.updateMatrixWorld(!0),s.getNormalMatrix(this.object.matrixWorld);for(var l=this.object.matrixWorld,d=this.geometry.attributes.position,f=this.object.geometry,p=f.vertices,y=f.faces,w=0,b=0,_=y.length;b<_;b++){var E=y[b],M=E.normal;t.copy(p[E.a]).add(p[E.b]).add(p[E.c]).divideScalar(3).applyMatrix4(l),o.copy(M).applyMatrix3(s).normalize().multiplyScalar(this.size).add(t),d.setXYZ(w,t.x,t.y,t.z),d.setXYZ(w+=1,o.x,o.y,o.z),w+=1}d.needsUpdate=!0}}(),(Yc.prototype=Object.create(Le.prototype)).constructor=Yc,Yc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Yc.prototype.update=function(){var t=new k,o=new k,s=new k;return function(){t.setFromMatrixPosition(this.light.matrixWorld),o.setFromMatrixPosition(this.light.target.matrixWorld),s.subVectors(o,t),this.lightPlane.lookAt(o),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(o),this.targetLine.scale.z=s.length()}}(),(el.prototype=Object.create(ln.prototype)).constructor=el,el.prototype.update=function(){var t,o,s=new k,c=new Et;function l(d,f,p,y){s.set(f,p,y).unproject(c);var w=o[d];if(void 0!==w)for(var b=t.getAttribute("position"),_=0,E=w.length;_<E;_++)b.setXYZ(w[_],s.x,s.y,s.z)}return function(){t=this.geometry,o=this.pointMap,c.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),l("c",0,0,-1),l("t",0,0,1),l("n1",-1,-1,-1),l("n2",1,-1,-1),l("n3",-1,1,-1),l("n4",1,1,-1),l("f1",-1,-1,1),l("f2",1,-1,1),l("f3",-1,1,1),l("f4",1,1,1),l("u1",.7,1.1,-1),l("u2",-.7,1.1,-1),l("u3",0,2,-1),l("cf1",-1,0,1),l("cf2",1,0,1),l("cf3",0,-1,1),l("cf4",0,1,1),l("cn1",-1,0,-1),l("cn2",1,0,-1),l("cn3",0,-1,-1),l("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),(go.prototype=Object.create(ln.prototype)).constructor=go,go.prototype.update=function(){var t=new Ao;return function(s){if(void 0!==s&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var c=t.min,l=t.max,d=this.geometry.attributes.position,f=d.array;f[0]=l.x,f[1]=l.y,f[2]=l.z,f[3]=c.x,f[4]=l.y,f[5]=l.z,f[6]=c.x,f[7]=c.y,f[8]=l.z,f[9]=l.x,f[10]=c.y,f[11]=l.z,f[12]=l.x,f[13]=l.y,f[14]=c.z,f[15]=c.x,f[16]=l.y,f[17]=c.z,f[18]=c.x,f[19]=c.y,f[20]=c.z,f[21]=l.x,f[22]=c.y,f[23]=c.z,d.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),go.prototype.setFromObject=function(t){return this.object=t,this.update(),this},go.prototype.copy=function(t){return ln.prototype.copy.call(this,t),this.object=t.object,this},go.prototype.clone=function(){return(new this.constructor).copy(this)},(Xc.prototype=Object.create(ln.prototype)).constructor=Xc,Xc.prototype.updateMatrixWorld=function(t){var o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),Le.prototype.updateMatrixWorld.call(this,t))},(vo.prototype=Object.create(sr.prototype)).constructor=vo,vo.prototype.updateMatrixWorld=function(t){var o=-this.plane.constant;Math.abs(o)<1e-8&&(o=1e-8),this.scale.set(.5*this.size,.5*this.size,o),this.children[0].material.side=o<0?bt:Jn,this.lookAt(this.plane.normal),Le.prototype.updateMatrixWorld.call(this,t)},(ms.prototype=Object.create(Le.prototype)).constructor=ms,ms.prototype.setDirection=function(){var o,t=new k;return function(c){c.y>.99999?this.quaternion.set(0,0,0,1):c.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(c.z,0,-c.x).normalize(),o=Math.acos(c.y),this.quaternion.setFromAxisAngle(t,o))}}(),ms.prototype.setLength=function(t,o,s){void 0===o&&(o=.2*t),void 0===s&&(s=.2*o),this.line.scale.set(1,Math.max(0,t-o),1),this.line.updateMatrix(),this.cone.scale.set(s,o,s),this.cone.position.y=t,this.cone.updateMatrix()},ms.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},ms.prototype.copy=function(t){return Le.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},ms.prototype.clone=function(){return(new this.constructor).copy(this)},(od.prototype=Object.create(ln.prototype)).constructor=od;var ey=0,xm=1;function Em(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Mm(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function sf(t,o){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new xa(t,o)}function Am(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new wi(t)}function ad(t,o){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new xa(t,o)}function nl(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new oo(t)}function Cm(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new oo(t)}function af(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new oo(t)}function cd(t,o,s){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new k(t,o,s)}function Sm(t,o){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new rt(t,o).setDynamic(!0)}function cf(t,o){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Rs(t,o)}function rl(t,o){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new So(t,o)}function ty(t,o){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ko(t,o)}function Dm(t,o){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new jn(t,o)}function ny(t,o){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new lc(t,o)}function ry(t,o){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new fr(t,o)}function iy(t,o){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Wn(t,o)}function Tm(t,o){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ce(t,o)}function Im(t,o){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new no(t,o)}function il(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ar.call(this,t),this.type="catmullrom",this.closed=!0}function ud(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ar.call(this,t),this.type="catmullrom"}function Ys(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ar.call(this,t),this.type="catmullrom"}function oy(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new od(t)}function sy(t,o){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new go(t,o)}function _b(t,o){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ln(new Vs(t.geometry),new tn({color:void 0!==o?o:16777215}))}function ay(t,o){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ln(new Ma(t.geometry),new tn({color:void 0!==o?o:16777215}))}function uf(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new fo(t)}function cy(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Uh(t)}Ye.create=function(t,o){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ye.prototype),t.prototype.constructor=t,t.prototype.getPoint=o,t},Object.assign(Fo.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var o=this.getPoints(t);return this.createGeometry(o)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var o=this.getSpacedPoints(t);return this.createGeometry(o)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var o=new st,s=0,c=t.length;s<c;s++){var l=t[s];o.vertices.push(new k(l.x,l.y,l.z||0))}return o}}),Object.assign(ko.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),il.prototype=Object.create(ar.prototype),ud.prototype=Object.create(ar.prototype),Ys.prototype=Object.create(ar.prototype),Object.assign(Ys.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Ku.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},jc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Xu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Vc.extractUrlBase(t)}}),Object.assign($l.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(qs.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Ao.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),zc.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(yt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),yt.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),yt.ceilPowerOfTwo(t)}}),Object.assign(hr.prototype,{flattenToArrayOffset:function(t,o){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,o)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(it.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,o){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,o)},getPosition:function(){var t;return function(){return void 0===t&&(t=new k),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,o,s,c,l,d){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,o,c,s,l,d)}}),Qe.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},en.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(fc.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Lr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,o)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Lr,{barycoordFromPoint:function(t,o,s,c,l){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Lr.getBarycoord(t,o,s,c,l)},normal:function(t,o,s,c){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Lr.getNormal(t,o,s,c)}}),Object.assign(js.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Bs(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zn(this,t)}}),Object.assign(pe.prototype,{fromAttribute:function(t,o,s){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,o,s)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(k.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,o){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(o,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,o,s){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,o,s)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(un.prototype,{fromAttribute:function(t,o,s){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,o,s)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(st.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Le.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,o){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(o,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Le.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Tu.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(kl.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),vc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Ye.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),$n.prototype.setLens=function(t,o){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==o&&(this.filmGauge=o),this.setFocalLength(t)},Object.defineProperties(_n.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(rt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Pe.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,o,s){void 0!==s&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,o)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Pe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(co.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(nd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(_t.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new je}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===Tr}}}),Object.defineProperties(Po.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(fi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Su.prototype,{clearTarget:function(t,o,s,c){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(o,s,c)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(Su.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(om.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(oc.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Xo.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(ro.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Hc.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var o=this;return(new Yl).load(t,function(c){o.setBuffer(c)}),this},Kh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},fs.prototype.updateCubeMap=function(t,o){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,o)};var Qc={merge:function(t,o,s){var c;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),o.isMesh&&(o.matrixAutoUpdate&&o.updateMatrix(),c=o.matrix,o=o.geometry),t.merge(o,c,s)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function ld(){console.error("THREE.CanvasRenderer has been removed")}function lf(){console.error("THREE.JSONLoader has been removed.")}qr.crossOrigin=void 0,qr.loadTexture=function(t,o,s,c){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var l=new Nc;l.setCrossOrigin(this.crossOrigin);var d=l.load(t,s,void 0,c);return o&&(d.mapping=o),d},qr.loadTextureCube=function(t,o,s,c){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var l=new Vh;l.setCrossOrigin(this.crossOrigin);var d=l.load(t,s,void 0,c);return o&&(d.mapping=o),d},qr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},qr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Rm={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Lm(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},42:cu=>{var wr,Te,pn=cu.exports={};function te(){throw new Error("setTimeout has not been defined")}function ji(){throw new Error("clearTimeout has not been defined")}function Di(bt){if(wr===setTimeout)return setTimeout(bt,0);if((wr===te||!wr)&&setTimeout)return wr=setTimeout,setTimeout(bt,0);try{return wr(bt,0)}catch{try{return wr.call(null,bt,0)}catch{return wr.call(this,bt,0)}}}!function(){try{wr="function"==typeof setTimeout?setTimeout:te}catch{wr=te}try{Te="function"==typeof clearTimeout?clearTimeout:ji}catch{Te=ji}}();var Cn,ur=[],$t=!1,Sr=-1;function Ti(){!$t||!Cn||($t=!1,Cn.length?ur=Cn.concat(ur):Sr=-1,ur.length&&Wi())}function Wi(){if(!$t){var bt=Di(Ti);$t=!0;for(var xn=ur.length;xn;){for(Cn=ur,ur=[];++Sr<xn;)Cn&&Cn[Sr].run();Sr=-1,xn=ur.length}Cn=null,$t=!1,function nn(bt){if(Te===clearTimeout)return clearTimeout(bt);if((Te===ji||!Te)&&clearTimeout)return Te=clearTimeout,clearTimeout(bt);try{return Te(bt)}catch{try{return Te.call(null,bt)}catch{return Te.call(this,bt)}}}(bt)}}function Dr(bt,xn){this.fun=bt,this.array=xn}function Jn(){}pn.nextTick=function(bt){var xn=new Array(arguments.length-1);if(arguments.length>1)for(var Tr=1;Tr<arguments.length;Tr++)xn[Tr-1]=arguments[Tr];ur.push(new Dr(bt,xn)),1===ur.length&&!$t&&Di(Wi)},Dr.prototype.run=function(){this.fun.apply(null,this.array)},pn.title="browser",pn.browser=!0,pn.env={},pn.argv=[],pn.version="",pn.versions={},pn.on=Jn,pn.addListener=Jn,pn.once=Jn,pn.off=Jn,pn.removeListener=Jn,pn.removeAllListeners=Jn,pn.emit=Jn,pn.prependListener=Jn,pn.prependOnceListener=Jn,pn.listeners=function(bt){return[]},pn.binding=function(bt){throw new Error("process.binding is not supported")},pn.cwd=function(){return"/"},pn.chdir=function(bt){throw new Error("process.chdir is not supported")},pn.umask=function(){return 0}}},cu=>{cu(cu.s=343)}]);